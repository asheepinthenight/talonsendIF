<!DOCTYPE html>
<html data-init="no-js">
<head>
<meta charset="UTF-8" />
<title>Talon&#39;s End</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="robots" content="noindex,nofollow,noai,noimageai">
<!--

SugarCube (v2.36.1): A free (gratis and libre) story format.

Copyright © 2013–2021 Thomas Michael Edwards <thomasmedwards@gmail.com>.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

-->
<script id="script-libraries" type="text/javascript">
if(document.head&&document.addEventListener&&document.querySelector&&Object.create&&Object.freeze&&JSON){document.documentElement.setAttribute("data-init", "loading");
/*! @source http://purl.eligrey.com/github/classList.js/blob/1.2.20171210/classList.js */
"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",i=t.Element[n],s=Object,r=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},c=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},a=function(t,e){if(""===e)throw new c("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new c("INVALID_CHARACTER_ERR","The token must not contain space characters.");return o.call(t,e)},l=function(t){for(var e=r.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,s=n.length;s>i;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},u=l[n]=[],h=function(){return new l(this)};if(c[n]=Error[n],u.item=function(t){return this[t]||null},u.contains=function(t){return~a(this,t+"")},u.add=function(){var t,e=arguments,n=0,i=e.length,s=!1;do t=e[n]+"",~a(this,t)||(this.push(t),s=!0);while(++n<i);s&&this._updateClassName()},u.remove=function(){var t,e,n=arguments,i=0,s=n.length,r=!1;do for(t=n[i]+"",e=a(this,t);~e;)this.splice(e,1),r=!0,e=a(this,t);while(++i<s);r&&this._updateClassName()},u.toggle=function(t,e){var n=this.contains(t),i=n?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),e===!0||e===!1?e:!n},u.replace=function(t,e){var n=a(t+"");~n&&(this.splice(n,1,e),this._updateClassName())},u.toString=function(){return this.join(" ")},s.defineProperty){var f={get:h,enumerable:!0,configurable:!0};try{s.defineProperty(i,e,f)}catch(p){void 0!==p.number&&-2146823252!==p.number||(f.enumerable=!1,s.defineProperty(i,e,f))}}else s[n].__defineGetter__&&i.__defineGetter__(e,h)}}(self),function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;i>n;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var n=this.toString().split(" "),i=n.indexOf(t+"");~i&&(n=n.slice(i),this.remove.apply(this,n),this.add(e),this.add.apply(this,n.slice(1)))}),t=null}());
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2020 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.14/LICENSE
 */
(function(t,r){"use strict";if(typeof define==="function"&&define.amd){define(r)}else if(typeof exports==="object"){module.exports=r()}else{t.returnExports=r()}})(this,function(){var t=Array;var r=t.prototype;var e=Object;var n=e.prototype;var i=Function;var a=i.prototype;var o=String;var f=o.prototype;var u=Number;var l=u.prototype;var s=r.slice;var c=r.splice;var v=r.push;var h=r.unshift;var p=r.concat;var y=r.join;var d=a.call;var g=a.apply;var w=Math.max;var b=Math.min;var T=n.toString;var m=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var D;var S=Function.prototype.toString,x=/^\s*class /,O=function isES6ClassFn(t){try{var r=S.call(t);var e=r.replace(/\/\/.*\n/g,"");var n=e.replace(/\/\*[.\s\S]*\*\//g,"");var i=n.replace(/\n/gm," ").replace(/ {2}/g," ");return x.test(i)}catch(a){return false}},E=function tryFunctionObject(t){try{if(O(t)){return false}S.call(t);return true}catch(r){return false}},j="[object Function]",I="[object GeneratorFunction]",D=function isCallable(t){if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(m){return E(t)}if(O(t)){return false}var r=T.call(t);return r===j||r===I};var M;var U=RegExp.prototype.exec,$=function tryRegexExec(t){try{U.call(t);return true}catch(r){return false}},F="[object RegExp]";M=function isRegex(t){if(typeof t!=="object"){return false}return m?$(t):T.call(t)===F};var N;var C=String.prototype.valueOf,k=function tryStringObject(t){try{C.call(t);return true}catch(r){return false}},A="[object String]";N=function isString(t){if(typeof t==="string"){return true}if(typeof t!=="object"){return false}return m?k(t):T.call(t)===A};var R=e.defineProperty&&function(){try{var t={};e.defineProperty(t,"x",{enumerable:false,value:t});for(var r in t){return false}return t.x===t}catch(n){return false}}();var P=function(t){var r;if(R){r=function(t,r,n,i){if(!i&&r in t){return}e.defineProperty(t,r,{configurable:true,enumerable:false,writable:true,value:n})}}else{r=function(t,r,e,n){if(!n&&r in t){return}t[r]=e}}return function defineProperties(e,n,i){for(var a in n){if(t.call(n,a)){r(e,a,n[a],i)}}}}(n.hasOwnProperty);var J=function isPrimitive(t){var r=typeof t;return t===null||r!=="object"&&r!=="function"};var Y=u.isNaN||function isActualNaN(t){return t!==t};var z={ToInteger:function ToInteger(t){var r=+t;if(Y(r)){r=0}else if(r!==0&&r!==1/0&&r!==-(1/0)){r=(r>0||-1)*Math.floor(Math.abs(r))}return r},ToPrimitive:function ToPrimitive(t){var r,e,n;if(J(t)){return t}e=t.valueOf;if(D(e)){r=e.call(t);if(J(r)){return r}}n=t.toString;if(D(n)){r=n.call(t);if(J(r)){return r}}throw new TypeError},ToObject:function(t){if(t==null){throw new TypeError("can't convert "+t+" to object")}return e(t)},ToUint32:function ToUint32(t){return t>>>0}};var Z=function Empty(){};P(a,{bind:function bind(t){var r=this;if(!D(r)){throw new TypeError("Function.prototype.bind called on incompatible "+r)}var n=s.call(arguments,1);var a;var o=function(){if(this instanceof a){var i=g.call(r,this,p.call(n,s.call(arguments)));if(e(i)===i){return i}return this}else{return g.call(r,t,p.call(n,s.call(arguments)))}};var f=w(0,r.length-n.length);var u=[];for(var l=0;l<f;l++){v.call(u,"$"+l)}a=i("binder","return function ("+y.call(u,",")+"){ return binder.apply(this, arguments); }")(o);if(r.prototype){Z.prototype=r.prototype;a.prototype=new Z;Z.prototype=null}return a}});var G=d.bind(n.hasOwnProperty);var H=d.bind(n.toString);var W=d.bind(s);var B=g.bind(s);if(typeof document==="object"&&document&&document.documentElement){try{W(document.documentElement.childNodes)}catch(X){var L=W;var q=B;W=function arraySliceIE(t){var r=[];var e=t.length;while(e-- >0){r[e]=t[e]}return q(r,L(arguments,1))};B=function arraySliceApplyIE(t,r){return q(W(t),r)}}}var K=d.bind(f.slice);var Q=d.bind(f.split);var V=d.bind(f.indexOf);var _=d.bind(v);var tt=d.bind(n.propertyIsEnumerable);var rt=d.bind(r.sort);var et=t.isArray||function isArray(t){return H(t)==="[object Array]"};var nt=[].unshift(0)!==1;P(r,{unshift:function(){h.apply(this,arguments);return this.length}},nt);P(t,{isArray:et});var it=e("a");var at=it[0]!=="a"||!(0 in it);var ot=function properlyBoxed(t){var r=true;var e=true;var n=false;if(t){try{t.call("foo",function(t,e,n){if(typeof n!=="object"){r=false}});t.call([1],function(){"use strict";e=typeof this==="string"},"x")}catch(i){n=true}}return!!t&&!n&&r&&e};P(r,{forEach:function forEach(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=-1;var i=z.ToUint32(e.length);var a;if(arguments.length>1){a=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.forEach callback must be a function")}while(++n<i){if(n in e){if(typeof a==="undefined"){t(e[n],n,r)}else{t.call(a,e[n],n,r)}}}}},!ot(r.forEach));P(r,{map:function map(r){var e=z.ToObject(this);var n=at&&N(this)?Q(this,""):e;var i=z.ToUint32(n.length);var a=t(i);var o;if(arguments.length>1){o=arguments[1]}if(!D(r)){throw new TypeError("Array.prototype.map callback must be a function")}for(var f=0;f<i;f++){if(f in n){if(typeof o==="undefined"){a[f]=r(n[f],f,e)}else{a[f]=r.call(o,n[f],f,e)}}}return a}},!ot(r.map));P(r,{filter:function filter(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i=[];var a;var o;if(arguments.length>1){o=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.filter callback must be a function")}for(var f=0;f<n;f++){if(f in e){a=e[f];if(typeof o==="undefined"?t(a,f,r):t.call(o,a,f,r)){_(i,a)}}}return i}},!ot(r.filter));P(r,{every:function every(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.every callback must be a function")}for(var a=0;a<n;a++){if(a in e&&!(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return false}}return true}},!ot(r.every));P(r,{some:function some(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.some callback must be a function")}for(var a=0;a<n;a++){if(a in e&&(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return true}}return false}},!ot(r.some));var ft=false;if(r.reduce){ft=typeof r.reduce.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduce:function reduce(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduce callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var a;if(arguments.length>=2){a=arguments[1]}else{do{if(i in e){a=e[i++];break}if(++i>=n){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<n;i++){if(i in e){a=t(a,e[i],i,r)}}return a}},!ft);var ut=false;if(r.reduceRight){ut=typeof r.reduceRight.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduceRight:function reduceRight(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduceRight callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var i;var a=n-1;if(arguments.length>=2){i=arguments[1]}else{do{if(a in e){i=e[a--];break}if(--a<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(a<0){return i}do{if(a in e){i=t(i,e[a],a,r)}}while(a--);return i}},!ut);var lt=r.indexOf&&[0,1].indexOf(1,2)!==-1;P(r,{indexOf:function indexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=0;if(arguments.length>1){n=z.ToInteger(arguments[1])}n=n>=0?n:w(0,e+n);for(;n<e;n++){if(n in r&&r[n]===t){return n}}return-1}},lt);var st=r.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;P(r,{lastIndexOf:function lastIndexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=e-1;if(arguments.length>1){n=b(n,z.ToInteger(arguments[1]))}n=n>=0?n:e-Math.abs(n);for(;n>=0;n--){if(n in r&&t===r[n]){return n}}return-1}},st);var ct=function(){var t=[1,2];var r=t.splice();return t.length===2&&et(r)&&r.length===0}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}else{return c.apply(this,arguments)}}},!ct);var vt=function(){var t={};r.splice.call(t,0,0,1);return t.length===1}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}var e=arguments;this.length=w(z.ToInteger(this.length),0);if(arguments.length>0&&typeof r!=="number"){e=W(arguments);if(e.length<2){_(e,this.length-t)}else{e[1]=z.ToInteger(r)}}return c.apply(this,e)}},!vt);var ht=function(){var r=new t(1e5);r[8]="x";r.splice(1,1);return r.indexOf("x")===7}();var pt=function(){var t=256;var r=[];r[t]="a";r.splice(t+1,0,"b");return r[t]==="a"}();P(r,{splice:function splice(t,r){var e=z.ToObject(this);var n=[];var i=z.ToUint32(e.length);var a=z.ToInteger(t);var f=a<0?w(i+a,0):b(a,i);var u=arguments.length===0?0:arguments.length===1?i-f:b(w(z.ToInteger(r),0),i-f);var l=0;var s;while(l<u){s=o(f+l);if(G(e,s)){n[l]=e[s]}l+=1}var c=W(arguments,2);var v=c.length;var h;if(v<u){l=f;var p=i-u;while(l<p){s=o(l+u);h=o(l+v);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l+=1}l=i;var y=i-u+v;while(l>y){delete e[l-1];l-=1}}else if(v>u){l=i-u;while(l>f){s=o(l+u-1);h=o(l+v-1);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l-=1}}l=f;for(var d=0;d<c.length;++d){e[l]=c[d];l+=1}e.length=i-u+v;return n}},!ht||!pt);var yt=r.join;var dt;try{dt=Array.prototype.join.call("123",",")!=="1,2,3"}catch(X){dt=true}if(dt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(N(this)?Q(this,""):this,r)}},dt)}var gt=[1,2].join(undefined)!=="1,2";if(gt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(this,r)}},gt)}var wt=function push(t){var r=z.ToObject(this);var e=z.ToUint32(r.length);var n=0;while(n<arguments.length){r[e+n]=arguments[n];n+=1}r.length=e+n;return e+n};var bt=function(){var t={};var r=Array.prototype.push.call(t,undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:function push(t){if(et(this)){return v.apply(this,arguments)}return wt.apply(this,arguments)}},bt);var Tt=function(){var t=[];var r=t.push(undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:wt},Tt);P(r,{slice:function(t,r){var e=N(this)?Q(this,""):this;return B(e,arguments)}},at);var mt=function(){try{[1,2].sort(null)}catch(t){try{[1,2].sort({})}catch(r){return false}}return true}();var Dt=function(){try{[1,2].sort(/a/);return false}catch(t){}return true}();var St=function(){try{[1,2].sort(undefined);return true}catch(t){}return false}();P(r,{sort:function sort(t){if(typeof t==="undefined"){return rt(this)}if(!D(t)){throw new TypeError("Array.prototype.sort callback must be a function")}return rt(this,t)}},mt||!St||!Dt);var xt=!tt({toString:null},"toString");var Ot=tt(function(){},"prototype");var Et=!G("x","0");var jt=function(t){var r=t.constructor;return r&&r.prototype===t};var It={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true,$width:true,$height:true,$top:true,$localStorage:true};var Mt=function(){if(typeof window==="undefined"){return false}for(var t in window){try{if(!It["$"+t]&&G(window,t)&&window[t]!==null&&typeof window[t]==="object"){jt(window[t])}}catch(r){return true}}return false}();var Ut=function(t){if(typeof window==="undefined"||!Mt){return jt(t)}try{return jt(t)}catch(r){return false}};var $t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var Ft=$t.length;var Nt=function isArguments(t){return H(t)==="[object Arguments]"};var Ct=function isArguments(t){return t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&!et(t)&&D(t.callee)};var kt=Nt(arguments)?Nt:Ct;P(e,{keys:function keys(t){var r=D(t);var e=kt(t);var n=t!==null&&typeof t==="object";var i=n&&N(t);if(!n&&!r&&!e){throw new TypeError("Object.keys called on a non-object")}var a=[];var f=Ot&&r;if(i&&Et||e){for(var u=0;u<t.length;++u){_(a,o(u))}}if(!e){for(var l in t){if(!(f&&l==="prototype")&&G(t,l)){_(a,o(l))}}}if(xt){var s=Ut(t);for(var c=0;c<Ft;c++){var v=$t[c];if(!(s&&v==="constructor")&&G(t,v)){_(a,v)}}}return a}});var At=e.keys&&function(){return e.keys(arguments).length===2}(1,2);var Rt=e.keys&&function(){var t=e.keys(arguments);return arguments.length!==1||t.length!==1||t[0]!==1}(1);var Pt=e.keys;P(e,{keys:function keys(t){if(kt(t)){return Pt(W(t))}else{return Pt(t)}}},!At||Rt);var Jt=new Date(-0xc782b5b342b24).getUTCMonth()!==0;var Yt=new Date(-0x55d318d56a724);var zt=new Date(14496624e5);var Zt=Yt.toUTCString()!=="Mon, 01 Jan -45875 11:59:59 GMT";var Gt;var Ht;var Wt=Yt.getTimezoneOffset();if(Wt<-720){Gt=Yt.toDateString()!=="Tue Jan 02 -45875";Ht=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}else{Gt=Yt.toDateString()!=="Mon Jan 01 -45875";Ht=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}var Bt=d.bind(Date.prototype.getFullYear);var Xt=d.bind(Date.prototype.getMonth);var Lt=d.bind(Date.prototype.getDate);var qt=d.bind(Date.prototype.getUTCFullYear);var Kt=d.bind(Date.prototype.getUTCMonth);var Qt=d.bind(Date.prototype.getUTCDate);var Vt=d.bind(Date.prototype.getUTCDay);var _t=d.bind(Date.prototype.getUTCHours);var tr=d.bind(Date.prototype.getUTCMinutes);var rr=d.bind(Date.prototype.getUTCSeconds);var er=d.bind(Date.prototype.getUTCMilliseconds);var nr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var ir=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var ar=function daysInMonth(t,r){return Lt(new Date(r,t,0))};P(Date.prototype,{getFullYear:function getFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);if(t<0&&Xt(this)>11){return t+1}return t},getMonth:function getMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);if(t<0&&r>11){return 0}return r},getDate:function getDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);var e=Lt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e},getUTCFullYear:function getUTCFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);if(t<0&&Kt(this)>11){return t+1}return t},getUTCMonth:function getUTCMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);if(t<0&&r>11){return 0}return r},getUTCDate:function getUTCDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);var e=Qt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e}},Jt);P(Date.prototype,{toUTCString:function toUTCString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Vt(this);var r=Qt(this);var e=Kt(this);var n=qt(this);var i=_t(this);var a=tr(this);var o=rr(this);return nr[t]+", "+(r<10?"0"+r:r)+" "+ir[e]+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"}},Jt||Zt);P(Date.prototype,{toDateString:function toDateString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n}},Jt||Gt);if(Jt||Ht){Date.prototype.toString=function toString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();var i=this.getHours();var a=this.getMinutes();var o=this.getSeconds();var f=this.getTimezoneOffset();var u=Math.floor(Math.abs(f)/60);var l=Math.floor(Math.abs(f)%60);return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"+(f>0?"-":"+")+(u<10?"0"+u:u)+(l<10?"0"+l:l)};if(R){e.defineProperty(Date.prototype,"toString",{configurable:true,enumerable:false,writable:true})}}var or=-621987552e5;var fr="-000001";var ur=Date.prototype.toISOString&&new Date(or).toISOString().indexOf(fr)===-1;var lr=Date.prototype.toISOString&&new Date(-1).toISOString()!=="1969-12-31T23:59:59.999Z";var sr=d.bind(Date.prototype.getTime);P(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(sr(this))){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}var t=qt(this);var r=Kt(this);t+=Math.floor(r/12);r=(r%12+12)%12;var e=[r+1,Qt(this),_t(this),tr(this),rr(this)];t=(t<0?"-":t>9999?"+":"")+K("00000"+Math.abs(t),0<=t&&t<=9999?-4:-6);for(var n=0;n<e.length;++n){e[n]=K("00"+e[n],-2)}return t+"-"+W(e,0,2).join("-")+"T"+W(e,2).join(":")+"."+K("000"+er(this),-3)+"Z"}},ur||lr);var cr=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(or).toJSON().indexOf(fr)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(t){return false}}();if(!cr){Date.prototype.toJSON=function toJSON(t){var r=e(this);var n=z.ToPrimitive(r);if(typeof n==="number"&&!isFinite(n)){return null}var i=r.toISOString;if(!D(i)){throw new TypeError("toISOString property is not callable")}return i.call(r)}}var vr=Date.parse("+033658-09-27T01:46:40.000Z")===1e15;var hr=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));var pr=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(pr||hr||!vr){var yr=Math.pow(2,31)-1;var dr=Y(new Date(1970,0,1,0,0,0,yr+1).getTime());Date=function(t){var r=function Date(e,n,i,a,f,u,l){var s=arguments.length;var c;if(this instanceof t){var v=u;var h=l;if(dr&&s>=7&&l>yr){var p=Math.floor(l/yr)*yr;var y=Math.floor(p/1e3);v+=y;h-=y*1e3}c=s===1&&o(e)===e?new t(r.parse(e)):s>=7?new t(e,n,i,a,f,v,h):s>=6?new t(e,n,i,a,f,v):s>=5?new t(e,n,i,a,f):s>=4?new t(e,n,i,a):s>=3?new t(e,n,i):s>=2?new t(e,n):s>=1?new t(e instanceof t?+e:e):new t}else{c=t.apply(this,arguments)}if(!J(c)){P(c,{constructor:r},true)}return c};var e=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var n=[0,31,59,90,120,151,181,212,243,273,304,334,365];var i=function dayFromMonth(t,r){var e=r>1?1:0;return n[r]+Math.floor((t-1969+e)/4)-Math.floor((t-1901+e)/100)+Math.floor((t-1601+e)/400)+365*(t-1970)};var a=function toUTC(r){var e=0;var n=r;if(dr&&n>yr){var i=Math.floor(n/yr)*yr;var a=Math.floor(i/1e3);e+=a;n-=a*1e3}return u(new t(1970,0,1,0,0,e,n))};for(var f in t){if(G(t,f)){r[f]=t[f]}}P(r,{now:t.now,UTC:t.UTC},true);r.prototype=t.prototype;P(r.prototype,{constructor:r},true);var l=function parse(r){var n=e.exec(r);if(n){var o=u(n[1]),f=u(n[2]||1)-1,l=u(n[3]||1)-1,s=u(n[4]||0),c=u(n[5]||0),v=u(n[6]||0),h=Math.floor(u(n[7]||0)*1e3),p=Boolean(n[4]&&!n[8]),y=n[9]==="-"?1:-1,d=u(n[10]||0),g=u(n[11]||0),w;var b=c>0||v>0||h>0;if(s<(b?24:25)&&c<60&&v<60&&h<1e3&&f>-1&&f<12&&d<24&&g<60&&l>-1&&l<i(o,f+1)-i(o,f)){w=((i(o,f)+l)*24+s+d*y)*60;w=((w+c+g*y)*60+v)*1e3+h;if(p){w=a(w)}if(-864e13<=w&&w<=864e13){return w}}return NaN}return t.parse.apply(this,arguments)};P(r,{parse:l});return r}(Date)}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var gr=l.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||(1000000000000000128).toFixed(0)!=="1000000000000000128");var wr={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(t,r){var e=-1;var n=r;while(++e<wr.size){n+=t*wr.data[e];wr.data[e]=n%wr.base;n=Math.floor(n/wr.base)}},divide:function divide(t){var r=wr.size;var e=0;while(--r>=0){e+=wr.data[r];wr.data[r]=Math.floor(e/t);e=e%t*wr.base}},numToString:function numToString(){var t=wr.size;var r="";while(--t>=0){if(r!==""||t===0||wr.data[t]!==0){var e=o(wr.data[t]);if(r===""){r=e}else{r+=K("0000000",0,7-e.length)+e}}}return r},pow:function pow(t,r,e){return r===0?e:r%2===1?pow(t,r-1,e*t):pow(t*t,r/2,e)},log:function log(t){var r=0;var e=t;while(e>=4096){r+=12;e/=4096}while(e>=2){r+=1;e/=2}return r}};var br=function toFixed(t){var r,e,n,i,a,f,l,s;r=u(t);r=Y(r)?0:Math.floor(r);if(r<0||r>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}e=u(this);if(Y(e)){return"NaN"}if(e<=-1e21||e>=1e21){return o(e)}n="";if(e<0){n="-";e=-e}i="0";if(e>1e-21){a=wr.log(e*wr.pow(2,69,1))-69;f=a<0?e*wr.pow(2,-a,1):e/wr.pow(2,a,1);f*=4503599627370496;a=52-a;if(a>0){wr.multiply(0,f);l=r;while(l>=7){wr.multiply(1e7,0);l-=7}wr.multiply(wr.pow(10,l,1),0);l=a-1;while(l>=23){wr.divide(1<<23);l-=23}wr.divide(1<<l);wr.multiply(1,1);wr.divide(2);i=wr.numToString()}else{wr.multiply(0,f);wr.multiply(1<<-a,0);i=wr.numToString()+K("0.00000000000000000000",2,2+r)}}if(r>0){s=i.length;if(s<=r){i=n+K("0.0000000000000000000",0,r-s+2)+i}else{i=n+K(i,0,s-r)+"."+K(i,s-r)}}else{i=n+i}return i};P(l,{toFixed:br},gr);var Tr=function(){try{return 1..toPrecision(undefined)==="1"}catch(t){return true}}();var mr=l.toPrecision;P(l,{toPrecision:function toPrecision(t){return typeof t==="undefined"?mr.call(this):mr.call(this,t)}},Tr);if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var t=typeof/()??/.exec("")[1]==="undefined";var r=Math.pow(2,32)-1;f.split=function(e,n){var i=String(this);if(typeof e==="undefined"&&n===0){return[]}if(!M(e)){return Q(this,e,n)}var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,u,l,s,c;var h=new RegExp(e.source,o+"g");if(!t){u=new RegExp("^"+h.source+"$(?!\\s)",o)}var p=typeof n==="undefined"?r:z.ToUint32(n);l=h.exec(i);while(l){s=l.index+l[0].length;if(s>f){_(a,K(i,f,l.index));if(!t&&l.length>1){l[0].replace(u,function(){for(var t=1;t<arguments.length-2;t++){if(typeof arguments[t]==="undefined"){l[t]=void 0}}})}if(l.length>1&&l.index<i.length){v.apply(a,W(l,1))}c=l[0].length;f=s;if(a.length>=p){break}}if(h.lastIndex===l.index){h.lastIndex++}l=h.exec(i)}if(f===i.length){if(c||!h.test("")){_(a,"")}}else{_(a,K(i,f))}return a.length>p?W(a,0,p):a}})()}else if("0".split(void 0,0).length){f.split=function split(t,r){if(typeof t==="undefined"&&r===0){return[]}return Q(this,t,r)}}var Dr=f.replace;var Sr=function(){var t=[];"x".replace(/x(.)?/g,function(r,e){_(t,e)});return t.length===1&&typeof t[0]==="undefined"}();if(!Sr){f.replace=function replace(t,r){var e=D(r);var n=M(t)&&/\)[*?]/.test(t.source);if(!e||!n){return Dr.call(this,t,r)}else{var i=function(e){var n=arguments.length;var i=t.lastIndex;t.lastIndex=0;var a=t.exec(e)||[];t.lastIndex=i;_(a,arguments[n-2],arguments[n-1]);return r.apply(this,a)};return Dr.call(this,t,i)}}}var xr=f.substr;var Or="".substr&&"0b".substr(-1)!=="b";P(f,{substr:function substr(t,r){var e=t;if(t<0){e=w(this.length+t,0)}return xr.call(this,e,r)}},Or);var Er="\t\n\x0B\f\r \xa0\u1680\u2000\u2001\u2002\u2003"+"\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028"+"\u2029\ufeff";var jr="\u200b";var Ir="["+Er+"]";var Mr=new RegExp("^"+Ir+Ir+"*");var Ur=new RegExp(Ir+Ir+"*$");var $r=f.trim&&(Er.trim()||!jr.trim());P(f,{trim:function trim(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return o(this).replace(Mr,"").replace(Ur,"")}},$r);var Fr=d.bind(String.prototype.trim);var Nr=f.lastIndexOf&&"abc\u3042\u3044".lastIndexOf("\u3042\u3044",2)!==-1;P(f,{lastIndexOf:function lastIndexOf(t){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var r=o(this);var e=o(t);var n=arguments.length>1?u(arguments[1]):NaN;var i=Y(n)?Infinity:z.ToInteger(n);var a=b(w(i,0),r.length);var f=e.length;var l=a+f;while(l>0){l=w(0,l-f);var s=V(K(r,l,a+f),e);if(s!==-1){return l+s}}return-1}},Nr);var Cr=f.lastIndexOf;P(f,{lastIndexOf:function lastIndexOf(t){return Cr.apply(this,arguments)}},f.lastIndexOf.length!==1);if(parseInt(Er+"08")!==8||parseInt(Er+"0x16")!==22){parseInt=function(t){var r=/^[-+]?0[xX]/;return function parseInt(e,n){if(typeof e==="symbol"){""+e}var i=Fr(String(e));var a=u(n)||(r.test(i)?16:10);return t(i,a)}}(parseInt)}if(1/parseFloat("-0")!==-Infinity){parseFloat=function(t){return function parseFloat(r){var e=Fr(String(r));var n=t(e);return n===0&&K(e,0,1)==="-"?-0:n}}(parseFloat)}if(String(new RangeError("test"))!=="RangeError: test"){var kr=function toString(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var t=this.name;if(typeof t==="undefined"){t="Error"}else if(typeof t!=="string"){t=o(t)}var r=this.message;if(typeof r==="undefined"){r=""}else if(typeof r!=="string"){r=o(r)}if(!t){return r}if(!r){return t}return t+": "+r};Error.prototype.toString=kr}if(R){var Ar=function(t,r){if(tt(t,r)){var e=Object.getOwnPropertyDescriptor(t,r);if(e.configurable){e.enumerable=false;Object.defineProperty(t,r,e)}}};Ar(Error.prototype,"message");if(Error.prototype.message!==""){Error.prototype.message=""}Ar(Error.prototype,"name")}if(String(/a/gim)!=="/a/gim"){var Rr=function toString(){var t="/"+this.source+"/";if(this.global){t+="g"}if(this.ignoreCase){t+="i"}if(this.multiline){t+="m"}return t};RegExp.prototype.toString=Rr}});
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.4/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(t){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(t){return false}};var u=o(i);var f=function(){return!i(function(){return Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var m={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var O=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){m.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=O(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var C=Function.call.bind(String.prototype.slice);var M=Function.call.bind(Array.prototype.push);var x=Function.apply.bind(Array.prototype.push);var N=Function.call.bind(Array.prototype.shift);var A=Math.max;var R=Math.min;var _=Math.floor;var k=Math.abs;var L=Math.exp;var F=Math.log;var D=Math.sqrt;var z=Function.call.bind(Object.prototype.hasOwnProperty);var q;var W=function(){};var G=S.Map;var H=G&&G.prototype["delete"];var V=G&&G.prototype.get;var B=G&&G.prototype.has;var U=G&&G.prototype.set;var $=S.Symbol||{};var J=$.species||"@@species";var X=Number.isNaN||function isNaN(e){return e!==e};var K=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var Z=d(Math.sign)?Math.sign:function sign(e){var t=Number(e);if(t===0){return t}if(X(t)){return t}return t<0?-1:1};var Y=function log1p(e){var t=Number(e);if(t<-1||X(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(F(1+t)/(1+t-1))};var Q=function isArguments(e){return g(e)==="[object Arguments]"};var ee=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var te=Q(arguments)?Q:ee;var re={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var ne=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);m.preserveToString(e[t],n)};var oe=typeof $==="function"&&typeof $["for"]==="function"&&re.symbol($());var ie=re.symbol($.iterator)?$.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){ie="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var ae=S.Reflect;var ue=String;var fe=typeof document==="undefined"||!document?null:document.all;var se=fe==null?function isNullOrUndefined(e){return e==null}:function isNullOrUndefinedAndNotDocumentAll(e){return e==null&&e!==fe};var ce={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!ce.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(se(e)){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"||e===fe},ToObject:function(e,t){return Object(ce.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return ce.IsCallable(e)},ToInt32:function(e){return ce.ToNumber(e)>>0},ToUint32:function(e){return ce.ToNumber(e)>>>0},ToNumber:function(e){if(g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=ce.ToNumber(e);if(X(t)){return 0}if(t===0||!K(t)){return t}return(t>0?1:-1)*_(k(t))},ToLength:function(e){var t=ce.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return X(e)&&X(t)},SameValueZero:function(e,t){return e===t||X(e)&&X(t)},IsIterable:function(e){return ce.TypeIsObject(e)&&(typeof e[ie]!=="undefined"||te(e))},GetIterator:function(e){if(te(e)){return new q(e,"value")}var t=ce.GetMethod(e,ie);if(!ce.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=ce.Call(t,e);if(!ce.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=ce.ToObject(e)[t];if(se(r)){return void 0}if(!ce.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=ce.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=ce.Call(r,e)}catch(i){o=i}if(t){return}if(o){throw o}if(!ce.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ce.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=ce.IteratorNext(e);var r=ce.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&ae.construct){return ae.construct(e,t,o)}var i=o.prototype;if(!ce.TypeIsObject(i)){i=Object.prototype}var a=O(i);var u=ce.Call(e,a,t);return ce.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!ce.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[J];if(se(n)){return t}if(!ce.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=ce.ToString(e);var i="<"+t;if(r!==""){var a=ce.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!ce.TypeIsObject(e)){return false}var t=e[$.match];if(typeof t!=="undefined"){return!!t}return re.regex(e)},ToString:function ToString(e){return ue(e)}};if(s&&oe){var le=function defineWellKnownSymbol(e){if(re.symbol($[e])){return $[e]}var t=$["for"]("Symbol."+e);Object.defineProperty($,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!re.symbol($.search)){var pe=le("search");var ve=String.prototype.search;h(RegExp.prototype,pe,function search(e){return ce.Call(ve,e,[this])});var ye=function search(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,pe);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(ve,t,[ce.ToString(e)])};ne(String.prototype,"search",ye)}if(!re.symbol($.replace)){var he=le("replace");var be=String.prototype.replace;h(RegExp.prototype,he,function replace(e,t){return ce.Call(be,e,[this,t])});var ge=function replace(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,he);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(be,r,[ce.ToString(e),t])};ne(String.prototype,"replace",ge)}if(!re.symbol($.split)){var de=le("split");var me=String.prototype.split;h(RegExp.prototype,de,function split(e,t){return ce.Call(me,e,[this,t])});var Oe=function split(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,de);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(me,r,[ce.ToString(e),t])};ne(String.prototype,"split",Oe)}var we=re.symbol($.match);var je=we&&function(){var e={};e[$.match]=function(){return 42};return"a".match(e)!==42}();if(!we||je){var Se=le("match");var Te=String.prototype.match;h(RegExp.prototype,Se,function match(e){return ce.Call(Te,e,[this])});var Ie=function match(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,Se);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(Te,t,[ce.ToString(e)])};ne(String.prototype,"match",Ie)}}var Ee=function wrapConstructor(e,t,r){m.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in W||r[n]){return}m.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in W||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;m.redefine(e.prototype,"constructor",t)};var Pe=function(){return this};var Ce=function(e){if(s&&!z(e,J)){m.getter(e,J,Pe)}};var Me=function(e,t){var r=t||function iterator(){return this};h(e,ie,r);if(!e[ie]&&re.symbol(ie)){e[ie]=r}};var xe=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var Ne=function createDataPropertyOrThrow(e,t,r){xe(e,t,r);if(!ce.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var Ae=function(e,t,r,n){if(!ce.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!ce.TypeIsObject(o)){o=r}var i=O(o);for(var a in n){if(z(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Re=String.fromCodePoint;ne(String,"fromCodePoint",function fromCodePoint(e){return ce.Call(Re,this,arguments)})}var _e={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!ce.SameValue(r,ce.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){M(t,String.fromCharCode(r))}else{r-=65536;M(t,String.fromCharCode((r>>10)+55296));M(t,String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function raw(e){var t=ce.ToObject(e,"bad callSite");var r=ce.ToObject(t.raw,"bad raw value");var n=r.length;var o=ce.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=ce.ToString(a);s=ce.ToString(r[u]);M(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=ce.ToString(f);M(i,c);a+=1}return i.join("")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){ne(String,"raw",_e.raw)}b(String,_e);var ke=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var Le=Infinity;var Fe={repeat:function repeat(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);if(r<0||r>=Le){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return ke(t,r)},startsWith:function startsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=ce.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=A(ce.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=ce.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:ce.ToInteger(o);var a=R(A(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(ce.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=ce.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){ne(String.prototype,"includes",Fe.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var De=i(function(){return"/a/".startsWith(/a/)});var ze=a(function(){return"abc".startsWith("a",Infinity)===false});if(!De||!ze){ne(String.prototype,"startsWith",Fe.startsWith);ne(String.prototype,"endsWith",Fe.endsWith)}}if(oe){var qe=a(function(){var e=/a/;e[$.match]=false;return"/a/".startsWith(e)});if(!qe){ne(String.prototype,"startsWith",Fe.startsWith)}var We=a(function(){var e=/a/;e[$.match]=false;return"/a/".endsWith(e)});if(!We){ne(String.prototype,"endsWith",Fe.endsWith)}var Ge=a(function(){var e=/a/;e[$.match]=false;return"/a/".includes(e)});if(!Ge){ne(String.prototype,"includes",Fe.includes)}}b(String.prototype,Fe);var He=["\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var Ve=new RegExp("(^["+He+"]+)|(["+He+"]+$)","g");var Be=function trim(){return ce.ToString(ce.RequireObjectCoercible(this)).replace(Ve,"")};var Ue=["\x85","\u200b","\ufffe"].join("");var $e=new RegExp("["+Ue+"]","g");var Je=/^[-+]0x[0-9a-f]+$/i;var Xe=Ue.trim().length!==Ue.length;h(String.prototype,"trim",Be,Xe);var Ke=function(e){return{value:e,done:arguments.length===0}};var Ze=function(e){ce.RequireObjectCoercible(e);this._s=ce.ToString(e);this._i=0};Ze.prototype.next=function(){var e=this._s;var t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return Ke()}var r=e.charCodeAt(t);var n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return Ke(e.substr(t,o))};Me(Ze.prototype);Me(String.prototype,function(){return new Ze(this)});var Ye={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!ce.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(te(e)||ce.GetMethod(e,ie))!=="undefined";var u,f,s;if(a){f=ce.IsConstructor(r)?Object(new r):[];var c=ce.GetIterator(e);var l,p;s=0;while(true){l=ce.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(v){ce.IteratorClose(c,true);throw v}s+=1}u=s}else{var y=ce.ToObject(e);u=ce.ToLength(y.length);f=ce.IsConstructor(r)?Object(new r(u)):new Array(u);var h;for(s=0;s<u;++s){h=y[s];if(o){h=typeof i==="undefined"?n(h,s):t(n,i,h,s)}Ne(f,s,h)}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!ce.IsCallable(t)?new Array(e):ce.Construct(t,[e]);for(var o=0;o<e;++o){Ne(n,o,arguments[o])}n.length=e;return n}};b(Array,Ye);Ce(Array);q=function(e,t){this.i=0;this.array=e;this.kind=t};b(q.prototype,{next:function(){var e=this.i;var t=this.array;if(!(this instanceof q)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=ce.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return Ke(o)}}this.array=void 0;return Ke()}});Me(q.prototype);var Qe=Array.of===Ye.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!Qe){ne(Array,"of",Ye.of)}var et={copyWithin:function copyWithin(e,t){var r=ce.ToObject(this);var n=ce.ToLength(r.length);var o=ce.ToInteger(e);var i=ce.ToInteger(t);var a=o<0?A(n+o,0):R(o,n);var u=i<0?A(n+i,0):R(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:ce.ToInteger(f);var c=s<0?A(n+s,0):R(s,n);var l=R(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=ce.ToObject(this);var o=ce.ToLength(n.length);t=ce.ToInteger(typeof t==="undefined"?0:t);r=ce.ToInteger(typeof r==="undefined"?o:r);var i=t<0?A(o+t,0):R(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new q(this,"key")},values:function values(){return new q(this,"value")},entries:function entries(){return new q(this,"entry")}};if(Array.prototype.keys&&!ce.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!ce.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ie]){b(Array.prototype,{values:Array.prototype[ie]});if(re.symbol($.unscopables)){Array.prototype[$.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var tt=Array.prototype.values;ne(Array.prototype,"values",function values(){return ce.Call(tt,this,arguments)});h(Array.prototype,ie,Array.prototype.values,true)}b(Array.prototype,et);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}Me(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){Me(Object.getPrototypeOf([].values()))}var rt=function(){return a(function(){return Array.from({length:-1}).length===0})}();var nt=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!rt||!nt){ne(Array,"from",Ye.from)}var ot=function(){return a(function(){return Array.from([0],void 0)})}();if(!ot){var it=Array.from;ne(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return ce.Call(it,this,arguments)}else{return t(it,this,e)}})}var at=-(Math.pow(2,32)-1);var ut=function(e,r){var n={length:at};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!ut(Array.prototype.forEach)){var ft=Array.prototype.forEach;ne(Array.prototype,"forEach",function forEach(e){return ce.Call(ft,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.map)){var st=Array.prototype.map;ne(Array.prototype,"map",function map(e){return ce.Call(st,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.filter)){var ct=Array.prototype.filter;ne(Array.prototype,"filter",function filter(e){return ce.Call(ct,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.some)){var lt=Array.prototype.some;ne(Array.prototype,"some",function some(e){return ce.Call(lt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.every)){var pt=Array.prototype.every;ne(Array.prototype,"every",function every(e){return ce.Call(pt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduce)){var vt=Array.prototype.reduce;ne(Array.prototype,"reduce",function reduce(e){return ce.Call(vt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduceRight,true)){var yt=Array.prototype.reduceRight;ne(Array.prototype,"reduceRight",function reduceRight(e){return ce.Call(yt,this.length>=0?this:[],arguments)},true)}var ht=Number("0o10")!==8;var bt=Number("0b10")!==2;var gt=y(Ue,function(e){return Number(e+0+e)===0});if(ht||bt||gt){var dt=Number;var mt=/^0b[01]+$/i;var Ot=/^0o[0-7]+$/i;var wt=mt.test.bind(mt);var jt=Ot.test.bind(Ot);var St=function(e){var t;if(typeof e.valueOf==="function"){t=e.valueOf();if(re.primitive(t)){return t}}if(typeof e.toString==="function"){t=e.toString();if(re.primitive(t)){return t}}throw new TypeError("No default value")};var Tt=$e.test.bind($e);var It=Je.test.bind(Je);var Et=function(){var e=function Number(t){var r;if(arguments.length>0){r=re.primitive(t)?t:St(t,"number")}else{r=0}if(typeof r==="string"){r=ce.Call(Be,r);if(wt(r)){r=parseInt(C(r,2),2)}else if(jt(r)){r=parseInt(C(r,2),8)}else if(Tt(r)||It(r)){r=NaN}}var n=this;var o=a(function(){dt.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new dt(r)}return dt(r)};return e}();Ee(dt,Et,{});b(Et,{NaN:dt.NaN,MAX_VALUE:dt.MAX_VALUE,MIN_VALUE:dt.MIN_VALUE,NEGATIVE_INFINITY:dt.NEGATIVE_INFINITY,POSITIVE_INFINITY:dt.POSITIVE_INFINITY});Number=Et;m.redefine(S,"Number",Et)}var Pt=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Pt,MIN_SAFE_INTEGER:-Pt,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:K,isInteger:function isInteger(e){return K(e)&&ce.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&k(e)<=Number.MAX_SAFE_INTEGER},isNaN:X});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if([,1].find(function(){return true})===1){ne(Array.prototype,"find",et.find)}if([,1].findIndex(function(){return true})!==0){ne(Array.prototype,"findIndex",et.findIndex)}var Ct=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var Mt=function ensureEnumerable(e,t){if(s&&Ct(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var xt=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var Nt=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var At=function(e,t){var r=n(Object(t));var o;if(ce.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),Ct(t))}return p(P(r,o||[]),Nt(t),e)};var Rt={assign:function(e,t){var r=ce.ToObject(e,"Cannot convert undefined or null to object");return p(ce.Call(xt,1,arguments),At,r)},is:function is(e,t){return ce.SameValue(e,t)}};var _t=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(_t){ne(Object,"assign",Rt.assign)}b(Object,Rt);if(s){var kt={setPrototypeOf:function(e,r){var n;var o=function(e,t){if(!ce.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||ce.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var i=function(e,r){o(e,r);t(n,e,r);return e};try{n=e.getOwnPropertyDescriptor(e.prototype,r).set;t(n,{},null)}catch(a){if(e.prototype!=={}[r]){return}n=function(e){this[r]=e};i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};b(Object,kt)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf;var r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var Lt=!i(function(){return Object.keys("foo")});if(!Lt){var Ft=Object.keys;ne(Object,"keys",function keys(e){return Ft(ce.ToObject(e))});n=Object.keys}var Dt=i(function(){return Object.keys(/a/g)});if(Dt){var zt=Object.keys;ne(Object,"keys",function keys(e){if(re.regex(e)){var t=[];for(var r in e){if(z(e,r)){M(t,r)}}return t}return zt(e)});n=Object.keys}if(Object.getOwnPropertyNames){var qt=!i(function(){return Object.getOwnPropertyNames("foo")});if(!qt){var Wt=typeof window==="object"?Object.getOwnPropertyNames(window):[];var Gt=Object.getOwnPropertyNames;ne(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=ce.ToObject(e);if(g(t)==="[object Window]"){try{return Gt(t)}catch(r){return P([],Wt)}}return Gt(t)})}}if(Object.getOwnPropertyDescriptor){var Ht=!i(function(){return Object.getOwnPropertyDescriptor("foo","bar")});if(!Ht){var Vt=Object.getOwnPropertyDescriptor;ne(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Vt(ce.ToObject(e),t)})}}if(Object.seal){var Bt=!i(function(){return Object.seal("foo")});if(!Bt){var Ut=Object.seal;ne(Object,"seal",function seal(e){if(!ce.TypeIsObject(e)){return e}return Ut(e)})}}if(Object.isSealed){var $t=!i(function(){return Object.isSealed("foo")});if(!$t){var Jt=Object.isSealed;ne(Object,"isSealed",function isSealed(e){if(!ce.TypeIsObject(e)){return true}return Jt(e)})}}if(Object.freeze){var Xt=!i(function(){return Object.freeze("foo")});if(!Xt){var Kt=Object.freeze;ne(Object,"freeze",function freeze(e){if(!ce.TypeIsObject(e)){return e}return Kt(e)})}}if(Object.isFrozen){var Zt=!i(function(){return Object.isFrozen("foo")});if(!Zt){var Yt=Object.isFrozen;ne(Object,"isFrozen",function isFrozen(e){if(!ce.TypeIsObject(e)){return true}return Yt(e)})}}if(Object.preventExtensions){var Qt=!i(function(){return Object.preventExtensions("foo")});if(!Qt){var er=Object.preventExtensions;ne(Object,"preventExtensions",function preventExtensions(e){if(!ce.TypeIsObject(e)){return e}return er(e)})}}if(Object.isExtensible){var tr=!i(function(){return Object.isExtensible("foo")});if(!tr){var rr=Object.isExtensible;ne(Object,"isExtensible",function isExtensible(e){if(!ce.TypeIsObject(e)){return false}return rr(e)})}}if(Object.getPrototypeOf){var nr=!i(function(){return Object.getPrototypeOf("foo")});if(!nr){var or=Object.getPrototypeOf;ne(Object,"getPrototypeOf",function getPrototypeOf(e){return or(ce.ToObject(e))})}}var ir=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&ce.IsCallable(e.get)}();if(s&&!ir){var ar=function flags(){if(!ce.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};m.getter(RegExp.prototype,"flags",ar)}var ur=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var fr=oe&&s&&function(){var e=/./;e[$.match]=false;return RegExp(e)===e}();var sr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var cr=sr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!sr||!cr){var lr=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=ce.RequireObjectCoercible(this);if(re.regex(e)){return t(lr,e)}var r=ue(e.source);var n=ue(e.flags);return"/"+r+"/"+n},true);m.preserveToString(RegExp.prototype.toString,lr)}if(s&&(!ur||fr)){var pr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var vr=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var yr=function(){return this.source};var hr=ce.IsCallable(vr.get)?vr.get:yr;var br=RegExp;var gr=function(){return function RegExp(e,t){var r=ce.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(re.regex(e)){o=ce.Call(hr,e);i=typeof t==="undefined"?ce.Call(pr,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new br(e,t)}}();Ee(br,gr,{$input:true});RegExp=gr;m.redefine(S,"RegExp",gr)}if(s){var dr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(dr),function(e){if(e in RegExp&&!(dr[e]in RegExp)){m.getter(RegExp,dr[e],function get(){return RegExp[e]})}})}Ce(RegExp);var mr=1/Number.EPSILON;var Or=function roundTiesToEven(e){return e+mr-mr};var wr=Math.pow(2,-23);var jr=Math.pow(2,127)*(2-wr);var Sr=Math.pow(2,-126);var Tr=Math.E;var Ir=Math.LOG2E;var Er=Math.LOG10E;var Pr=Number.prototype.clz;delete Number.prototype.clz;var Cr={acosh:function acosh(e){var t=Number(e);if(X(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}var r=1/(t*t);if(t<2){return Y(t-1+D(1-r)*t)}var n=t/2;return Y(n+D(1-r)*n-1)+1/Ir},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}var r=k(t);var n=r*r;var o=Z(t);if(r<1){return o*Y(r+n/(D(n+1)+1))}return o*(Y(r/2+D(1+1/n)*r/2-1)+1/Ir)},atanh:function atanh(e){var t=Number(e);if(t===0){return t}if(t===-1){return-Infinity}if(t===1){return Infinity}if(X(t)||t<-1||t>1){return NaN}var r=k(t);return Z(t)*Y(2*r/(1-r))/2},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0;var n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=L(F(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=ce.ToUint32(t);if(r===0){return 32}return Pr?ce.Call(Pr,r):31-_(F(r+.5)*Ir)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(X(t)){return NaN}if(!T(t)){return Infinity}var r=L(k(t)-1);return(r+1/(r*Tr*Tr))*(Tr/2)},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(k(t)>.5){return L(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=k(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*D(r)},log2:function log2(e){return F(e)*Ir},log10:function log10(e){return F(e)*Er},log1p:Y,sign:Z,sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}var r=k(t);if(r<1){var n=Math.expm1(r);return Z(t)*n*(1+1/(n+1))/2}var o=L(r-1);return Z(t)*(o-1/(o*Tr*Tr))*(Tr/2)},tanh:function tanh(e){var t=Number(e);if(X(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}return(Math.expm1(t)-Math.expm1(-t))/(L(t)+L(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-_(-t):_(t)},imul:function imul(e,t){var r=ce.ToUint32(e);var n=ce.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||X(t)){return t}var r=Z(t);var n=k(t);if(n<Sr){return r*Or(n/Sr/wr)*Sr*wr}var o=(1+wr/Number.EPSILON)*n;var i=o-(o-n);if(i>jr||X(i)){return r*Infinity}return r*i}};var Mr=function withinULPDistance(e,t,r){return k(1-e/t)/Number.EPSILON<(r||8)};b(Math,Cr);h(Math,"sinh",Cr.sinh,Math.sinh(710)===Infinity);h(Math,"cosh",Cr.cosh,Math.cosh(710)===Infinity);h(Math,"log1p",Cr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",Cr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));h(Math,"asinh",Cr.asinh,Math.asinh(1e300)===Infinity);h(Math,"atanh",Cr.atanh,Math.atanh(1e-300)===0);h(Math,"tanh",Cr.tanh,Math.tanh(-2e-17)!==-2e-17);
h(Math,"acosh",Cr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"acosh",Cr.acosh,!Mr(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON)));h(Math,"cbrt",Cr.cbrt,!Mr(Math.cbrt(1e-300),1e-100));h(Math,"sinh",Cr.sinh,Math.sinh(-2e-17)!==-2e-17);var xr=Math.expm1(10);h(Math,"expm1",Cr.expm1,xr>22025.465794806718||xr<22025.465794806718);var Nr=Math.round;var Ar=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var Rr=mr+1;var _r=2*mr-1;var kr=[Rr,_r].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=_(e);var r=t===-1?-0:t+1;return e-t<.5?t:r},!Ar||!kr);m.preserveToString(Math.round,Nr);var Lr=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=Cr.imul;m.preserveToString(Math.imul,Lr)}if(Math.imul.length!==2){ne(Math,"imul",function imul(e,t){return ce.Call(Lr,Math,arguments)})}var Fr=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}ce.IsPromise=function(e){if(!ce.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!ce.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(ce.IsCallable(t.resolve)&&ce.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&ce.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){M(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=N(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=ce.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(ce.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(i){n=i;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var m=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var O=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return m(e,new TypeError("Self resolution"))}if(!ce.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(o){return m(e,o)}if(!ce.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return m(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=O(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(a){i(a)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!ce.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=Ae(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=O(r);var o=n.reject;try{t(n.resolve,o)}catch(i){o(i)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var C=function(e,t,r){var n=e.iterator;var o=[];var i={count:1};var a,u;var f=0;while(true){try{a=ce.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(s){e.done=true;throw s}o[f]=void 0;var c=t.resolve(u);var l=P(f,o,r,i);i.count+=1;w(c.then,c,l,r.reject);f+=1}if(--i.count===0){var p=r.resolve;p(o)}return r.promise};var x=function(e,t,r){var n=e.iterator;var o,i,a;while(true){try{o=ce.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(u){e.done=true;throw u}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},race:function race(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return x(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},reject:function reject(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(ce.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{"catch":function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!ce.IsPromise(n)){throw new TypeError("not a promise")}var o=ce.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=ce.IsCallable(e)?e:a;var d=ce.IsCallable(t)?t:u;var m=n._promise;var O;if(m.state===f){if(m.reactionLength===0){m.fulfillReactionHandler0=g;m.rejectReactionHandler0=d;m.reactionCapability0=i}else{var w=3*(m.reactionLength-1);m[w+l]=g;m[w+p]=d;m[w+v]=i}m.reactionLength+=1}else if(m.state===s){O=m.result;h(g,i,O)}else if(m.state===c){O=m.result;h(d,i,O)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof Fr==="function"){b(S,{Promise:Fr});var Dr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var zr=!i(function(){return S.Promise.reject(42).then(null,5).then(null,W)});var qr=i(function(){return S.Promise.call(3,W)});var Wr=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,W).then(null,W)}catch(n){return true}return t===r}(S.Promise);var Gr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var Hr=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};Hr.prototype=Promise.prototype;Hr.all=Promise.all;var Vr=a(function(){return!!Hr.all([1,2])});if(!Dr||!zr||!qr||Wr||!Gr||Vr){Promise=Fr;ne(S,"Promise",Fr)}if(Promise.all.length!==1){var Br=Promise.all;ne(Promise,"all",function all(e){return ce.Call(Br,this,arguments)})}if(Promise.race.length!==1){var Ur=Promise.race;ne(Promise,"race",function race(e){return ce.Call(Ur,this,arguments)})}if(Promise.resolve.length!==1){var $r=Promise.resolve;ne(Promise,"resolve",function resolve(e){return ce.Call($r,this,arguments)})}if(Promise.reject.length!==1){var Jr=Promise.reject;ne(Promise,"reject",function reject(e){return ce.Call(Jr,this,arguments)})}Mt(Promise,"all");Mt(Promise,"race");Mt(Promise,"resolve");Mt(Promise,"reject");Ce(Promise)}var Xr=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var Kr=Xr(["z","a","bb"]);var Zr=Xr(["z",1,"a","3",2]);if(s){var Yr=function fastkey(e,t){if(!t&&!Kr){return null}if(se(e)){return"^"+ce.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!Zr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var Qr=function emptyObject(){return Object.create?Object.create(null):{}};var en=function addIterableToMap(e,n,o){if(r(o)||re.string(o)){l(o,function(e){if(!ce.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(!se(o)){a=n.set;if(!ce.IsCallable(a)){throw new TypeError("bad map")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!ce.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(s){ce.IteratorClose(i,true);throw s}}}}};var tn=function addIterableToSet(e,n,o){if(r(o)||re.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(!se(o)){a=n.add;if(!ce.IsCallable(a)){throw new TypeError("bad set")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(s){ce.IteratorClose(i,true);throw s}}}}};var rn={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!ce.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ce.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t};i.prototype={isMapIterator:true,next:function next(){if(!this.isMapIterator){throw new TypeError("Not a MapIterator")}var e=this.i;var t=this.kind;var r=this.head;if(typeof this.i==="undefined"){return Ke()}while(e.isRemoved()&&e!==r){e=e.prev}var n;while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return Ke(n)}}this.i=void 0;return Ke()}};Me(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=Ae(this,Map,a,{_es6map:true,_head:null,_map:G?new G:null,_size:0,_storage:Qr()});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){en(Map,e,arguments[0])}return e};a=u.prototype;m.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t;var r=Yr(e,true);if(r!==null){t=this._storage[r];if(t){return t.value}else{return}}if(this._map){t=V.call(this._map,e);if(t){return t.value}else{return}}var n=this._head;var i=n;while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=Yr(e,true);if(t!==null){return typeof this._storage[t]!=="undefined"}if(this._map){return B.call(this._map,e)}var r=this._head;var n=r;while((n=n.next)!==r){if(ce.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head;var i=n;var a;var u=Yr(e,true);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}else{a=this._storage[u]=new r(e,t);i=n.prev}}else if(this._map){if(B.call(this._map,e)){V.call(this._map,e).value=t}else{a=new r(e,t);U.call(this._map,e,a);i=n.prev}}while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(ce.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},"delete":function(t){o(this,"delete");var r=this._head;var n=r;var i=Yr(t,true);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}else if(this._map){if(!B.call(this._map,t)){return false}n=V.call(this._map,t).prev;H.call(this._map,t)}while((n=n.next)!==r){if(ce.SameValueZero(n.key,t)){n.key=e;n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._map=G?new G:null;this._size=0;this._storage=Qr();var t=this._head;var r=t;var n=r.next;while((r=n)!==t){r.key=e;r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});Me(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!ce.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+ce.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=Ae(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:Qr()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){tn(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}else{var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=new rn.Map;e["[[SetData]]"]=t;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};m.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=Yr(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=Yr(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},"delete":function(e){r(this,"delete");var t;if(this._storage&&(t=Yr(e))!==null){var n=z(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=Qr()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return new f(this["[[SetData]]"].values())},entries:function entries(){r(this,"entries");u(this);return new f(this["[[SetData]]"].entries())},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);Me(i.prototype,i.prototype.values);var f=function SetIterator(e){this.it=e};f.prototype={isSetIterator:true,next:function next(){if(!this.isSetIterator){throw new TypeError("Not a SetIterator")}return this.it.next()}};Me(f.prototype);return i}()};var nn=S.Set&&!Set.prototype["delete"]&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(nn){S.Set=rn.Set}if(S.Map||S.Set){var on=a(function(){return new Map([[1,2]]).get(1)===2});if(!on){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=O(G.prototype);h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var an=new Map;var un=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var fn=an.set(1,2)===an;if(!un||!fn){ne(Map.prototype,"set",function set(e,r){t(U,this,e===0?0:e,r);return this})}if(!un){b(Map.prototype,{get:function get(e){return t(V,this,e===0?0:e)},has:function has(e){return t(B,this,e===0?0:e)}},true);m.preserveToString(Map.prototype.get,V);m.preserveToString(Map.prototype.has,B)}var sn=new Set;var cn=Set.prototype["delete"]&&Set.prototype.add&&Set.prototype.has&&function(e){e["delete"](0);e.add(-0);return!e.has(0)}(sn);var ln=sn.add(1)===sn;if(!cn||!ln){var pn=Set.prototype.add;Set.prototype.add=function add(e){t(pn,this,e===0?0:e);return this};m.preserveToString(Set.prototype.add,pn)}if(!cn){var vn=Set.prototype.has;Set.prototype.has=function has(e){return t(vn,this,e===0?0:e)};m.preserveToString(Set.prototype.has,vn);var yn=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(yn,this,e===0?0:e)};m.preserveToString(Set.prototype["delete"],yn)}var hn=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var bn=Object.setPrototypeOf&&!hn;var gn=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||bn||!gn){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=G.prototype;h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var dn=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var mn=Object.setPrototypeOf&&!dn;var On=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||mn||!On){var wn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new wn;if(arguments.length>0){tn(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=wn.prototype;h(S.Set.prototype,"constructor",S.Set,true);m.preserveToString(S.Set,wn)}var jn=new S.Map;var Sn=!a(function(){return jn.keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||jn.size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof jn.keys().next!=="function"||Sn||!hn){b(S,{Map:rn.Map,Set:rn.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}Me(Object.getPrototypeOf((new S.Map).keys()));Me(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var Tn=S.Set.prototype.has;ne(S.Set.prototype,"has",function has(e){return t(Tn,this,e)})}}b(S,rn);Ce(S.Map);Ce(S.Set)}var In=function throwUnlessTargetIsObject(e){if(!ce.TypeIsObject(e)){throw new TypeError("target must be an object")}};var En={apply:function apply(){return ce.Call(ce.Call,null,arguments)},construct:function construct(e,t){if(!ce.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!ce.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return ce.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){In(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){In(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(En,{ownKeys:function ownKeys(e){In(e);var t=Object.getOwnPropertyNames(e);if(ce.IsCallable(Object.getOwnPropertySymbols)){x(t,Object.getOwnPropertySymbols(e))}return t}})}var Pn=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(En,{isExtensible:function isExtensible(e){In(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){In(e);return Pn(function(){return Object.preventExtensions(e)})}})}if(s){var Cn=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return Cn(o,t,r)}if("value"in n){return n.value}if(n.get){return ce.Call(n.get,r)}return void 0};var Mn=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return Mn(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!ce.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return ae.defineProperty(o,r,{value:n})}else{return ae.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}}if(i.set){t(i.set,o,n);return true}return false};Object.assign(En,{defineProperty:function defineProperty(e,t,r){In(e);return Pn(function(){return Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){In(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){In(e);var r=arguments.length>2?arguments[2]:e;return Cn(e,t,r)},set:function set(e,t,r){In(e);var n=arguments.length>3?arguments[3]:e;return Mn(e,t,r,n)}})}if(Object.getPrototypeOf){var xn=Object.getPrototypeOf;En.getPrototypeOf=function getPrototypeOf(e){In(e);return xn(e)}}if(Object.setPrototypeOf&&En.getPrototypeOf){var Nn=function(e,t){var r=t;while(r){if(e===r){return true}r=En.getPrototypeOf(r)}return false};Object.assign(En,{setPrototypeOf:function setPrototypeOf(e,t){In(e);if(t!==null&&!ce.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===ae.getPrototypeOf(e)){return true}if(ae.isExtensible&&!ae.isExtensible(e)){return false}if(Nn(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var An=function(e,t){if(!ce.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){ne(S.Reflect,e,t)}}};Object.keys(En).forEach(function(e){An(e,En[e])});var Rn=S.Reflect.getPrototypeOf;if(c&&Rn&&Rn.name!=="getPrototypeOf"){ne(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(Rn,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){ne(S.Reflect,"setPrototypeOf",En.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){ne(S.Reflect,"defineProperty",En.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){ne(S.Reflect,"construct",En.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var _n=Date.prototype.toString;var kn=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return ce.Call(_n,this)};ne(Date.prototype,"toString",kn)}var Ln={anchor:function anchor(e){return ce.CreateHTML(this,"a","name",e)},big:function big(){return ce.CreateHTML(this,"big","","")},blink:function blink(){return ce.CreateHTML(this,"blink","","")},bold:function bold(){return ce.CreateHTML(this,"b","","")},fixed:function fixed(){return ce.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return ce.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return ce.CreateHTML(this,"font","size",e)},italics:function italics(){return ce.CreateHTML(this,"i","","")},link:function link(e){return ce.CreateHTML(this,"a","href",e)},small:function small(){return ce.CreateHTML(this,"small","","")},strike:function strike(){return ce.CreateHTML(this,"strike","","")},sub:function sub(){return ce.CreateHTML(this,"sub","","")},sup:function sub(){return ce.CreateHTML(this,"sup","","")}};l(Object.keys(Ln),function(e){var r=String.prototype[e];var n=false;if(ce.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){ne(String.prototype,e,Ln[e])}});var Fn=function(){if(!oe){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e($())!=="undefined"){return true}if(e([$()])!=="[null]"){return true}var t={a:$()};t[$()]=true;if(e(t)!=="{}"){return true}return false}();var Dn=a(function(){if(!oe){return true}return JSON.stringify(Object($()))==="{}"&&JSON.stringify([Object($())])==="[{}]"});if(Fn||!Dn){var zn=JSON.stringify;ne(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=ce.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(re.symbol(n)){return Nt({})(n)}else{return n}}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return zn.apply(this,o)})}return S});
/*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.6.0",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),j=function(e,t){return e===t&&(l=!0),0},D={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace($,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&D.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(j),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,"$1"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split("").sort(j).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var D,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,D=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return F.then(e)["catch"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",y.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}var be=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Te(){return!1}function Ce(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ee(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Se(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,we)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;while(l--)d=g=(s=be.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(P)||[""]).length;while(l--)if(d=g=(s=be.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click",we),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Se(this,e,Ce),!1},trigger:function(){return Se(this,e),!0},_default:function(){return!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){S.event.remove(this,e,n,t)})}});var ke=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function je(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function qe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function He(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Ae.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),He(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,"script"),De)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,qe),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(Ne,""),u,l))}return n}function Oe(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return He(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Pe=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Re=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Me=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ie=new RegExp(ne.join("|"),"i");function We(e,t,n){var r,i,o,a,s=e.style;return(n=n||Re(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Pe.test(a)&&Ie.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Fe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var Be=["Webkit","Moz","ms"],$e=E.createElement("div").style,_e={};function ze(e){var t=S.cssProps[e]||_e[e];return t||(e in $e?e:_e[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Be.length;while(n--)if((e=Be[n]+t)in $e)return e}(e)||e)}var Ue=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ve={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"};function Ye(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Qe(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Je(e,t,n){var r=Re(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=We(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Pe.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Qe(e,t,n||(i?"border":"content"),o,r,a)+"px"}function Ke(e,t,n,r,i){return new Ke.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Xe.test(t),l=e.style;if(u||(t=ze(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Xe.test(t)||(t=ze(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),"normal"===i&&t in Ge&&(i=Ge[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ue.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,u,n):Me(e,Ve,function(){return Je(e,u,n)})},set:function(e,t,n){var r,i=Re(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Qe(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Qe(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Ye(0,t,s)}}}),S.cssHooks.marginLeft=Fe(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-Me(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Ye)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Re(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=Ke).prototype={constructor:Ke,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=Ke.propHooks[this.prop];return e&&e.get?e.get(this):Ke.propHooks._default.get(this)},run:function(e){var t,n=Ke.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ke.propHooks._default.set(this),this}}).init.prototype=Ke.prototype,(Ke.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[ze(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ke.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=Ke.prototype.init,S.fx.step={};var Ze,et,tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function ot(){et&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(ot):C.setTimeout(ot,S.fx.interval),S.fx.tick())}function at(){return C.setTimeout(function(){Ze=void 0}),Ze=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ut(e,t,n){for(var r,i=(lt.tweeners[t]||[]).concat(lt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function lt(o,e,t){var n,a,r=0,i=lt.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=Ze||at(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:Ze||at(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=lt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ut,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(lt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],lt.tweeners[n]=lt.tweeners[n]||[],lt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],rt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=ut(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=lt(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&it.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(st(r,!0),e,t,n)}}),S.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(Ze=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),Ze=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){et||(et=!0,ot())},S.fx.stop=function(){et=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},tt=E.createElement("input"),nt=E.createElement("select").appendChild(E.createElement("option")),tt.type="checkbox",y.checkOn=""!==tt.value,y.optSelected=nt.selected,(tt=E.createElement("input")).value="t",tt.type="radio",y.radioValue="t"===tt.value;var ct,ft=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ct={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=ft[t]||S.find.attr;ft[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=ft[o],ft[o]=r,r=null!=a(e,t,n)?o:null,ft[o]=i),r}});var pt=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(P)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,gt(this)))});if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,gt(this)))});if(!arguments.length)return this.attr("class","");if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,gt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=vt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=gt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+ht(gt(n))+" ").indexOf(t))return!0;return!1}});var yt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(yt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:ht(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var mt=/^(?:focusinfocus|focusoutblur)$/,xt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!mt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,mt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,xt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,xt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var bt=C.location,wt={guid:Date.now()},Tt=/\?/;S.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Ct=/\[\]$/,Et=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function At(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||Ct.test(n)?i(n,t):At(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)At(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)At(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&kt.test(this.nodeName)&&!St.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}});var Nt=/%20/g,jt=/#.*$/,Dt=/([?&])_=[^&]*/,qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,Ht=/^\/\//,Ot={},Pt={},Rt="*/".concat("*"),Mt=E.createElement("a");function It(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Wt(t,i,o,a){var s={},u=t===Pt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function Ft(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Mt.href=bt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ft(Ft(e,S.ajaxSettings),t):Ft(S.ajaxSettings,e)},ajaxPrefilter:It(Ot),ajaxTransport:It(Pt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=qt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||bt.href)+"").replace(Ht,bt.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(P)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Mt.protocol+"//"+Mt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Wt(Ot,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Lt.test(v.type),f=v.url.replace(jt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Nt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Tt.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Dt,"$1"),o=(Tt.test(f)?"&":"?")+"_="+wt.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+Rt+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Wt(Pt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray("script",v.dataTypes)&&S.inArray("json",v.dataTypes)<0&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Bt={0:200,1223:204},$t=S.ajaxSettings.xhr();y.cors=!!$t&&"withCredentials"in $t,y.ajax=$t=!!$t,S.ajaxTransport(function(i){var o,a;if(y.cors||$t&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Bt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var _t,zt=[],Ut=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||S.expando+"_"+wt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Ut.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ut,"$1"+r):!1!==e.jsonp&&(e.url+=(Tt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,zt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((_t=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===_t.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=ht(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=Fe(y.pixelPosition,function(e,t){if(t)return t=We(e,n),Pe.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Xt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Xt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Vt=C.jQuery,Gt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Gt),e&&C.jQuery===S&&(C.jQuery=Vt),S},"undefined"==typeof e&&(C.jQuery=C.$=S),S});
/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return n.indexOf(t)==-1&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n=i[e]=i[e]||{};return n[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return n!=-1&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var r=i[o],s=n&&n[r];s&&(this.off(e,r),delete n[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e){if(Array.isArray(e))return e;var t="object"==typeof e&&"number"==typeof e.length;return t?d.call(e):[e]}function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);var s=e;return"string"==typeof e&&(s=document.querySelectorAll(e)),s?(this.elements=n(s),this.options=i({},this.options),"function"==typeof t?r=t:i(this.options,t),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(s||e))}function r(e){this.img=e}function s(e,t){this.url=e,this.element=t,this.img=new Image}var h=e.jQuery,a=e.console,d=Array.prototype.slice;o.prototype=Object.create(t.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&u[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var u={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},o.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},o.prototype.addBackground=function(e,t){var i=new s(e,t);this.images.push(i)},o.prototype.check=function(){function e(e,i,n){setTimeout(function(){t.progress(e,i,n)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},o.makeJQueryPlugin=function(t){t=t||e.jQuery,t&&(h=t,h.fn.imagesLoaded=function(e,t){var i=new o(this,e,t);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
/*! lz-string-1.3.3-min.js | (c) 2013 Pieroxy | Licensed under a WTFPL license */
var LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(e==null)return"";var t="";var n,r,i,s,o,u,a;var f=0;e=LZString.compress(e);while(f<e.length*2){if(f%2==0){n=e.charCodeAt(f/2)>>8;r=e.charCodeAt(f/2)&255;if(f/2+1<e.length)i=e.charCodeAt(f/2+1)>>8;else i=NaN}else{n=e.charCodeAt((f-1)/2)&255;if((f+1)/2<e.length){r=e.charCodeAt((f+1)/2)>>8;i=e.charCodeAt((f+1)/2)&255}else r=i=NaN}f+=3;s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+LZString._keyStr.charAt(s)+LZString._keyStr.charAt(o)+LZString._keyStr.charAt(u)+LZString._keyStr.charAt(a)}return t},decompressFromBase64:function(e){if(e==null)return"";var t="",n=0,r,i,s,o,u,a,f,l,c=0,h=LZString._f;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length){u=LZString._keyStr.indexOf(e.charAt(c++));a=LZString._keyStr.indexOf(e.charAt(c++));f=LZString._keyStr.indexOf(e.charAt(c++));l=LZString._keyStr.indexOf(e.charAt(c++));i=u<<2|a>>4;s=(a&15)<<4|f>>2;o=(f&3)<<6|l;if(n%2==0){r=i<<8;if(f!=64){t+=h(r|s)}if(l!=64){r=o<<8}}else{t=t+h(r|i);if(f!=64){r=s<<8}if(l!=64){t+=h(r|o)}}n+=3}return LZString.decompress(t)},compressToUTF16:function(e){if(e==null)return"";var t="",n,r,i,s=0,o=LZString._f;e=LZString.compress(e);for(n=0;n<e.length;n++){r=e.charCodeAt(n);switch(s++){case 0:t+=o((r>>1)+32);i=(r&1)<<14;break;case 1:t+=o(i+(r>>2)+32);i=(r&3)<<13;break;case 2:t+=o(i+(r>>3)+32);i=(r&7)<<12;break;case 3:t+=o(i+(r>>4)+32);i=(r&15)<<11;break;case 4:t+=o(i+(r>>5)+32);i=(r&31)<<10;break;case 5:t+=o(i+(r>>6)+32);i=(r&63)<<9;break;case 6:t+=o(i+(r>>7)+32);i=(r&127)<<8;break;case 7:t+=o(i+(r>>8)+32);i=(r&255)<<7;break;case 8:t+=o(i+(r>>9)+32);i=(r&511)<<6;break;case 9:t+=o(i+(r>>10)+32);i=(r&1023)<<5;break;case 10:t+=o(i+(r>>11)+32);i=(r&2047)<<4;break;case 11:t+=o(i+(r>>12)+32);i=(r&4095)<<3;break;case 12:t+=o(i+(r>>13)+32);i=(r&8191)<<2;break;case 13:t+=o(i+(r>>14)+32);i=(r&16383)<<1;break;case 14:t+=o(i+(r>>15)+32,(r&32767)+32);s=0;break}}return t+o(i+32)},decompressFromUTF16:function(e){if(e==null)return"";var t="",n,r,i=0,s=0,o=LZString._f;while(s<e.length){r=e.charCodeAt(s)-32;switch(i++){case 0:n=r<<1;break;case 1:t+=o(n|r>>14);n=(r&16383)<<2;break;case 2:t+=o(n|r>>13);n=(r&8191)<<3;break;case 3:t+=o(n|r>>12);n=(r&4095)<<4;break;case 4:t+=o(n|r>>11);n=(r&2047)<<5;break;case 5:t+=o(n|r>>10);n=(r&1023)<<6;break;case 6:t+=o(n|r>>9);n=(r&511)<<7;break;case 7:t+=o(n|r>>8);n=(r&255)<<8;break;case 8:t+=o(n|r>>7);n=(r&127)<<9;break;case 9:t+=o(n|r>>6);n=(r&63)<<10;break;case 10:t+=o(n|r>>5);n=(r&31)<<11;break;case 11:t+=o(n|r>>4);n=(r&15)<<12;break;case 12:t+=o(n|r>>3);n=(r&7)<<13;break;case 13:t+=o(n|r>>2);n=(r&3)<<14;break;case 14:t+=o(n|r>>1);n=(r&1)<<15;break;case 15:t+=o(n|r);i=0;break}s++}return LZString.decompress(t)},compress:function(e){if(e==null)return"";var t,n,r={},i={},s="",o="",u="",a=2,f=3,l=2,c="",h=0,p=0,d,v=LZString._f;for(d=0;d<e.length;d+=1){s=e.charAt(d);if(!Object.prototype.hasOwnProperty.call(r,s)){r[s]=f++;i[s]=true}o=u+s;if(Object.prototype.hasOwnProperty.call(r,o)){u=o}else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}r[o]=f++;u=String(s)}}if(u!==""){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}}n=2;for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}while(true){h=h<<1;if(p==15){c+=v(h);break}else p++}return c},decompress:function(e){if(e==null)return"";if(e=="")return null;var t=[],n,r=4,i=4,s=3,o="",u="",a,f,l,c,h,p,d,v=LZString._f,m={string:e,val:e.charCodeAt(0),position:32768,index:1};for(a=0;a<3;a+=1){t[a]=a}l=0;h=Math.pow(2,2);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(n=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 2:return""}t[3]=d;f=u=d;while(true){if(m.index>m.string.length){return""}l=0;h=Math.pow(2,s);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(d=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 2:return u}if(r==0){r=Math.pow(2,s);s++}if(t[d]){o=t[d]}else{if(d===i){o=f+f.charAt(0)}else{return null}}u+=o;t[i++]=f+o.charAt(0);r--;f=o;if(r==0){r=Math.pow(2,s);s++}}}};if(typeof module!=="undefined"&&module!=null){module.exports=LZString}
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/dist/FileSaver.js */
(function(a,b){if("function"==typeof define&&define.amd)define([],b);else if("undefined"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){"use strict";function b(a,b){return"undefined"==typeof b?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open("GET",a),d.responseType="blob",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error("could not download file")},d.send()}function d(a){var b=new XMLHttpRequest;b.open("HEAD",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(c){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement("a");g=g||b.name||"download",j.download=g,j.rel="noopener","string"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target="_blank")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:"msSaveOrOpenBlob"in navigator?function(f,g,h){if(g=g||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement("a");i.href=f,i.target="_blank",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof b)return c(b,d,e);var h="application/octet-stream"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&"undefined"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,"undefined"!=typeof module&&(module.exports=g)});
/*! seedrandom.js v2.3.3 | (c) 2013 David Bau, all rights reserved. | Licensed under a BSD-style license */
!function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\0"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[],r=l(k(f?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");
/*! console_hack.js | (c) 2015 Thomas Michael Edwards | Licensed under SugarCube's Simple BSD license */
!function(){for(var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],length=methods.length,noop=function(){},console=window.console=window.console||{};length--;){var method=methods[length];console[method]||(console[method]=noop)}}();
}else{document.documentElement.setAttribute("data-init", "lacking");}
</script>
<style id="style-normalize" type="text/css">/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}</style>
<style id="style-init-screen" type="text/css">@-webkit-keyframes init-loading-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes init-loading-spin{0%{-o-transform:rotate(0);transform:rotate(0)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes init-loading-spin{0%{-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}#init-screen{display:none;z-index:500000;position:fixed;top:0;left:0;height:100%;width:100%;font:28px/1 Helmet,Freesans,sans-serif;font-weight:700;color:#eee;background-color:#111;text-align:center}#init-screen>div{display:none;position:relative;margin:0 auto;max-width:1136px;top:25%}html[data-init=lacking] #init-screen,html[data-init=loading] #init-screen,html[data-init=no-js] #init-screen{display:block}html[data-init=lacking] #init-lacking,html[data-init=no-js] #init-no-js{display:block;padding:0 1em}html[data-init=no-js] #init-no-js{color:red}html[data-init=loading] #init-loading{display:block;border:24px solid transparent;border-radius:50%;border-top-color:#7f7f7f;border-bottom-color:#7f7f7f;width:100px;height:100px;-webkit-animation:init-loading-spin 2s linear infinite;-o-animation:init-loading-spin 2s linear infinite;animation:init-loading-spin 2s linear infinite}html[data-init=loading] #init-loading>div{text-indent:9999em;overflow:hidden;white-space:nowrap}html[data-init=loading] #passages,html[data-init=loading] #ui-bar{display:none}</style>
<style id="style-font" type="text/css">@font-face{font-family:tme-fa-icons;src:url('data:application/octet-stream;base64,d09GRgABAAAAADLAAA8AAAAAWHgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABWAAAADsAAABUIIslek9TLzIAAAGUAAAAQwAAAFY+IEkIY21hcAAAAdgAAAG8AAAF3rob9jFjdnQgAAADlAAAABMAAAAgBtX/BGZwZ20AAAOoAAAFkAAAC3CKkZBZZ2FzcAAACTgAAAAIAAAACAAAABBnbHlmAAAJQAAAI6gAADv+gJOpzGhlYWQAACzoAAAAMwAAADYY1IZaaGhlYQAALRwAAAAgAAAAJAfCBClobXR4AAAtPAAAAJEAAAFMBfb/0WxvY2EAAC3QAAAAqAAAAKhjiHI5bWF4cAAALngAAAAgAAAAIAFjDA9uYW1lAAAumAAAAY0AAAL94+zEpHBvc3QAADAoAAACHAAAA11cG/YjcHJlcAAAMkQAAAB6AAAAhuVBK7x4nGNgZGBg4GIwYLBjYHJx8wlh4MtJLMljkGJgYYAAkDwymzEnMz2RgQPGA8qxgGkOIGaDiAIAJjsFSAB4nGNgZNZgnMDAysDAVMW0h4GBoQdCMz5gMGRkAooysDIzYAUBaa4pDA4vGF4EMgf9z2KIYg5imAYUZgTJAQDSIQumAHic7dTVbltRAETR7dpNCikzQ8rMzMxt/M39mHnsU1/TfZz5jFpaV7pXJunMDLAZmOqaZjD5y4Tx+uPTyeL5lG2L5zN+L94zG8+ztr7ulXH1fra4bvK9M79xiWW2sNXPbWeFHexkF7vZw172sZ8DHOQQhznCUY5xnBOc5BSnOcNZVjnHeS5wkUtc5gpX/f3r3OAmt7jNHe5yj/s84CGPeMwTnvKM57zgJa94zRve8o73fOAjn/jMF77yje/84Ce/WGPun1zi/2tlXKbp3Xyc44bFyZanSWokJDXOOjXSk/LUSXn+pEwCKTNBaqQqZU5IjX+XMjukTBEp80TKZJEyY6RMGylzR8oEkjKLpEwlKfNJyqSSMrOkTC8pc0zKRJMy26RMOSnzTsrkk7IDpGwDKXtByoaQsiukbA0p+0PKJpGyU6RsFyl7RmosQcrukbKFpOwjKZtJyo6Ssq2k7C0pG0zKLpOy1aTsNymbTsrOk7L9pNwBUi4CKbeBlCtByr0g5XKQckNIuSak3BVSLgwpt4aUq0PK/SHlEpFyk0i5TqTcKVIuFim3i5QrRso9I+WykXLjXOYNzP8BuAPUwHicY2BAAxIQyBz0PwuEARJsA90AeJytVml300YUHXlJnIQsJQstamHExGmwRiZswYAJQbJjIF2crZWgixQ76b7xid/gX/Nk2nPoN35a7xsvJJC053Cak6N3583VzNtlElqS2AvrkZSbL8XU1iaN7DwJ6YZNy1F8KDt7IWWKyd8FURCtltq3HYdERCJQta6wRBD7HlmaZHzoUUbLtqRXTcotPekuW+NBvVXffho6yrE7oaRmM3RoPbIlVRhVokimPVLSpmWo+itJK7y/wsxXzVDCiE4iabwZxtBI3htntMpoNbbjKIpsstwoUiSa4UEUeZTVEufkigkMygfNkPLKpxHlw/yIrNijnFawS7bT/L4vead3OT+xX29RtuRAH8iO7ODsdCVfhFtbYdy0k+0oVBF213dCbNnsVP9mj/KaRgO3KzK90IxgqXyFECs/ocz+IVktnE/5kkejWrKRE0HrZU7sSz6B1uOIKXHNGFnQ3dEJEdT9kjMM9pg+Hvzx3imWCxMCeBzLekclnAgTKWFzNEnaMHJgJWWLKqn1rpg45XVaxFvCfu3a0ZfOaONQd2I8Ww8dWzlRyfFoUqeZTJ3aSc2jKQ2ilHQmeMyvAyg/oklebWM1iZVH0zhmxoREIgIt3EtTQSw7saQpBM2jGb25G6a5di1apMkD9dyj9/TmVri501PaDvSzRn9Wp2I62AvT6WnkL/Fp2uUiRen66Rl+TOJB1gIykS02w5SDB2/9DtLL15YchdcG2O7t8yuofdZE8KQB+xvQHk/VKQlMhZhViFZAYq1rWZbJ1awWqcjUd0OaVr6s0wSKchwXx76Mcf1fMzOWmBK+34nTsyMuPXPtSwjTHHybdT2a16nFcgFxZnlOp1mW7+s0x/IDneZZntfpCEtbp6MsP9RpgeVHOh1jeUELmnTfwZCLMOQCDpAwhKUDQ1hegiEsFQxhuQhDWBZhCMslGMLyYxjCchmGsLysZdXUU0nj2plYBmxCYGKOHrnMReVqKrlUQrtoVGpDnhJulVQUz6p/ZaBePPKGObAWSJfIml8xzpWPRuX41hUtbxo7V8Cx6m8fjvY58VLWi4U/Bf/V1lQlvWLNw5Or8BuGnmwnqjapeHRNl89VPbr+X1RUWAv0G0iFWCjKsmxwZyKEjzqdhmqglUPMbMw8tOt1y5qfw/03MUIWUP34NxQaC9yDTllJWe3grNXX27LcO4NyOBMsSTE38/pW+CIjs9J+kVnKno98HnAFjEpl2GoDrRW82ScxD5neJM8EcVtRNkja2M4EiQ0c84B5850EJmHqqg3kTuGGDfgFYW7BeSdconqjLIfuRezzKKT8W6fiRPaoaIzAs9kbYa/vQspvcQwkNPmlfgxUFaGpGDUV0DRSbqgGX8bZum1Cxg70Iyp2w7Ks4sPHFveVkm0ZhHykiNWjo5/WXqJOqtx+ZhSX752+BcEgNTF/e990cZDKu1rJMkdtA1O3GpVT15pD41WH6uZR9b3j7BM5a5puuiceel/TqtvBxVwssPZtDtJSJhfU9WGFDaLLxaVQ6mU0Se+4BxgWGNDvUIqN/6v62HyeK1WF0XEk307Ut9HnYAz8D9h/R/UD0Pdj6HINLs/3mhOfbvThbJmuohfrp+g3MGutuVm6BtzQdAPiIUetjrjKDXynBnF6pLkc6SHgY90V4gHAJoDF4BPdtYzmUwCj+Yw5PsDnzGHQZA6DLeYw2GbOGsAOcxjsMofBHnMYfMGcdYAvmcMgZA6DiDkMnjAnAHjKHAZfMYfB18xh8A1z7gN8yxwGMXMYJMxhsK/p1jDMLV7QXaC2QVWgA1NPWNzD4lBTZcj+jheG/b1BzP7BIKb+qOn2kPoTLwz1Z4OY+otBTP1V050h9TdeGOrvBjH1D4OY+ky/GMtlBr+MfJcKB5RdbD7n74n3D9vFQLkAAQAB//8AD3icrXsLcFzlleZ//v+++nb37dfte/VotVrdrW5JltuKpO6WJVluPyXbsmOEbGRjO4KVjWPZlsM4QIU4IYGlgCE2yxqKIQkJg2GreKQCTCZb1CZkiswjzOwOmSTATNVWTZLdDUwSMrVDsomD23vOf69assFAqgbk+773P4//nPOdc/5mwNjFl8WjosbaWblmxiOmIlTGYXzb11M7Z2ohAMbZCcZ5iG9prZl4whfwGju05xtttitUdwXYEUgkbQtWga5lC+XBaqJI285qpb8dVEc8Gnm5L5QM/f58yAlB399a7dD0mWAmdAqaMvBmKPKX9TdDwSjod9yhx03FAPcvI6Gk2lV33XoXUtKgL8C6Wa0WSzXbVjhg6JoqIPShCK0FOvOuE48K1V4B1VUQAVevugmP7Fz2CmTzW5/8+ZGP/+Kp7h/8oI4MuOZ7M5B9IvujH2Wf+PnCAjzn8ZK6AieMKRcvXnxWWSWCzGARlPcqtqs21WZzEBFgYIVDAYWzVJIrXBlH+hXGlWNM00GAJmYZ8sKBzTJFVZVppijqDFMVdTIWLa0o5JrdaHusPZGIG1IjFhQGK2mAZEe56kJnR1bTY7ZT7eivFGODBTdma3pHtlCNDVbwmgMHx/aO4R8ffeet5/ZCG6TfuV03IaSJU3oIzKsGO9+5PV+BwU5xqnOQx1aO8fW71yvD9fPn55/fA22PmsaFvfSgwZ8wzPiFvZ2DUMnzJ2hHVDMmHucPsSRrq7UQo4DMAV/AW7CANw/Zru3NIx20bBEpXwukArlxxOPReibaG63/SyQyiftzcBy3k1HuOHgjEgFHnkYfh4VodDJC4138Ff8hv5PlWbrWmm2O6grNEgGNCWGnbFtRm1Z04gzQPPWvkqMWF4eWU8DB267Df+gNe84bBvfRpfNI5Ny5yAmHDh5/PPLuByMlekDS9DsRR73nWHetwBShSO5PqCBQONO4E2wGlSvYZG6gMzeQ09SWFZC0tWION3oOVVXGTbGM+hrAzQj0O25yoN8R8YzzRsaZdzLwhpsGPEm783hAJ9+kq286eDX5pn/VydDjvk7i8EuchU21JJ3DNOqFzeABmywPcNXxhu/wB+3whrqwVw7Cn1j8vPfdDH6O7PR3fDV/Cb85wua/waSit309grZJHHOhHEQ9CA7zTGVCUb0ZvXzc1lrRe5Af+4An0aSL9op0IU9y6vRFtAYGKy7KJGFbQrdg2dXqGAwWilld0zUy9xLqd6A/zeFuy7gzYFmBOwOhZ6NNhZakm8YTI7S1pyM1mM032V26qevXGlzZ8+TKvROlB/BBkO9ACDalB7OZuBnuC5tRcAItpalENNOfhajVH1A2a1HjbHZ4N4r54oWLz4qPoe4jrMo2sonapm5QRQBQ3XycKVxwRRxjQuVCnWc6mrzOZ5FvBiraOmia5FubYRpok8n0ioRTKOQMNbWiszxYWAFZrQ1sB+dDJTFYghzyiBN3oB857ndIAha4Se/+YGUtjAkXXUO2xPE2eoe3TWPeMOXmzNi+j9w1HghvVbSAmu4c6nFac6MgbzXFU2baDr1241+98TfHtU/9t7df+MzU4msmfPYj06Wbw8Gqohda0/FkSyiyvtPGG/FsMKq1pLqmPvndkye/+y+08eYIHEJZpFmJra2Nop/VWuKcCwPvgRhnGlOFps6iIdAEmFVAKh53jblZyBU6nAFdbfX03tGwioZ9oGnEyDSWTQCyFzhoR+s/jdjgWLmc3L2K21zEmXCsM5aDm4g9Ny5v0PZVb+dY9Rcd/sl5eTiPj0nTaeiU+BhhW2qbuzJcUy2Nc2gCrjBkxWCqZiArGgOuwSzjAlDb5L91XfpvfYbpij6ZRIUWYoVcLqC2+UqNLddsMrekY3GZztVl2uQjpl4xjedIM+Uybc/r5viShuHgcgXuwQtpuoMHz8utCe/s8S+Y/7xMaYu2DX1yDrez3lp3cyyKdop+HLcLi878Uh9SKOSlj73cOIUFRVKVKHhaSS9JP452RCcYoJ3w85bz8Ckp9VN4xeZj9atpH4FnPCV4OtiDNIVYCrWwsbauK81VxUlaQnA+riFBisoUsiU0LbQpASCmmRAwg1MNJoH19uQ6WpriUV1jIQjphA5QjosiTfiy1tF+kPJKMTFYpAu6lkx40odnTv7VjYtC/QtTJyGH9HmMnKamGrcaqmaagRsMUwR9WeLmwsQREvIRevSvYa8uVFXo9Sc0w5A8/Rp5+jcxhXLuYAOIx/pbY+ggFp0FV8lNoLNAEQvyDkwBZR9T1ZC6xR0qFgsybix3DJcR7iIGwCsCHHQM0nYKVSBXQZPnqG7KDZiqrn8K524gpN9ghAx42k4GsvF3nohnA0kbnglkC9mrl7h4Db2TommKcVE1QOPRd97K5WJxsKO5nIjHbHtx/og3kK8iWys1he/EkKlqCbFOB6iKQp5Q5Yp6DB0AsjmPvHEFSGsoFraPaVpI2zLc2lmudErjJ/eeQwbKPoRBZulcwhwXYc6i1SdiEpiCF+KrFOIrAzKaHdhQ79tw4MAGuJv4rt8sQQu80jloGnnDfNVJBa+vn1WjSg1d8NHrg44FbTgdJ5+T77yy/gDI5wY7633yTbI7+CdyMDyEL2paDd0BvZjyfIYXH2/H+aqjDfXUisgnk3rFYMePoyZBegWanQpM5hKdlUSU1JnoQH2iG1d90IYADi0JPV2/oxMEeB7apm+aBngFw/ObMjzHzv7dgzyOh48fHZnmO9c8Wv+2RAGwHiP20UNnzx46mvYxyaMixDpZX22lQqQgRDqG4kYcMo92cpypAOo0Ti+iSYXJRGc5l8wvQhPfqpE0SYa7nDwkeQyh26OOlbecqVumoCwJ8+mDm+9/5T4eOyOt+4wk8WjavYTIG+7nD5Li2cWv8zGkMYoz51q2u3Y1JQSwfcumSn9JUxW0CZIWQ5isqKCo8zoGFPybx/lyHD2w4AaCBw7Ap1HIxAaHyZlr1tXG1owMt7h5Ox5QmxF4Iv6vDhaQoTFAYADuYIlnLa7b7RwtiOBDtVK1dbyCMXXxn5azOIIKfLFKaQP9K3HKIMYEQosvhkIWH23TQ9wIpCq9M4WxycnJsQIUYrEJ/bPGuOZohfHVzdmMaAmHm418c7DU3xdoyYPebFktPJtpHu7fefjw4R0VHiNTa06ZUTPe09a1sdTUVNrYtbo3nth11VW7tBa1d/U1a1t71rdG2u1IJNkWDYdbUs0pnnFT+OloWzISsdsjqVpvy9prqrNjed41POfPx2+J7TIXaWP5Wgf5bvToBEvpppQYOXPOJoda4gTQE6TsNK8sAvUSSHBFygfnfM9wL+8aK/Bddv0tZ8SufyKZ7ml7s20iCWdsPpPu4YVaXuur/2M6WX8riReTE21vtPUAnn4iyTxdf0vJ+/QM0pwsUL4D5BmUBQEeXpaU4W6RtExzN1In7eT9qHPpIoUdqAzSrdyHIPo1JNRps1uioCWJyIm2U/JG8oO4aZMXozF8b4RupRd5JJv7Nn8ZeUyxjlrakhJHcwO2gHMUDgGLR0MmS0GrIoMRWos0K81LUnPZYgmkw6sM8HtCoQTaT9y0Wu3f/MZuCYfijhMPhUVQNdL2hY8kMroS/8UvEqqeSfC/xzPV07k3vsqyrL+2ykYnhJjEz45OLIdbu4ncrbrWhImzltU7oqqaXAEdMWiHxPsSdvuF70K6/xf6FejjL13YBvFVP+UXrkwnyelZjBcltoLypQIoEmsoiDUw4C2QFS/I/J6yx5ybWOOqaMad0kJlKo+ElAdLqvRTMqOsgucuM64j3hgHU1H1mIkQ084Oje3eXT1lZwL1nwaD0BZMNfFTcHpv+sf7v6LEo4oZMlRbFNqH9tb60nEN0UkQ0mYawZNpR878eFuD1lWsl/Jb9J5iMbPlDKnkh3raBmS66U1M9Jm5rKUmMel1dKLOcxrVSgf5dJqU4o0g0pJyTlV37x4bytpCATOG8VUT4+m9cPoURiakE34ZMes/wbB0Roun+2p7h9oLSlwzQqZq2eIr+xe2/Rhp5QF8hHn5Hh/FfM9ibs32UrNG+l22ZbrnJ8N+fERAcD6YCp6nuPc2Aq/vWXiMfzKaye/BDfzTLPwe33MT8ns4P/y0uiLBdyZw3qRvNvGZegjF6H+escXvreOnkD7zm7IkADTbJEkU4sdw1jmwzpTj42smHLB82ijenjfx9YsXkccR+B5+I1azGtQk+4maTpnLlsBL75E7O1IPea+mzfPmUwQt00FJoG+nPxN/zruZzZprTljyx2GpXiHdYWBZtcINeB+2xVP16/GT9euDwf00TbqgK5gK7QvCmfp/wPn15WDa3BcM1l/Hy8F9wZQ31nf4Q2IjjrXyG+BnzXnMmqXiTuB5CLa01gINjvb8mesSTwHuSAEtzm8anp+uvwbdprkfhUs0wCNIxH6TP1l/vf6aPDThK0TXI5I+tjj+SX/8wIcaPxWX4y+CqsCiEIiAIzhsKrgfh+6qv+4L4RETPl6/zqMKukki9AA96OseZb3Zk7UKVKxZKt65tpR1J9p1sTGgP5Z4ah+KEzl73R/xEfr+I8H5fchlN/Jr0n0c3fSGkrz+vbhd5m2ZWltThDeKUaKh3WTZXWauS+WomBdMkjGvOCRuT9YfcIZxk0x24/5cT3q8redxe8TpTsLn03b9LIaFo/I0eQ7uxtjQm6rffI4elnTcJfbwX/qRFyG+Vw+SaJdyFIpugk0WXCcnaZFo1323viNAWHZPvk1+ugfjTf2sbcPR5LDT442bhwPj6Z5z9qi9wr8B85Ji51yXb3tISxlpSUtaZEYnFX8ZbHI6C8vk4ll2h5/YdRQbM0CUbSmXHsd5rH5zWz7fBnc/5iA1NLANwyQZ2+5JjiYfQ4mle+BxJA1prT9g+770dv4zTz9RnTPp+JlY4DJKoroOucmyT4fnsGIeFC3H9EtmB+qnGyP6413tPvs4BhIwipskDKakeIg+KKTgbl92JBkkHn1J3c8t+9ia2vBKhMFkGBJtEjrGDIzKE1SeAgTJiDAVRYpKmSGwMlksJor5gUWgjKlXYS0gurS4neaYflXJnaWBUjDKNAVhkWoF1WhHz7uJ2PapE8NHJkulySPD62/qVmLapMq10a997JqvnphQarc8dO3UQ2smYr38pfOWszK6fTs+eBKfHy4j8t2uWNrWnbDx5CNfe+TkxrHVE/EEW4ynxM9H2FhtpAeE2tnGFUH1J4xXChxD5hACLNXbLgOA3WU353rI37Y44SipbwdxwED/mEC0rOmuIzmlGkw7SBzNxZ6NN3519+zXRhV1Uosp3TdtGD68s4eXJo8uzHVtjyXc85gC9MYmRh+euuaRk+vhAG43Tm3RLGW7Clp52Oesq3N7dKVjnW9KxCdWjyFvi/nUs+Ja5CnPxtn+2t4NnVwLrELw76JqDMz1MacMGJoR0I5RVsA1lR/DLEdonLJLQWnOMcSamKlrszLnWWZ3mzcVOjsrnYWynTfVNmQ6aQFxrWtL9SQtgjqsojbxf5lp+qquSF1rVGyk02qZZEEKRkPdlv9ff3LVQ6MTFMas8xSft3fNVbd+vqg1KaF5w7RwBsirUye24UVXDS3oIcj/nz+56mF6qQlUAQ++gGoNytcxFG7P98DWMXMoHIL/6l/Z7p1riv8ko2oiyiru129WsSrmUjO1XdtWc0Pr7miOoWOV9YUQ07WQPmsCisWYDge5puAUAI3NIk6EQACmaQ+BGRaAwOSemV1TH90+vnlDrZBNFOi/nEUlLL96lYx5VZLqB5zDQLFQzGm6KuUX89L6YqxRuaPsCwXYTlJE1EVJt9ycWTo8bereoW7Wv38ewfOzmgI/N42Kn53LatjTxUCv85zbEyg+Y5hTcDddq99M2ysc8/51lABfjZ++8KvSxvUlnpCj7U+mIG3vR8yhXSbXEbaB3cDmatdds4lrhi9Z8hskNo2hkI+RQHWN6fMIUwKGFZiNhDmCNq6BoR1gejCoTzNdD86woB6cPDh33YFr91w99dHJLePr1tp525NylKZkzJtthLplN+ADzhOxjpiN1trRPwb/vhKfqIcMg8Mr3DDqd38o4cM36y9KWa+Tsn7v4/ocj134Vcg2TZsf/ABFKH4tYwrtObZYYxoF3QiQC+PjATwUho5+W8MkQlOOqUDxnlMNjZpsfB8zjJCxZe2afKeTjXeuboqT2XcOlsACB6XROFhWch7AeNy/VsZfx4fO5Aj8EjTVRPjLdtrmTS1NX7Azce6kmjZnnHf+1iuBiG0duzsmQTiZPzfjEoTGAqZ7xqt/nmmai8gXOWb0/sG9z8vyyPNOZjKDf9DlRgmQR93keVlHOU/9RTkfH8W8ieTQzWpsc21DGRM0Xw4soAUWDEDPtMB0oS9I5qeXC0PhMySPyTWjuYFctn9JEgWLp6FSXdz71TeSgzuQBmnXVHPXGqWhIhXkF+H2lQXxVqiSO5OthN9CQQSazmBOhdycwSgoZRJvQ28Yz8SVltDiwd3PUxMLN9De1dWehinH5783RvA9xhpyoHgnWAfGvE3sqtqOFT25rGIoMB4GBa0NAaepg2KYyiwVijQqFKGtopEeUFFYgQCboj0jZ8cCk7U1Q2W3MBBLjMRi0SCKxO0od6gD6Muon6Q35JGLDZS9DEpfLNZTA4aqrmrD0rwHCAO8Cs/Ur4a3J0Lql9WU4RfBJiYySfg+cviqaczLvipt59LuhbjXflPdSuRLUUd/9VV422jRv6SF/NbehYrcQ1p2AZ6jd80L5+kSRwE3WV+OVGTs9GvnU6yLDbJsrZ2aE+iijskqPtuHgTAktgz0r+xtaUaslZRRH6FKlRJrBwO9bK+lef8YXipg7j8GSJjM+GRPmSApRv6n//T4VrH3qqbRaNxoqoxSNMfwD6MV18yPulftrX+xZ7gXeka7vMCPgf2aQ8+N4bPuaKz7lg2LIGjjTT3x4T4jvubPYKL+cFtPTxscwm0DA+yVNaMjbFNt/cE9k+sUpoxgas8Gu1qjhG7GqUu+oAFel8B2gTDcgt+54If2XXv1VVsmVvRkM4m4TnnrYCGLtt5foc4F2rWO/NrIbxENvBHUy0WJBYqEg8hbyklAxoATvupfHMCZ3wAHaASEAFz/Y7pUPh+ZumWK7z65G1KGftgMJro0NbIzrOvbm1sCuhL9tBGKtrof1aLaZkdRjS4zYhzSDTDVw4bldnrPGtubWgKGiH0adR1JuR9VI/qErSgB72HMk0emp2+anr6F7kfTydZ+zdKSO0EdDRuTqaip3xAIjapaLa1aWqg/kmqNQEiXzza3ZFbqId3euezR4Iiqbkj5j7ZEIeTX7X4n9vLvLmKL2mAXILVUp0WPoyLCVJVGQ+/yNlGhjP8PNLq4y9vNy9rPrn+eW36OaPmdX0nTF7EIpu9XPlvW1XMgOiHbSHIL1ji1nsbpBdbAyXtlTRwjSHuCqyJvkjfAVEiMe317oeLEURlNKa/CI7tfVLxLp5qb4tFwUFVYJ3R6/STHqy1Xi1R9RLvvd6lSPIba14rZoo6zwa3w/7L18OGzRwC+N7B52+HD2zYPfA8OP3iIH9kyjkd4Fdwj9x85skUPzfXhQd9cSN96mB+97yjgoYUXvZ7kxYu/UW7mL7Eo+rwKK9byTKWsSWWz6N8VBaZxB5ShgDJZHerscm0J6L1at2fNGPH4CqQNZ+gAGTeaPZVNBB52IJ7nt/uI3N/B0707Do+8vmEH37rpdTLX8eEDd47Xr564Y3aIj+67azM8Q4dwYHjpHbJoOu1/8OkH++lk4s59Y2Lo+tsevG1ukA/N3uHb9f9TbkFebNRET61I/GEuOEtdCkxKcdfISpPptmSn01kdVNF4Y4NjHF1rWnh0cxWZKImsJdKcKPPIkZR5RIoYkcJ7dh665dDOHqV/4jgc2ILXkYz77zgwypGsH1zKst/L+ir6nJVsPdtR2zaC4aQTZC9CR4p0jigDQ6gmexJcUeeXdbS0xY7WslzDdpPF8uryAPX0L+tqoVNFD5QrFi7rbKGXwYnkJGCpwra4XMZe1th6JZcOCL0VgV445HepqL+l5jVdKMHP1VeH89a/WtYaK2/9Z/g4noyFYduzjf6WpSS0FIKDRovrC4aaQ9ZArQ9b1r/K58P0Yhi/4Msl4WPhFbUuzCTBb1OitsjmCVsAn+Qs3eokTJ1FeEQlI1nGXNlfnbS8tcc/sYz4wU8vsbd+lr/UII5u7mncOYBJ+WKc+5jsETe/L03AXCfmN4IlTVnCOYiVSxyWr5h45up7d/Lpu568c7ey4zRcu6yjzk9P3Xvu3im5qb9yaf98ab2AwZIsy0Zrq6nXxkG22zi121ScGiC71IoiZwcZqlAmzUCmvaU5GgkkzaQfoNCjlKimWnxvGhtR5b4r0roYFX59BZLFsvVB5NMRIVAGQ65bJoBsRuaFbLJM/0n3nZCLlZaWYKj+efWy88WezKv+yiG5dKnN23mX2uUJbi5bY+Rc4XgxBrHXGnlYb637gwLPEuXVBmD1ViiIyzgRfl5f9NddvfoB9NDxw0clWD9KV0FbdhMMjzfc+H7uJXEG8fo6Ns4O1q5fU+KCCq16PhXG3JuJcczFw6GwEaLSBXkQwNwF4DgLs1AgHDqA2FToAXEgCDpj+jTudDaDgUmnGsaG9bWx1UOVctJGzBlDf2HJWgZyh1HHkeV53RK5WC6Gc8fr45AzKSByxwlWHShTsxydSgfVLhALUZsXOiS8w0TlVOdJ006bC4ZayA43j7cN9WCqeCgYDTvGJzKnKG0Jn7ou6KSC18Frs8FUk2Jch1frv65/kWLdMMbf2fWfDKac4HFdaYpb8HY9ZDXZhnEylEgHP7t2L6YMcO46M22b111HA113zoFBDJQUpy/WLx6B36K+MxQdmlHBKerm0BIJKqUu68GgoLY0VSpexdChJiDC1WpC9qwK1cQYpS7U0BW0JAzeMrX6P+hRI2Dy4z/hqqmb4gS3jG8GLT77P1Ue5E4wfOFTFoioAS8NYVYZhv9umJapaPV6hct6wHdkHiowcqVYnvUivt5Qa+3vK/X2dBXy2Uy6pclBE4pR4XkwxWHTtq93vH+tv0l2U6pFvbNRePWrv51uBFbBWmgHbw/upXv+0LnRc1AxL/RjLrVgmvx/yP0Fq1KJxarV2A+PHct2HDvWwbvxJIYX60/THfzHrcdGH7shQm/iC2l6E/fXRumtaPU/ybeyx+p34UkVL0LJv9PAUHOomzL1w8q9uZaYoV3SIOoujHBKKii60eKMxhJHXUMgTQW0InVqqErq22AbYN6BHOMkFCMtlpWLDDc/0NM23tYLZ1uGMX5ZrWfPtkQj+chQ61lZiH+gZSiai0Sbz4JhDbeswXd2PSVr8E/twqtr8KXdu690Q2KpI6jHMMuhBjdRdbG9iQslEae6YVhDV7gBdOiHgK4iKtSERkv4yOpAP8ZMpimmNqtSRuUFG50FDD2AeaYRNrasGS0P2LTwuGDncpRJNtZ5Fpev85SVhMY6T3ewBJrtjAFIs8XZi95eSXOXLJkW75wKaXmE7afkst1TsjBDJxP3v3I//kG6Z9R+ce7WnfcfrvHRo6fPnT46CpteTMJZ7yXKMb2XTlHieMpspgUYLz+k3UsJV/LFTWNH7vvT08eHlfWHHtx+69yLSbZMRhHWhDn2SG0oYCC3qE/B0qAKuZqPg+b5XkErlwWmYkKlMkNY2eLmUAqF3OJinmKjrPIhuK1/W/IJ6z8kh5K1D2aK+/UTWqOzkz1fC4xVOgKKKqgjZqKV9nhTGGOgUGnZjiK4Mq8jJFKOMwJ0UxSLdlO/Ymvrtq8H3/UG+nBNcG0e7Vh79xt/yOf37KklDMPYaeyc3LZ1y8hwT671KoP8BApooL9agOqYUm2FATeRptTcdeQGxexmC3pWyw2u5ZSr4l9xsLCKW+DaaeqxVskXZql+XdTggY9NDrcHk331MoTzqZSj3fGlCe3GxJQT6IsGjeBkQOGQO53v+VKSb9E1EVMQ5vKs2/R7axiimWAmiVCh4/MZ1eYrecvvMWx9oa71KppmNkVhBs6G6m+veHkw8amOFi0QFY4pTI7RrikRxSd1jgBaCeytDEHmYSsUN/HTEEyqQVQ6ppY4937ER/nPmMXaWK6W8TvQy1cj+s28wcIlS70LHqQsSoS5rB18abP70ubwv0VMqrRhJALnb2SJXZ76vg7pAPc9++oF2+s8XzLyZUMt/3ajhy35encPGy4n+lIy4Xvvou1JERMJFmTa8zqHldSwlaBa9k6VC63heDzM/3cYttfndDMiKlbIwCN7eV2F8FS61toUNZhCzHltUoKChwg/yah6WVnr8jIXJer+ultoizj14CWn/GfvvEU5uIjTdtnx8nw86K1TlzWF5QsXBhYXGlw+3rLk/5IB/G8+gzZuYUagPa8ByoUaWfiRIuA35I4CrJOMVariLtOCaKD+Ryq3gvWTwSDci1AAfVtQi7zzsmWE4F5Vq/+RPKDe8714vX5SVSVGuXjxa2K/iCyN42qyOkbLkXwt6FIjmt5sRsHC11VB2yANZQl1HL+GWjFC9Em4Vx7Q2oKTeB2+oKkeL3xEkBU015zWlri4VEBrpICIlwZ7Eso2mgSVKs8GLeJN5YsLnmn7Lh7/45KS6ncSg5I/Por8NcaWi7UW27Te2JeyTGPqPg3VS9j2CzJyeznjn1qaGXCrpsq8ro655n7+1zi3WwkBRkGuRl5e3eMyi6L0TvDJcnYwTnM14fWG5Xyh5nXVLya56BmNJRUi25oYoiGRJBGXdaO+Rb1Y9R861mlZYzodsf21K8/wZ1mC8I75Hr9viTsF+fsW5BzxTSO1IFQNz6DJvnC/lPv9L6Ab4KcvfJU6gC94y9NfMP31s7i5XY5RIn6LJqKRxjAKDuOVppiQA65ycUhaEvVeQya8dVuF6uCYKClVFADVGd5FyGt9RTWAAgg50ahiNFm2YkcCarHv3QTW/6Jna0TY0VA0FEpnMkbciKJ0RGSrrMN/XzzKfy7p3saOsq21cUl7FVQ2Dboqxg8D38S4hnxooL2bGRU1qurqAtP1Q1M7xzd3Sd4MKlx9aN7cxtWq/1OQAi25ohrK0s0ilVHwbgmKVNGWD1T/IMmcmd2u68h5MhPsLpW6Mf7ZEUPfceC+0zfhdXy9uTm5cQffujnZrMQFzmZdv+n0HyDOnl33Z4RjOcFoIL338N50IIpBxBEd9+2+7fV+vGGHQ5Y18NCTDw1EwkITYRu/JwZe9fPMI+IfxFUsyjbSqvKhAcwt168pdedsTBbTzZxTnRzRxQyV/if8uggP8y2VcpqWw7iyTmgJOy3GuEu5oK35P5xC0L6GZFag308hopD9/6r3KyoE7rKG5Tqi3D9z8s6TM/3+7mEeeCxiPDanxdWDjxmRxwKIeebmVFVePajGtTl5VaWLcGDdLdMVpbTvxD0n9pWUyvQtew1RfioQFOU/1vU/Lotg4KmyMEz9nnuM2OINTVu8ETPuuUeXPuNZUcFYEmd9rFRbYSxfVUjLiN9dFerqyvd2yKWFBEEB548Fup3m1PWnBQHUERnjyKYur0O1v1pBfvl30u2Hnj4EwydOw/CBOyd23vd4+YefpuUbvHb84elmO9HXD1P3Tq1f48YM5VZ17msH5/d1fPtmWQndeOwTd1EnZNeXbtwsoBRbcbJ29T3T0GbGDO+3J95aen6KxViWDVCHL8i5wsPAxPLfE1FDb55RmQnmCYgrEoijOyX+6KeDoE66Tt5ONjkSgheKBA9LqL6qpqchU0E7QaSYtJ3+irSVimrrmpLJU3ej0gsK6vTRXbdlEXtnb9u17Z9B+Un9m9Hg5rmoE93YF4zCPwZ31H9b/6f6b3cEgzvAgAIYO4IwfMe64Q03nOX3fXzD8Lo7brzrLtiCz85tCkajwb6N0b9LJD738MOfSxTs2x7mj3yGsEgjzzBYB9Xw2hGCYAZOzYWG2uR6nFlvxlJeEZfO732ziNsX84be4ffMGz7/gRmQb1dyTX8Q/dtArU8Hb8Wybmgod53NBlQOilxbg9mPCIstK3sTAzE7O5BMJuTKkvJgwfulBskXM0CBMymXLQrpkSoDMVmJ6aA2QjGG4SJkRk38g5sd61dtYGoQ4St+jHY+U23r4aVWOEjtseoMnDgvfwCEm2+hp6r/X91AK4zYkU3HMVEaxnR3qBfqPzn+/wHPnsOreJxjYGRgYABi1vIsoXh+m68M3MwvgCIMt5YoxkDp2P9f/2exVDAHAbkcDEwgUQAz1Qu/AHicY2BkYGAO+p/FwMBS9v/r/68sFQxAERQQDACh8QbyeJxdT0sVwzAMy49AkAxAkbT3UQiAITGAISmAYQiA9th4ttUs7Q568UeSlVidiwSkB3PUPg+ESd6ZD/+8v7HyrtzwghY89ZB6BcyrYqc6RZhw48YhaA1Wc/v1PQtdeXJ/HppUmFM597nvBVK7D+Z+E8/uQZLBgDyaz3Llvxx02S3c/Hv813JrznryZP4F+6lSfQAAAAAAAAAAUAC2ATABaAGyAfoCJAKwAzYDmgQSBFwExgUyBbQF/AZOBvwHRAe2B/YISgigCPIJGglCCWQJignACgAKQAp2CroLAAtGC4oL8gxcDPINng5iDuYPag/6EF4RIBGGEeQSShKYEyQTbhOyFAoUYhS+FVoVphYoFooXHBeGGFoYnhjGGOwZChlOGXgZrBneGhwaWhqgGtIbLhvyHHQc2B1QHZ4d/wABAAAAUwBtAAYAAAAAAAIAIAAwAHMAAAB2C3AAAAAAeJx1kN9q2zAUh39q0441YxcbjN3tXJWWEcc1lEGvWkLbXZeSu8JUV/6T2VKQlY48w95ifYa9zt6jd/vFESUUYiP5O5/O8ZEE4AP+QWH9nHKsWeEdozXv4A0uIu/Sf488IN9G3sMQPyLv0/+MfICv+BV5iI/4wz+owVtGM/yNrPBZfYm8g/fqW+Rd+svIA/Jd5D18UovI+/S/Ix9gqp4iD3GoniduvvR1WQU5mhxLlmap3C/FUdVWN6IXoXK+k3MpnA2maVySuza0ZlToUZ07292YctFov6k2eWp8VzsrJ0m6qa+NNV4H87Dq1j2WWQiFFN61chX7yNy7mclDUoUwPxuPN/tjAoc5lvCoUaJCgOCI9pjfDGk/BPfMEGaus2pYaDQ0GgtWVP1Kx/ico2BkaQ0zGnKCnHNL09KNuK451721rLqhLfmfht5vzdrmp7Sr3nUfC07YL92afU1r+wrd7/Dh5WwdHrmLjDawanUK3+9acPXqPML7Wq3NaHL6pL+1QHuGMd8t5/8PvPGO3QAAAHicbZLnlpswEIV9DRiwvZtseu89Ib333vvmBWRZYMVC0pHEEufpg8BO/kTncOfTaLgMOtPr97o17P1/baKPACEiDBAjQYohRhhjDevYhu3YwA7sxC7sxh7sxT7sxwEcxCEcxhEcxTEcxwmcxCmcxhmcxTmcxwVcxCVkuIwruIpruI4buIlbuI07uIt7uI8HeIhHeIwneIpneI4XeIlXeI03eIt3eI8P+IhP+Iwv+Ipv+I5N/OiF1hEz9JKxUrtFrDl1lWF9NR9QIikToRaVjUouKxvOmNBjLxnlhgo2DbnM1djLKrNGnGPScSUzItzGv93yPP2bSQSX84z9cqFQdJ56yZRmMhW8mLlJJSaBI0XYPDaZKDUviZmvr6DrNjJMi0WcK1MTM02mqpbZlJtEsNx5SI238jSodJtoS7qv+BpPw67IY9xU+dg5TXjROTWwdGrIOzWhT+uA0jolxqjaZrSOnCF2Nmq16651EYpMm1fakAul9SJQeR5QVYQlk1VkZ8SwoVNFIVjWnKQrlBGdMToftdoZjrs77DajqXKrS02YEFxbbtdWkG0x44JJVUS5aBqKSlJwmhDrmOF2Hv9Wqsy4TNqoKhfmSrrQKuNSL5nvPG6p0s0AkEWkSWVZMy1Kx3ljk03qLuZ14lTmB8gNGmByGrGfjLrhlhJV2f7SaIneNF1ypQNbybBUSgZswQaWEUNngeay1/sD4l/60HicY/DewXAiKGIjI2Nf5AbGnRwMHAzJBRsZWJ02MTAyaIEYm7mYGDkgLD4GMIvNaRfTAaA0J5DN7rSLwQHCZmZw2ajC2BEYscGhI2Ijc4rLRjUQbxdHAwMji0NHckgESEkkEGzmYWLk0drB+L91A0vvRiYGFwAMdiP0AAA=') format('woff')}</style>
<style id="style-core" type="text/css">html{font:16px/1 Helmet,Freesans,sans-serif}#store-area,tw-storydata{display:none!important;z-index:0}.no-transition{-webkit-transition:none!important;-o-transition:none!important;transition:none!important}:-webkit-full-screen{height:100%;width:100%}:-ms-fullscreen{height:100%;width:100%}:fullscreen{height:100%;width:100%}body::-ms-backdrop{background:0 0}:focus{outline:thin dotted}:disabled{cursor:not-allowed!important}body{color:#eee;background-color:#111;overflow:auto}a{cursor:pointer;color:#68d;text-decoration:none;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}a:hover{color:#8af;text-decoration:underline}a.link-broken{color:#c22}a.link-broken:hover{color:#e44}a[disabled],span.link-disabled{color:#aaa;cursor:not-allowed!important;text-decoration:none}area{cursor:pointer}button{cursor:pointer;color:#eee;background-color:#35a;border:1px solid #57c;line-height:normal;padding:.4em;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button:hover{background-color:#57c;border-color:#79e}button:disabled{background-color:#444;border:1px solid #666}input,select,textarea{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}select{padding:.34em .4em}input[type=text]{min-width:18em}textarea{min-width:30em;resize:vertical}input[type=checkbox],input[type=file],input[type=radio],select{cursor:pointer}input[type=range]{-webkit-appearance:none;min-height:1.2em}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;margin-top:-5px;width:33px}input[type=range]:focus::-webkit-slider-runnable-track{background:#222}input[type=range]::-moz-range-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-moz-range-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;width:33px}input[type=range]::-ms-track{background:0 0;border-color:transparent;color:transparent;cursor:pointer;height:10px;width:calc(100% - 1px)}input[type=range]::-ms-fill-lower{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-fill-upper{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:16px;width:33px}input:not(:disabled):focus,input:not(:disabled):hover,select:not(:disabled):focus,select:not(:disabled):hover,textarea:not(:disabled):focus,textarea:not(:disabled):hover{background-color:#333;border-color:#eee}hr{display:block;height:1px;border:none;border-top:1px solid #eee;margin:1em 0;padding:0}audio,canvas,progress,video{max-width:100%;vertical-align:middle}.error-view{background-color:#511;border-left:.5em solid #c22;display:inline-block;margin:.1em;max-width:100%;padding:0 .25em;position:relative}.error-view>.error-toggle{background-color:transparent;border:none;line-height:inherit;left:0;padding:0;position:absolute;top:0;width:1.75em}.error-view>.error{display:inline-block;margin-left:.25em}.error-view>.error-toggle+.error{margin-left:1.5em}.error-view>.error-source[hidden]{display:none}.error-view>.error-source:not([hidden]){background-color:rgba(0,0,0,.2);display:block;margin:0 0 .25em;overflow-x:auto;padding:.25em}.highlight,.marked{color:#ff0;font-weight:700;font-style:italic}.nobr{white-space:nowrap}.error-view>.error-toggle:before,.error-view>.error:before,[data-icon-after]:after,[data-icon-before]:before,[data-icon]:before,a.link-external:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[data-icon]:before{content:attr(data-icon)}[data-icon-before]:before{content:attr(data-icon-before) "\00a0\00a0"}[data-icon-after]:after{content:"\00a0\00a0" attr(data-icon-after)}.error-view>.error-toggle:before{content:"\e81a"}.error-view>.error-toggle.enabled:before{content:"\e818"}.error-view>.error:before{content:"\e80d\00a0\00a0"}a.link-external:after{content:"\00a0\e80e"}</style>
<style id="style-core-display" type="text/css">#story{z-index:10;margin:2.5em}@media screen and (max-width:1136px){#story{margin-right:1.5em}}#passages{max-width:54em;margin:0 auto}</style>
<style id="style-core-passage" type="text/css">.passage{line-height:1.75;text-align:left;-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.passage-in{opacity:0}.passage ol,.passage ul{margin-left:.5em;padding-left:1.5em}.passage table{margin:1em 0;border-collapse:collapse;font-size:100%}.passage caption,.passage td,.passage th,.passage tr{padding:3px}@media (prefers-reduced-motion:reduce){.passage{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}</style>
<style id="style-core-macro" type="text/css">@-webkit-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@-o-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}.macro-append-insert,.macro-linkappend-insert,.macro-linkprepend-insert,.macro-linkreplace-insert,.macro-prepend-insert,.macro-repeat-insert,.macro-replace-insert,.macro-timed-insert{-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.macro-append-in,.macro-linkappend-in,.macro-linkprepend-in,.macro-linkreplace-in,.macro-prepend-in,.macro-repeat-in,.macro-replace-in,.macro-timed-in{opacity:0}.macro-type-cursor:after{-webkit-animation:cursor-blink 1s infinite;-o-animation:cursor-blink 1s infinite;animation:cursor-blink 1s infinite;content:"\2590";opacity:1}</style>
<style id="style-ui-dialog" type="text/css">html[data-dialog] body{overflow:hidden}#ui-overlay.open{visibility:visible;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-overlay:not(.open){-webkit-transition:visibility .2s step-end,opacity .2s ease-in;-o-transition:visibility .2s step-end,opacity .2s ease-in;transition:visibility .2s step-end,opacity .2s ease-in}#ui-overlay{visibility:hidden;opacity:0;z-index:100000;position:fixed;top:-50%;left:-50%;height:200%;width:200%}#ui-dialog.open{display:block;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-dialog{display:none;opacity:0;z-index:100100;position:fixed;top:50px;margin:0;padding:0}#ui-dialog>*{-webkit-box-sizing:border-box;box-sizing:border-box}#ui-dialog-titlebar{position:relative}#ui-dialog-close{display:block;position:absolute;right:0;top:0;white-space:nowrap}#ui-dialog-body{overflow:auto;min-width:280px;height:92%;height:calc(100% - 2.1em)}@media (prefers-reduced-motion:reduce){#ui-overlay.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-overlay:not(.open){-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-dialog.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}#ui-overlay{background-color:#000}#ui-overlay.open{opacity:.8}#ui-dialog{max-width:66em}#ui-dialog.open{opacity:1}#ui-dialog-titlebar{background-color:#444;min-height:24px}#ui-dialog-title{margin:0;padding:.2em 3.5em .2em .5em;font-size:1.5em;text-align:center;text-transform:uppercase}#ui-dialog-close{cursor:pointer;font-size:120%;margin:0;padding:0;width:3.6em;height:92%;background-color:transparent;border:1px solid transparent;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}#ui-dialog-close:hover{background-color:#b44;border-color:#d66}#ui-dialog-body{background-color:#111;border:1px solid #444;text-align:left;line-height:1.5;padding:1em}#ui-dialog-body>:first-child{margin-top:0}#ui-dialog-body hr{background-color:#444}#ui-dialog-body ul.buttons{margin:0;padding:0;list-style:none}#ui-dialog-body ul.buttons li{display:inline-block;margin:0;padding:.4em .4em 0 0}#ui-dialog-body ul.buttons>li+li>button{margin-left:1em}#ui-dialog-close{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-close{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}</style>
<style id="style-ui" type="text/css">#ui-dialog-body.settings [id|=setting-body]>div:first-child{display:table;width:100%}#ui-dialog-body.settings [id|=setting-label]{display:table-cell;padding:.4em 2em .4em 0}#ui-dialog-body.settings [id|=setting-label]+div{display:table-cell;min-width:8em;text-align:right;vertical-align:middle;white-space:nowrap}#ui-dialog-body.list{padding:0}#ui-dialog-body.list ul{margin:0;padding:0;list-style:none;border:1px solid transparent}#ui-dialog-body.list li{margin:0}#ui-dialog-body.list li:not(:first-child){border-top:1px solid #444}#ui-dialog-body.list li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-decoration:none}#ui-dialog-body.list li a:hover{background-color:#333;border-color:#eee}#ui-dialog-body.saves{padding:0 0 1px}#ui-dialog-body.saves>:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves table{border-spacing:0;width:100%}#ui-dialog-body.saves tr:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves td{padding:.33em .33em}#ui-dialog-body.saves td:first-child{min-width:1.5em;text-align:center}#ui-dialog-body.saves td:nth-child(3){line-height:1.2}#ui-dialog-body.saves td:last-child{text-align:right}#ui-dialog-body.saves .empty{color:#999;speak:none;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves .datestamp{font-size:75%;margin-left:1em}#ui-dialog-body.saves ul.buttons li{padding:.4em}#ui-dialog-body.saves ul.buttons>li+li>button{margin-left:.2em}#ui-dialog-body.saves ul.buttons li:last-child{float:right}#ui-dialog-body.settings div[id|=header-body]{margin:1em 0}#ui-dialog-body.settings div[id|=header-body]:first-child{margin-top:0}#ui-dialog-body.settings div[id|=header-body]:not(:first-child){border-top:1px solid #444;padding-top:1em}#ui-dialog-body.settings div[id|=header-body]>*{margin:0}#ui-dialog-body.settings h2[id|=header-heading]{font-size:1.375em}#ui-dialog-body.settings p[id|=header-desc],#ui-dialog-body.settings p[id|=setting-desc]{font-size:87.5%;margin:0 0 0 .5em}#ui-dialog-body.settings div[id|=setting-body]+div[id|=setting-body]{margin:1em 0}#ui-dialog-body.settings [id|=setting-control]{white-space:nowrap}#ui-dialog-body.settings button[id|=setting-control]{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}#ui-dialog-body.settings button[id|=setting-control]:hover{background-color:#333;border-color:#eee}#ui-dialog-body.settings button[id|=setting-control].enabled{background-color:#282;border-color:#4a4}#ui-dialog-body.settings button[id|=setting-control].enabled:hover{background-color:#4a4;border-color:#6c6}#ui-dialog-body.settings input[type=range][id|=setting-control]{max-width:35vw}#ui-dialog-body.list a,#ui-dialog-body.settings span[id|=setting-input]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves button[id=saves-clear]:before,#ui-dialog-body.saves button[id=saves-export]:before,#ui-dialog-body.saves button[id=saves-import]:before,#ui-dialog-body.settings button[id|=setting-control].enabled:after,#ui-dialog-body.settings button[id|=setting-control]:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-dialog-body.saves button[id=saves-export]:before{content:"\e829\00a0"}#ui-dialog-body.saves button[id=saves-import]:before{content:"\e82a\00a0"}#ui-dialog-body.saves button[id=saves-clear]:before{content:"\e827\00a0"}#ui-dialog-body.settings button[id|=setting-control]:after{content:"\00a0\00a0\e830"}#ui-dialog-body.settings button[id|=setting-control].enabled:after{content:"\00a0\00a0\e831"}</style>
<style id="style-ui-bar" type="text/css">#story{margin-left:20em;-webkit-transition:margin-left .2s ease-in;-o-transition:margin-left .2s ease-in;transition:margin-left .2s ease-in}#ui-bar.stowed~#story{margin-left:4.5em}@media screen and (max-width:1136px){#story{margin-left:19em}#ui-bar.stowed~#story{margin-left:3.5em}}@media screen and (max-width:768px){#story{margin-left:3.5em}}#ui-bar{position:fixed;z-index:50;top:0;left:0;width:17.5em;height:100%;margin:0;padding:0;-webkit-transition:left .2s ease-in;-o-transition:left .2s ease-in;transition:left .2s ease-in}#ui-bar.stowed{left:-15.5em}#ui-bar-tray{position:absolute;top:.2em;left:0;right:0}#ui-bar-body{height:90%;height:calc(100% - 2.5em);margin:2.5em 0;padding:0 1.5em}#ui-bar.stowed #ui-bar-body,#ui-bar.stowed #ui-bar-history{visibility:hidden;-webkit-transition:visibility .2s step-end;-o-transition:visibility .2s step-end;transition:visibility .2s step-end}@media (prefers-reduced-motion:reduce){#story{-webkit-transition:margin-left 0s;-o-transition:margin-left 0s;transition:margin-left 0s}#ui-bar{-webkit-transition:left 0s;-o-transition:left 0s;transition:left 0s}}#ui-bar{background-color:#222;border-right:1px solid #444;text-align:center}#ui-bar a{text-decoration:none}#ui-bar hr{border-color:#444}#ui-bar-history [id|=history],#ui-bar-toggle{font-size:1.2em;line-height:inherit;color:#eee;background-color:transparent;border:1px solid #444}#ui-bar-toggle{display:block;position:absolute;top:0;right:0;border-right:none;padding:.3em .45em .25em}#ui-bar.stowed #ui-bar-toggle{padding:.3em .35em .25em .55em}#ui-bar-toggle:hover{background-color:#444;border-color:#eee}#ui-bar-history{margin:0 auto}#ui-bar-history [id|=history]{padding:.2em .45em .35em}#ui-bar-history #history-jumpto{padding:.2em .665em .35em}#ui-bar-history [id|=history]:not(:first-child){margin-left:1.2em}#ui-bar-history [id|=history]:hover{background-color:#444;border-color:#eee}#ui-bar-history [id|=history]:disabled{color:#444;background-color:transparent;border-color:#444}#ui-bar-body{line-height:1.5;overflow:auto}#ui-bar-body>:not(:first-child){margin-top:2em}#story-title{margin:0;font-size:162.5%}#story-author{margin-top:2em;font-weight:700}#menu ul{margin:1em 0 0;padding:0;list-style:none;border:1px solid #444}#menu ul:empty{display:none}#menu li{margin:0}#menu li:not(:first-child){border-top:1px solid #444}#menu li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-transform:uppercase}#menu li a:hover{background-color:#444;border-color:#eee}#menu a,#ui-bar-history [id|=history],#ui-bar-toggle{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#menu-core li[id|=menu-item] a:before,#ui-bar-history [id|=history],#ui-bar-toggle:before{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-bar-toggle:before{content:"\e81d"}#ui-bar.stowed #ui-bar-toggle:before{content:"\e81e"}#menu-item-saves a:before{content:"\e82b\00a0"}#menu-item-settings a:before{content:"\e82d\00a0"}#menu-item-restart a:before{content:"\e82c\00a0"}#menu-item-share a:before{content:"\e82f\00a0"}</style>
<style id="style-ui-debug" type="text/css">#debug-bar{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:0;margin:0;max-height:75%;padding:.5em;position:fixed;right:0;z-index:99900}#debug-bar>div:not([id])+div{margin-top:.5em}#debug-bar>div>label{margin-right:.5em}#debug-bar>div>input[type=text]{min-width:0;width:8em}#debug-bar>div>select{width:15em}#debug-bar-toggle{color:#eee;background-color:#222;border:1px solid #444;height:101%;height:calc(100% + 1px);left:-2em;left:calc(-2em - 1px);position:absolute;top:-1px;width:2em}#debug-bar-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-hint{bottom:.175em;font-size:4.5em;opacity:.33;pointer-events:none;position:fixed;right:.6em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}#debug-bar-watch{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:102%;bottom:calc(100% + 1px);font-size:.9em;left:-1px;max-height:650%;max-height:65vh;position:absolute;overflow-x:hidden;overflow-y:scroll;right:0;z-index:99800}#debug-bar-watch[hidden]{display:none}#debug-bar-watch div{color:#999;font-style:italic;margin:1em auto;text-align:center}#debug-bar-watch table{width:100%}#debug-bar-watch tr:nth-child(2n){background-color:rgba(127,127,127,.15)}#debug-bar-watch td{padding:.2em 0}#debug-bar-watch td:first-child+td{padding:.2em .3em .2em .1em}#debug-bar-watch .watch-delete{background-color:transparent;border:none;color:#c00}#debug-bar-watch-all,#debug-bar-watch-none{margin-left:.5em}#debug-bar-views-toggle,#debug-bar-watch-toggle{color:#eee;background-color:transparent;border:1px solid #444;margin-right:1em;padding:.4em}#debug-bar-views-toggle:hover,#debug-bar-watch-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle,html[data-debug-view] #debug-bar-views-toggle{background-color:#282;border-color:#4a4}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:hover,html[data-debug-view] #debug-bar-views-toggle:hover{background-color:#4a4;border-color:#6c6}#debug-bar-hint:after,#debug-bar-toggle:before,#debug-bar-views-toggle:after,#debug-bar-watch .watch-delete:before,#debug-bar-watch-add:before,#debug-bar-watch-all:before,#debug-bar-watch-none:before,#debug-bar-watch-toggle:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#debug-bar-toggle:before{content:"\e838"}#debug-bar-hint:after{content:"\e838\202f\e822"}#debug-bar-watch .watch-delete:before{content:"\e804"}#debug-bar-watch-add:before{content:"\e805"}#debug-bar-watch-all:before{content:"\e83a"}#debug-bar-watch-none:before{content:"\e827"}#debug-bar-views-toggle:after,#debug-bar-watch-toggle:after{content:"\00a0\00a0\e830"}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:after,html[data-debug-view] #debug-bar-views-toggle:after{content:"\00a0\00a0\e831"}html[data-debug-view] .debug{padding:.25em;background-color:#234}html[data-debug-view] .debug[title]{cursor:help}html[data-debug-view] .debug.block{display:inline-block;vertical-align:middle}html[data-debug-view] .debug.invalid{text-decoration:line-through}html[data-debug-view] .debug.hidden,html[data-debug-view] .debug.hidden .debug{background-color:#555}html:not([data-debug-view]) .debug.hidden{display:none}html[data-debug-view] .debug[data-name][data-type].nonvoid:after,html[data-debug-view] .debug[data-name][data-type]:before{background-color:rgba(0,0,0,.25);font-family:monospace,monospace;white-space:pre}html[data-debug-view] .debug[data-name][data-type]:before{content:attr(data-name)}html[data-debug-view] .debug[data-name][data-type|=macro]:before{content:"<<" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=macro].nonvoid:after{content:"<</" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=html]:before{content:"<" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type|=html].nonvoid:after{content:"</" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type]:not(:empty):before{margin-right:.25em}html[data-debug-view] .debug[data-name][data-type].nonvoid:not(:empty):after{margin-left:.25em}html[data-debug-view] .debug[data-name][data-type|=special],html[data-debug-view] .debug[data-name][data-type|=special]:before{display:block}</style>
</head>
<body>
	<div id="init-screen">
		<div id="init-no-js"><noscript>JavaScript must be enabled to play.</noscript></div>
		<div id="init-lacking"><p>Browser lacks capabilities required to play.</p><p>Upgrade or switch to another browser.</p></div>
		<div id="init-loading"><div>Loading&hellip;</div></div>
	</div>
	<tw-storydata name="Talon&#39;s End" startnode="6" creator="Twine" creator-version="2.7.1" format="SugarCube" format-version="2.36.1" ifid="328ef5b7-d64c-4792-8bc9-29f80c298232" options="" tags="" zoom="1" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">@charset "UTF-8";

@import url('https://fonts.cdnfonts.com/css/open-dyslexic');
@import url('https://fonts.googleapis.com/css2?family=EB+Garamond&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Merriweather&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Poppins&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Quicksand&display=swap');

:root {
  /*--color1: #e56c39;
  --color2: #f2a665;
  --color3: #f18678;*/
  --color1: #11A581;
  --color2: #2F61B9;
  --color3: #64339B;
  /*--color1: #771035;
  --color2: #b84c71;
  --color3: #d578a0;*/
  --white: #111;
  --black: #eee;
  --titlefont: "EB Garamond", serif;
  --subtitlefont: "Quicksand", sans-serif;
}

* {
  box-sizing: border-box;
}

@keyframes fadeIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}
@keyframes rotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

body {
  margin: 0;
  color: var(--black);
  background-color: var(--white);
  font-family: "Poppins", sans-serif;
}

.fab, .fas {
  padding: 2px;
}

a, a:link, a:visited, a:active {
  color: var(--color1);
}

a, a:link, a:visited, a:active, a:hover {
  text-decoration: none;
  cursor: pointer;
  /*transition: all 0.3s ease;
  -webkit-transition: all 0.3s ease;
  -o-transition: all 0.3s ease;*/
}

i:hover {
  transition: all 0.3s ease;
  -webkit-transition: all 0.3s ease;
  -o-transition: all 0.3s ease;
}

select {
  color: var(--color1);
  border: 1px solid var(--color2);
  padding: 2px;
  background-color: var(--white);
}

textarea {
  background-image: linear-gradient(150deg, var(--color1), var(--color2), var(--color3));
  color: var(--white);
  resize: none;
  width: 100%;
  border: 1px solid var(--color2);
  padding: 5px;
  min-width: 100%;
}

input[type=text] {
  border: 1px solid var(--color2);
  padding: 5px;
  margin: 5px 0;
  min-width: auto;
  color: inherit;
  background-color: var(--white);
}

input:not(:disabled):focus, input:not(:disabled):hover, select:not(:disabled):focus, select:not(:disabled):hover, textarea:not(:disabled):focus, textarea:not(:disabled):hover {
  background-color: transparent;
  border-color: var(--color2);
}

.hidden {
  visibility: hidden;
}

button {
  transition: all 0.3s ease;
  -webkit-transition: all 0.3s ease;
  -o-transition: all 0.3s ease;
}

ul {
  list-style-type: none;
}

.decoration-i, .decoration-ii, .decoration-iii, .decoration-v {
  position: fixed;
  color: var(--white);
  z-index: 21;
}

.decoration-i {
  left: 10px;
  top: 10px;
}

.decoration-ii {
  left: 10px;
  bottom: 10px;
}

.decoration-iii {
  right: 10px;
  top: 10px;
}

.decoration-v {
  right: 10px;
  bottom: 10px;
}

.decoration-separator {
  color: var(--color2);
  width: 100%;
  text-align: center;
  margin: 0rem 0;
  font-size: 0.9rem;
}
.decoration-separator .inv {
  color:#fff;
}
.decoration-separator span {
  margin: 0 5px;
}

#notify {
  position: fixed;
  display: block;
  z-index: 5;
  max-width: 50vw;
  right: -50vw;
  top: 17vh;
  padding: 0.7rem;
  background-image: linear-gradient(150deg, var(--color1), var(--color2), var(--color3));
  color: var(--white);
  text-align: center;
  font-family: monospace;
  border: 10px solid var(--white);
  font-size: 1rem;
  -webkit-transition: right 0.3s;
  -moz-transition: right 0.3s;
  -o-transition: right 0.3s;
  transition: right 0.3s;
}

#notify.open {
  right: 0;
}

.credit {
  font-family: monospace;
  color: var(--white);
  font-size: 0.7rem;
  position: absolute;
  bottom: 17px;
  left: 50%;
  transform: translate(-50%, 0);
  z-index: 5;
}

.credit a {
  color: var(--white);
  border-bottom: 1px solid var(--color2);
  padding-bottom: 2px;
}

.credit a:hover {
  padding-bottom: 4px;
  letter-spacing: 1px;
}

#main {
  margin: 16vh auto 9vh;
  position: relative;
}

#passage-loading-page {
  position: fixed;
  z-index: 20;
  top: 0;
  left: 0;
  background-image: linear-gradient(150deg, var(--color1), var(--color2), var(--color3));
  width: 100%;
  height: 100%;
  padding: 1rem;
}
#passage-loading-page h1, #passage-loading-page h2, #passage-loading-page h3 {
  color: var(--white);
}
#passage-loading-page h3 {
  width: 100%;
}
#passage-loading-page .main {
  position: absolute;
  width: 100%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
#passage-loading-page nav {
  width: 80%;
  margin: 2rem auto;
  text-align: center;
  font-family: var(--subtitlefont);
}
#passage-loading-page .link-internal {
  color: var(--white) !important;
  margin: 0 5px;
}
#passage-loading-page .link-internal::before {
  content: "✦";
  font-size: 0.7rem;
  margin-right: 10px;
}

header {
  position: fixed;
  top: 0;
  left: 0;
  z-index: 3;
  width: 100vw;
  height: fit-content;
  min-height: 120px;
  background-image: linear-gradient(150deg, var(--color1), var(--color2), var(--color3));
  background-size: cover;
  border-bottom: 10px solid var(--white);
  overflow: scroll;
}

#header-top {
  text-align: center;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 5px 40px 0;
  min-height: 120px;
}
#header-top .social-media {
  display: none;
  letter-spacing: 1px;
}
#header-top .social-media a {
  color: var(--white);
  margin: 0 5px;
}
#header-top .middle {
  text-align: center;
  max-width: 80%;
  color: var(--white);
}
#header-top .middle h1 {
  font-family: var(--titlefont);
  font-weight: normal;
  letter-spacing: 1px;
  color: var(--white);
  font-size: 1.5em;
  margin: 0;
}
#header-top .middle h2 {
  font-weight: bold;
  text-transform: uppercase;
  font-size: 0.8rem;
  letter-spacing: 2px;
  color: var(--white);
  margin: 0;
  font-family: "Kiona";
}
#header-top .middle #menu-toggle {
  color: var(--white);
  cursor: pointer;
  display: inline-block;
  margin-top: 5px;
  transition: all 0.2s ease;
  -webkit-transition: all 0.3s ease;
  -o-transition: all 0.3s ease;
}
#header-top .tools {
  color: var(--white);
  display: none;
}
#header-top .tools i {
  margin: 0 5px;
  cursor: pointer;
}

.story-banner {
  display: flex;
  flex-direction: column;
  outline: 1px solid var(--white);
  outline-offset: 5px;
  border: 1px solid var(--white);
  border-radius: 50% 50% 50% 50%;
  margin: 2rem auto;
  text-align: center;
  padding: 20px;
  width: 300px;
  min-height: 350px;
}
.story-banner .content {
  margin: auto;
  color: var(--white);
}
.story-banner .story-title {
  color: var(--white);
  font-weight: normal;
  font-size: 2rem;
  letter-spacing: 2px;
  margin: 1rem 0 0;
  font-family: var(--titlefont);
}
.story-banner i {
  font-size: 2.6rem;
  margin: 0.5rem 0 0;
}
.story-banner .story-subtitle {
  color: var(--white);
  font-weight: normal;
  font-size: 0.9rem;
  font-family: var(--subtitlefont);
  letter-spacing: 2px;
  margin: 0.7rem 0 0;
}
.story-banner span {
  color: var(--white);
  font-size: 0.8rem;
  margin: 0.7rem 0 0.5rem;
  display: inline-block;
}
.story-banner .story-author {
  font-weight: normal;
  color: var(--white);
  font-family: "Poppins", sans-serif;
  text-transform: uppercase;
  font-size: 0.7rem;
  letter-spacing: 3px;
  margin: 0;
}

.logo-image img {
  width: 100%;
  max-width: 500px;
}

#header-body {
  width: 100vw;
  height: fit-content;
  text-align: center;
  display: none;
  padding: 2rem 0;
  animation-name: fadeIn;
  animation-duration: 0.5s;
}
#header-body .content {
  margin: auto;
  width: 90%;
}
#header-body .tools {
  font-size: 1rem;
}
#header-body .tools i {
  color: var(--white);
  margin: 0 5px;
  cursor: pointer;
}
#header-body .social-media {
  font-size: 1rem;
}
#header-body .social-media a {
  color: var(--white);
  margin: 0 5px;
}
#header-body #story-menu {
  margin: 1.5rem auto;
  padding: 0;
  text-align: center;
}
#header-body #story-menu li {
  display: inline-block;
  margin: 5px;
}
#header-body #story-menu a::before {
  /*content: "✦";*/
  margin-right: 10px;
  font-style: normal;
  font-weight: normal;
  font-size: 0.7rem;
}
#header-body #story-menu a {
  color: var(--white);
  font-size: 1rem;
  font-family: var(--subtitlefont);
}

header.toggled {
  height: 100vh;
  border: 0;
}

header.toggled #header-top .title {
  visibility: hidden;
}

header.toggled #header-body {
  display: flex;
}

footer {
  position: fixed;
  bottom: 0;
  z-index: 2;
  background-image: linear-gradient(150deg, var(--color1), var(--color2), var(--color3));
  width: 100vw;
  height: 8vh;
  display: flex;
  justify-content: center;
  align-items: center;
  color: var(--white);
  border-top: 10px solid var(--white);
}
footer span {
  margin: 0 1rem;
  text-align: center;
}
footer i {
  color: var(--white);
  font-size: 140%;
  padding: 0;
  cursor: pointer;
}
footer i:hover {
  text-shadow: 2px 2px 0px var(--color3);
}

#passages {
  padding: 1rem 2rem;
  line-height: 1.6;
  text-align: left;
  /*.link-internal.macro-link {
      background-image: -webkit-linear-gradient(150deg, $pink, $purple);
      -webkit-background-clip: border-box;
      -webkit-text-fill-color: var(--white);
      padding: 7px 10px;
      border-radius: 15px 15px 0 15px;
  }

  .link-internal.macro-link:hover {
      margin: 0 0 0 1rem;
  }*/
}
#passages u {
  text-decoration: none;
  border-bottom: 1px solid var(--color2);
}
#passages hr {
  border: 1px solid var(--color2);
}
#passages ul {
  padding: 0;
}#passages li::before {
  content: "●";
  color: var(--color1);
  margin-right: 1rem;
}

#passages li::before {
  content: "✦";
  color: var(--color3);
  margin-right: 1rem;
}
#passages .choice li::before {
  content: "●";
  color: var(--color2);
}
#passages .ques li::before {
  content: "?";
}
#passages .chat li::before {
  content: "🗨";
}
#passages .loop li::before {
  content: "↺";
}
#passages .split li::before {
  content: "⇄";
}
#passages .heart li::before {
  content: "♥";
}
#passages .diamond li::before {
  content: "♦";
}
#passages .club li::before {
  content: "♣";
}
#passages .spade li::before {
  content: "♠";
}

#passages li {
  padding: 0.5rem 0;
}

#passages summary {
  color: var(--color1);
}

#passages summary:hover {
  color: var(--color3);
  cursor:pointer;
}

#passages summary::before {
  content: "✦";
  color: var(--color3);
  margin-right: 1rem;
}

#passages .macro-cycle {
  font-style: italic;
}
#passages .macro-cycle:hover {
  color: var(--color2);
}
#passages li .link-internal:hover {
  /*margin-left: 5px;*/
  letter-spacing:1px;
}
#passages .link-internal {
  letter-spacing: 1px;
  color: var(--color1);
}
#passages .link-internal:hover {
  color: var(--color2);
  letter-spacing: 2px;
}
#passages .link-internal.macro-button::before {
  content: "✦";
  margin-right: 1em;
  font-size: 0.7em;
}
#passages .link-internal.macro-button::after {
  content: "✦";
  margin-left: 1em;
  font-size: 0.7em;
}
#passages .link-internal.macro-button {
  width: 100%;
  background: -webkit-linear-gradient(150deg, var(--color1), var(--color2));
  color: var(--white);
  padding: 12px 7px;
  margin: 1rem auto;
  border: 0;
  font-size: 1.1rem;
  letter-spacing: 1px;
}
#passages .link-internal.macro-button:hover {
  outline: 1px solid var(--white);
  outline-offset: -5px;
}

.passage {
  text-align: left;
}
.passage h1 {
  font-family: var(--titlefont);
  color: var(--color1);
  text-align: center;
  margin: 0;
  font-size: 2rem;
}
.passage h2 {
  font-family: var(--subtitlefont);
  color: var(--color2);
  font-weight: normal;
  text-transform: uppercase;
  font-size: 1.1rem;
  letter-spacing: 2px;
  text-align: center;
  margin: 0;
}
.passage h3 {
  border-bottom: 1px solid var(--color2);
  width: fit-content;
  margin: 0.5rem auto;
  font-family: Georgia, "Times New Roman", Times, serif;
  font-size: 0.9rem;
  color: var(--color3);
  font-weight: normal;
  font-style: italic;
  letter-spacing: 1px;
}

#ui-overlay {
  visibility: hidden;
  opacity: 0;
  z-index: 100000;
  position: fixed;
  top: -50%;
  left: -50%;
  height: 200%;
  width: 200%;
  background-image: linear-gradient(150deg, var(--color1), var(--color2), var(--color3));
}

#ui-overlay.open {
  opacity: 0.5;
  visibility: visible;
}

#ui-dialog {
  z-index: 100100;
  position: fixed;
  display: none;
  width: 90vw;
  max-width: 500px;
  top: 50px;
  left: 5vw;
  right: auto;
  margin: 0;
  padding: 5px;
  border-radius: 30px 30px 0 0;
  opacity: 0;
  background-color: var(--white);
}

#ui-dialog.open {
  display: block;
  opacity: 1;
}

#ui-dialog-titlebar {
  position: relative;
  background-color: var(--white);
  border-radius: 30px 30px 0 0;
  background-image: linear-gradient(150deg, var(--color1), var(--color2), var(--color3));
}

#ui-dialog-title {
  margin: 0;
  padding: 1rem;
  font-size: 1.5em;
  text-align: center;
  letter-spacing: 2px;
  font-family: var(--titlefont);
  color: var(--white);
}

#ui-dialog-close {
  display: block;
  color: var(--white);
  position: absolute;
  right: 0;
  top: 0;
  white-space: nowrap;
  font-size: 120%;
  margin: 0;
  padding: 0;
  width: 3.6em;
  height: 92%;
  background-color: transparent;
  border: none;
}

#ui-dialog-close:hover {
  background-color: transparent;
  border-color: transparent;
  color: var(--white);
  text-shadow: 1px 1px 0px var(--color2);
}

#ui-dialog-body {
  overflow: auto;
  width: 100%;
  min-width: 280px;
  height: auto;
  max-height: 70vh;
  border: none;
  line-height: 1.5;
  padding: 0;
  margin: 5px 0 0;
  font-size: 1rem;
  background-color: var(--white);
}

#ui-dialog-body.settings {
  padding: 1rem;
}

#ui-dialog-body ul.buttons {
  background-color: var(--white);
  margin: 10px 0 0;
  padding: 5px 0 0;
  list-style: none;
}

#ui-dialog-body ul.buttons li {
  display: block;
  margin: 5px auto;
  padding: 0;
}

#ui-dialog-body ul.buttons li:first-child {
  margin: 0 auto;
}

#ui-dialog-body ul.buttons > li + li > button {
  margin-left: 0;
}

#ui-dialog-body ul.buttons button {
  background-image: linear-gradient(150deg, var(--color1), var(--color2), var(--color3));
  color: var(--white);
  font-size: 0.9rem;
  letter-spacing: 1px;
  border: none;
  width: 100%;
  padding: 7px;
}

#ui-dialog-body ul.buttons button:hover {
  outline: 1px solid var(--white);
  outline-offset: -4px;
}

#ui-dialog-body #saves-load-auto {
  background-image: linear-gradient(150deg, var(--color1), var(--color2), var(--color3));
  color: var(--white);
  border: none;
  width: 100%;
  padding: 7px;
}

#ui-dialog-body.saves table {
  border-spacing: 0;
  width: 100%;
  text-align: center;
  font-family: monospace;
  padding: 10px;
}

#ui-dialog-body.saves td {
  padding: 0.33em 0.33em;
  color: var(--color1);
}

#ui-dialog-body.saves td:first-child {
  min-width: 1.5em;
  text-align: center;
}

#ui-dialog-body.saves .empty {
  color: var(--color2);
}

#ui-dialog-body button.save {
  background-image: linear-gradient(150deg, var(--color1), var(--color2), var(--color3));
  border: 0;
  color: var(--white);
  width: 100%;
  padding: 7px;
}

#ui-dialog-body button.save:hover {
  outline: 1px solid var(--white);
  outline-offset: -4px;
}

#ui-dialog-body button.delete {
  background-image: linear-gradient(150deg, var(--color1), var(--color2), var(--color3));
  border: 0;
  color: var(--white);
  width: 100%;
  padding: 7px;
}

#ui-dialog-body button.delete:hover {
  outline: 1px solid var(--white);
  outline-offset: -4px;
}

#ui-dialog-body.saves > :not(:first-child) {
  border-top: none;
}

#ui-dialog-body.saves ul.buttons li {
  padding: 0;
}

#ui-dialog-body.saves button[id=saves-clear]:before, #ui-dialog-body.saves button[id=saves-import]:before, #ui-dialog-body.saves button[id=saves-export]:before {
  content: "";
}

#ui-dialog-body.saves ul.buttons li:last-child {
  float: none;
}

#ui-dialog-body.restart p {
  background-color: var(--white);
  color: #2a271f;
  padding: 10px;
  margin: 0;
}

.stat-passage .box {
  background-image: linear-gradient(150deg, var(--color1), var(--color2), var(--color3));
  padding: 1rem;
  text-align: center;
  outline: 1px solid var(--white);
  color: var(--white);
  outline-offset: -10px;
  margin: 1rem 0;
  font-size: 1rem;
}
.stat-passage h1 {
  font-family: var(--titlefont);
  font-weight: normal;
  margin: 0;
  letter-spacing: 1px;
  color: var(--white);
}
.stat-passage h2 {
  font-weight: normal;
  font-size: 1.1rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin: 0 0;
  color: var(--white);
}
.stat-passage h3::before {
  content: "✦";
  margin-right: 1rem;
  font-size: 0.7rem;
  font-style: normal;
}
.stat-passage h3 {
  font-family: var(--subtitlefont);
  font-weight: normal;
  font-style: italic;
  color: var(--white);
  text-align: center;
  letter-spacing: 2px;
  margin: 1rem 0 1rem;
  width: 100%;
  border: 0;
  font-size: 1.1rem;
}
.stat-passage h3::after {
  content: "✦";
  font-size: 0.7rem;
  margin-left: 1rem;
  font-style: normal;
}
.stat-passage .facts {
  list-style-type: none;
  padding: 0;
  text-align: center;
  margin: -10px 0 0;
}
.stat-passage .facts li::before {
  content: "✦";
  margin-right: 2.5px;
  font-style: normal;
  color: white;
}
.stat-passage .facts li {
  display: inline-block;
  margin: 0 2.5px;
  font-family: monospace;
  font-size: 0.9rem;
}
.stat-passage .box.header {
  border-radius: 50px 50px 0 0;
}
.stat-passage .box.header .star {
  font-size: 0.8rem;
  display: inline-block;
}
.stat-passage .box.blank {
  background-image: none;
  outline: 0;
  color: var(--black);
}
.stat-passage .box.blank h3 {
  color: var(--color1);
}
.stat-passage .box.blank .stat-labels {
  color: var(--black);
}

.stat-group {
  display: grid;
  grid-template-columns: 1fr;
}

.stat {
  margin: 0.5rem auto;
  width: 100%;
}

.stat-labels {
  width: 100%;
  margin: 0 auto;
  /*font-family: monospace;*/
  font-family: var(--subtitlefont);
  font-size: 1.1rem;
  /*text-decoration:underline overline;*/
  padding: 0 5px;
  color: var(--white);
  display: flex;
  justify-content: space-between;
  letter-spacing:1px;
}
.stat-labels span {
  width: 45%;
}
.stat-labels span:nth-child(2) {
  width: 10%;
  text-align: center;
}
.stat-labels span:nth-child(3) {
  width: 10%;
  text-align: right;
  width: 45%;
}

.stat-desc {
  font-size: 1rem;
}

.stat-bar-container {
  max-width: 100%;
  height: 20px;
  position: relative;
  background-color: var(--white);
  border: 1px solid var(--color2);
  border-radius: 5px;
  padding: 5px;
  margin: 0 auto;
}
.stat-bar-container .stat-bar {
  width: 70%;
  height: 100%;
  background-image: linear-gradient(-90deg, var(--color1), var(--color2), var(--color3));
}

@media only screen and (min-width: 800px) {
  #header-top .middle #menu-toggle:hover {
    animation-name: rotate;
    animation-duration: 0.3s;
  }

  .stat-passage .stat-group {
    grid-template-columns: 1fr 1fr;
    grid-gap: 1rem;
  }
}
@media only screen and (min-width: 992px) {
  header nav i:hover {
    text-shadow: 1px 1px 0px var(--color3);
    font-size: 110%;
  }

  #header-top {
    justify-content: space-evenly;
  }

  #header-top .social-media {
    display: block;
  }

  #header-top .tools {
    display: block;
  }
  
  .fullscreen {
    display:none;
  }

  #header-body #story-menu a:hover {
    border-bottom: 1px solid var(--color3);
    padding-bottom: 5px;
  }

  #passages {
    max-width: 800px;
    /*padding-top:120px;*/
    margin: 0 auto;
    background-color: var(--white);
  }
}

@media screen and (max-height: 800px) {
  #passages {
    padding-top:calc(120px - (100vh/10));
    padding-bottom:50px;
  }
}

@media (-webkit-min-device-pixel-ratio:1.25) {
  #passages {  
  	padding-top:calc(150px - (100vh/8));
  }
}

/*# sourceMappingURL=style.css.map */

.bltlist li {
  list-style-type: circle;
}</style><script role="script" id="twine-user-script" type="text/twine-javascript">// TO AUTOSAVE ON PASSAGES TAGGED "BOOKMARK" OR "AUTOSAVE" FOR THE "RESUME GAME" FEATURE ON LOAD SCREEN
Config.saves.autosave = ["bookmark", "autosave"];

// THIS IS WHERE YOU IMPORT YOUR OWN FONTAWESOME KIT URL
importScripts(
	'https://kit.fontawesome.com/989619d3fe.js'
);

// IMPORTING FONTS FROM GOOGLE FONTS + ICONS FROM LINEAR ICONS
importStyles('https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Quicksand:wght@300;400;500;600;700&display=swap','https://cdn.linearicons.com/free/1.0.0/icon-font.min.css');

$(document).ready(function() {
	$("#menu-settings-button").on("click", function(){
		UI.settings();
	});
	
	$("#menu-restart-button").on("click", function(){
		UI.restart();
	});
		
	$("#menu-saves-button").on("click", function(){
		UI.saves();
	});
		
	$("#menu-fullscreen-button").on("click", function(){
		Fullscreen.toggle();
	});
	
		$("#header-settings-button").on("click", function(){
		UI.settings();
	});
	
	$("#header-restart-button").on("click", function(){
		UI.restart();
	});
		
	$("#header-saves-button").on("click", function(){
		UI.saves();
	});
		
	$("#header-fullscreen-button").on("click", function(){
		Fullscreen.toggle();
	});
	
	$("#menu-toggle").on("click", function() {
		$("header").toggleClass("toggled");

    var header = $("header");

    if(header.hasClass("toggled")) {
      $("#menu-toggle").html('<i class="fas fa-chevron-up"></i>');
    } else {
      $("#menu-toggle").html('<i class="fas fa-chevron-down"></i>')
    }
	});
	
	
	$("#backwards-button").on("click", function() {
		Engine.backward();
	});	
	
	$("#forwards-button").on("click", function() {
		Engine.forward();
	});
});

$(document).on(":passagestart", function() {
	if (!tags().includes("noreturn")) {
		/* If it doesn't, then set $return to the current passage name. */
		State.variables.return = passage();
	}
});

$(document).on(":passageend", function() {
		$("#story-menu li a").on("click", function() {
		$("header").toggleClass("toggled");
			
    var header = $("header");
		
		if(header.hasClass("toggled")) {
      $("#menu-toggle").html('<i class="fas fa-chevron-up"></i>');
    } else {
      $("#menu-toggle").html('<i class="fas fa-chevron-down"></i>')
    }
	});
});

// CHANGE FONT FAMILY
var settingFontFamily = ["Sans-Serif", "Serif", "Open Dyslexic"];
var setFont = function() {
	var passages = document.getElementById("passages");
	switch (settings.fontFamily) {
		case "Sans-Serif":
			passages.style.fontFamily = "'Poppins', sans-serif";
			break;
	}
	switch (settings.fontFamily) {
		case "Serif":
			passages.style.fontFamily = "'Merriweather', serif";
			break;
	}
	switch (settings.fontFamily) {
		case "Open Dyslexic":
			passages.style.fontFamily = "'Open-Dyslexic', serif";
			break;
	}
};

Setting.addList("fontFamily", {
	label		: "Change font",
	list		: settingFontFamily,
	onInit		: setFont,
	onChange	: setFont
});

// CHANGE FONT SIZE
var settingFontSize = ["14px", "16px", "18px", "20px", "22px", "24px"];
var setFontSize = function() {
  	switch (settings.fontSize) {
		case "14px":
			passages.style.fontSize = "14px";
			break;
	}
	switch (settings.fontSize) {
		case "16px":
			passages.style.fontSize = "16px";
			break;
	}
	switch (settings.fontSize) {
		case "18px":
			passages.style.fontSize = "18px";
			break;
	}
	switch (settings.fontSize) {
		case "20px":
			passages.style.fontSize = "20px";
			break;
	}
	switch (settings.fontSize) {
		case "22px":
			passages.style.fontSize = "22px";
			break;
	}	
	switch (settings.fontSize) {
		case "24px":
			passages.style.fontSize = "24px";
			break;
	}
};

Setting.addList("fontSize", {
	label		: "Change font size",
	list		: settingFontSize,
	onInit		: setFontSize,
	onChange	: setFontSize
});

// CHANGE THEME
var themeList = ["Thunder (dark)", "Lightning (light)", "Brilliant (dark)", "Iridescent (light)", "Ghostly (dark)", "Pumpkin (light)"];
var setTheme = function() {
  	switch(settings.theme) {
      	case "Brilliant (dark)":
			$(':root').css('--white', '#111');
			$(':root').css('--black', '#eee');
        	$(':root').css('--color1', '#11A581');
        	$(':root').css('--color2', '#2F61B9');
        	$(':root').css('--color3', '#64339B');
        	break;
    }
  	switch(settings.theme) {
      	case "Iridescent (light)":
			$(':root').css('--white', '#eee');
			$(':root').css('--black', '#111');
        	$(':root').css('--color1', '#9DC2BD');
        	$(':root').css('--color2', '#B9C5E1');
        	$(':root').css('--color3', '#C8B2CB');
        	break;
    }
  	switch(settings.theme) {
      	case "Thunder (dark)":
			$(':root').css('--white', '#111');
			$(':root').css('--black', '#eee');
        	$(':root').css('--color1', '#877EAA');
        	$(':root').css('--color2', '#49418B');
        	$(':root').css('--color3', '#28335e');
        	break;
    }
  	switch(settings.theme) {
      	case "Lightning (light)":
			$(':root').css('--white', '#eee');
			$(':root').css('--black', '#111');
        	$(':root').css('--color1', '#A997E1');
        	$(':root').css('--color2', '#7968B7');
        	$(':root').css('--color3', '#5B4F9B');
        	break;
    }
	switch(settings.theme) {
		case "Ghostly (dark)":
			$(':root').css('--white', '#111');
			$(':root').css('--black', '#eee');
        	$(':root').css('--color1', '#23795f');
        	$(':root').css('--color2', '#006b7d');
        	$(':root').css('--color3', '#3d577a');
			break;
	}
  	switch(settings.theme) {
      	case "Pumpkin (light)":
			$(':root').css('--white', '#eee');
			$(':root').css('--black', '#111');
        	$(':root').css('--color1', '#fea90b');
        	$(':root').css('--color2', '#a1a200');
        	$(':root').css('--color3', '#429018');
        	break;
    }
  	
};

Setting.addList("theme", {
	label			: "Change theme",
	list			: themeList,
	onInit		:	setTheme,
	onChange	: setTheme
});

// notify.min.js, for SugarCube 2, by Chapel
// v1.1.1, 2021-04-20, 53d1a20e9321b3782a303cf7dbe00f5c51e947db
;!function(){var s=/\d+m?s$/;function e(s,e,t){"string"==typeof s&&("number"!=typeof e&&(e=!1),$(document).trigger({type:":notify",message:s,delay:e,class:t||""}))}$(document.body).append("<div id='notify'></div>"),$(document).on(":notify",(function(s){s.message&&"string"==typeof s.message&&(s.message.trim(),s.class?"string"==typeof s.class?s.class="open macro-notify "+s.class:Array.isArray(s.class)?s.class="open macro-notify "+s.class.join(" "):s.class="open macro-notify":s.class="open macro-notify",s.delay?("number"!=typeof s.delay&&(s.delay=Number(s.delay)),Number.isNaN(s.delay)&&(s.delay=2e3)):s.delay=2e3,$("#notify").empty().wiki(s.message).addClass(s.class),setTimeout((function(){$("#notify").removeClass()}),s.delay))})),Macro.add("notify",{tags:null,handler:function(){var t=this.payload[0].contents,a=!1,n=!1;if(this.args.length>0){var i=s.test(this.args[0]);"number"==typeof this.args[0]||i?(a=i?Util.fromCssTime(this.args[0]):this.args[0],n=this.args.length>1&&this.args.slice(1).flatten()):n=this.args.flatten().join(" ")}e(t,a,n)}}),setup.notify=e}();
// end notify.min.js

// Liveupdate Macro (Cycy)
(function () {
	"use strict";

	$(document).on(":liveupdate", function () {
		$(".macro-live").trigger(":liveupdateinternal");
	});

	Macro.add(['update', 'upd'], {
		handler: function handler() {
			$(document).trigger(":liveupdate");
		}
	});

	Macro.add(['live', 'l', 'lh'], {
		skipArgs: true,
		handler: function handler() {
			if (this.args.full.length === 0) {
				return this.error('no expression specified');
			}
			try {
				var statement = this.args.full;
				var result = toStringOrDefault(Scripting.evalJavaScript(statement), null);
				if (result !== null) {
					var lh = this.name === "lh";
					var $el = $("<span></span>").addClass("macro-live").wiki(lh ? Util.escape(result) : result).appendTo(this.output);
					$el.on(":liveupdateinternal", this.createShadowWrapper(function (ev) {
						var out = toStringOrDefault(Scripting.evalJavaScript(statement), null);
						$el.empty().wiki(lh ? Util.escape(out) : out);
					}));
				}
			} catch (ex) {
				return this.error("bad evaluation: " + (_typeof(ex) === 'object' ? ex.message : ex));
			}
		}
	});

	Macro.add(['liveblock', 'lb'], {
		tags: null,
		handler: function handler() {
			try {
				var content = this.payload[0].contents.trim();
				if (content) {
					var $el = $("<span></span>").addClass("macro-live macro-live-block").wiki(content).appendTo(this.output);
					$el.on(":liveupdateinternal", this.createShadowWrapper(function (ev) {
						$el.empty().wiki(content);
					}));
				}
			} catch (ex) {
				return this.error("bad evaluation: " + (_typeof(ex) === 'object' ? ex.message : ex));
			}
		}
	});
})();
// end liveupdate</script><tw-tag name="don&#39;t-edit" color="red"></tw-tag><tw-tag name="edit" color="green"></tw-tag><tw-tag name="maybe-don&#39;t-change" color="blue"></tw-tag><tw-tag name="ui" color="blue"></tw-tag><tw-tag name="codeonly" color="green"></tw-tag><tw-tag name="draft" color="yellow"></tw-tag><tw-tag name="startscene" color="green"></tw-tag><tw-tag name="majorVarSet" color="purple"></tw-tag><tw-tag name="genderstuff" color="red"></tw-tag><tw-tag name="todo" color="orange"></tw-tag><tw-tag name="endscene" color="green"></tw-tag><tw-tag name="autosave" color="blue"></tw-tag><tw-tag name="codex" color="blue"></tw-tag><tw-tag name="FIXME" color="red"></tw-tag><tw-tag name="stuff" color="blue"></tw-tag><tw-passagedata pid="1" name="StoryInterface" tags="don&#39;t-edit nobr" position="0,0" size="100,100">&lt;header&gt;
&lt;div class=&quot;decoration-i&quot;&gt;✦&lt;/div&gt;
&lt;div class=&quot;decoration-ii&quot;&gt;✦&lt;/div&gt;
&lt;div class=&quot;decoration-iii&quot;&gt;✦&lt;/div&gt;
&lt;div class=&quot;decoration-v&quot;&gt;✦&lt;/div&gt;

&lt;div id=&quot;header-top&quot;&gt;

&lt;!-- SOCIAL MEDIA ICONS (POPULATED IN THE social media PASSAGE) --&gt;
&lt;nav class=&quot;social-media&quot; data-passage=&quot;social media&quot;&gt;

&lt;/nav&gt;

&lt;div class=&quot;middle&quot;&gt;

&lt;!-- STORY TITLE ETC. WHEN MENU IS CLOSED --&gt;
&lt;div class=&quot;title&quot; data-passage=&quot;story title&quot;&gt;

&lt;/div&gt;

&lt;!-- OPEN MENU ICON --&gt;
&lt;span id=&quot;menu-toggle&quot;&gt;
&lt;i class=&quot;fas fa-chevron-down&quot;&gt;&lt;/i&gt;
&lt;/span&gt;
&lt;/div&gt;

&lt;!-- SETTINGS, RESTART, SAVE &amp; FULLSCREEN BUTTONS --&gt;
&lt;nav class=&quot;tools&quot;&gt;
&lt;span id=&quot;header-saves-button&quot; title=&quot;Save/Load&quot;&gt;&lt;i class=&quot;fas fa-save&quot;&gt;&lt;/i&gt;&lt;/span&gt;
&lt;span id=&quot;header-settings-button&quot; title=&quot;Settings&quot;&gt;&lt;i class=&quot;fas fa-cog&quot;&gt;&lt;/i&gt;&lt;/span&gt;
&lt;span id=&quot;header-restart-button&quot; title=&quot;Restart&quot;&gt;&lt;i class=&quot;fas fa-undo&quot;&gt;&lt;/i&gt;&lt;/span&gt;
&lt;span id=&quot;header-fullscreen-button&quot; title=&quot;Fullscreen&quot;&gt;&lt;i class=&quot;fas fa-expand-arrows-alt&quot;&gt;&lt;/i&gt;&lt;/span&gt;
&lt;/nav&gt;

&lt;/div&gt;

&lt;div id=&quot;header-body&quot;&gt;
&lt;div class=&quot;content&quot;&gt;

&lt;!-- SETTINGS, RESTART, SAVE &amp; FULLSCREEN BUTTONS --&gt;
&lt;div class=&quot;fullscreen&quot;&gt;&lt;nav class=&quot;tools&quot;&gt;
&lt;span id=&quot;menu-saves-button&quot; title=&quot;Save/Load&quot;&gt;&lt;i class=&quot;fas fa-save&quot;&gt;&lt;/i&gt;&lt;/span&gt;
&lt;span id=&quot;menu-settings-button&quot; title=&quot;Settings&quot;&gt;&lt;i class=&quot;fas fa-cog&quot;&gt;&lt;/i&gt;&lt;/span&gt;
&lt;span id=&quot;menu-restart-button&quot; title=&quot;Restart&quot;&gt;&lt;i class=&quot;fas fa-undo&quot;&gt;&lt;/i&gt;&lt;/span&gt;
&lt;span id=&quot;menu-fullscreen-button&quot; title=&quot;Fullscreen&quot;&gt;&lt;i class=&quot;fas fa-expand-arrows-alt&quot;&gt;&lt;/i&gt;&lt;/span&gt;
&lt;/nav&gt;&lt;br&gt;

&lt;nav class=&quot;fullscreen social-media&quot; data-passage=&quot;social media&quot;&gt;&lt;/nav&gt; &lt;/div&gt;
&lt;!-- STORY LOGO (POPULATED IN THE story logo PASSAGE) --&gt;
&lt;div class=&quot;logo-image&quot; data-passage=&quot;story logo&quot;&gt;

&lt;/div&gt;

&lt;!-- STORY LINKS (POPULATED IN THE story links PASSAGE) --&gt;
&lt;div id=&quot;story-menu&quot; data-passage=&quot;story links&quot;&gt;&lt;/div&gt;

&lt;/ul&gt;

&lt;!-- SOCIAL MEDIA ICONS (POPULATED IN THE social media PASSAGE) --&gt;
&lt;!--div class=&quot;social-media&quot; data-passage=&quot;social media&quot;&gt;

&lt;/div--&gt;
&lt;/div&gt;

&lt;div class=&quot;credit&quot;&gt;✦ Template by &lt;a href=&quot;https://outoftheblue-if.tumblr.com&quot; target=&quot;_blank&quot;&gt;Vahnya&lt;/a&gt; ✦&lt;/div&gt;

&lt;/div&gt; &lt;!-- header body end tag --&gt;
&lt;/header&gt;

&lt;div id=&quot;main&quot;&gt;

&lt;div class=&quot;decoration-separator&quot;&gt;&lt;br&gt;&lt;br&gt;
&lt;span&gt;✦&lt;/span&gt;
&lt;span&gt;✦&lt;/span&gt;
&lt;span&gt;✦&lt;/span&gt;
&lt;span&gt;✦&lt;/span&gt;&lt;br&gt;
&lt;/div&gt;

&lt;div id=&quot;passages&quot;&gt;
&lt;/div&gt;

&lt;div class=&quot;decoration-separator&quot;&gt;
&lt;span&gt;✦&lt;/span&gt;
&lt;span&gt;✦&lt;/span&gt;
&lt;span&gt;✦&lt;/span&gt;
&lt;span&gt;✦&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;
&amp;nbsp;
&lt;/div&gt;
&lt;/div&gt; &lt;!-- #main --&gt;

&lt;footer&gt;
&lt;!-- BACKWARDS AND FORWARDS BUTTONS, YOU CAN REMOVE THIS IF YOU DON&#39;T WANT THEM IN YOUR STORY --&gt;
&lt;span id=&quot;backwards-button&quot;&gt;&lt;i class=&quot;fas fa-chevron-left&quot;&gt;&lt;/i&gt;&lt;/span&gt;
&lt;span&gt;✦&lt;/span&gt;
&lt;span id=&quot;forwards-button&quot;&gt;&lt;i class=&quot;fas fa-chevron-right&quot;&gt;&lt;/i&gt;&lt;/span&gt;
&lt;/footer&gt;</tw-passagedata><tw-passagedata pid="2" name="StoryInit" tags="nobr" position="100,0" size="100,100">&lt;&lt;set $testing=false&gt;&gt;
&lt;&lt;set $preset=&quot;&quot;&gt;&gt;
&lt;&lt;set $gentestfalse=true&gt;&gt;
&lt;&lt;set $impossible=false&gt;&gt;
&lt;&lt;set $genderstuff=true&gt;&gt;
&lt;&lt;set $rdbl=false&gt;&gt;
&lt;&lt;set $cursc=0&gt;&gt;
&lt;&lt;set $rollchoice=0&gt;&gt;
&lt;&lt;set $subtitle=&quot;&quot;&gt;&gt;
&lt;&lt;set $subt={
month:&quot;&quot;,
loc:&quot;&quot;,
}&gt;&gt;

&lt;&lt;set $pastduty=0&gt;&gt;
&lt;&lt;set $newduty=0&gt;&gt;
&lt;&lt;set $optimistic=0&gt;&gt;
&lt;&lt;set $humor=0&gt;&gt;
&lt;&lt;set $courage=0&gt;&gt;
&lt;&lt;set $confidence=0&gt;&gt;
&lt;&lt;set $prehawkcon=0&gt;&gt;
&lt;&lt;set $kind=0&gt;&gt;
&lt;&lt;set $curiosity=0&gt;&gt;
&lt;&lt;set $impulsive=0&gt;&gt;

&lt;&lt;set $eyecolor=&quot;&quot;&gt;&gt;
&lt;&lt;set $height=0&gt;&gt;
&lt;&lt;set $haircolor=&quot;&quot;&gt;&gt;
&lt;&lt;set $hairlength=0&gt;&gt;
&lt;&lt;set $thunder=0&gt;&gt;
&lt;&lt;set $angerav=false&gt;&gt;
&lt;&lt;set $nangav=0&gt;&gt;
&lt;&lt;set $name=&quot;Third Child&quot;&gt;&gt;
&lt;&lt;set $nick=&quot;&quot;&gt;&gt;
&lt;&lt;set $veg=false&gt;&gt;
&lt;&lt;set $glasses=false&gt;&gt;
&lt;&lt;set $cooking=0&gt;&gt;
&lt;&lt;set $newcook=0&gt;&gt;
&lt;&lt;set $magicvibes=0&gt;&gt;
&lt;&lt;set $magicattempts=0&gt;&gt;

&lt;&lt;set $skill=&quot;&quot;&gt;&gt;
&lt;&lt;set $motiv=&quot;&quot;&gt;&gt;
&lt;&lt;set $attrand=false&gt;&gt;
&lt;&lt;set $window=false&gt;&gt;
&lt;&lt;set $knowhafood=false&gt;&gt;
&lt;&lt;set $knowhastorm=false&gt;&gt;
&lt;&lt;set $knowhaspring=false&gt;&gt;
&lt;&lt;set $feastprn=0&gt;&gt;
&lt;&lt;set $fescort=0&gt;&gt;
&lt;&lt;set $luggage=0&gt;&gt;
&lt;&lt;set $knowhaleak=0&gt;&gt;
&lt;&lt;set $beastseen=0&gt;&gt;
&lt;&lt;set $beasthint=0&gt;&gt;
&lt;&lt;set $nvbook=0&gt;&gt;
&lt;&lt;set $bookask=false&gt;&gt;
&lt;&lt;set $hobby=&quot;&quot;&gt;&gt;
&lt;&lt;set $mctitle=&quot;&quot;&gt;&gt;
&lt;&lt;set $sjar=false&gt;&gt;
&lt;&lt;set $knowavowed=false&gt;&gt;
&lt;&lt;set $knowemfall=false&gt;&gt;
&lt;&lt;set $knowhaage=false&gt;&gt;
&lt;&lt;set $knowelfrepr=false&gt;&gt;

&lt;&lt;set $ach={
on:true,
any:false,
sname:false,
qasnark:false,
manyq5:false,
bat:false,
manyq13:false,
halaugh:false,
}&gt;&gt;

&lt;&lt;set $three={
letter:false,
robe:false,
}&gt;&gt;

&lt;&lt;set $five={
qcount:0,
acount:0,
}&gt;&gt;

&lt;&lt;set $six={
count:0,
dan:false,
react:&quot;&quot;,
drink:0,
stay:false,
}&gt;&gt;

&lt;&lt;set $seven={
clothes:&quot;&quot;,
feel:0,
}&gt;&gt;

&lt;&lt;set $eight={
breakclothes:0,
breakclothesg:0,
glass:0,
unpack:false,
qcount:0,
}&gt;&gt;

&lt;&lt;set $nine={
burn:false,
cook:false,
food:&quot;&quot;,
cookwhyhawk:false,
}&gt;&gt;

&lt;&lt;set $ten={
excount:0,
ent:&quot;&quot;,
gar:&quot;&quot;,
pan:&quot;&quot;,
lib:&quot;&quot;,
bed:false,
door:false,
}&gt;&gt;

&lt;&lt;set $eleven={
mood:0,
titlepub:false,
cry:false,
townvibe:0,
hafestask:false,
}&gt;&gt;

&lt;&lt;set $twelve={
hatime:false,
isla:false,
sabine:false,
nickchange:false,
}&gt;&gt;

&lt;&lt;set $thirteen={
clothes:0,
conv:0,
lib:false,
qcount:0,
havibes:0,
}&gt;&gt;


&lt;!-- MAYBE ELIMINATE --&gt;


&lt;!-- MC GENDER VARS --&gt;
&lt;&lt;set $gendervibes=&quot;&quot;&gt;&gt;
&lt;&lt;set $prncust=false&gt;&gt;
&lt;&lt;set $axab=&quot;&quot;&gt;&gt;

&lt;&lt;set $ax={
gender:&quot;&quot;,
person:&quot;&quot;,
child:&quot;&quot;,
sibling:&quot;&quot;,
betrothed:&quot;&quot;,
spouse:&quot;&quot;,
Spouse:&quot;&quot;,
parent:&quot;&quot;,
mx:&quot;&quot;,
they:&quot;&quot;,
They:&quot;&quot;,
them:&quot;&quot;,
Them:&quot;&quot;,
their:&quot;&quot;,
Their:&quot;&quot;,
theirs:&quot;&quot;,
Theirs:&quot;&quot;,
themself:&quot;&quot;,
Themself:&quot;&quot;,
plural:false,
}&gt;&gt;

&lt;&lt;set $mc=clone($ax)&gt;&gt;

&lt;!-- ATTRACTION VARS --&gt;
&lt;&lt;set $rom=&quot;&quot;&gt;&gt;
&lt;&lt;set $romatt=0&gt;&gt;
&lt;&lt;set $phys=&quot;&quot;&gt;&gt;
&lt;&lt;set $physatt=0&gt;&gt;
&lt;&lt;set $attraction=&quot;&quot;&gt;&gt;

&lt;!-- HAWK VARS --&gt;
&lt;&lt;set $ha={
gender:&quot;&quot;,
person:&quot;&quot;,
child:&quot;&quot;,
sibling:&quot;&quot;,
betrothed:&quot;&quot;,
spouse:&quot;&quot;,
Spouse:&quot;&quot;,
parent:&quot;&quot;,
mx:&quot;&quot;,
they:&quot;&quot;,
They:&quot;&quot;,
them:&quot;&quot;,
Them:&quot;&quot;,
their:&quot;&quot;,
Their:&quot;&quot;,
theirs:&quot;&quot;,
Theirs:&quot;&quot;,
themself:&quot;&quot;,
Themself:&quot;&quot;,
plural:false,
res:0,
fond:0,
trust:0,
rom:0,
phys:0,
flirt:0,
ban:0,
soft:0,
sus:0,
silent:0,
spark:0,
vc:0,
touch:false,
knowtrans:false,
knowmaybe:false,
knowthunder:false,
knowfood:false,
knowcook:0,
}&gt;&gt;

&lt;!-- CRITTER VARS --&gt;
&lt;&lt;set $crit={
mys:0,
dar:0,
str:0,
sof:0,
liz:0,
}&gt;&gt;

&lt;!-- SHEA VARS --&gt;
&lt;&lt;set $sh={
gender:&quot;&quot;,
person:&quot;&quot;,
child:&quot;&quot;,
sibling:&quot;&quot;,
betrothed:&quot;&quot;,
spouse:&quot;&quot;,
Spouse:&quot;&quot;,
parent:&quot;&quot;,
mx:&quot;&quot;,
they:&quot;&quot;,
They:&quot;&quot;,
them:&quot;&quot;,
Them:&quot;&quot;,
their:&quot;&quot;,
Their:&quot;&quot;,
theirs:&quot;&quot;,
Theirs:&quot;&quot;,
themself:&quot;&quot;,
Themself:&quot;&quot;,
plural:false,
res:0,
fond:0,
trust:0,
rom:0,
phys:0,
flirt:0,
ban:0,
soft:0,
sus:0,
silent:0,
spark:0,
vc:0,
touch:false,
knowtrans:false,
knowmaybe:false,
havibes:2,
mctitle:false,
check:0,
}&gt;&gt;

&lt;!-- RELATIONSHIPS --&gt;
&lt;&lt;set $touch=false&gt;&gt;
&lt;&lt;set $islapromise=&quot;no&quot;&gt;&gt;
&lt;&lt;set $favsibling=&quot;&quot;&gt;&gt;
&lt;&lt;set $svh=0&gt;&gt;

&lt;&lt;set $soren={
rel:0,
touch:false,
}&gt;&gt;

&lt;&lt;set $sabine={
rel:0,
touch:false,
}&gt;&gt;</tw-passagedata><tw-passagedata pid="3" name="stats" tags="nobr noreturn edit stat-passage" position="0,325" size="100,100">&lt;div class=&quot;box header&quot;&gt;
&lt;h1&gt;$name of Eastthorn&lt;/h1&gt;&lt;&lt;if $nick!=&quot;&quot;&amp;&amp;$nick!=$name&gt;&gt;
&lt;h2&gt;$nick&lt;/h2&gt;&lt;&lt;/if&gt;&gt;
&lt;span class=&quot;star&quot;&gt;✦&lt;/span&gt;

&lt;&lt;liveblock&gt;&gt;&lt;&lt;if $mc.person!=&quot;&quot;&gt;&gt;&lt;ul class=&quot;facts&quot;&gt;
&lt;li&gt;$mc.person&lt;/li&gt;
&lt;li&gt;$mc.they/$mc.them&lt;/li&gt;
&lt;!--li&gt;&lt;&lt;switch $skill&gt;&gt;&lt;&lt;case &quot;persuasion&quot;&gt;&gt;persuasive&lt;&lt;case &quot;strategy&quot;&gt;&gt;strategic&lt;&lt;case &quot;persistence&quot;&gt;&gt;persistent&lt;&lt;case &quot;evasion&quot;&gt;&gt;evasive&lt;&lt;/switch&gt;&gt;&lt;/li--&gt;
&lt;/ul&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/liveblock&gt;&gt;
&lt;/div&gt;

&lt;&lt;liveblock&gt;&gt;&lt;&lt;if $cursc&gt;2&gt;&gt;&lt;div class=&quot;box&quot;&gt;
&lt;h3&gt;Appearance&lt;/h3&gt;
&lt;i&gt;A $mc.person&lt;&lt;if $height&gt;0&gt;&gt; of&lt;&lt;if $height==1&gt;&gt; small&lt;&lt;elseif $height&gt;2&gt;&gt;&lt;&lt;if $height==4&gt;&gt; very&lt;&lt;elseif $height==5&gt;&gt;exceptionally&lt;&lt;/if&gt;&gt; tall&lt;&lt;else&gt;&gt; average&lt;&lt;/if&gt;&gt; stature&lt;&lt;/if&gt;&gt;&lt;&lt;if $eyecolor&gt;&gt; with $eyecolor eyes&lt;&lt;/if&gt;&gt;&lt;&lt;if $hairlength&lt;0&gt;&gt; and a bald head&lt;&lt;elseif $hairlength&gt;0&gt;&gt; and $haircolor &lt;&lt;switch $hairlength&gt;&gt;&lt;&lt;case 1&gt;&gt;short&lt;&lt;case 2&gt;&gt;shoulder-length&lt;&lt;case 3&gt;&gt;long&lt;&lt;/switch&gt;&gt; hair&lt;&lt;/if&gt;&gt;.&lt;&lt;if $glasses&gt;&gt; $mc.They usually wear&lt;&lt;s&gt;&gt; glasses.&lt;&lt;/if&gt;&gt;&lt;/i&gt;
&lt;/div&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/liveblock&gt;&gt;

&lt;&lt;liveblock&gt;&gt;&lt;&lt;if $ach.any&gt;&gt;&lt;div class=&quot;box&quot;&gt;
&lt;h3&gt;Achievements&lt;/h3&gt;
&lt;div class=&quot;stat-group&quot;&gt;

&lt;&lt;if $ach.qasnark&gt;&gt;&lt;div class=&quot;stat&quot;&gt;
&lt;div class=&quot;stat-labels&quot;&gt;
&lt;span&gt;Spicy Start&lt;/span&gt;
&lt;/div&gt;
&lt;span class=&quot;stat-desc&quot;&gt;Called Hawk a bastard at the first opportunity&lt;/span&gt;
&lt;/div&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;if $ach.manyq5&gt;&gt;&lt;div class=&quot;stat&quot;&gt;
&lt;div class=&quot;stat-labels&quot;&gt;
&lt;span&gt;Post-Nuptial Interrogation&lt;/span&gt;
&lt;/div&gt;
&lt;span class=&quot;stat-desc&quot;&gt;Asked Hawk as many questions as possible after the wedding&lt;/span&gt;
&lt;/div&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;if $ach.sname&gt;&gt;&lt;div class=&quot;stat&quot;&gt;
&lt;div class=&quot;stat-labels&quot;&gt;
&lt;span&gt;Fitting the Mold&lt;/span&gt;
&lt;/div&gt;
&lt;span class=&quot;stat-desc&quot;&gt;Picked a name that starts with &quot;S&quot;&lt;/span&gt;
&lt;/div&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;if $ach.bat&gt;&gt;&lt;div class=&quot;stat&quot;&gt;
&lt;div class=&quot;stat-labels&quot;&gt;
&lt;span&gt;Like a Bat Out of Hell&lt;/span&gt;
&lt;/div&gt;
&lt;span class=&quot;stat-desc&quot;&gt;Escaped the beast on your first night in the tower&lt;/span&gt;
&lt;/div&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;if $ach.burn&gt;&gt;&lt;div class=&quot;stat&quot;&gt;
&lt;div class=&quot;stat-labels&quot;&gt;
&lt;span&gt;Hazardous Breakfast&lt;/span&gt;
&lt;/div&gt;
&lt;span class=&quot;stat-desc&quot;&gt;Burned yourself trying to make breakfast&lt;/span&gt;
&lt;/div&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;if $ach.door&gt;&gt;&lt;div class=&quot;stat&quot;&gt;
&lt;div class=&quot;stat-labels&quot;&gt;
&lt;span&gt;Worth a Try&lt;/span&gt;
&lt;/div&gt;
&lt;span class=&quot;stat-desc&quot;&gt;Tried opening the locked garden door. Twice.&lt;/span&gt;
&lt;/div&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;if $ach.halaugh&gt;&gt;&lt;div class=&quot;stat&quot;&gt;
&lt;div class=&quot;stat-labels&quot;&gt;
&lt;span&gt;Doing the Impossible&lt;/span&gt;
&lt;/div&gt;
&lt;span class=&quot;stat-desc&quot;&gt;Made Hawk laugh during Ember&#39;s visit&lt;/span&gt;
&lt;/div&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;if $ach.manyq13&gt;&gt;&lt;div class=&quot;stat&quot;&gt;
&lt;div class=&quot;stat-labels&quot;&gt;
&lt;span&gt;An Open Book&lt;/span&gt;
&lt;/div&gt;
&lt;span class=&quot;stat-desc&quot;&gt;Asked Ember (and Hawk) as many questions as possible during their visit&lt;/span&gt;
&lt;/div&gt;&lt;&lt;/if&gt;&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/liveblock&gt;&gt;

&lt;&lt;liveblock&gt;&gt;&lt;&lt;if $testing&gt;&gt;&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Give Stats|giveStats]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/liveblock&gt;&gt;

&lt;!-- IMPORTANT! INCLUDE THE CODE BELOW ON ALL STAT PAGES TO MAKE SURE THE LINK RETURNS THE USER TO THE LAST PASSAGE. IF YOU USE A NORMAL RETURN LINK IT WILL SIMPLY LOOP --&gt;

&lt;span style=&quot;display: block; text-align: center;&quot;&gt;
&lt;&lt;link &quot;« Return to game&quot; $return&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;/span&gt;</tw-passagedata><tw-passagedata pid="4" name="story links" tags="edit nobr" position="0,200" size="100,100">&lt;li title=&quot;Itch&quot;&gt;&lt;a href=&quot;https://asheepinthenight.itch.io/&quot; target=&quot;_blank&quot;&gt;&lt;i class=&quot;fab fa-itch-io&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;

&lt;li title=&quot;Tumblr&quot;&gt;&lt;a href=&quot;https://asheepinthenight.tumblr.com&quot; target=&quot;_blank&quot;&gt;&lt;i class=&quot;fab fa-tumblr&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;

&lt;li title=&quot;Github&quot;&gt;&lt;a href=&quot;https://asheepinthenight.github.io/&quot;&gt;&lt;i class=&quot;fab fa-github&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/li&gt;</tw-passagedata><tw-passagedata pid="5" name="codex" tags="noreturn codex" position="100,325" size="100,100">&lt;&lt;liveblock&gt;&gt;&lt;&lt;if $cursc&gt;1&amp;&amp;impossible&gt;&gt;&lt;&lt;button &quot;Story Journal&quot; &quot;journal&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;
&lt;&lt;/if&gt;&gt;&lt;&lt;if $cTheFall&gt;&gt;&lt;&lt;button &quot;Codex&quot; &quot;codex2&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;&lt;else&gt;&gt;No codex entries discovered yet...&lt;&lt;/if&gt;&gt;&lt;&lt;/liveblock&gt;&gt;

&lt;span style=&quot;display: block; text-align: center;&quot;&gt;
&lt;&lt;link &quot;« Return to game&quot; $return&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;/span&gt;</tw-passagedata><tw-passagedata pid="6" name="Loading Page" tags="loading-page nobr" position="500,0" size="100,100">&lt;div class=&quot;main&quot;&gt;

&lt;nav&gt;
&lt;&lt;link &quot;Resume Game&quot;&gt;&gt;&lt;&lt;run Save.autosave.load()&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Load Game&quot;&gt;&gt;&lt;&lt;run UI.saves();&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;/nav&gt;

&lt;div class=&quot;story-banner&quot;&gt;
&lt;div class=&quot;content&quot;&gt;

&lt;!-- STORY TITLE --&gt;
&lt;h1 class=&quot;story-title&quot;&gt;&lt;&lt;include [[StoryDisplayTitle]]&gt;&gt;&lt;/h1&gt;

&lt;!-- ICON --&gt;
&lt;!--i class=&quot;fas fa-feather&quot;&gt;&lt;/i--&gt;

&lt;!-- STORY SUBTITLE --&gt;
&lt;!--h2 class=&quot;story-subtitle&quot;&gt;by asheepinthenight&lt;/h2&gt;

&lt;span&gt;✦&lt;/span--&gt;

&lt;!-- STORY AUTHOR --&gt;
&lt;h3 class=&quot;story-author&quot;&gt;By &lt;a href=&quot;https://asheepinthenight.itch.io/&quot; target=&quot;_blank&quot; style=&quot;color:var(--white);text-decoration:none;border-bottom:1px dotted&quot;&gt;asheepinthenight&lt;/a&gt;&lt;/h3&gt;

&lt;/div&gt;
&lt;/div&gt;

&lt;nav&gt;
&lt;&lt;link &quot;New Game&quot; &quot;0-0&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;&lt;link &quot;Settings&quot;&gt;&gt;&lt;&lt;run UI.settings();&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;/nav&gt;
&lt;/div&gt;

&lt;div class=&quot;credit&quot;&gt;✦ Template by &lt;a href=&quot;https://outoftheblue-if.tumblr.com&quot; target=&quot;_blank&quot;&gt;Vahnya&lt;/a&gt; ✦&lt;/div&gt;</tw-passagedata><tw-passagedata pid="7" name="0-0" tags="draft" position="500,125" size="100,100">&lt;i&gt;You were never destined to marry for love.

As the third child of the Earl of Eastthorn, your purpose is to marry to your family&#39;s advantage, but after one failed engagement already, your prospects are less than promising. So when the Crown calls upon you to infiltrate the lair of an Elven sorcerer in search of a powerful magical weapon, the offer is too good for your family to refuse.

But leaving your respectable home to marry an immortal being of immense power quickly puts you in uncharted territory. Between your secretive, disagreeable spouse and their labyrinthine spire infested with strange creatures, your mission to uncover their secrets is risky from the start. But as you come to know both your partner and your new home at Talon&#39;s End, you discover terrors and wonders unlike anything you&#39;ve known–and the true price of your mission.&lt;/i&gt;
&lt;hr&gt;
&lt;i&gt;Talon&#39;s End&lt;/i&gt; is a fantasy interactive fiction game about transformation, growth, duty, and love in its many forms. You&#39;re currently playing the demo version and will encounter a cliffhanger and probably some bugs! Please report any issues on &lt;a href=&quot;https://asheepinthenight.itch.io/talons-end&quot; target=&quot;_new&quot;&gt;itch.io&lt;/a&gt; or &lt;a href=&quot;https://asheepinthenight.tumblr.com/&quot;&gt;tumblr&lt;/a&gt;. It is written with an adult audience in mind and contains some darker themes, but the demo does not contain any explicit content and should be appropriate for ages 16+. The age rating may change for the full version. 

&lt;b&gt;Please note:&lt;/b&gt; Demo version saves probably will not work with the full version of the game. Future demo updates may also break saves.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Click here if you&#39;re new to interactive fiction and need help getting started!|0-1]]&lt;/li&gt;
&lt;li&gt;[[Click here to go directly to CWs.|0-2]]&lt;/li&gt;
&lt;li&gt;[[Click here to skip the intro and CWs and start the game.|1-0]]&lt;/li&gt;&lt;&lt;if $testing&gt;&gt;
&lt;li&gt;[[Testing preset|0-1preset]]&lt;/li&gt;&lt;&lt;/if&gt;&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="8" name="social media" tags="edit nobr" position="100,200" size="100,100">&lt;span title=&quot;Profile/Stats&quot;&gt;&lt;&lt;link &#39;&lt;i class=&quot;fas fa-user&quot;&gt;&lt;/i&gt;&#39; &quot;stats&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;span title=&quot;Codex/Journal&quot;&gt;&lt;&lt;link &#39;&lt;i class=&quot;fas fa-book&quot;&gt;&lt;/i&gt;&#39; &quot;codex&quot;&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;span title=&quot;Help&quot;&gt;&lt;&lt;link &#39;&lt;i class=&quot;fas fa-question&quot;&gt;&lt;/i&gt;&#39;&gt;&gt;
&lt;&lt;script&gt;&gt;Dialog.setup(&quot;Help&quot;);
		Dialog.wiki(Story.get(&quot;help&quot;).processText());
		Dialog.open();
&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;

&lt;span title=&quot;Credits&quot;&gt;&lt;&lt;link &#39;&lt;i class=&quot;fas fa-copyright&quot;&gt;&lt;/i&gt;&#39;&gt;&gt;&lt;&lt;script&gt;&gt;Dialog.setup(&quot;Credits&quot;);
		Dialog.wiki(Story.get(&quot;credits&quot;).processText());
		Dialog.open();
&lt;&lt;/script&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/span&gt;</tw-passagedata><tw-passagedata pid="9" name="story title" tags="nobr edit" position="200,200" size="100,100">&lt;!-- TITLE ON THE TOP OF THE PAGE IS POPULATED HERE --&gt;

&lt;!-- STORY TITLE --&gt;
&lt;h1 style=&quot;padding-bottom:.5rem&quot;&gt;&lt;&lt;include [[StoryDisplayTitle]]&gt;&gt;&lt;/h1&gt;

&lt;!-- ICON --&gt;
&lt;!--i class=&quot;fab fa-pagelines&quot;&gt;&lt;/i--&gt;

&lt;!-- STORY SUBTITLE --&gt;
&lt;h2&gt;&lt;&lt;include [[StorySubtitle]]&gt;&gt;&lt;/h2&gt;</tw-passagedata><tw-passagedata pid="10" name="story logo" tags="edit nobr" position="300,200" size="100,100">&lt;!-- STORY BANNER/LOGO POPULATED HERE --&gt;

&lt;div class=&quot;story-banner&quot;&gt;
&lt;div class=&quot;content&quot;&gt;

&lt;!-- STORY TITLE --&gt;
&lt;h1 class=&quot;story-title&quot;&gt;&lt;&lt;include [[StoryDisplayTitle]]&gt;&gt;&lt;/h1&gt;

&lt;!-- ICON --&gt;
&lt;i class=&quot;fas fa-feather&quot;&gt;&lt;/i&gt;

&lt;!-- STORY SUBTITLE --&gt;
&lt;h2 class=&quot;story-subtitle&quot;&gt;&lt;&lt;include [[StorySubtitle]]&gt;&gt;&lt;/h2&gt;

&lt;/div&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="11" name="Widgets" tags="widget nobr" position="0,475" size="100,100">&lt;&lt;widget &quot;are&quot;&gt;&gt;&lt;&lt;switch $mc.plural&gt;&gt;&lt;&lt;case true&gt;&gt;are&lt;&lt;case false&gt;&gt;is&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;were&quot;&gt;&gt;&lt;&lt;switch $mc.plural&gt;&gt;&lt;&lt;case true&gt;&gt;were&lt;&lt;case false&gt;&gt;was&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;s&quot;&gt;&gt;&lt;&lt;switch $mc.plural&gt;&gt;&lt;&lt;case true&gt;&gt;&lt;&lt;case false&gt;&gt;s&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;re&quot;&gt;&gt;&lt;&lt;switch $mc.plural&gt;&gt;&lt;&lt;case true&gt;&gt;re&lt;&lt;case false&gt;&gt;s&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;ve&quot;&gt;&gt;&lt;&lt;switch $mc.plural&gt;&gt;&lt;&lt;case true&gt;&gt;ve&lt;&lt;case false&gt;&gt;s&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;es&quot;&gt;&gt;&lt;&lt;switch $mc.plural&gt;&gt;&lt;&lt;case true&gt;&gt;&lt;&lt;case false&gt;&gt;es&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;hare&quot;&gt;&gt;&lt;&lt;switch $ha.plural&gt;&gt;&lt;&lt;case true&gt;&gt;are&lt;&lt;case false&gt;&gt;is&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;hwere&quot;&gt;&gt;&lt;&lt;switch $ha.plural&gt;&gt;&lt;&lt;case true&gt;&gt;were&lt;&lt;case false&gt;&gt;was&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;hs&quot;&gt;&gt;&lt;&lt;switch $ha.plural&gt;&gt;&lt;&lt;case true&gt;&gt;&lt;&lt;case false&gt;&gt;s&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;hre&quot;&gt;&gt;&lt;&lt;switch $ha.plural&gt;&gt;&lt;&lt;case true&gt;&gt;re&lt;&lt;case false&gt;&gt;s&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;hve&quot;&gt;&gt;&lt;&lt;switch $ha.plural&gt;&gt;&lt;&lt;case true&gt;&gt;ve&lt;&lt;case false&gt;&gt;s&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;hes&quot;&gt;&gt;&lt;&lt;switch $ha.plural&gt;&gt;&lt;&lt;case true&gt;&gt;&lt;&lt;case false&gt;&gt;es&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;sare&quot;&gt;&gt;&lt;&lt;switch $sh.plural&gt;&gt;&lt;&lt;case true&gt;&gt;are&lt;&lt;case false&gt;&gt;is&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;swere&quot;&gt;&gt;&lt;&lt;switch $sh.plural&gt;&gt;&lt;&lt;case true&gt;&gt;were&lt;&lt;case false&gt;&gt;was&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;ss&quot;&gt;&gt;&lt;&lt;switch $sh.plural&gt;&gt;&lt;&lt;case true&gt;&gt;&lt;&lt;case false&gt;&gt;s&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;sre&quot;&gt;&gt;&lt;&lt;switch $sh.plural&gt;&gt;&lt;&lt;case true&gt;&gt;re&lt;&lt;case false&gt;&gt;s&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;sve&quot;&gt;&gt;&lt;&lt;switch $sh.plural&gt;&gt;&lt;&lt;case true&gt;&gt;ve&lt;&lt;case false&gt;&gt;s&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;
&lt;&lt;widget &quot;ses&quot;&gt;&gt;&lt;&lt;switch $sh.plural&gt;&gt;&lt;&lt;case true&gt;&gt;&lt;&lt;case false&gt;&gt;es&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;

&lt;&lt;widget &quot;nvsayall&quot;&gt;&gt;&lt;&lt;switch $nvbook&gt;&gt;&lt;&lt;case true&gt;&gt;write&lt;&lt;case false&gt;&gt;say&lt;&lt;/switch&gt;&gt;&lt;&lt;/widget&gt;&gt;</tw-passagedata><tw-passagedata pid="12" name="haVibeCheck" tags="nobr codeonly" position="100,475" size="100,100">&lt;&lt;set $ha.vc=-.5+$ha.res+$ha.fond*3+$ha.trust*3+$ha.rom+$ha.phys*.5+$ha.flirt*.5+$ha.ban*2+$ha.soft-$ha.sus*3&gt;&gt;</tw-passagedata><tw-passagedata pid="13" name="done" tags="" position="200,475" size="100,100">&lt;&lt;if $testing&gt;&gt;that&#39;s all i got&lt;&lt;else&gt;&gt;oops, this is an error!&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="14" name="StoryDisplayTitle" tags="" position="200,0" size="100,100">Talon&#39;s End</tw-passagedata><tw-passagedata pid="15" name="StorySubtitle" tags="" position="300,0" size="100,100">&lt;i&gt;&lt;&lt;liveblock&gt;&gt;&lt;&lt;if $subt.month!=&quot;&quot;&gt;&gt;$subt.month&lt;&lt;/if&gt;&gt;&lt;&lt;if $subt.month!=&quot;&quot;&amp;&amp;$subt.loc!=&quot;&quot;&gt;&gt;: &lt;&lt;/if&gt;&gt;&lt;&lt;if $subt.loc!=&quot;&quot;&gt;&gt;$subt.loc&lt;&lt;/if&gt;&gt;&lt;&lt;/liveblock&gt;&gt;&lt;/i&gt;</tw-passagedata><tw-passagedata pid="16" name="0-1" tags="draft" position="475,225" size="100,100">&lt;&lt;set $subt.loc=&quot;Intro&quot;&gt;&gt;Interactive fiction games are text-based stories that allow you, the player, to make choices that can affect the events and outcome. This particular game was made in &lt;a href=&quot;https://twinery.org/&quot; target=&quot;_blank&quot;&gt;Twine&lt;/a&gt; and can be thought of as an interactive novel. It does not contain any major graphical or audio elements.

You&#39;ve already seen how choices work, and these will be the main way to navigate the story. Most choices are marked with an ordinary bullet point/circle, but some use special icons:

⇄ is used for choices that have long-term narrative effects or begin a split path. Other choices can have long-term effects, but these are bigger ones.

↺ is used for choices that will allow you to loop back and pick another option from the same or a similar list. Usually, these are questions or quick asides that are part of a larger discussion.

🗨 is used for choices that add quick remarks to an ongoing chat. The passage onscreen will update with additional text to avoid breaking up the dialogue. Using the back arrow (more on that later) will undo all chat choices within the passage, too.

♥ is used for choices to indicate romantic and/or physical attraction. These take the MC&#39;s stated attraction into account.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|0-1-1]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="17" name="0-2" tags="draft" position="500,425" size="100,100">!!List of demo/planned full version content warnings:

!!!Depicted (click for details)

&lt;details&gt;&lt;summary&gt;Societal misogyny and queerphobia&lt;/summary&gt;No physical or verbal violence depicted. References to societal bigotry are less common after the first few scenes. Full version will include option to bypass this content.&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;Arranged marriage&lt;/summary&gt;In-universe, MC could refuse, but the story wouldn&#39;t happen if they did!&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;Age difference in romance&lt;/summary&gt;Romance is optional&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;Occasional mild profanity&lt;/summary&gt;Approximately PG13-appropriate&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;Thunderstorms&lt;/summary&gt;Text only, game does not have sound&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;Bats/rats/spiders/etc.&lt;/summary&gt;MC has the option to not partake&lt;/summary&gt;&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;Being lost in dark/open spaces&lt;/summary&gt;Occasional occurrences&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;Alcohol&lt;/summary&gt;MC has the option to not partake&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;Meat eating&lt;/summary&gt;MC has the option to not partake&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;Mentions of nausea&lt;/summary&gt;Occasional occurrences&lt;/details&gt;
!!!Referenced
&lt;ul&gt;&lt;li&gt;Panic attacks&lt;/li&gt;
&lt;li&gt;War&lt;/li&gt;
&lt;li&gt;Death&lt;/li&gt;&lt;/ul&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Continue to game|1-0]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="18" name="1-0" tags="draft startscene" position="700,100" size="100,100">&lt;&lt;set $cursc=1&gt;&gt;&lt;&lt;set $subt.month=&quot;Late Summer&quot;&gt;&gt;&lt;&lt;set $subt.loc=&quot;Mother&#39;s Sitting Room&quot;&gt;&gt;As you enter your mother’s sitting room, she doesn’t look up.

Her eyes are fixed on the rose garden outside the floor-to-ceiling windows that cover the western wall of the room. The blazing summer-afternoon sun illuminates her face as she takes in the view that she spent all winter planning. Roses of a dozen varieties are in full bloom, meticulously arranged to highlight the difference in color and shape without contrasting so sharply that they might disturb the peaceful viewing experience. But your mother&#39;s gaze doesn&#39;t wander the flowers smoothly as another&#39;s might. It has been pulled and held by a single plant that did not bloom. The plant lives, thrives even, blissfully unaware that its purpose remains unfulfilled.

&quot;Please sit.&quot; Your mother finally turns to you as you take your place on the powder blue settee across from her matching armchair. The furniture is a decade out of fashion, but the replacement due for this year had to be postponed to pay your brother&#39;s commission. You never saw those fabric swatches again. &quot;We have much to discuss.&quot; Her smile doesn&#39;t reach her eyes, but it rarely does.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|1-1]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="19" name="1-1" tags="draft" position="700,200" size="100,100">As your mother goes silent in spite of her words, the grandfather clock in the corner ticks fitfully before its pendulum abruptly slows to a glacial pace. Your great-grandfather’s conviction against magic of any kind has continued down his line to the detriment of the arcane timepiece’s maintenance. Most of the country’s magical clocks have likely deteriorated in a similar manner over the last century, but presumably, most have been retired to an attic or disposed of entirely by now. The fact that the clock that cannot tell time is not a concern for your mother. That isn’t what it’s for, after all. It is an heirloom, as old as the estate itself. It must remain.

&quot;Someone has made an offer,&quot; you...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...say. You&#39;re comfortable speaking with most people.|1-1a]]&lt;/li&gt;
&lt;li&gt;[[...say. You&#39;re comfortable speaking with people close to you and can speak to strangers if you must.|1-1a]]&lt;/li&gt;
&lt;li&gt;[[...say. You&#39;re comfortable speaking with people close to you but keep a book to write in for strangers.|1-1b]]&lt;/li&gt;
&lt;li&gt;[[...write. You prefer writing to speaking aloud and always keep a book to communicate with.|1-1c]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="20" name="1-1-2" tags="draft" position="700,350" size="100,100">You can claim the dubious honor of infidelity having ruined your first attempted marriage before it could start. It could have been salvaged if it were merely an unexpected pregnancy, but when your future spouse declared undying love for someone who wasn’t you, the charade was over. The disgrace of the whole mess bled over onto you. Your reception at society events afterward ranged from pity to open contempt. Why would the child of the Earl of Eastthorn be rejected so openly? You must be undesirable. You must be penniless. You must be deviant. The list went on.

There was never a chance that love would have been part of that marriage. You were young then...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[…and you still had hope love could be found there.|1-1-2.1]]&lt;/li&gt;
&lt;li&gt;[[…but you knew it would never be more than a contract.|1-1-2.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="21" name="1-1-2.1" tags="draft" position="650,450" size="100,100">&lt;&lt;set $optimistic+=1&gt;&gt;You still believed then that love could be found in a pragmatic match, but you&#39;ve grown less naïve since then. &lt;&lt;include [[1-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="22" name="1-1-2.2" tags="draft" position="750,450" size="100,100">&lt;&lt;set $optimistic-=1&gt;&gt;Even then, you didn&#39;t believe love could be found through an obligation. &lt;&lt;include [[1-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="23" name="1-2" tags="draft majorVarSet" position="700,575" size="100,100">You are the third and youngest child in a family with an unimportant title and a financially imperiled estate. The purpose for your existence is to be bargained away in a useful marriage. Your personal feelings are immaterial.

Your mother continues. &quot;I would have preferred more time given the difficulty of preparation and the… implications.&quot; Implications that you are on the other end of an inconvenient pregnancy this time. &quot;But it is necessary—time is of the essence. This marriage is not only for your sake or the sake of the family. If rumors are to be believed—and I have reason to think they are—it may turn the tide of the war.&quot; She looks at you with...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...certainty. You have always put your duty to your family ahead of yourself, even at great cost.|1-2.1]]&lt;/li&gt;
&lt;li&gt;[[...expectation. You have fulfilled your family duties but not compromised all of your own desires.|1-2.2]]&lt;/li&gt;
&lt;li&gt;[[...trepidation. You have done enough for your family not to be irresponsible but no more than that.|1-2.3]]&lt;/li&gt;
&lt;li&gt;[[...resolve. You have fought family expectations at every opportunity, and she is preparing for another fight.|1-2.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="24" name="1-2.1" tags="draft" position="550,700" size="100,100">&lt;&lt;set $pastduty+=3&gt;&gt;She looks at you with pride. You&#39;ve often been told by family and near strangers alike that your sense of duty resembles your mother&#39;s. Sometimes, it is a compliment. &quot;You have always put your responsibility to others before your personal feelings, but this request is greater than any before it.&quot;

&lt;&lt;include [[1-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="25" name="1-2.2" tags="draft" position="650,700" size="100,100">&lt;&lt;set $pastduty+=1&gt;&gt;She looks at you with expectation. You&#39;ve often put your duty to your family above your own desires, but you&#39;ve tried not to let it take too much of you. &quot;You have done your share for this family, but this request is greater than any before it.&quot;

&lt;&lt;include [[1-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="26" name="1-2.3" tags="draft" position="750,700" size="100,100">&lt;&lt;set $pastduty-=1&gt;&gt;Your mother looks at you with resolve. &quot;You have always made your opposition to your familial responsibilities clear, and I would not ask this of you if there were another choice.&quot; Her sharp tone conveys the meaning her words do not: She expects you will find some way to fail her, but she is out of unmarried children. &quot;I have been permissive in letting you put your personal feelings first in the past, but I will not do it again this time.&quot;

&lt;&lt;include [[1-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="27" name="1-2.4" tags="draft" position="850,700" size="100,100">&lt;&lt;set $pastduty-=3&gt;&gt;&quot;You have always made your opposition to your familial responsibilities clear, and I would not ask this of you if there were another choice,&quot; she says. Her sharp tone conveys the meaning her words do not: She expects you will find some way to fail her, but she is out of unmarried children. &quot;I have been permissive in letting you put your personal feelings first, but I cannot do it again this time.&quot; &lt;&lt;include [[1-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="28" name="1-3" tags="draft" position="700,825" size="100,100">She is silent for a long moment and casts her gaze back to the garden. Her usual placid expression dissipates, and she avoids your eye by pretending to inspect the roses once more. But her focus wanders, no longer fixated on the bloomless rose--her mind is elsewhere. &quot;Even if you refuse the marriage, the Crown expects absolute secrecy on the matter I am about to discuss. Do not even tell your siblings. Not a word. Not a hint. The fate of this war depends upon it.&quot; She turns to you and pauses for effect.

You nod for her to continue. &lt;&lt;if $pastduty&gt;0&gt;&gt;You know what your answer to all this will be already. And so does your mother.

She nods, satisfied, continues.&lt;&lt;else&gt;&gt;You&#39;re not going to escape this room without hearing whatever deadly secret is about to be revealed.

Your mother looks at you in silence a moment longer as if trying to decide if she&#39;s surprised.&lt;&lt;/if&gt;&gt; &quot;Royal Intelligence believes there is a magical weapon of great power in development in Heliona Valley.&quot;

Heliona Valley is within the kingdom&#39;s borders, but it isn&#39;t very near to Eastthorn--at least a day away by carriage. You&#39;ve only heard it spoken of in relation to food being grown there. It&#39;s not a likely hotbed of military research.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;What kind of weapon?\&quot;&quot;|1-3.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Are they making weapons from beets and potatoes now?\&quot;&quot;|1-3.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Does the enemy have some sort of base there?\&quot;&quot;|1-3.3]]&lt;/li&gt;
&lt;li&gt;[[Wait for her to continue.|1-3.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="29" name="1-3.1" tags="draft" position="550,950" size="100,100">&quot;What kind of weapon?&quot;

&quot;We know only what I&#39;ve told you. His Majesty hopes it will never be needed... but it may be. Sooner rather than later. &lt;&lt;include [[1-4]]&gt;&gt;</tw-passagedata><tw-passagedata pid="30" name="1-3.2" tags="draft" position="650,950" size="100,100">&lt;&lt;set $humor+=1&gt;&gt;&quot;Are they making weapons from beets and potatoes now?&quot; &lt;&lt;if $nvbook&gt;1&gt;&gt;You can&#39;t quite keep the amusement from your expression&lt;&lt;else&gt;&gt;you ask dryly&lt;&lt;/if&gt;&gt;.

Your mother scowls but otherwise doesn&#39;t acknowledge your comment. &quot;&lt;&lt;include [[1-4]]&gt;&gt;</tw-passagedata><tw-passagedata pid="31" name="1-3.3" tags="draft" position="750,950" size="100,100">&quot;Does the enemy have some sort of base there?&quot;

&quot;Not that I&#39;ve heard of. &lt;&lt;include [[1-4]]&gt;&gt;</tw-passagedata><tw-passagedata pid="32" name="1-3.4" tags="draft" position="850,950" size="100,100">You wait silently for your mother to continue.

&quot;&lt;&lt;include [[1-4]]&gt;&gt;</tw-passagedata><tw-passagedata pid="33" name="1-4" tags="draft" position="700,1075" size="100,100">This weapon is being developed by--&quot; She falters, fixing her gaze on the trees far in the distance before she continues. &quot;...By an independent sorcerer.&quot;

Magic has been rare ever since the magical disasters of your great-grandfather&#39;s days The sorcerous experiments of that time mutated the kingdom&#39;s crops and livestock and spread horrific diseases until the Crown and the gentry drove mages from their lands. The only sorcerers who remain are those either too weak to be a danger or too powerful to risk offending. It&#39;s clear which group this sorcerer is part of.

&quot;You may be retrieving anything from research notes to a weapon completed and ready for use. I understand that hearing of it at all was quite a feat. The Crown does not know the reason for the development of this weapon, whether it is to sell advantageously or if it is for some sort of... personal use.&quot; A chilling an idea, but certainly not beyond a sorcerer. Not that you&#39;ve ever met one.

You are beginning to see the shape of the gameboard you&#39;ve been dropped onto--at least, as well as you can without anyone knowing the true prize of the match. Your mother has been dancing around the identity of your betrothed, but she can&#39;t put off speaking it into a form forever. &quot;And the one who made an offer is...?&quot;

&lt;&lt;if $familyduty&gt;0&gt;&gt;A chill runs down your spine as an expression of fear contorts your mother&#39;s face for just a moment before the calm returns.&lt;&lt;else&gt;&gt;Your mother has the decency to look guilty and, perhaps, even a little nervous.&lt;&lt;/if&gt;&gt; &quot;The sorcerer.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|1-5]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="34" name="1-5" tags="draft" position="700,1175" size="100,100">&quot;His Majesty knows that you are unmarried. There was no reason I could give to refuse the request.&quot;

Even if there were a reason, she wouldn&#39;t have refused. Winning the war, seeing her husband return home—those are secondary. Putting the Crown in your family’s debt is a prize too great for your mother, no matter the cost. &lt;&lt;if $familyduty&gt;0&gt;&gt;It is the best way she has to protect the family--even if it costs one of its members.&lt;&lt;else&gt;&gt;Why remain the wife of a lowly earl when she can strategize her way to a greater title for the family? You wonder what your sacrifice will grant her in the end.&lt;&lt;/if&gt;&gt;

You consider the bizarre mission before you: Marry a dangerous sorcerer and, one way or another, obtain some sort of weapon-in-progress from them for the Crown&#39;s use. The war must not be going as well as His Majesty expected. This is less a plan and more wild shot in the dark.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[You&#39;ll find a way to pull it off.|1-5.1]]&lt;/li&gt;
&lt;li&gt;[[This is an unreasonable gamble, but it&#39;s worth a try.|1-5.2]]&lt;/li&gt;
&lt;li&gt;[[You don&#39;t expect success, but you have no real choice.|1-5.3]]&lt;/li&gt;
&lt;li&gt;[[There&#39;s no chance this will work.|1-5.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="35" name="1-5.1" tags="draft" position="550,1300" size="100,100">&lt;&lt;set $confidence+=3&gt;&gt;You&#39;ll find a way to pull it off. You usually do. &lt;&lt;include [[1-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="36" name="1-5.2" tags="draft" position="650,1300" size="100,100">&lt;&lt;set $confidence+=1&gt;&gt;This is an unreasonable gamble, but it&#39;s worth a try. It&#39;s not impossible that you&#39;ll succeed. &lt;&lt;include [[1-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="37" name="1-5.3" tags="draft" position="750,1300" size="100,100">&lt;&lt;set $confidence-=1&gt;&gt;You don&#39;t expect success, but you have no real choice. You hope His Majesty&#39;s generals aren&#39;t relying on this mysterious weapon as a primary strategy. &lt;&lt;include [[1-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="38" name="1-5.4" tags="draft" position="850,1300" size="100,100">&lt;&lt;set $confidence-=3&gt;&gt;There&#39;s no chance this will work. You&#39;re already trapped walking down this path, but there&#39;s only one way it can end. &lt;&lt;include [[1-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="39" name="1-6" tags="draft majorVarSet" position="700,1425" size="100,100">&lt;&lt;if $confidence&gt;0&gt;&gt;After all, you have cultivated your&lt;&lt;else&gt;&gt;But maybe not all is lost. You do have some&lt;&lt;/if&gt;&gt; skill in...

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[...persuading others to see things your way.|1-6.1]]&lt;/li&gt;
&lt;li&gt;[[...dealing with situations strategically.|1-6.2]]&lt;/li&gt;
&lt;li&gt;[[...persisting in the face of opposition.|1-6.3]]&lt;/li&gt;
&lt;li&gt;[[...evading the attention and ire of others.|1-6.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="40" name="1-6.1" tags="draft" position="550,1550" size="100,100">&lt;&lt;set $skill=&quot;persuasion&quot;&gt;&gt;You are skilled at persuading others to see things your way, whether through logic, emotion, or ethics. &lt;&lt;if $confidence&gt;0&gt;&gt;Even a dangerous sorcerer can&#39;t be completely immune to such things.&lt;&lt;else&gt;&gt;You only hope this sorcerer can be reasoned with.&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[1-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="41" name="1-6.2" tags="draft" position="650,1550" size="100,100">&lt;&lt;set $skill=&quot;strategy&quot;&gt;&gt;You are skilled at dealing with situations strategically by making plans and carefully considering the consequences of your choices. The lair of a sorcerer isn&#39;t within the realm of your experience&lt;&lt;if $confidence&gt;0&gt;&gt;, but you&#39;ll find a way to orient yourself there&lt;&lt;else&gt;&gt;. You hope you can keep up&lt;&lt;/if&gt;&gt;.

&lt;&lt;include [[1-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="42" name="1-6.3" tags="draft" position="750,1550" size="100,100">&lt;&lt;set $skill=&quot;persistence&quot;&gt;&gt;You are practiced at persisting in the face of opposition. Even if others wouldn&#39;t consider sheer determination a skill, it has seen you through many ordeals after other avenues failed.

&lt;&lt;include [[1-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="43" name="1-6.4" tags="draft" position="850,1550" size="100,100">&lt;&lt;set $skill=&quot;evasion&quot;&gt;&gt;You are practiced at evading the attention and ire of others by calming tempers and going unnoticed in a crowd. It&#39;s an essential skillset at society events, so maybe it will have a use elsewhere, too.

&lt;&lt;include [[1-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="44" name="1-7" tags="draft" position="700,1675" size="100,100">&quot;This is not the marriage I hoped you would have,&quot; your mother says, pulling you back from your plans to the present.&lt;&lt;if $pastduty&lt;0&gt;&gt; She doesn&#39;t need to clarify that it is not as advantageous as she hoped.&lt;&lt;/if&gt;&gt; &quot;And after all this is over, you will certainly have His Majesty&#39;s favor. Asking for dispensation for a divorce would be a trivial matter, I&#39;m sure. No one would blame you for divorcing such a creature.&quot; She winces when she hears the sharpness of her own words. &quot;Creature&quot; is too harsh even for a sorcerer. There&#39;s something you&#39;re still missing.&lt;&lt;if $confidence&lt;0&gt;&gt; You can feel your fragile strategy begin to slip from your fingers.&lt;&lt;/if&gt;&gt;

Objectively, the situation remains the same whether or not you understand it in full. But it&#39;s difficult to shake the sense that just asking the question will somehow make it worse.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Ask.|1-7.1]]&lt;/li&gt;
&lt;li&gt;[[Wait for your mother to explain.|1-7.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="45" name="1-7.1" tags="draft" position="650,1800" size="100,100">&lt;&lt;set $courage+=1&gt;&gt;&quot;What do you mean by &#39;creature?&#39;&quot;

Your mother is silent for a long moment before she speaks, pulling all the pieces into place. &lt;&lt;include [[1-8]]&gt;&gt;</tw-passagedata><tw-passagedata pid="46" name="1-7.2" tags="draft" position="750,1800" size="100,100">&lt;&lt;set $courage -=1&gt;&gt;Your stomach twists as you sit in silence, looking at your mother as she stares back. Finally, she speaks quietly, pulling all the pieces into place. &lt;&lt;include [[1-8]]&gt;&gt;</tw-passagedata><tw-passagedata pid="47" name="1-8" tags="draft" position="700,1925" size="100,100">&lt;&lt;set $cTheFall=true&gt;&gt;&lt;&lt;notify&gt;&gt;Codex entry unlocked: &lt;i&gt;The Fall&lt;/i&gt;&lt;&lt;/notify&gt;&gt;&quot;Your betrothed is an Elf.&quot;

Her words hit the room like a lead weight. Sorcerers are rare enough, but there may be a dozen Elves in the whole country. They are beings so long-lived and powerful that the magical catastrophes of your great-grandfather&#39;s time would be as recent to them as last month is to you. Perhaps this magical weapon even caused one those terrible events.

You&#39;ve heard that Elves need neither food nor drink, and even an injury or illness that would be deadly to a mortal cannot kill them. They were once celestial guardians who Fell when they rebelled in order to protect mortals in ancient times. Without food, without sleep, they are sustained by a single Purpose throughout their millennia-long lives, compelled by an impulse more powerful than any human instinct to fulfill the goal set before them.

There are countless stories about Elves that are told to children at bedtime. A foolish human who accidentally disrupts an Elf&#39;s ritual is cursed for eleven generations. A kind one who aids an Elf in their Purpose is granted abundance great enough for an entire kingdom. But always, they are a force of nature more than a character in the story.

Angering a sorcerer is dangerous enough. Standing between a force of nature and their Purpose is incomprehensible.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I understand.\&quot;&quot;|1-8.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;No. I won&#39;t do this.\&quot;&quot;|1-8.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="48" name="1-8.1" tags="draft" position="650,2050" size="100,100">&lt;&lt;set $newduty-=1&gt;&gt;&quot;I understand,&quot; you &lt;&lt;if $nvbook&gt;1&gt;&gt;write, summoning your courage&lt;&lt;else&gt;&gt;say, finally summoning your voice&lt;&lt;/if&gt;&gt;.

&lt;&lt;if $pastduty&gt;0&gt;&gt;Your mother nods, your expected agreement finally given.&lt;&lt;else&gt;&gt;Surprise twists your mother&#39;s expression, uncertain what to do now that things have gotten this far without an argument.&lt;&lt;/if&gt;&gt; &quot;Good. &lt;&lt;include [[1-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="49" name="1-8.2" tags="draft" position="850,2050" size="100,100">&lt;&lt;set $newduty-=1&gt;&gt;&quot;No. I won&#39;t do this,&quot; you &lt;&lt;if $nvbook&gt;&gt;write, summoning your courage&lt;&lt;else&gt;&gt;say, finally summoning your voice&lt;&lt;/if&gt;&gt;.

&lt;&lt;if $pastduty&gt;0&gt;&gt;&quot;&#39;No?&#39;&quot; Surprise twists your mother&#39;s expression.&lt;&lt;else&gt;&gt;Your mother sighs, and you can see her brace herself for the argument she&#39;s been expecting.&lt;&lt;/if&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Doesn&#39;t this seem suspicious? An Elf with a mysterious weapon looking to marry a human?\&quot;&quot;|1-8.2.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;This is a death sentence.\&quot;&quot;|1-8.2.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;There must be another way.\&quot;&quot;|1-8.2.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="50" name="1-9" tags="draft" position="700,2300" size="100,100">If you do not succeed, no one will benefit, so the Crown has offered what aid they can without giving away your true purpose. His Majesty employs curse-breakers, and you will have a powerful protective charm at your disposal if you wish. When you write to us, you will have code words to report what you have learned or to request aid. And if you are truly in danger...&quot; Your mother reaches into a small pocket concealed in the waistband of her dress and pulls out a tiny silk pouch. &quot;You will have a token to alert His Majesty&#39;s sorcerers that they must bring you home.&quot;

You reach out to take the pouch, but she pulls it minutely toward her.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|1-10]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="51" name="1-8.2.1" tags="draft" position="750,2175" size="100,100">&lt;&lt;set $impulsive-=1&gt;&gt;&quot;Doesn&#39;t this seem suspicious? An Elf with a mysterious weapon looking to marry a human?&quot;

&quot;I thought the same, but apparently, this interest goes back... quite some time. It came from the Elf&#39;s enclave, not to us but to the Crown. The intent was to tie the Elves who live in the kingdom more closely to us--humans. It did not specific which Elf would marry which human. There were no stipulations at all.&quot; There was, apparently, enough understanding of human society to know a marriage could bind two groups together but not enough to know that allowing the Crown to sit on it indefinitely could be dangerous. &quot;The King&#39;s ambassador was able to settle the enclave on the correct Elf, and you were the Crown&#39;s selection for our end of the marriage.&quot; You, born to a titled family but not titled enough to be costly, with a father and soon a brother in the army to provide incentive.

Seeing the cold machinations behind this arrangement is almost comforting somehow.

Your mother continues: &quot;&lt;&lt;include [[1-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="52" name="1-8.2.2" tags="draft" position="850,2175" size="100,100">&lt;&lt;set $impulsive+=1&gt;&gt;&quot;This is a death sentence,&quot; you &lt;&lt;if $nvbook&gt;1&gt;&gt;write&lt;&lt;else&gt;&gt;say&lt;&lt;/if&gt;&gt;, feeling both too hot and too cold at the same time. &quot;I &lt;&lt;if $confidence&gt;=0&gt;&gt;won&#39;t&lt;&lt;else&gt;&gt;can&#39;t&lt;&lt;/if&gt;&gt; do this.&quot;

&quot;Royal Intelligence believes this is a safe course of action. They investigated this sorcerer&#39;s reputation, and they found neither locals in the area who had alarming experiences nor records of any concerning activities.&quot;

&quot;No concerning activities aside from weapons development, you mean.&quot;

Your mother does not dignify that with a reply, but you know that she is as familiar with the stories of Elves as you are. &quot;&lt;&lt;include [[1-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="53" name="1-8.2.3" tags="draft" position="950,2175" size="100,100">&quot;There must be another way,&quot; you &lt;&lt;if $nvbook&gt;1&gt;&gt;write&lt;&lt;else&gt;&gt;say&lt;&lt;/if&gt;&gt;. &quot;This plan seems &lt;&lt;if $confidence&gt;0&gt;&gt;ridiculous&lt;&lt;else&gt;&gt;impossible&lt;&lt;/if&gt;&gt;.&quot;

&quot;There are other ways, but they all have risks of their own. The greatest risk is alerting the enemy&#39;s spies to the presence of this weapon. There&#39;s no telling what they would do to obtain it–or do with it if they succeeded. This is the least dangerous course of action for the country. &lt;&lt;include [[1-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="54" name="1-10" tags="draft genderstuff majorVarSet" position="700,2400" size="100,100">&quot;This is among the most valuable objects in the country, so &lt;&lt;if $newduty&gt;0&gt;&gt;I must have your word, explicitly, that you will agree to do this&lt;&lt;else&gt;&gt;if you intend to refuse this marriage, it must be returned immediately&lt;&lt;/if&gt;&gt;.&quot;

You pull your hand back. &quot;They just gave it to you?&quot;

&quot;They did not &lt;i&gt;offer&lt;/i&gt; it. I asked for it.&quot; She looks down at the pouch as she rolls the fabric between her fingers. &quot;I have only three children. &lt;&lt;if $pastduty&lt;-1&gt;&gt;You may not believe it, but &lt;&lt;/if&gt;&gt;I do not wish to lose my youngest...&quot;&lt;&lt;if $genderstuff&gt;&gt;\

&lt;blockquote&gt;&lt;i&gt;Please choose the gender your character was assigned at birth. You will be able to choose if they identify as this gender on the next page.&lt;/i&gt;&lt;/blockquote&gt;\

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[&quot;\&quot;...daughter.\&quot;&quot;|1-10f]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;...son.\&quot;&quot;|1-10m]]&lt;/li&gt;&lt;/ul&gt;\
&lt;&lt;else&gt;&gt;\
&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[&quot;\&quot;...daughter.\&quot;&quot;|1-10fg]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;...son.\&quot;&quot;|1-10mg]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;...child.\&quot;&quot;|1-10nbg]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="55" name="1-10f" tags="draft genderstuff majorVarSet" position="450,2525" size="100,100">&lt;&lt;set $axab=&quot;afab&quot;&gt;&gt;&lt;&lt;include [[1-10SET]]&gt;&gt;The world knows you as a $ax.person, but privately...

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[...you&#39;re not sure if that&#39;s true.|1-10x.1]]&lt;/li&gt;
&lt;li&gt;[[...you know it isn&#39;t who you are.|1-10x.2]]&lt;/li&gt;
&lt;li&gt;[[...you know it is who you are.|1-10x.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="56" name="1-10m" tags="draft genderstuff majorVarSet" position="600,2525" size="100,100">&lt;&lt;set $axab=&quot;amab&quot;&gt;&gt;&lt;&lt;include [[1-10SET]]&gt;&gt;The world knows you as a $ax.person, but privately...

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[...you&#39;re not sure if that&#39;s true.|1-10x.1]]&lt;/li&gt;
&lt;li&gt;[[...you know it isn&#39;t who you are.|1-10x.2]]&lt;/li&gt;
&lt;li&gt;[[...you know it is who you are.|1-10x.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="57" name="1-10fg" tags="todo" position="825,2525" size="100,100">&lt;&lt;set $axab=&quot;nope&quot;&gt;&gt;&lt;&lt;set $gender=&quot;fem&quot;&gt;&gt;

CUSTOM GENDER STUFF (nouns/pronouns)</tw-passagedata><tw-passagedata pid="58" name="1-10mg" tags="todo" position="925,2525" size="100,100">&lt;&lt;set $axab=&quot;nope&quot;&gt;&gt;&lt;&lt;set $gender=&quot;masc&quot;&gt;&gt;

CUSTOM GENDER STUFF</tw-passagedata><tw-passagedata pid="59" name="1-10nbg" tags="todo" position="1025,2525" size="100,100">&lt;&lt;set $axab=&quot;nope&quot;&gt;&gt;&lt;&lt;set $gender=&quot;nb&quot;&gt;&gt;

CUSTOM GENDER STUFF</tw-passagedata><tw-passagedata pid="60" name="1-10SET" tags="nobr todo majorVarSet" position="575,2400" size="100,100">&lt;&lt;switch $axab&gt;&gt;
	&lt;&lt;case &quot;afab&quot;&gt;&gt;
    	&lt;&lt;set $ax.gender=&quot;female&quot;&gt;&gt;
		&lt;&lt;set $ax.person=&quot;woman&quot;&gt;&gt;
		&lt;&lt;set $ax.child=&quot;daughter&quot;&gt;&gt;
        &lt;&lt;set $ax.sibling=&quot;sister&quot;&gt;&gt;
        &lt;&lt;set $ax.betrothed=&quot;fiancée&quot;&gt;&gt;
        &lt;&lt;set $ax.spouse=&quot;wife&quot;&gt;&gt;
        &lt;&lt;set $ax.Spouse=&quot;Wife&quot;&gt;&gt;
        &lt;&lt;set $ax.parent=&quot;mother&quot;&gt;&gt;
        &lt;&lt;set $ax.mx=&quot;Mrs.&quot;&gt;&gt;
    	&lt;&lt;set $ax.they=&quot;she&quot;&gt;&gt;
        &lt;&lt;set $ax.They=&quot;She&quot;&gt;&gt;
		&lt;&lt;set $ax.them=&quot;her&quot;&gt;&gt;
        &lt;&lt;set $ax.Them=&quot;Her&quot;&gt;&gt;
		&lt;&lt;set $ax.their=&quot;her&quot;&gt;&gt;
        &lt;&lt;set $ax.Their=&quot;Her&quot;&gt;&gt;
        &lt;&lt;set $ax.theirs=&quot;hers&quot;&gt;&gt;
        &lt;&lt;set $ax.Theirs=&quot;Hers&quot;&gt;&gt;
        &lt;&lt;set $ax.themself=&quot;herself&quot;&gt;&gt;
        &lt;&lt;set $ax.Themself=&quot;Herself&quot;&gt;&gt;
	&lt;&lt;case &quot;amab&quot;&gt;&gt;
    	&lt;&lt;set $ax.gender=&quot;male&quot;&gt;&gt;
		&lt;&lt;set $ax.person=&quot;man&quot;&gt;&gt;
		&lt;&lt;set $ax.child=&quot;son&quot;&gt;&gt;
        &lt;&lt;set $ax.sibling=&quot;brother&quot;&gt;&gt;
        &lt;&lt;set $ax.betrothed=&quot;fiancé&quot;&gt;&gt;
        &lt;&lt;set $ax.spouse=&quot;husband&quot;&gt;&gt;
        &lt;&lt;set $ax.Spouse=&quot;Husband&quot;&gt;&gt;
        &lt;&lt;set $ax.parent=&quot;father&quot;&gt;&gt;
        &lt;&lt;set $ax.mx=&quot;Mr.&quot;&gt;&gt;
    	&lt;&lt;set $ax.they=&quot;he&quot;&gt;&gt;
        &lt;&lt;set $ax.They=&quot;He&quot;&gt;&gt;
		&lt;&lt;set $ax.them=&quot;him&quot;&gt;&gt;
        &lt;&lt;set $ax.Them=&quot;Him&quot;&gt;&gt;
		&lt;&lt;set $ax.their=&quot;his&quot;&gt;&gt;
        &lt;&lt;set $ax.Their=&quot;His&quot;&gt;&gt;
        &lt;&lt;set $ax.theirs=&quot;his&quot;&gt;&gt;
        &lt;&lt;set $ax.Theirs=&quot;His&quot;&gt;&gt;
        &lt;&lt;set $ax.themself=&quot;himself&quot;&gt;&gt;
        &lt;&lt;set $ax.Themself=&quot;Himself&quot;&gt;&gt;
	&lt;&lt;case &quot;nope&quot;&gt;&gt;
    	&lt;!-- ADD ME --&gt;
&lt;&lt;/switch&gt;&gt;</tw-passagedata><tw-passagedata pid="61" name="1-10x.1" tags="draft genderstuff majorVarSet" position="425,2650" size="100,100">&lt;&lt;set $mc=clone($ax)&gt;&gt;&lt;&lt;set $gendervibes=&quot;maybe&quot;&gt;&gt;&lt;&lt;if $axab==&quot;afab&quot;&gt;&gt;&lt;&lt;set $mc.gender=&quot;fem&quot;&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set $mc.gender=&quot;masc&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;set $mc.plural=false&gt;&gt;The world knows you as a $ax.person, but privately, you&#39;re not sure if that&#39;s true. You haven&#39;t spoken directly of your thoughts to your siblings yet. But visiting your sister and her husband and hearing their less-than-traditional views on gender roles is encouraging, even if you could never speak of such things openly elsewhere. If your mother had known her son-in-law would only strengthen your sister&#39;s budding radical views, she certainly wouldn&#39;t have approved of the match.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|1-11]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="62" name="1-10x.2" tags="draft genderstuff majorVarSet" position="525,2650" size="100,100">&lt;&lt;set $gendervibes=&quot;trans&quot;&gt;&gt;The world knows you as a $ax.person, but privately, you know it isn&#39;t who you are. Revealing that fact would result in a level of ostracism that you &lt;&lt;if $pastduty&gt;0&gt;&gt;cannot put your family through&lt;&lt;else&gt;&gt;are not ready to risk yet&lt;&lt;/if&gt;&gt;, but your brother and sister know who that you are really...

&lt;ul class=&quot;split&quot;&gt;&lt;&lt;if $axab==&quot;afab&quot;&gt;&gt;&lt;li&gt;[[...a man.|1-10x.2b][$mc.gender=&quot;masc&quot;]]&lt;/li&gt;&lt;&lt;else&gt;&gt;&lt;li&gt;[[...a woman.|1-10x.2b][$mc.gender=&quot;fem&quot;]]&lt;/li&gt;&lt;&lt;/if&gt;&gt;
&lt;li&gt;[[...neither a man nor woman.|1-10x.2nb]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="63" name="1-10x.3" tags="draft genderstuff majorVarSet" position="625,2650" size="100,100">&lt;&lt;set $mc=clone($ax)&gt;&gt;&lt;&lt;set $gendervibes=&quot;cis&quot;&gt;&gt;&lt;&lt;if $axab==&quot;afab&quot;&gt;&gt;&lt;&lt;set $mc.gender=&quot;fem&quot;&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set $mc.gender=&quot;masc&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;set $mc.plural=false&gt;&gt;\
The world knows you as a $ax.person, and that matches with the person you know yourself to be. &lt;&lt;if $mc.gender==&quot;fem&quot;&gt;&gt;Being a $mc.person is difficult enough, knowing that you could never be given the choices or respect a man would. You will always be lesser.&lt;&lt;else&gt;&gt;Being a $mc.person comes with many privileges, but it has its poisonous expectations as well. You can never be emotional or vulnerable without risking enduring ridicule.&lt;&lt;/if&gt;&gt; But visiting your sister and her husband and hearing their less-than-traditional views on gender roles is liberating, if only in that small, brief space. If your mother had known her son-in-law would only strengthen your sister&#39;s budding radical views, she certainly wouldn&#39;t have approved of the match.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|1-11]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="64" name="1-11" tags="draft" position="700,3150" size="100,100">&quot;Will you accept the offer?&quot; she asks, holding the pouch out to you.

The offer of marriage, the offer to elevate your family&#39;s status, the offer of &lt;&lt;if $confidence&gt;=0&gt;&gt;a strange adventure&lt;&lt;else&gt;&gt;an unwise gamble&lt;&lt;/if&gt;&gt;, and the offer of an escape.

You reach toward the token she offers.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I will.\&quot;&quot;|1-11.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I suppose I don&#39;t have anything better to do.\&quot;&quot;|1-11.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Of course!\&quot;&quot;|1-11.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;m going to regret this.\&quot;&quot;|1-11.4]]&lt;/li&gt;
&lt;li&gt;[[Silently take the pouch.|1-11.5]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="65" name="1-10x.2b" tags="draft genderstuff majorVarSet" position="475,2775" size="100,100">&lt;&lt;include [[1-10x.2-TSET]]&gt;&gt;Your older siblings know that, no matter what society decided for you, you are a $mc.person. Neither one can truly understand, but they try. Your sister has a small collection of her&lt;&lt;if $gender==&quot;masc&quot;&gt;&gt; husband&#39;s&lt;&lt;/if&gt;&gt; old clothes—and some she bought just for you—that she altered to fit you perfectly. You could never wear them at the family estate, but she and her husband have encouraged you to live as you wish when you visit them. If your mother had known her son-in-law would only strengthen your sister&#39;s budding radical views, she certainly wouldn&#39;t have approved of the match.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|1-11]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="66" name="1-10x.2nb" tags="draft genderstuff majorVarSet" position="575,2775" size="100,100">&lt;&lt;set $mc.gender=&quot;nb&quot;&gt;&gt;&lt;&lt;set $mc.person=&quot;person&quot;&gt;&gt;Your older siblings know that, no matter what society decided for you, you are neither a man nor a woman. Neither one can truly understand, but they try. Privately, you&#39;ve asked them to call you their...

&lt;blockquote&gt;&lt;i&gt;Please choose the nouns/titles your character identifies with. This will affect words like husband/wife/spouse and titles like Mr./Mrs./Mx.&lt;/i&gt;&lt;/blockquote&gt;

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[...sibling.|1-10x.2nb.1][$mc.sibling=&quot;sibling&quot;]]&lt;/li&gt;
&lt;li&gt;[[...sister.|1-10x.2nb.1][$mc.sibling=&quot;sister&quot;]]&lt;/li&gt;
&lt;li&gt;[[...brother.|1-10x.2nb.1][$mc.sibling=&quot;brother&quot;]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="67" name="1-10x.2-TSET" tags="nobr todo majorVarSet codeonly" position="350,2825" size="100,100">&lt;&lt;switch $mc.gender&gt;&gt;
	&lt;&lt;case &quot;fem&quot;&gt;&gt;
		&lt;&lt;set $mc.person=&quot;woman&quot;&gt;&gt;
		&lt;&lt;set $mc.child=&quot;daughter&quot;&gt;&gt;
        &lt;&lt;set $mc.sibling=&quot;sister&quot;&gt;&gt;
        &lt;&lt;set $mc.betrothed=&quot;fiancée&quot;&gt;&gt;
        &lt;&lt;set $mc.spouse=&quot;wife&quot;&gt;&gt;
        &lt;&lt;set $mc.Spouse=&quot;Wife&quot;&gt;&gt;
        &lt;&lt;set $mc.parent=&quot;mother&quot;&gt;&gt;
        &lt;&lt;set $mc.mx=&quot;Mrs.&quot;&gt;&gt;
    	&lt;&lt;set $mc.they=&quot;she&quot;&gt;&gt;
        &lt;&lt;set $mc.They=&quot;She&quot;&gt;&gt;
		&lt;&lt;set $mc.them=&quot;her&quot;&gt;&gt;
        &lt;&lt;set $mc.Them=&quot;Her&quot;&gt;&gt;
		&lt;&lt;set $mc.their=&quot;her&quot;&gt;&gt;
        &lt;&lt;set $mc.Their=&quot;Her&quot;&gt;&gt;
        &lt;&lt;set $mc.theirs=&quot;hers&quot;&gt;&gt;
        &lt;&lt;set $mc.Theirs=&quot;Hers&quot;&gt;&gt;
        &lt;&lt;set $mc.themself=&quot;herself&quot;&gt;&gt;
        &lt;&lt;set $mc.Themself=&quot;Herself&quot;&gt;&gt;
        &lt;&lt;set $mc.plural=false&gt;&gt;
	&lt;&lt;case &quot;masc&quot;&gt;&gt;
		&lt;&lt;set $mc.person=&quot;man&quot;&gt;&gt;
		&lt;&lt;set $mc.child=&quot;son&quot;&gt;&gt;
        &lt;&lt;set $mc.sibling=&quot;brother&quot;&gt;&gt;
        &lt;&lt;set $mc.betrothed=&quot;fiancé&quot;&gt;&gt;
        &lt;&lt;set $mc.spouse=&quot;husband&quot;&gt;&gt;
        &lt;&lt;set $mc.Spouse=&quot;Husband&quot;&gt;&gt;
        &lt;&lt;set $mc.parent=&quot;father&quot;&gt;&gt;
        &lt;&lt;set $mc.mx=&quot;Mr.&quot;&gt;&gt;
    	&lt;&lt;set $mc.they=&quot;he&quot;&gt;&gt;
        &lt;&lt;set $mc.They=&quot;He&quot;&gt;&gt;
		&lt;&lt;set $mc.them=&quot;him&quot;&gt;&gt;
        &lt;&lt;set $mc.Them=&quot;Him&quot;&gt;&gt;
		&lt;&lt;set $mc.their=&quot;his&quot;&gt;&gt;
        &lt;&lt;set $mc.Their=&quot;His&quot;&gt;&gt;
        &lt;&lt;set $mc.theirs=&quot;his&quot;&gt;&gt;
        &lt;&lt;set $mc.Theirs=&quot;His&quot;&gt;&gt;
        &lt;&lt;set $mc.themself=&quot;himself&quot;&gt;&gt;
        &lt;&lt;set $mc.Themself=&quot;Himself&quot;&gt;&gt;
        &lt;&lt;set $mc.plural=false&gt;&gt;
	&lt;&lt;case &quot;nb&quot; &quot;maybe&quot;&gt;&gt;
    	&lt;&lt;switch $mc.sibling&gt;&gt;
        	&lt;&lt;case &quot;sibling&quot;&gt;&gt;
            	&lt;&lt;set $mc.person=&quot;person&quot;&gt;&gt;
				&lt;&lt;set $mc.child=&quot;child&quot;&gt;&gt;
				&lt;&lt;set $mc.betrothed=&quot;betrothed&quot;&gt;&gt;
        		&lt;&lt;set $mc.spouse=&quot;spouse&quot;&gt;&gt;
        		&lt;&lt;set $mc.Spouse=&quot;Spouse&quot;&gt;&gt;
        		&lt;&lt;set $mc.parent=&quot;parent&quot;&gt;&gt;
        		&lt;&lt;set $mc.mx=&quot;Mx.&quot;&gt;&gt;
			&lt;&lt;case &quot;sister&quot;&gt;&gt;
            	&lt;&lt;set $mc.person=&quot;person&quot;&gt;&gt;
				&lt;&lt;set $mc.child=&quot;daughter&quot;&gt;&gt;
				&lt;&lt;set $mc.betrothed=&quot;fiancée&quot;&gt;&gt;
        		&lt;&lt;set $mc.spouse=&quot;wife&quot;&gt;&gt;
        		&lt;&lt;set $mc.Spouse=&quot;Wife&quot;&gt;&gt;
        		&lt;&lt;set $mc.parent=&quot;mother&quot;&gt;&gt;
        		&lt;&lt;set $mc.mx=&quot;Mrs.&quot;&gt;&gt;
			&lt;&lt;case &quot;brother&quot;&gt;&gt;
            	&lt;&lt;set $mc.person=&quot;person&quot;&gt;&gt;
				&lt;&lt;set $mc.child=&quot;son&quot;&gt;&gt;
        		&lt;&lt;set $mc.betrothed=&quot;fiancé&quot;&gt;&gt;
        		&lt;&lt;set $mc.spouse=&quot;husband&quot;&gt;&gt;
        		&lt;&lt;set $mc.Spouse=&quot;Husband&quot;&gt;&gt;
        		&lt;&lt;set $mc.parent=&quot;father&quot;&gt;&gt;
        		&lt;&lt;set $mc.mx=&quot;Mr.&quot;&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
        &lt;&lt;if not $prncust&gt;&gt;&lt;&lt;switch $mc.they&gt;&gt;
        	&lt;&lt;case &quot;they&quot;&gt;&gt;
				&lt;&lt;set $mc.they=&quot;they&quot;&gt;&gt;
        		&lt;&lt;set $mc.They=&quot;They&quot;&gt;&gt;
				&lt;&lt;set $mc.them=&quot;them&quot;&gt;&gt;
        		&lt;&lt;set $mc.Them=&quot;Them&quot;&gt;&gt;
				&lt;&lt;set $mc.their=&quot;their&quot;&gt;&gt;
        		&lt;&lt;set $mc.Their=&quot;Their&quot;&gt;&gt;
        		&lt;&lt;set $mc.theirs=&quot;theirs&quot;&gt;&gt;
        		&lt;&lt;set $mc.Theirs=&quot;Theirs&quot;&gt;&gt;
        		&lt;&lt;set $mc.themself=&quot;themself&quot;&gt;&gt;
        		&lt;&lt;set $mc.Themself=&quot;Themself&quot;&gt;&gt;
        		&lt;&lt;set $mc.plural=true&gt;&gt;
			&lt;&lt;case &quot;she&quot;&gt;&gt;
        		&lt;&lt;set $mc.mx=&quot;Mrs.&quot;&gt;&gt;
    			&lt;&lt;set $mc.they=&quot;she&quot;&gt;&gt;
        		&lt;&lt;set $mc.They=&quot;She&quot;&gt;&gt;
				&lt;&lt;set $mc.them=&quot;her&quot;&gt;&gt;
        		&lt;&lt;set $mc.Them=&quot;Her&quot;&gt;&gt;
				&lt;&lt;set $mc.their=&quot;her&quot;&gt;&gt;
        		&lt;&lt;set $mc.Their=&quot;Her&quot;&gt;&gt;
        		&lt;&lt;set $mc.theirs=&quot;hers&quot;&gt;&gt;
        		&lt;&lt;set $mc.Theirs=&quot;Hers&quot;&gt;&gt;
        		&lt;&lt;set $mc.themself=&quot;herself&quot;&gt;&gt;
        		&lt;&lt;set $mc.Themself=&quot;Herself&quot;&gt;&gt;
        		&lt;&lt;set $mc.plural=false&gt;&gt;
            &lt;&lt;case &quot;he&quot;&gt;&gt;
    			&lt;&lt;set $mc.they=&quot;he&quot;&gt;&gt;
        		&lt;&lt;set $mc.They=&quot;He&quot;&gt;&gt;
				&lt;&lt;set $mc.them=&quot;him&quot;&gt;&gt;
        		&lt;&lt;set $mc.Them=&quot;Him&quot;&gt;&gt;
				&lt;&lt;set $mc.their=&quot;his&quot;&gt;&gt;
        		&lt;&lt;set $mc.Their=&quot;His&quot;&gt;&gt;
        		&lt;&lt;set $mc.theirs=&quot;his&quot;&gt;&gt;
        		&lt;&lt;set $mc.Theirs=&quot;His&quot;&gt;&gt;
        		&lt;&lt;set $mc.themself=&quot;himself&quot;&gt;&gt;
        		&lt;&lt;set $mc.Themself=&quot;Himself&quot;&gt;&gt;
        		&lt;&lt;set $mc.plural=false&gt;&gt;
		&lt;&lt;/switch&gt;&gt;
        &lt;&lt;else&gt;&gt;
        	&lt;&lt;set $mc.they=$mc.they.toLowerCase()&gt;&gt;
        	&lt;&lt;set $mc.They=$mc.they.toUpperFirst()&gt;&gt;
        	&lt;&lt;set $mc.them=$mc.them.toLowerCase()&gt;&gt;
        	&lt;&lt;set $mc.Them=$mc.them.toUpperFirst()&gt;&gt;
        	&lt;&lt;set $mc.their=$mc.their.toLowerCase()&gt;&gt;
        	&lt;&lt;set $mc.Their=$mc.their.toUpperFirst()&gt;&gt;
        	&lt;&lt;set $mc.theirs=$mc.theirs.toLowerCase()&gt;&gt;
        	&lt;&lt;set $mc.Theirs=$mc.theirs.toUpperFirst()&gt;&gt;
        	&lt;&lt;set $mc.themself=$mc.themself.toLowerCase()&gt;&gt;
        	&lt;&lt;set $mc.Themself=$mc.themself.toUpperFirst()&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;/switch&gt;&gt;</tw-passagedata><tw-passagedata pid="68" name="1-10x.2nb.1" tags="draft genderstuff majorVarSet" position="575,2900" size="100,100">Privately, your brother and sister know you as their $mc.sibling. When they speak about you, they use...

&lt;blockquote&gt;&lt;i&gt;Please choose the pronouns your character identifies with.&lt;/i&gt;&lt;/blockquote&gt;

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[...they/them.|1-10x.2nb.2][$mc.they=&quot;they&quot;]]&lt;/li&gt;
&lt;li&gt;[[...she/her.|1-10x.2nb.2][$mc.they=&quot;she&quot;]]&lt;/li&gt;
&lt;li&gt;[[...he/him.|1-10x.2nb.2][$mc.they=&quot;he&quot;]]&lt;/li&gt;
&lt;li&gt;&lt;i&gt;[[(Define custom pronouns)|1-prncust0]]&lt;/i&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="69" name="1-10x.2nb.2" tags="draft genderstuff majorVarSet" position="575,3025" size="100,100">&lt;&lt;if not $prncust&gt;&gt;&lt;&lt;include [[1-10x.2-TSET]]&gt;&gt;&lt;&lt;/if&gt;&gt;When you visit your sister, she and her husband have encouraged you to live as you wish, no matter how you wish to dress or be addressed. If your mother had known her son-in-law would only strengthen your sister&#39;s budding radical views, she certainly wouldn&#39;t have approved of the match.

&lt;&lt;include [[1-11]]&gt;&gt;</tw-passagedata><tw-passagedata pid="70" name="1-prncust0" tags="draft" position="350,2975" size="100,100">&lt;&lt;set $prncust=true&gt;&gt;&lt;i&gt;Please enter your custom pronouns below.&lt;/i&gt;

&lt;b&gt;Subject pronoun&lt;/b&gt; (ex: &lt;b&gt;He/She&lt;/b&gt; goes. &lt;b&gt;They&lt;/b&gt; go.):
&lt;&lt;textbox &quot;$mc.they&quot; &quot;&quot; &quot;1-prncust1&quot;&gt;&gt;

&lt;b&gt;Object pronoun&lt;/b&gt; (ex: The woman calls &lt;b&gt;him/her&lt;/b&gt;. The woman calls &lt;b&gt;them&lt;/b&gt;.):
&lt;&lt;textbox &quot;$mc.them&quot; &quot;&quot; &quot;1-prncust1&quot;&gt;&gt;

&lt;b&gt;Possessive adjective&lt;/b&gt; (ex: &lt;b&gt;His/her/their&lt;/b&gt; book is on the shelf.):
&lt;&lt;textbox &quot;$mc.their&quot; &quot;&quot; &quot;1-prncust1&quot;&gt;&gt;

&lt;b&gt;Possessive pronoun&lt;/b&gt; (ex: The key is &lt;b&gt;his/hers/theirs&lt;/b&gt;.):
&lt;&lt;textbox &quot;$mc.theirs&quot; &quot;&quot; &quot;1-prncust1&quot;&gt;&gt;

&lt;b&gt;Reflexive pronoun&lt;/b&gt; (ex: The person points at &lt;b&gt;himself/herself/themself&lt;/b&gt;.):
&lt;&lt;textbox &quot;$mc.themself&quot; &quot;&quot; &quot;1-prncust1&quot;&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|1-prncust1]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="71" name="1-prncust1" tags="draft" position="350,3075" size="100,100">&lt;i&gt;&lt;&lt;if not $mc.they||not $mc.them||not $mc.their||not $mc.theirs||not $mc.themself&gt;&gt;&lt;b&gt;One or more of your pronouns is empty! If this is unintended, please use the back button and try again.&lt;/b&gt;

&lt;&lt;/if&gt;&gt;&lt;i&gt;Are your pronouns considered plural? (ex: &quot;&lt;b&gt;He/she&lt;/b&gt; goes&quot; is not plural. &quot;&lt;b&gt;They&lt;/b&gt; go&quot; is plural.)&lt;/i&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[My pronouns are not plural.|1-prncust2][$mc.plural=false]]&lt;/li&gt;
&lt;li&gt;[[My pronouns are plural.|1-prncust2][$mc.plural=true]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="72" name="1-prncust2" tags="draft" position="350,3175" size="100,100">&lt;&lt;include [[1-10x.2-TSET]]&gt;&gt;&lt;i&gt;Your pronouns are shown below in sample sentences. If any are incorrect, please use the back button and re-enter your pronouns or reselect the plural setting. If you would like to proceed, click Next.&lt;/i&gt;

&lt;b&gt;Subject pronoun:&lt;/b&gt; &lt;b&gt;$mc.They&lt;/b&gt; go&lt;&lt;es&gt;&gt;.

&lt;b&gt;Object pronoun:&lt;/b&gt; The woman calls &lt;b&gt;$mc.them&lt;/b&gt;.

&lt;b&gt;Possessive adjective:&lt;/b&gt; &lt;b&gt;$mc.Their&lt;/b&gt; book is on the shelf.

&lt;b&gt;Possessive pronoun:&lt;/b&gt; The key is &lt;b&gt;$mc.theirs&lt;/b&gt;.

&lt;b&gt;Reflexive pronoun:&lt;/b&gt; The person points at &lt;b&gt;$mc.themself&lt;/b&gt;.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|1-10x.2nb.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="73" name="1-11.1" tags="draft" position="500,3275" size="100,100">&quot;I will,&quot; you &lt;&lt;if $nvbook&gt;1&gt;&gt;write&lt;&lt;else&gt;&gt;say&lt;&lt;/if&gt;&gt;&lt;&lt;if $confidence&gt;0&gt;&gt; resolutely&lt;&lt;elseif $confidence&lt;0&gt;&gt;, pushing down the anxiety twisting in your chest.&lt;&lt;/if&gt;&gt;.

&lt;&lt;include [[1-12]]&gt;&gt;</tw-passagedata><tw-passagedata pid="74" name="1-11.2" tags="draft" position="600,3275" size="100,100">&lt;&lt;set $humor+=1&gt;&gt;&quot;I suppose I don&#39;t have anything better to do,&quot; you &lt;&lt;if $nvbook&gt;1&gt;&gt;write&lt;&lt;else&gt;&gt;say&lt;&lt;/if&gt;&gt;&lt;&lt;if $confidence&gt;=0&gt;&gt; with a rather theatrical shrug&lt;&lt;else&gt;&gt;, trying to stave off the crawling anxiety with humor&lt;&lt;/if&gt;&gt;.

&lt;&lt;include [[1-12]]&gt;&gt;</tw-passagedata><tw-passagedata pid="75" name="1-11.3" tags="draft" position="700,3275" size="100,100">&lt;&lt;set $confidence+=1&gt;&gt;&quot;Of course!&quot; &lt;&lt;if $confidence&gt;=0&gt;&gt;Despite the risks, this is the most exciting thing you&#39;ve ever done—you couldn&#39;t refuse that.&lt;&lt;else&gt;&gt;If you project enthusiasm, maybe it will keep your nerves at bay.&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[1-12]]&gt;&gt;</tw-passagedata><tw-passagedata pid="76" name="1-11.4" tags="draft" position="800,3275" size="100,100">&lt;&lt;set $confidence-=1&gt;&gt;&quot;I&#39;m going to regret this,&quot; you &lt;&lt;if $nvbook&gt;1&gt;&gt;write&lt;&lt;else&gt;&gt;say&lt;&lt;/if&gt;&gt;. &lt;&lt;if $confidence&gt;0&gt;&gt;As confident as you were before, this plan seems less than promising&lt;&lt;else&gt;&gt;When this ends poorly, let it not be said that you didn&#39;t predict it.&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[1-12]]&gt;&gt;</tw-passagedata><tw-passagedata pid="77" name="1-11.5" tags="draft" position="900,3275" size="100,100">Without another word, you reach out to take the pouch.

&lt;&lt;include [[1-12]]&gt;&gt;</tw-passagedata><tw-passagedata pid="78" name="1-12" tags="draft endscene" position="700,3400" size="100,100">The breath your mother lets out is less a sigh and more an audible release of months of coiled tension. As you take the small black pouch from her, you can feel a soft hum from within. You start to pull the pouch open, but your mother stops you. &quot;Don&#39;t open it until you need it. While it stays inside, its power is hidden–the sorcerer shouldn&#39;t notice its presence. Keep it close to you.&quot;

You turn the pouch over in your hands. It seems too small for what it is: the first signpost on a path unlike any you&#39;ve walked before. There can be no turning back now.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Time passes...|2-0]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="79" name="2-0" tags="draft startscene autosave" position="1400,100" size="100,100">&lt;&lt;set $cursc=2&gt;&gt;&lt;&lt;set $subt.loc=&quot;The Harbor&quot;&gt;&gt;&lt;&lt;notify&gt;&gt;Autosave complete!&lt;&lt;/notify&gt;&gt;In the weeks before the wedding, your mother is almost never at home. She had six months in time and funds to arrange your sister&#39;s wedding--a much more palatable amount of time. But even in the current circumstances, she works with the certainty of someone who has accomplished impossible things before and will do so again.

Had you been born to another family, you might have been given more choices in the planning of your own wedding. As it is, the family coffers make most of the choices for you. Your mother consults you now and then, less to see what you would like and more to see what you can give up. The veneer of wealth and respectability must be preserved, but at least you get to choose the logs that keep the fire burning.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|2-1]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="80" name="2-1" tags="draft" position="1400,200" size="100,100">Today, however, your family gathers for an entirely different purpose. The sun bears down on the harbor, the humid air thick with the scent of brine. The docks are abuzz with military and mercantile activity--yours is far from the only family saying farewells today. Your sister-in-law, Isla, has been sniffling quietly into her handkerchief since she and your brother arrived, but it&#39;s difficult to blame her for the breach of decorum. Your brother&#39;s poor health has spared him from the front lines for this long, but time has run out. Though he is not compelled by royal decree to join the war, the compulsion of family legacy and duty to king and country is only slightly less potent. It was always inevitable that Soren would eventually follow in your father&#39;s footsteps should the war not end within its first few months. And now, the time has come, no matter the danger to his health.

Ever since he was a child, Soren&#39;s life has been a succession of several months of good health abruptly followed by several months in bed, plagued by fits of wheezing, coughing, and gasping for breath. Your first memories of him involve doctors arriving at odd hours and hushed discussions of what his funeral might entail. Never since have you seen your mother as radiant with fury as the time the local priestess implied that he should be buried, trapped in the earth, instead of being cremated. It would keep whatever curse afflicted his connection to the Winds, the soul of the world, from spreading after his death, she had said. The local temple had a new priestess within a month.

Your brother jokes about that incident regularly, weaponizing his drought-dry humor against the memory as he does against many of the injustices of his life. His morbid wit will likely serve him well in the army, at least.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|2-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="81" name="2-2" tags="draft" position="1400,300" size="100,100">Your sister, Sabine, wraps her arm around Isla&#39;s shoulders as Soren speaks with your mother privately. Despite his deep green officer&#39;s regalia and full foot of additional height, your mother&#39;s confident poise makes it clear who has the authority in your family while your father is away.

&quot;Of course, we&#39;ll visit you whenever you wish, Isla.&quot; Your sister glances at you, intending to include you in the &quot;we&quot; before realizing you&#39;ll be leaving soon, too. &quot;I mean, Erich and I will. And you&#39;ll visit, too, when you can, won&#39;t you?&quot; Sabine raises her eyebrows at you meaningfully.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I can&#39;t promise anything.\&quot;&quot;|2-2.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I don&#39;t know when, but I&#39;ll try to visit.\&quot;&quot;|2-2.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Of course I will.\&quot;&quot;|2-2.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;ll try to find time between sorcerous rituals.\&quot;&quot;|2-2.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="82" name="2-2.1" tags="draft" position="1250,425" size="100,100">&quot;I can&#39;t promise anything,&quot; you &lt;&lt;if $nvbook&gt;1&gt;&gt;write&lt;&lt;else&gt;&gt;say&lt;&lt;/if&gt;&gt;, prompting a deep frown from your sister.

Isla gives you a small, watery smile, brushing a tear off her tawny brown cheek. &quot;It&#39;s alright, I know it will be a difficult time for you, too. But when you do come home to visit, you&#39;re very welcome to call.&quot;

&lt;&lt;include [[2-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="83" name="2-2.2" tags="draft" position="1350,425" size="100,100">&lt;&lt;set $kind+=1&gt;&gt;&lt;&lt;set $islapromise=&quot;maybe&quot;&gt;&gt;&quot;I don&#39;t know when, but I&#39;ll try to visit,&quot; you &lt;&lt;if $nvbook&gt;1&gt;&gt;write&lt;&lt;else&gt;&gt;say&lt;&lt;/if&gt;&gt;.

Isla brightens, giving you a small smile as she brushes a tear off her tawny brown cheek. &quot;That&#39;s very kind of you. You&#39;d be welcome any time you&#39;re in town for a visit.&quot;

&lt;&lt;include [[2-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="84" name="2-2.3" tags="draft" position="1450,425" size="100,100">&lt;&lt;set $kind+=1&gt;&gt;&lt;&lt;set $islapromise=&quot;yes&quot;&gt;&gt;&quot;Of course I will,&quot; you &lt;&lt;if $nvbook&gt;1&gt;&gt;write&lt;&lt;else&gt;&gt;say&lt;&lt;/if&gt;&gt;, prompting an approving nod from your sister.

Isla brightens, giving you a small smile as she brushes a tear off her tawny brown cheek. &quot;That&#39;s very kind of you. You&#39;d be welcome any time you&#39;re in town for a visit.&quot;

&lt;&lt;include [[2-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="85" name="2-2.4" tags="draft" position="1550,425" size="100,100">&lt;&lt;set $humor+=1&gt;&gt;&lt;&lt;set $kind+=1&gt;&gt;&lt;&lt;set $islapromise=&quot;maybe&quot;&gt;&gt;&quot;I&#39;ll try to find time between sorcerous rituals,&quot; you &lt;&lt;if $nvbook&gt;1&gt;&gt;write&lt;&lt;else&gt;&gt;say&lt;&lt;/if&gt;&gt;. Your sister rolls her eyes.

Isla gives a surprised laugh, a real smile dawning as she brushes a tear off her tawny brown cheek. &quot;That&#39;s very kind of you. You&#39;d be welcome any time you&#39;re in town for a visit.&quot;

&lt;&lt;include [[2-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="86" name="2-3" tags="draft genderstuff" position="1400,550" size="100,100">After years of marriage, most wives of departing officers would have had children to tend to in their husbands&#39; absence, but Isla will have no family living with her while Soren is gone. Your brother has enjoyed ridiculing the gossip about a new type of curse in his life, but neither he nor Isla has attempted to dispell the rumors. The truth would generate a far greater scandal: They&#39;ve never tried to conceive. Isla has never felt any interest in the act. Soren does, but only with other men.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|2-4.0]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="87" name="2-4.0" tags="draft" position="1400,650" size="100,100">The two of them were childhood friends and, knowing one another&#39;s secrets, married as soon as they reached adulthood. Their union has been a bulwark against society&#39;s judgment, but despite the strength of their relationship, the crushing expectation of producing an heir looms over them. Keeping the line of succession in order is simply what an eldest son and his wife must do, no matter what their own wishes may be. Though Soren leaving will buy them more time, it will be difficult for them both. They certainly married out of love–just not romantic love.

Do you experience romantic attraction?

&lt;blockquote&gt;&lt;i&gt;Regardless of your choices here, your character will be free to pursue or avoid romantic or physical interactions later in the story if you wish.&lt;/i&gt;&lt;/blockquote&gt;\

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[Yes.|2-4][$romatt=3]]&lt;/li&gt;
&lt;li&gt;[[Only sometimes.|2-4][$romatt=2]]&lt;/li&gt;
&lt;li&gt;[[No.|2-5][$romatt=1;$rom=&quot;aro&quot;]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="88" name="2-4" tags="draft genderstuff majorVarSet" position="1400,775" size="100,100">&lt;&lt;if $romatt==2&gt;&gt;When you do experience it, y&lt;&lt;else&gt;&gt;Y&lt;&lt;/if&gt;&gt;ou are primarily romantically attracted to...\

&lt;blockquote&gt;&lt;i&gt;The following choices will affect the gender of the main character&#39;s love interests. If $mc.they&#39;&lt;&lt;re&gt;&gt; attracted to one gender, $mc.their love interests will be set to that gender. Otherwise, you&#39;ll get to pick their genders specifically or randomize them. Please note that, if the MC&#39;s betrothed doesn&#39;t match the gender that society expects, other characters may (unintentionally) misgender them during early encounters.&lt;/i&gt;&lt;/blockquote&gt;\

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[...women.|2-5][$rom=&quot;fem&quot;]]&lt;/li&gt;
&lt;li&gt;[[...men.|2-5][$rom=&quot;masc&quot;]]&lt;/li&gt;
&lt;li&gt;[[...people not defined by &quot;man&quot; or &quot;woman.&quot;|2-5][$rom=&quot;nb&quot;]]&lt;/li&gt;
&lt;li&gt;[[...people of various genders.|2-5][$rom=&quot;bi&quot;]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="89" name="2-5" tags="draft majorVarSet" position="1275,750" size="100,100">Do you experience physical attraction&lt;&lt;if $romatt!=1&gt;&gt; as well&lt;&lt;/if&gt;&gt;?

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[Yes.|2-6arocheck][$physatt=3]]&lt;/li&gt;
&lt;li&gt;[[Only sometimes.|2-6arocheck][$physatt=2]]&lt;/li&gt;
&lt;li&gt;[[No.|2-6split][$physatt=1;$phys=&quot;ace&quot;]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="90" name="2-6arocheck" tags="draft" position="1125,825" size="100,100">&lt;&lt;if $romatt==1&gt;&gt;&lt;&lt;if $physatt==2&gt;&gt;When you do experience it, y&lt;&lt;else&gt;&gt;Y&lt;&lt;/if&gt;&gt;ou are primarily physically attracted to...\

&lt;blockquote&gt;&lt;i&gt;This choice will affect the gender of the main character&#39;s betrothed. If $mc.they&#39;&lt;&lt;re&gt;&gt; attracted to one gender, $mc.their love interests will be set to that gender. Otherwise, you&#39;ll get to pick their genders specifically or randomize them. Please note that, if the MC&#39;s betrothed doesn&#39;t match the gender that society expects, other characters may (unintentionally) misgender them during early encounters.&lt;/i&gt;&lt;/blockquote&gt;\

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[...women.|2-6split][$phys=&quot;fem&quot;]]&lt;/li&gt;
&lt;li&gt;[[...men.|2-6split][$phys=&quot;masc&quot;]]&lt;/li&gt;
&lt;li&gt;[[...people not defined by &quot;man&quot; or &quot;woman.&quot;|2-6split][$phys=&quot;nb&quot;]]&lt;/li&gt;
&lt;li&gt;[[...people of various genders.|2-6split][$phys=&quot;bi&quot;]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set $phys=clone($rom)&gt;&gt;&lt;&lt;include [[2-6split]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="91" name="2-6split" tags="nobr codeonly" position="1250,875" size="100,100">&lt;&lt;switch $rom&gt;&gt;
&lt;&lt;case &quot;nb&quot;&gt;&gt;
	&lt;&lt;include [[2-6nb]]&gt;&gt; &lt;!--14--&gt;
&lt;&lt;case &quot;bi&quot;&gt;&gt;
	&lt;&lt;include [[2-6bi]]&gt;&gt; &lt;!--14--&gt;
&lt;&lt;case &quot;aro&quot;&gt;&gt;
	&lt;&lt;switch $phys&gt;&gt;
        &lt;&lt;case &quot;bi&quot;&gt;&gt;
			&lt;&lt;include [[2-6bi]]&gt;&gt; &lt;!--7--&gt;
		&lt;&lt;case &quot;ace&quot;&gt;&gt;
        	&lt;&lt;include [[2-6aa]]&gt;&gt; &lt;!--7--&gt;
        &lt;&lt;case &quot;nb&quot;&gt;&gt;
        	&lt;&lt;include [[2-6nb]]&gt;&gt; &lt;!--7--&gt;
    	&lt;&lt;default&gt;&gt; &lt;!--aro+fem/masc--&gt;
        	&lt;&lt;if $mc.gender==&quot;nb&quot;&gt;&gt;
            	&lt;&lt;include [[2-6nbbin]]&gt;&gt; &lt;!--1--&gt;
			&lt;&lt;elseif $gendervibes==&quot;trans&quot;&gt;&gt;
            	&lt;&lt;if $mc.gender==$phys&gt;&gt;
                	&lt;&lt;include [[2-6tg]]&gt;&gt; &lt;!--2--&gt;
				&lt;&lt;else&gt;&gt;
                	&lt;&lt;include [[2-6ts]]&gt;&gt; &lt;!--2--&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;else&gt;&gt; &lt;!--cis/nope aro+fem/masc--&gt;
            	&lt;&lt;if $mc.gender==$phys&gt;&gt;
                	&lt;&lt;include [[2-6cg]]&gt;&gt; &lt;!--4--&gt;
				&lt;&lt;else&gt;&gt;
                	&lt;&lt;include [[2-6cs]]&gt;&gt; &lt;!--4--&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;/if&gt;&gt;
	&lt;&lt;/switch&gt;&gt;
&lt;&lt;default&gt;&gt; &lt;!--binary rom--&gt;
	&lt;&lt;if $mc.gender==&quot;nb&quot;&gt;&gt;
		&lt;&lt;include [[2-6nbbin]]&gt;&gt; &lt;!--4--&gt;
	&lt;&lt;elseif $gendervibes==&quot;trans&quot;&gt;&gt;
		&lt;&lt;if $mc.gender==$rom&gt;&gt;
			&lt;&lt;include [[2-6tg]]&gt;&gt; &lt;!--4--&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;include [[2-6ts]]&gt;&gt; &lt;!--4--&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;else&gt;&gt; &lt;!--cis/nope bin-attr--&gt;
		&lt;&lt;if $mc.gender==$rom&gt;&gt;
			&lt;&lt;include [[2-6cg]]&gt;&gt; &lt;!--8--&gt;
		&lt;&lt;else&gt;&gt;
			&lt;&lt;include [[2-6cs]]&gt;&gt; &lt;!--8--&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/if&gt;&gt;
&lt;&lt;/switch&gt;&gt;</tw-passagedata><tw-passagedata pid="92" name="2-6nb" tags="draft genderstuff" position="1050,1000" size="100,100">&lt;&lt;set $ha.they=&quot;they&quot;&gt;&gt;&lt;&lt;include [[2-6SET]]&gt;&gt;&lt;&lt;set $attraction=&quot;nb&quot;&gt;&gt;You&#39;ve always been drawn to people who&lt;&lt;if $mc.gender==&quot;nb&quot;&gt;&gt;, like yourself,&lt;&lt;/if&gt;&gt; do not feel confined to society&#39;s ideas about gender.&lt;&lt;if $gendervibes==&quot;maybe&quot;&gt;&gt; Perhaps it stems from your uncertainty about your own identity.&lt;&lt;/if&gt;&gt; If &lt;&lt;if $mc.gender==&quot;nb&quot;&gt;&gt;you were allowed to be yourselves&lt;&lt;else&gt;&gt;such people were allowed to be themselves&lt;&lt;/if&gt;&gt;, no marriage could be &quot;ordinary&quot; in the eyes of society. Even finding someone like &lt;&lt;if $mc.gender==&quot;nb&quot;&gt;&gt;yourself&lt;&lt;else&gt;&gt;that&lt;&lt;/if&gt;&gt; would be difficult enough&lt;&lt;if $romatt&lt;3||$physatt&lt;3&gt;&gt;—especially considering your &lt;&lt;if $romatt==1||$physatt==1&gt;&gt;lack of&lt;&lt;else&gt;&gt;infrequent&lt;&lt;/if&gt;&gt; interest in what many people consider to be an essential component of a &lt;&lt;if $romatt&lt;3&gt;&gt;passionate&lt;&lt;else&gt;&gt;romantic&lt;&lt;/if&gt;&gt; relationship&lt;&lt;/if&gt;&gt;. It&#39;s difficult not to hope for the sort of luck that would lead to a happy marriage, however impossible it seems.

&lt;&lt;include [[2-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="93" name="2-6bi" tags="draft genderstuff majorVarSet" position="1150,1000" size="100,100">&lt;&lt;set $attraction=&quot;bi&quot;&gt;&gt;In a perfect world where you could marry anyone you pleased, you...

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[...would prefer a woman.|2-6biaa.b][$ha.they=&quot;she&quot;]]&lt;/li&gt;
&lt;li&gt;[[...would prefer a man.|2-6biaa.b][$ha.they=&quot;he&quot;]]&lt;/li&gt;
&lt;li&gt;[[...would prefer someone not defined by &quot;man&quot; or &quot;woman.&quot;.|2-6biaa.nb][$ha.they=&quot;they&quot;]]&lt;/li&gt;
&lt;li&gt;[[...have no gender preference.|2-6biaa.rand]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="94" name="2-6aa" tags="draft genderstuff majorVarSet" position="1250,1000" size="100,100">&lt;&lt;set $attraction=&quot;aa&quot;&gt;&gt;Like Isla, you&#39;ve never felt the sort of attraction that would inspire interest in marriage, but that doesn&#39;t alter the expectations your mother has of you. However unlikely, it&#39;s difficult not to hope for a marriage that would be, like Isla and Soren&#39;s, in name only. Perhaps you could at least be friendly with such a spouse. In a better world where you could at least marry someone of any gender, you...

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[...would prefer a woman.|2-6biaa.b][$ha.they=&quot;she&quot;]]&lt;/li&gt;
&lt;li&gt;[[...would prefer a man.|2-6biaa.b][$ha.they=&quot;he&quot;]]&lt;/li&gt;
&lt;li&gt;[[...would prefer someone not defined by &quot;man&quot; or &quot;woman.&quot;.|2-6biaa.nb][$ha.they=&quot;they&quot;]]&lt;/li&gt;
&lt;li&gt;[[...have no gender preference.|2-6biaa.rand]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="95" name="2-6nbbin" tags="draft genderstuff" position="1350,1000" size="100,100">&lt;&lt;include [[2-6binprn]]&gt;&gt;&lt;&lt;include [[2-6SET]]&gt;&gt;&lt;&lt;set $attraction=&quot;nbbin&quot;&gt;&gt;Your whole experience of gender and attraction is an exercise in compromise. If you were allowed to be yourself, no marriage could be &quot;ordinary&quot; in the eyes of society. It&#39;s difficult not to hope for the sort of luck that would allow you to marry a sufficiently accepting person, however impossible it seems&lt;&lt;if $romatt&lt;3||$physatt&lt;3&gt;&gt;—especially considering your &lt;&lt;if $romatt==1||$physatt==1&gt;&gt;lack of&lt;&lt;else&gt;&gt;infrequent&lt;&lt;/if&gt;&gt; interest in what many people consider to be an essential component of a &lt;&lt;if $romatt&lt;3&gt;&gt;passionate&lt;&lt;else&gt;&gt;romantic&lt;&lt;/if&gt;&gt; relationship&lt;&lt;/if&gt;&gt;.

&lt;&lt;include [[2-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="96" name="2-6tg" tags="draft genderstuff" position="1650,1000" size="100,100">&lt;&lt;include [[2-6binprn]]&gt;&gt;&lt;&lt;include [[2-6SET]]&gt;&gt;&lt;&lt;set $attraction=&quot;tg&quot;&gt;&gt;Like your brother, you have only experienced attraction toward people of the same gender as yourself. It was&lt;&lt;if $humor&lt;=0&gt;&gt; almost&lt;&lt;/if&gt;&gt; amusing when your brother spilled his secret to you in an anxious rush, only for you to follow with an identical revelation of your own. In some sense, it&#39;s more convenient for you than for him. It wouldn&#39;t be impossible for you to be happy in what would look, to society, like a perfectly ordinary marriage. But explaining the fact that your gender does not match the one society has given you is not an easy thing. Even so, it&#39;s difficult not to hope for the sort of luck luck that would allow you to marry a sufficiently accepting person&lt;&lt;if $romatt&lt;3||$physatt&lt;3&gt;&gt;—though your &lt;&lt;if $romatt==1||$physatt==1&gt;&gt;lack of&lt;&lt;else&gt;&gt;infrequent&lt;&lt;/if&gt;&gt; interest in what many people consider to be an essential component of a &lt;&lt;if $romatt&lt;3&gt;&gt;passionate&lt;&lt;else&gt;&gt;romantic&lt;&lt;/if&gt;&gt; relationship makes it even less likely&lt;&lt;/if&gt;&gt;. If you happened to marry someone like yourself, that would certainly complicate things. At least you could extend understanding to one another even if attraction was impossible.

&lt;&lt;include [[2-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="97" name="2-6ts" tags="draft genderstuff" position="1750,1000" size="100,100">&lt;&lt;include [[2-6binprn]]&gt;&gt;&lt;&lt;include [[2-6SET]]&gt;&gt;&lt;&lt;set $attraction=&quot;ts&quot;&gt;&gt;In another body, you could have been happy in a marriage society would approve of. But as it is, you are expected to marry someone you could never be attracted to—unless you ended up in the unlikely circumstance of marrying someone like yourself. But it&#39;s difficult not to hope for the sort of luck that would allow you to marry someone who could accept you at all, even if it seems impossible&lt;&lt;if $romatt&lt;3||$physatt&lt;3&gt;&gt;—especially considering your &lt;&lt;if $romatt==1||$physatt==1&gt;&gt;lack of&lt;&lt;else&gt;&gt;infrequent&lt;&lt;/if&gt;&gt; interest in what many people consider to be an essential component of a &lt;&lt;if $romatt&lt;3&gt;&gt;passionate&lt;&lt;else&gt;&gt;romantic&lt;&lt;/if&gt;&gt; relationship&lt;&lt;/if&gt;&gt;.

&lt;&lt;include [[2-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="98" name="2-6cg" tags="draft genderstuff" position="1450,1000" size="100,100">&lt;&lt;include [[2-6binprn]]&gt;&gt;&lt;&lt;include [[2-6SET]]&gt;&gt;&lt;&lt;set $attraction=&quot;cg&quot;&gt;&gt;Like your brother, you have only experienced attraction toward people of the same gender as yourself&lt;&lt;if $gendervibes==&quot;maybe&quot;&gt;&gt;—or the gender society gave you, at least&lt;&lt;/if&gt;&gt;. It was&lt;&lt;if $humor&lt;=0&gt;&gt; almost&lt;&lt;/if&gt;&gt; amusing when your brother spilled his secret to you in an anxious rush, only for you to follow with an identical revelation of your own. &lt;&lt;if $mc.gender==&quot;masc&quot;&gt;&gt;You&#39;ve had plenty of opportunities to commiserate about your shared plight, and it&#39;s difficult not to hope for the sort of luck that would allow you to marry an accepting person like Isla, however impossible it seems\
&lt;&lt;else&gt;&gt;\
In some ways, it&#39;s more convenient for you than for him. Society would be more willing to believe in an innocuous &quot;close friendship&quot; between women than between men, if that was something you wanted to pursue. It&#39;s difficult not to hope for the sort of luck that would allow you to marry an accepting person like Isla, however impossible it seems&lt;&lt;/if&gt;&gt;.&lt;&lt;if $romatt&lt;3||$physatt&lt;3&gt;&gt; Though even if you wanted to pursue an arrangement with a person you&#39;re attracted to, your &lt;&lt;if $romatt==1||$physatt==1&gt;&gt;lack of&lt;&lt;else&gt;&gt;infrequent&lt;&lt;/if&gt;&gt; interest in what many people consider to be an essential component of a &lt;&lt;if $romatt&lt;3&gt;&gt;passionate&lt;&lt;else&gt;&gt;romantic&lt;&lt;/if&gt;&gt; relationship might make prevent it.&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[2-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="99" name="2-6cs" tags="draft genderstuff" position="1550,1000" size="100,100">&lt;&lt;include [[2-6binprn]]&gt;&gt;&lt;&lt;include [[2-6SET]]&gt;&gt;&lt;&lt;set $attraction=&quot;cs&quot;&gt;&gt;When your brother revealed his secret to you, you realized how fortunate you are to be attracted to the people society expects&lt;&lt;if $gendervibes==&quot;maybe&quot;&gt;&gt;—even if you&#39;re not sure that you yourself fit what society expects&lt;&lt;/if&gt;&gt;.&lt;&lt;if $romatt&lt;3||$physatt&lt;3&gt;&gt;Even so, it&#39;s complicated by your &lt;&lt;if $romatt==1||$physatt==1&gt;&gt;lack of&lt;&lt;else&gt;&gt;infrequent&lt;&lt;/if&gt;&gt; interest in what many people consider to be an essential component of a &lt;&lt;if $romatt&lt;3&gt;&gt;passionate&lt;&lt;else&gt;&gt;romantic&lt;&lt;/if&gt;&gt; relationship&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[2-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="100" name="2-6SET" tags="nobr codeonly" position="1475,1125" size="100,100">&lt;&lt;switch $ha.they&gt;&gt;
	&lt;&lt;case &quot;they&quot;&gt;&gt;
		&lt;&lt;set $ha.gender=&quot;nb&quot;&gt;&gt;
		&lt;&lt;set $ha.person=&quot;person&quot;&gt;&gt;
    	&lt;&lt;set $ha.child=&quot;child&quot;&gt;&gt;
		&lt;&lt;set $ha.betrothed=&quot;betrothed&quot;&gt;&gt;
		&lt;&lt;set $ha.spouse=&quot;spouse&quot;&gt;&gt;
		&lt;&lt;set $ha.Spouse=&quot;Spouse&quot;&gt;&gt;
		&lt;&lt;set $ha.parent=&quot;parent&quot;&gt;&gt;
		&lt;&lt;set $ha.mx=&quot;Mx.&quot;&gt;&gt;
    	&lt;&lt;set $ha.they=&quot;they&quot;&gt;&gt;
		&lt;&lt;set $ha.They=&quot;They&quot;&gt;&gt;
		&lt;&lt;set $ha.them=&quot;them&quot;&gt;&gt;
		&lt;&lt;set $ha.Them=&quot;Them&quot;&gt;&gt;
		&lt;&lt;set $ha.their=&quot;their&quot;&gt;&gt;
		&lt;&lt;set $ha.Their=&quot;Their&quot;&gt;&gt;
		&lt;&lt;set $ha.theirs=&quot;theirs&quot;&gt;&gt;
		&lt;&lt;set $ha.Theirs=&quot;Theirs&quot;&gt;&gt;
		&lt;&lt;set $ha.themself=&quot;themself&quot;&gt;&gt;
		&lt;&lt;set $ha.Themself=&quot;Themself&quot;&gt;&gt;
		&lt;&lt;set $ha.plural=true&gt;&gt;
	&lt;&lt;case &quot;he&quot;&gt;&gt;
		&lt;&lt;set $ha.gender=&quot;masc&quot;&gt;&gt;
		&lt;&lt;set $ha.person=&quot;man&quot;&gt;&gt;
    	&lt;&lt;set $ha.child=&quot;son&quot;&gt;&gt;
		&lt;&lt;set $ha.betrothed=&quot;fiancé&quot;&gt;&gt;
		&lt;&lt;set $ha.spouse=&quot;husband&quot;&gt;&gt;
		&lt;&lt;set $ha.Spouse=&quot;Husband&quot;&gt;&gt;
		&lt;&lt;set $ha.parent=&quot;father&quot;&gt;&gt;
		&lt;&lt;set $ha.mx=&quot;Mr.&quot;&gt;&gt;
    	&lt;&lt;set $ha.they=&quot;he&quot;&gt;&gt;
		&lt;&lt;set $ha.They=&quot;He&quot;&gt;&gt;
		&lt;&lt;set $ha.them=&quot;him&quot;&gt;&gt;
		&lt;&lt;set $ha.Them=&quot;Him&quot;&gt;&gt;
		&lt;&lt;set $ha.their=&quot;his&quot;&gt;&gt;
		&lt;&lt;set $ha.Their=&quot;His&quot;&gt;&gt;
		&lt;&lt;set $ha.theirs=&quot;his&quot;&gt;&gt;
		&lt;&lt;set $ha.Theirs=&quot;His&quot;&gt;&gt;
		&lt;&lt;set $ha.themself=&quot;himself&quot;&gt;&gt;
		&lt;&lt;set $ha.Themself=&quot;Himself&quot;&gt;&gt;
		&lt;&lt;set $ha.plural=false&gt;&gt;
	&lt;&lt;case &quot;she&quot;&gt;&gt;
		&lt;&lt;set $ha.gender=&quot;fem&quot;&gt;&gt;
		&lt;&lt;set $ha.person=&quot;woman&quot;&gt;&gt;
    	&lt;&lt;set $ha.child=&quot;daughter&quot;&gt;&gt;
		&lt;&lt;set $ha.betrothed=&quot;fiancée&quot;&gt;&gt;
		&lt;&lt;set $ha.spouse=&quot;wife&quot;&gt;&gt;
		&lt;&lt;set $ha.Spouse=&quot;Wife&quot;&gt;&gt;
		&lt;&lt;set $ha.parent=&quot;mother&quot;&gt;&gt;
		&lt;&lt;set $ha.mx=&quot;Mrs.&quot;&gt;&gt;
    	&lt;&lt;set $ha.they=&quot;she&quot;&gt;&gt;
		&lt;&lt;set $ha.They=&quot;She&quot;&gt;&gt;
		&lt;&lt;set $ha.them=&quot;her&quot;&gt;&gt;
		&lt;&lt;set $ha.Them=&quot;Her&quot;&gt;&gt;
		&lt;&lt;set $ha.their=&quot;her&quot;&gt;&gt;
		&lt;&lt;set $ha.Their=&quot;Her&quot;&gt;&gt;
		&lt;&lt;set $ha.theirs=&quot;hers&quot;&gt;&gt;
		&lt;&lt;set $ha.Theirs=&quot;Hers&quot;&gt;&gt;
		&lt;&lt;set $ha.themself=&quot;herself&quot;&gt;&gt;
		&lt;&lt;set $ha.Themself=&quot;Herself&quot;&gt;&gt;
		&lt;&lt;set $ha.plural=false&gt;&gt;
	&lt;&lt;default&gt;&gt;
    	HA PRONOUNS ARE BROKEN, PLS FIX
&lt;&lt;/switch&gt;&gt;</tw-passagedata><tw-passagedata pid="101" name="2-7" tags="draft" position="1400,1250" size="100,100">Soren and Isla were fortunate enough to be able to choose each other, but that&#39;s only made their parting today more difficult. As your mother and brother approach your trio, Sabine gives Isla&#39;s shoulder another squeeze before releasing her in order to wrap Soren in a hug instead.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|2-8]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="102" name="2-6biaa.b" tags="draft genderstuff" position="1100,1125" size="100,100">&lt;&lt;include [[2-6SET]]&gt;&gt;&lt;&lt;if $mc.they==$ha.they&gt;&gt;There&#39;s an appeal to being &lt;&lt;if $attraction==&quot;bi&quot;&gt;&gt;with&lt;&lt;else&gt;&gt;around&lt;&lt;/if&gt;&gt; someone who understands what it&#39;s like to be a $mc.person&lt;&lt;if $gendervibes==&quot;trans&quot;&gt;&gt;, even if it likely wouldn&#39;t be in the same way as you&lt;&lt;/if&gt;&gt;.&lt;&lt;else&gt;&gt;Even if you don&#39;t have a strong preference&lt;&lt;if $attraction==&quot;aa&quot;&gt;&gt; given your lack of romantic or physical attraction&lt;&lt;/if&gt;&gt;, you could certainly imagine yourself marrying a $ha.person&lt;&lt;if $ax.gender==$ha.gender&gt;&gt;, even if society wouldn&#39;t&lt;&lt;if $gendervibes==&quot;trans&quot;&gt;&gt; knowingly&lt;&lt;/if&gt;&gt; permit such a thing.&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[2-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="103" name="2-6biaa.nb" tags="draft genderstuff" position="1200,1125" size="100,100">&lt;&lt;include [[2-6SET]]&gt;&gt;&lt;&lt;if $mc.they==$ha.they||$gendervibes==&quot;trans&quot;&gt;&gt;There&#39;s an appeal to being &lt;&lt;if $attraction==&quot;bi&quot;&gt;&gt;with&lt;&lt;else&gt;&gt;around&lt;&lt;/if&gt;&gt; someone who understands what it&#39;s like to be outside of society&#39;s idea of gender, even if&lt;&lt;if $gendervibes==&quot;trans&quot;&gt;&gt; even if it isn&#39;t in the same way and despite the fact that&lt;&lt;/if&gt;&gt;&lt;&lt;elseif $gendervibes==&quot;maybe&quot;&gt;&gt;Maybe it&#39;s your uncertainty about your own identity that draws you to people outside of society&#39;s idea of gender, even if&lt;&lt;else&gt;&gt;Even if you don&#39;t have a strong preference&lt;&lt;if $attraction==&quot;aa&quot;&gt;&gt; given your lack of romantic or physical attraction&lt;&lt;/if&gt;&gt;, you could certainly imagine yourself marrying someone outside of society&#39;s idea of gender. But you know&lt;&lt;/if&gt;&gt; it would never be acceptable in the eyes of society.

&lt;&lt;include [[2-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="104" name="2-6biaa.rand" tags="draft genderstuff" position="1300,1125" size="100,100">&lt;&lt;set $attrand=true&gt;&gt;&lt;&lt;set _harand=random(2)&gt;&gt;&lt;&lt;if _harand&lt;1&gt;&gt;&lt;&lt;set $ha.they=&quot;she&quot;&gt;&gt;&lt;&lt;elseif _harand&lt;2&gt;&gt;&lt;&lt;set $ha.they=&quot;he&quot;&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set $ha.they=&quot;they&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;include [[2-6SET]]&gt;&gt;&lt;&lt;if $attraction==&quot;aa&quot;&gt;&gt;Given your lack of romantic or physical attraction, y&lt;&lt;else&gt;&gt;Y&lt;&lt;/if&gt;&gt;ou don&#39;t have a strong preference for people of any gender. It&#39;s difficult not to hope for the sort of luck that would lead to a happy marriage where you could be your whole self.

&lt;&lt;include [[2-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="105" name="2-6binprn" tags="nobr codeonly" position="1600,875" size="100,100">&lt;&lt;nobr&gt;&gt;&lt;&lt;if $rom==&quot;aro&quot;&gt;&gt;
	&lt;&lt;switch $phys&gt;&gt;
    	&lt;&lt;case &quot;fem&quot;&gt;&gt;
        	&lt;&lt;set $ha.they=&quot;she&quot;&gt;&gt;
		&lt;&lt;case &quot;masc&quot;&gt;&gt;
        	&lt;&lt;set $ha.they=&quot;he&quot;&gt;&gt;
    &lt;&lt;/switch&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;switch $rom&gt;&gt;
    	&lt;&lt;case &quot;fem&quot;&gt;&gt;
        	&lt;&lt;set $ha.they=&quot;she&quot;&gt;&gt;
		&lt;&lt;case &quot;masc&quot;&gt;&gt;
        	&lt;&lt;set $ha.they=&quot;he&quot;&gt;&gt;
    &lt;&lt;/switch&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="106" name="2-8" tags="draft" position="1400,1350" size="100,100">As your older siblings say their farewells, Isla turns to you, trying another brief distraction even as she dabs away tears. &quot;I&#39;m sorry I haven&#39;t been able to help more with your wedding arrangements. It&#39;s been so busy with Soren...&quot; she trails off. &quot;I always hoped I could help make it special for you, but the timing... I&#39;m sure it&#39;s been even more—&quot; she casts a brief but significant glance in your mother&#39;s direction &quot;—difficult given the circumstances.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;It&#39;s alright. I appreciate the thought.\&quot;&quot;|2-8.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I wish you could have helped, too, but I understand.\&quot;&quot;|2-8.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Your help wasn&#39;t necessary.\&quot;&quot;|2-8.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;ve gotten by.\&quot;&quot;|2-8.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="107" name="2-8.1" tags="draft" position="1250,1475" size="100,100">&quot;It&#39;s alright. I appreciate the thought.&quot;

Isla gives you a sad smile. &quot;I&#39;ll do what I can in the remaining time.&quot; She&#39;s a softspoken woman, but she&#39;s also one of the few people your mother has difficulty coercing into her plans. She&#39;ll be a valuable ally in carving out a few conciliations for yourself.

&lt;&lt;include [[2-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="108" name="2-8.2" tags="draft" position="1350,1475" size="100,100">&quot;I wish you could have helped, too, but I understand&quot;

Isla gives you a sad smile. &quot;I&#39;ll do what I can in the remaining time.&quot; She&#39;s a softspoken woman, but she&#39;s also one of the few people your mother has difficulty coercing into her plans. She&#39;ll be a valuable ally in carving out a few conciliations for yourself.

&lt;&lt;include [[2-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="109" name="2-8.3" tags="draft" position="1450,1475" size="100,100">&lt;&lt;set $kind-=1&gt;&gt;&quot;Your help wasn&#39;t necessary.&quot;

Isla gives you a sad smile but says no more. She&#39;s a softspoken woman, but she&#39;s also one of the few people your mother has difficulty coercing into her plans. She would have been a valuable ally in carving out a few conciliations for yourself, but there&#39;d be little point in it now.

&lt;&lt;include [[2-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="110" name="2-8.4" tags="draft" position="1550,1475" size="100,100">&quot;I&#39;ve gotten by.&quot;

Isla gives you a sad smile. &quot;Still, I&#39;ll do what I can in the remaining time.&quot; She&#39;s a softspoken woman, but she&#39;s also one of the few people your mother has difficulty coercing into her plans. She&#39;ll be a valuable ally in carving out a few conciliations for yourself.

&lt;&lt;include [[2-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="111" name="2-9" tags="draft genderstuff majorVarSet" position="1400,1600" size="100,100">Your sister&#39;s eyes are glittering with tears when your brother steps away from her and begins heading in your direction. Isla drifts toward your sister to comfort her and give you and Soren some space. He&#39;s held himself together well so far&lt;&lt;if $genderstuff&gt;&gt;, as he&#39;s supposed to&lt;&lt;/if&gt;&gt;—no sign of tears so far, though there&#39;s still time. As he reaches you...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[He pulls you into a hug. You don&#39;t mind being touched.|2-9.1][$touch=true;$soren.touch=true]]&lt;/li&gt;
&lt;li&gt;[[He pulls you into a hug. You don&#39;t usually like being touched, but he&#39;s an exception.|2-9.1][$touch=false;$soren.touch=true]]&lt;/li&gt;
&lt;li&gt;[[He puts a hand on your shoulder. You don&#39;t mind being touched.|2-9.2][$touch=true;$soren.touch=true]]&lt;/li&gt;
&lt;li&gt;[[He puts a hand on your shoulder. You don&#39;t usually like being touched, but he&#39;s an exception.|2-9.2][$touch=false;$soren.touch=true]]&lt;/li&gt;
&lt;li&gt;[[He smiles at you warmly. He knows you don&#39;t like being touched.|2-9.3][$touch=false;$soren.touch=false]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="112" name="2-9.1" tags="draft" position="1300,1725" size="100,100">Soren pulls you into a hug, though it&#39;s not the most comfortable feeling given the many polished brass buttons of his new officer&#39;s coat that bore into you. When he steps back, he looks at you &lt;&lt;include [[2-10]]&gt;&gt;</tw-passagedata><tw-passagedata pid="113" name="2-9.2" tags="draft" position="1400,1725" size="100,100">Soren puts a white-gloved hand on your shoulder and smiles at you warmly. He looks at you steadily &lt;&lt;include [[2-10]]&gt;&gt;</tw-passagedata><tw-passagedata pid="114" name="2-9.3" tags="draft" position="1500,1725" size="100,100">Soren smiles at you warmly, refraining from touching you. He looks at you steadily &lt;&lt;include [[2-10]]&gt;&gt;</tw-passagedata><tw-passagedata pid="115" name="2-10" tags="draft majorVarSet" position="1400,1850" size="100,100">with eyes that match your own:

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Amber.|2-11][$eyecolor=&quot;amber&quot;]]&lt;/li&gt;
&lt;li&gt;[[Black.|2-11][$eyecolor=&quot;black&quot;]]&lt;/li&gt;
&lt;li&gt;[[Blue.|2-11][$eyecolor=&quot;blue&quot;]]&lt;/li&gt;
&lt;li&gt;[[Brown.|2-11][$eyecolor=&quot;brown&quot;]]&lt;/li&gt;
&lt;li&gt;[[Green.|2-11][$eyecolor=&quot;green&quot;]]&lt;/li&gt;
&lt;li&gt;[[Grey.|2-11][$eyecolor=&quot;grey&quot;]]&lt;/li&gt;
&lt;li&gt;[[Hazel.|2-11][$eyecolor=&quot;hazel&quot;]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="116" name="2-11" tags="draft genderstuff" position="1400,1950" size="100,100">Gentle $eyecolor eyes regard you calmly. &quot;I wish I could be here for your wedding—to provide moral support, at least. If your betrothed is truly wretched, at least I know Sabine can be trusted to plot some sort of rescue mission. She&#39;s probably already started, just in case.&quot; Ever since she was a child, your sister took up the role of protector with great enthusiasm&lt;&lt;if $genderstuff&gt;&gt;—enough enthusiasm to be wildly inappropriate for a little girl&lt;&lt;/if&gt;&gt;. If anyone could find a way to save you from a &lt;&lt;if $confidence&gt;=0&gt;&gt;powerful&lt;&lt;else&gt;&gt;terrifying&lt;&lt;/if&gt;&gt; immortal being, she could.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I&#39;m hoping that I won&#39;t need to be saved.\&quot;&quot;|2-11.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Didn&#39;t think you&#39;d have such a poor view of married life.\&quot;&quot;|2-11.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I have a feeling I&#39;ll be taking her up on that.\&quot;&quot;|2-11.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I don&#39;t think she needs a reason to begin plotting.\&quot;&quot;|2-11.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="117" name="2-12.1" tags="draft" position="1250,2325" size="100,100">&lt;&lt;set $soren.rel=2&gt;&gt;The two of you have been close for as long as you can remember. As a child, you snuck him treats when the doctors forbid it, and he taught you how to break the rules in spirit while following them to the letter. &lt;&lt;if $pastduty&gt;1&gt;&gt;Perhaps because of your similar temperaments,&lt;&lt;elseif $pastduty&lt;1&gt;&gt;Despite your differences in temperament,&lt;&lt;else&gt;&gt;Though you didn&#39;t always agree with one another,&lt;&lt;/if&gt;&gt; he was always happy to see you when you visited him.

&lt;&lt;include [[2-13]]&gt;&gt;</tw-passagedata><tw-passagedata pid="118" name="2-12.2" tags="draft" position="1350,2325" size="100,100">&lt;&lt;set $soren.rel=1&gt;&gt;The two of you didn&#39;t become close until adulthood. Your parents tried to protect him from the sniffles of a younger child that could turn into something deadly for him, so you weren&#39;t often around him as a child. But as his health improved over the years, you were able to get to know him and &lt;&lt;if $pastduty&gt;1&gt;&gt;perhaps because of your similar temperaments,&lt;&lt;elseif $pastduty&lt;1&gt;&gt;despite your differences in temperament,&lt;&lt;else&gt;&gt;though you don&#39;t always agree with one another,&lt;&lt;/if&gt;&gt; build a strong relationship in spite of the weak early foundation.

&lt;&lt;include [[2-13]]&gt;&gt;</tw-passagedata><tw-passagedata pid="119" name="2-12.3" tags="draft" position="1450,2325" size="100,100">&lt;&lt;set $soren.rel=-1&gt;&gt;The two of you were close as children but have drifed apart over the years. As a child, you snuck him treats when the doctors forbid it, and he taught you how to break the rules in spirit while following them to the letter. But as the years passed, &lt;&lt;if $pastduty&gt;1&gt;&gt;you&#39;ve grown apart in spite of—or perhaps because of—your similar temperaments&lt;&lt;elseif $pastduty&lt;-1&gt;&gt;the differences between you have grown too wide to maintain the close relationship you once had&lt;&lt;else&gt;&gt;you&#39;ve grown apart for one reason or another&lt;&lt;/if&gt;&gt;.

But in spite of your faded relationship, he&#39;s still your brother. &lt;&lt;include [[2-13]]&gt;&gt;</tw-passagedata><tw-passagedata pid="120" name="2-12.4" tags="draft" position="1550,2325" size="100,100">&lt;&lt;set $soren.rel=-2&gt;&gt;The two of you get along but have never been especially close. Your parents tried to protect him from the sniffles of a younger child that could turn into something deadly for him, so you weren&#39;t often around him as a child. Even as the years passed, you got to know him better, but &lt;&lt;if $pastduty&gt;1&gt;&gt;in spite of—or perhaps because of—your similar temperaments,&lt;&lt;elseif $pastduty&lt;-1&gt;&gt;due to your differences in temperament,&lt;&lt;else&gt;&gt;for one reason or another,&lt;&lt;/if&gt;&gt; you never became close.

But in spite of your relatively neutral relationship, he&#39;s still your brother. &lt;&lt;include [[2-13]]&gt;&gt;</tw-passagedata><tw-passagedata pid="121" name="2-13" tags="draft" position="1400,2450" size="100,100">His health has improved over the years, but the risk has never left. You would have worried over him going off to war regardless, but it&#39;s made worse by knowing that battle is perhaps not the greatest danger he will face.

&quot;Maybe some time away from... the estate will even do us both a little good,&quot; he says quietly. &lt;&lt;if $skill==&quot;persuasion&quot;||$soren.rel&gt;0&gt;&gt;He doesn&#39;t believe it, but he&#39;s trying&lt;&lt;else&gt;&gt;You&#39;re not sure if he believes it&lt;&lt;/if&gt;&gt;. &quot;Take care of yourself&lt;&lt;if $pastduty&lt;-1&gt;&gt; and try to behave&lt;&lt;/if&gt;&gt; while I&#39;m away.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;&lt;if $pastduty&lt;-1&gt;&gt;&lt;li&gt;[[&quot;\&quot;I can&#39;t promise that.\&quot;&quot;|2-13.1]]&lt;/li&gt;
&lt;&lt;/if&gt;&gt;&lt;li&gt;[[&quot;\&quot;I will. I promise.\&quot;&quot;|2-13.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;ll try.\&quot;&quot;|2-13.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I wish you didn&#39;t have to leave.\&quot;&quot;|2-13.4]]&lt;/li&gt;
&lt;li&gt;[[Just nod.|2-13.5]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="122" name="2-13.1" tags="draft" position="1200,2575" size="100,100">&quot;I can&#39;t promise that.&quot;

In spite of himself, Soren grins. &quot;&lt;&lt;if $soren.rel&gt;0&gt;&gt;I know.&quot;&lt;&lt;else&gt;&gt;Not even going to make an attempt?&quot;

You shrug. &quot;Probably not.&quot;&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[2-14]]&gt;&gt;</tw-passagedata><tw-passagedata pid="123" name="2-13.2" tags="draft" position="1300,2575" size="100,100">&quot;I will. I promise.&quot;

Soren &lt;&lt;if $pastduty&gt;-3&gt;&gt;nods. &quot;Thank you.&quot;&lt;&lt;else&gt;&gt;gives you a crooked smile. &quot;Don&#39;t make promises you can&#39;t keep.&quot;&lt;&lt;/if&gt;&gt; &lt;&lt;include [[2-14]]&gt;&gt;</tw-passagedata><tw-passagedata pid="124" name="2-13.3" tags="draft" position="1400,2575" size="100,100">&quot;I&#39;ll try.&quot;

Soren &lt;&lt;if $pastduty&lt;-1&amp;&amp;$soren.rel&gt;0&gt;&gt;smiles. &quot;Will you really?&quot;

You shrug. &quot;I&#39;ll think about it.&quot;

&lt;&lt;else&gt;&gt;nods. &quot;Thank you. That&#39;s all I can ask.&quot; &lt;&lt;/if&gt;&gt;&lt;&lt;include [[2-14]]&gt;&gt;</tw-passagedata><tw-passagedata pid="125" name="2-13.4" tags="draft" position="1500,2575" size="100,100">&quot;I wish you didn&#39;t have to leave.&quot; You&#39;re painfully aware this might be the last time you see him. None of this is fair.

Soren&lt;&lt;if $soren.rel&gt;0&gt;&gt; sighs, and you can tell he&#39;s thinking the same things you are&lt;&lt;else&gt;&gt;&#39;s eyes widen at your unexpected honesty&lt;&lt;/if&gt;&gt;. &quot;I have to. But I promise I&#39;ll write to you and Isla and Sabine. I&#39;ll be back before you know it.&quot; &lt;&lt;include [[2-14]]&gt;&gt;</tw-passagedata><tw-passagedata pid="126" name="2-13.5" tags="draft" position="1600,2575" size="100,100">You nod silently.

&quot;Thank you.&quot; &lt;&lt;include [[2-14]]&gt;&gt;</tw-passagedata><tw-passagedata pid="127" name="2-14" tags="draft" position="1400,2700" size="100,100">He &lt;&lt;if $soren.touch&gt;&gt;places his hands on your shoulders&lt;&lt;else&gt;&gt;scans your face as if trying to memorize it&lt;&lt;/if&gt;&gt;. &lt;&lt;if $gendervibes==&quot;trans&quot;&gt;&gt;Leaning toward you and speaking quietly, he says, &quot;You&#39;ll always be my $mc.sibling. &lt;&lt;else&gt;&gt;&quot;&lt;&lt;/if&gt;&gt;Be well.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;You, too.\&quot;&quot;|2-14.1]]&lt;/li&gt;
&lt;li&gt;[[Nod.|2-14.2]]&lt;/li&gt;
&lt;&lt;if hasVisited(&quot;2-9.1&quot;)&gt;&gt;&lt;li&gt;[[Pull him in for one more hug.|2-14.3]]&lt;/li&gt;&lt;&lt;else&gt;&gt;&lt;li&gt;[[Pull him in for a hug.|2-14.3]]&lt;/li&gt;&lt;&lt;/if&gt;&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="128" name="2-14.1" tags="draft" position="1300,2825" size="100,100">&quot;You, too.&quot;

He&lt;&lt;if $soren.touch&gt;&gt; squeezes your shoulders and&lt;&lt;/if&gt;&gt; gives you a one last smile before&lt;&lt;if $soren.touch&gt;&gt; releasing you and&lt;&lt;/if&gt;&gt;, after giving you one last small smile, &lt;&lt;include [[2-15]]&gt;&gt;</tw-passagedata><tw-passagedata pid="129" name="2-14.2" tags="draft" position="1400,2825" size="100,100">You give him a nod, and he&lt;&lt;if $soren.touch&gt;&gt; squeezes your shoulders and&lt;&lt;/if&gt;&gt; returns your gesture before giving you one last smile&lt;&lt;if $soren.touch&gt;&gt;, releasing you&lt;&lt;/if&gt;&gt; and &lt;&lt;include [[2-15]]&gt;&gt;</tw-passagedata><tw-passagedata pid="130" name="2-14.3" tags="draft" position="1500,2825" size="100,100">You wrap your arms around him&lt;&lt;if $soren.touch&gt;&gt;&lt;&lt;if hasVisited(&quot;2-9.1&quot;)&gt;&gt; again&lt;&lt;/if&gt;&gt;, and he responds in kind, rubbing your back gently&lt;&lt;else&gt;&gt;, and he freezes briefly in surprise before cautiously hugging you back&lt;&lt;/if&gt;&gt;. &quot;It&#39;s alright. I&#39;ll be back.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I know.\&quot;&quot;|2-14.3.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;But what if you don&#39;t come back?\&quot;&quot;|2-14.3.2]]&lt;/li&gt;
&lt;li&gt;[[Nod silently.|2-14.3.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="131" name="2-15" tags="draft genderstuff endscene" position="1400,3075" size="100,100">making his way toward Isla. As you see Isla fail to hold back her tears, your mother approaches you. &quot;It&#39;s time for the final fitting. We can&#39;t be late.&quot; You knew you wouldn&#39;t be able to stay with Isla and Sabine to see the ship depart; there&#39;s to much yet to be prepared for your own upcoming departure.

Back inside the carriage, you can see a procession of both officers and the rank-and-file making their way aboard the ship. The masts sway just slightly with the calm waves that reach the harbor, and a few distant figures climb high up amid the web of rigging.

&quot;I hope they&#39;ve taken in your &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;dress&lt;&lt;else&gt;&gt;jacket&lt;&lt;/if&gt;&gt; properly this time,&quot; your mother says, avoiding taking even a glance out the window. &quot;We can&#39;t afford any more delays.&quot; The carriage pulls away down the road, back into the city, and the ship is quickly lost behind stocky brick buildings.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Time passes...|3-0]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="132" name="2-14.3.1" tags="draft" position="1400,2950" size="100,100">&lt;&lt;set $optimistic+=1&gt;&gt;&quot;I know.&quot;&lt;&lt;if $optimistic&gt;0&gt;&gt; You pretend you believe what you&#39;re saying.&lt;&lt;/if&gt;&gt;

After a few more moments, Soren pulls away&lt;&lt;if $soren.rel&gt;0&gt;&gt;, and you can tell he wants to say something more but can&#39;t find the words. So instead, he&lt;&lt;else&gt;&gt;and&lt;&lt;/if&gt;&gt; squeezes your shoulder&lt;&lt;if not $soren.touch&gt;&gt; lightly&lt;&lt;/if&gt;&gt; and gives you one last smile. With some difficulty, he turns away from you before &lt;&lt;include [[2-15]]&gt;&gt;</tw-passagedata><tw-passagedata pid="133" name="2-14.3.2" tags="draft" position="1500,2950" size="100,100">&lt;&lt;set $optimistic-=1&gt;&gt;&quot;But what if you don&#39;t come back?&quot;&lt;&lt;if $optimistic&gt;0&gt;&gt; As optimistic as you often are, you can&#39;t always be so.&lt;&lt;/if&gt;&gt;

&quot;Then let&#39;s pretend this was a happier day than it is.&quot; After a few more moments, Soren pulls away and squeezes your shoulder&lt;&lt;if not $soren.touch&gt;&gt; lightly&lt;&lt;/if&gt;&gt; and gives you one last smile. With some difficulty, he turns away from you before &lt;&lt;include [[2-15]]&gt;&gt;</tw-passagedata><tw-passagedata pid="134" name="2-14.3.3" tags="draft" position="1600,2950" size="100,100">You nod silently, letting the hug stretch on quietly. After a few more moments, Soren pulls away&lt;&lt;if $soren.rel&gt;0&gt;&gt;, and you can tell he wants to say something more but can&#39;t find the words. So instead, he&lt;&lt;else&gt;&gt;and&lt;&lt;/if&gt;&gt; squeezes your shoulder&lt;&lt;if not $soren.touch&gt;&gt; lightly&lt;&lt;/if&gt;&gt; and gives you one last smile. With some difficulty, he turns away from you before &lt;&lt;include [[2-15]]&gt;&gt;</tw-passagedata><tw-passagedata pid="135" name="3-0" tags="draft startscene genderstuff autosave" position="2100,100" size="100,100">&lt;&lt;set $cursc=3&gt;&gt;&lt;&lt;set $subt.loc=&quot;The Pavillion&quot;&gt;&gt;&lt;&lt;notify&gt;&gt;Autosave complete!&lt;&lt;/notify&gt;&gt;The horrible flurry of activity of the week before the wedding only heightens on the day of the event. Your mother has made the determination that large swaths of her month-long preparations were horribly misguided and utterly unacceptable. The flowers are the right colors but the wrong varieties. The ear cuffs that will seal your vows are the proper design, but the gemstones lack clarity. Naturally, none of these things were your choice, so there&#39;s no cause to blame you—you&#39;re merely the centerpiece of the arrangement that is your wedding.

The only acceptable part of the day is your &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;dress&lt;&lt;else&gt;&gt;suit&lt;&lt;/if&gt;&gt;. The color is seasonally appropriate—&lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;pale yellow&lt;&lt;else&gt;&gt;burnt red&lt;&lt;/if&gt;&gt;, as is proper for a summer wedding—and the style is both fashionable and inoffensive, elegant without being ostentatious. Every time she has swept into the room where your sister is helping you get ready, she has taken one look at it, given you a satisfied nod, and hurried back out. It&#39;s as if she needs the sight of the one correct decision she made in order to strengthen her resolve to fix every other tiny cataclysm she must attend to.

&lt;&lt;if $gendervibes==&quot;trans&quot;&gt;&gt;If only you could share her appreciation for your apparel: you know what others will see when they look at it. Objectively, it is a fine ensemble, and in other circumstances, it may not even bother you to wear it. But everyone knows what it means: a burnt red suit for a man, and a pale yellow dress for a woman. You knew you would have to endure it, but that hasn&#39;t made it better.&lt;&lt;elseif $gendervibes==&quot;maybe&quot;&gt;&gt;You&#39;re not sure if you share her appreciation for your apparel: you know what others will see when they look at it. Objectively, it is a fine ensemble, but everyone knows what it means: a burnt red suit for a man, and a pale yellow dress for a woman. You can&#39;t help the lingering doubt that it isn&#39;t quite that simple for you.&lt;&lt;else&gt;&gt;Objectively, it is a fine ensemble, but although you know it&#39;s fitted to you perfectly, its purpose makes it feel too constricting. Everyone knows what it means: a burnt red suit for a groom, and a pale yellow dress for a bride.&lt;&lt;/if&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|3-1]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="136" name="3-1" tags="draft" position="2100,200" size="100,100">At least it&#39;s just you and your sister now. The servant who helped you dress completed $ax.their task, and your mother is off fussing over something elsewhere. The walls of your dressing room are all but covered in mirrors, but you&#39;ve been trying to avoid looking at them too much. Your previous engagement didn&#39;t make it this far, and everything feels too new and unreal. If you try not to think about where you are, what you&#39;re wearing, maybe you can hold &lt;&lt;if $courage&gt;0&gt;&gt;reality&lt;&lt;else&gt;&gt;the panic&lt;&lt;/if&gt;&gt; at bay a little longer.

Sabine stands at the window, rolling the hem of her sleeve back and forth between her fingers to dissipate the excess of her perpetually vibrant energy. She&#39;s rarely without a smile on her lips, but it&#39;s contrasted by the scrutinizing intensity of her brown eyes she shares with your mother. As she looks out at the perfectly manicured lawn of the pavillion, you can see her cataloging every detail of the landscape. &quot;Do you think &lt;&lt;if $ax.they==&quot;he&quot;&gt;&gt;she&lt;&lt;else&gt;&gt;he&lt;&lt;/if&gt;&gt;&#39;s here yet?&quot;

&quot;You&#39;re the one who&#39;s been staring at the drive,&quot; you &lt;&lt;if $nvbook&gt;1&gt;&gt;write&lt;&lt;else&gt;&gt;say&lt;&lt;/if&gt;&gt;.

&quot;I know, but... it&#39;s getting late. Maybe &lt;&lt;if $ax.they==&quot;he&quot;&gt;&gt;she&lt;&lt;else&gt;&gt;he&lt;&lt;/if&gt;&gt; won&#39;t even come. Do Elves have weddings normally? Maybe &lt;&lt;if $ax.they==&quot;he&quot;&gt;&gt;she&lt;&lt;else&gt;&gt;he&lt;&lt;/if&gt;&gt; doesn&#39;t know &lt;&lt;if $ax.they==&quot;he&quot;&gt;&gt;she&lt;&lt;else&gt;&gt;he&lt;&lt;/if&gt;&gt;&#39;s supposed to be here. Or maybe &lt;&lt;if $ax.they==&quot;he&quot;&gt;&gt;she&lt;&lt;else&gt;&gt;he&lt;&lt;/if&gt;&gt;&#39;s just late. A few days probably seems like nothing to—&quot; Her words come to an abrupt halt, and you&#39;re about to ask her to continue when the room suddenly darkens. The sunlight that had poured in from the window has been choked out by a sheet of dark grey storm clouds.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Join your sister at the window.|3-1.1]]&lt;/li&gt;
&lt;li&gt;[[Stay seated where you are.|3-1.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="137" name="3-1.1" tags="draft" position="2050,325" size="100,100">&lt;&lt;set $courage+=1&gt;&gt;&lt;&lt;set $curiosity+=1&gt;&gt;&lt;&lt;set $window=true&gt;&gt;You rise carefully to avoid marring your &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;dress&lt;&lt;else&gt;&gt;suit&lt;&lt;/if&gt;&gt; and join your sister at the window. What you see coming up the drive isn&#39;t a carriage but a person. As they approach the pavillion, a wind whips up, billowing their dark cloak and long hair behind them. They&#39;re too far away to make out any details, but there can be no mistaking what they are.

Your sister turns to...

&lt;&lt;include [[3-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="138" name="3-1.2" tags="draft" position="2150,325" size="100,100">&lt;&lt;set $courage-=1&gt;&gt;&lt;&lt;set $courage-=1&gt;&gt;You stay seated where you are, resisting curiosity to preserve the shreds of normalcy that still remain, but your sister seems not to share your aim. &quot;&lt;&lt;if $ax.they==&quot;he&quot;&gt;&gt;she&lt;&lt;else&gt;&gt;he&lt;&lt;/if&gt;&gt;&#39;s here.&quot;

Your sister turns away from the window and approaches you to...

&lt;&lt;include [[3-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="139" name="3-2" tags="draft" position="2100,450" size="100,100">&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...take your hands.|3-3][$sabine.touch=true]]&lt;/li&gt;
&lt;li&gt;[[...look at you.|3-3][$sabine.touch=false]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="140" name="3-3" tags="draft majorVarSet" position="2100,550" size="100,100">Sabine&lt;&lt;if $sabine.touch&gt;&gt; takes your hands and&lt;&lt;/if&gt;&gt; looks at you anxiously. &quot;If you want to run, you know we&#39;ll help you, right? We have contacts. They can even get you out of the country if you need it.&quot; Coming from anyone else, it might sound like a joke, but from your sister, it probably isn&#39;t. She and her husband have a number of unusual connections, and someone who could smuggle you away to somewhere remote wouldn&#39;t be out of place.

But in the month since you agreed to this plan, you&#39;ve become more convinced that this is your way forward. You have to do this...

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[...for your family.|3-3.1]]&lt;/li&gt;
&lt;li&gt;[[...for the kingdom.|3-3.2]]&lt;/li&gt;
&lt;li&gt;[[...for your freedom.|3-3.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="141" name="3-3.1" tags="draft" position="2000,675" size="100,100">&lt;&lt;set $motiv=&quot;family&quot;&gt;&gt;You have to do this for your family. Not only would completing your mission improve your family&#39;s standing, it might bring your brother and father home, too. &lt;&lt;include [[3-4]]&gt;&gt;</tw-passagedata><tw-passagedata pid="142" name="3-3.2" tags="draft" position="2100,675" size="100,100">&lt;&lt;set $motiv=&quot;kingdom&quot;&gt;&gt;You have to do this for the kingdom. Your father and brother are fighting for king and country, and you&#39;ll do your share, too. &lt;&lt;include [[3-4]]&gt;&gt;</tw-passagedata><tw-passagedata pid="143" name="3-3.3" tags="draft" position="2200,675" size="100,100">&lt;&lt;set $motiv=&quot;freedom&quot;&gt;&gt;You have to do this for yourself. You&#39;ll be free of your family&#39;s meddling for a time, and &lt;&lt;if $confidence&gt;0&gt;&gt;when&lt;&lt;else&gt;&gt;if&lt;&lt;/if&gt;&gt; you succeed in your mission, you&#39;ll have surely have the power to live your own life. &lt;&lt;include [[3-4]]&gt;&gt;</tw-passagedata><tw-passagedata pid="144" name="3-4" tags="draft genderstuff" position="2100,800" size="100,100">You have to see this through. But before you can say as much, someone knocks frantically on the door. Sabine&#39;s brow furrows, and she &lt;&lt;if $sabine.touch&gt;&gt;releases your hands before rising&lt;&lt;else&gt;&gt;rises&lt;&lt;/if&gt;&gt; to answer the door. She opens it to reveal a very nervous-looking member of the pavillion&#39;s staff.

&quot;Ma&#39;am, the &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;groom&lt;&lt;else&gt;&gt;bride&lt;&lt;/if&gt;&gt; is here. Said I needed to bring this,&quot; she lifts a broad, flat box made of dark wood, &quot;to the &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;bride&lt;&lt;else&gt;&gt;groom&lt;&lt;/if&gt;&gt;.&quot;

&quot;What is it?&quot; Sabine asks suspiciously.

&quot;Don&#39;t know, Ma&#39;am. There&#39;s a letter inside, and a gift, &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;he&lt;&lt;else&gt;&gt;she&lt;&lt;/if&gt;&gt; said.&quot;

Your sister forces a smile and takes the box from the young woman. &quot;Thank you.&quot;

&quot;My pleasure, Ma&#39;am.&quot; She gives a quick bow before hurrying away.

After closing the door, Sabine returns to you and holds out the box. &quot;What do you think? Shall we look inside?&quot; You recognize the glitter in her eyes: enthusiasm reserved for ideas that are terrible but very exciting.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Absolutely not.\&quot;&quot;|3-4.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Only if you open it.\&quot;&quot;|3-4.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I suppose we have to.\&quot;&quot;|3-4.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Of course!\&quot;&quot;|3-4.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="145" name="3-4.1" tags="draft" position="1950,925" size="100,100">&lt;&lt;set $courage-=2&gt;&gt;&lt;&lt;set $curiosity-=1&gt;&gt;&quot;Absolutely not. Who knows what&#39;s in there?&quot;

Sabine clicks her tongue in disappointment. &quot;Spoilsport. But look at this carving!&quot; She holds the box up to show you the lid, held closed by a small copper clasp. You squint at it in the darkness for a few seconds before your sister notices. &quot;Oh, light, yes.&quot; Placing the box in your hands, she gets up to light a couple lamps to make up for the oppressive stormy darkness that&#39;s come over the room. In the dim glow, you can make out a scene carved into the box lid: a bird of prey diving toward a coiled snake. Every scale and feather is carved in painstaking detail, and the copper corners and clasp have been formed to evoke raptor talons.

&quot;A bit grisly for a wedding gift.&quot; Sabine inspects it over your shoulder. &quot;But it&#39;s beautifully made.&quot;

Your attention is diverted from the box when the door suddenly opens, your mother—as has been her way today—not bothering to knock before entering.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|3-7]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="146" name="3-4.2" tags="draft" position="2050,925" size="100,100">&lt;&lt;set $courage-=1&gt;&gt;&lt;&lt;set $curiosity+=1&gt;&gt;&quot;Only if you open it. Who knows what&#39;s in there?&quot;

&quot;Very well, I&#39;ll risk my life for your wedding gift.&quot; She squints at the box for a moment before she realizes how dark it&#39;s become. &quot;Oh, light, yes.&quot; Placing the box in your hands, she gets up to light a couple lamps to make up for the oppressive stormy darkness that&#39;s come over the room. Then, she sits back down beside you and takes the box back. &quot;Ready?&quot; You nod, and she flicks back the talon-shaped clasp and opens the lid.

&lt;&lt;include [[3-5]]&gt;&gt;</tw-passagedata><tw-passagedata pid="147" name="3-4.3" tags="draft" position="2150,925" size="100,100">&lt;&lt;set $courage+=1&gt;&gt;&lt;&lt;set $curiosity+=1&gt;&gt;&quot;I suppose we have to.&quot;

&quot;Such enthusiasm!&quot; She hands you the box, and you squint at it in the darkness for a few seconds before your sister notices. &quot;Oh, light, yes.&quot; She gets up to light a couple lamps to make up for the oppressive stormy darkness that&#39;s come over the room. Then, she sits back down beside you and nods at you. You lift the talon-shaped clasp and carefully raise the lid.

&lt;&lt;include [[3-5]]&gt;&gt;</tw-passagedata><tw-passagedata pid="148" name="3-4.4" tags="draft" position="2250,925" size="100,100">&lt;&lt;set $courage+=1&gt;&gt;&lt;&lt;set $curiosity+=2&gt;&gt;&quot;Of course!&quot;

&quot;Then what are we waiting for?&quot; She hands you the box, and you squint at it in the darkness for a few seconds before your sister notices. &quot;Oh, light, yes.&quot; She gets up to light a couple lamps to make up for the oppressive stormy darkness that&#39;s come over the room. Then, she sits back down beside you and nods at you. You lift the talon-shaped clasp and raise the lid.

&lt;&lt;include [[3-5]]&gt;&gt;</tw-passagedata><tw-passagedata pid="149" name="3-7" tags="draft genderstuff" position="2100,1400" size="100,100">&quot;&lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;He&lt;&lt;else&gt;&gt;She&lt;&lt;/if&gt;&gt; has arrived,&quot; your mother announces, clearly expecting to be the first to bring you this news. Your betrothed must be intimidating indeed to compel the woman who brought you the box to bypass your mother completely. Her gaze drifts to the &lt;&lt;if $three.robe&gt;&gt;robe&lt;&lt;else&gt;&gt;box&lt;&lt;/if&gt;&gt;. &quot;What is that?&quot;

&quot;A gift, &lt;&lt;if $three.letter&gt;&gt;supposedly&lt;&lt;else&gt;&gt;apparently&lt;&lt;/if&gt;&gt;,&quot; your sister replies.

&lt;&lt;if $three.robe&gt;&gt;&lt;&lt;include [[3-7-1]]&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;include [[3-7-2]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="150" name="3-5" tags="draft" position="2175,1050" size="100,100">As soon as the box is open, a breeze rushes out from inside, raising a folded piece of paper into the air. A chill bursts up your spine. Sorcery. Real, working sorcery.

&quot;Shit.&quot; Sabine nods toward the paper. &quot;I think that&#39;s yours.&quot;

You&lt;&lt;if $courage&lt;0&gt;&gt; cautiously&lt;&lt;/if&gt;&gt; reach into the still-blowing wind and take the letter. As soon as you take hold of it, the box shuts of its own accord. There&#39;s no envelope, seal, or written name—just a piece of paper folded precisely in half.

&quot;Well? Go on. Read it! I promise I won&#39;t look at it unless you want me to.&quot; That&#39;s almost certainly a lie, and the way she&#39;s studiously looking everywhere but at the letter only makes her seem more suspicous.

You angle yourself away from her and unfold the letter.

&lt;&lt;include [[3-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="151" name="3-6" tags="draft" position="2175,1150" size="100,100">&lt;&lt;set $three.letter=true&gt;&gt;The first thing that strikes you is the handwriting. It could generously be described as unornamented and ungenerously as loosely legible scrawl. There is no salutation; the letter begins with just a singular block of words crowded up to the top of the page:

&lt;i&gt;I&#39;ve been told it&#39;s &quot;impossible&quot; to see you before the ceremony, and since I&#39;ve been unable to make anyone understand the definition of the word &quot;impossible,&quot; I&#39;m forced to hope this will somehow make its way to you. I understand your family is of meager means, so I&#39;ve enclosed something befitting someone of more adequate status. Wear it if it suits you.&lt;/i&gt;

No closing follows the body of the letter, only what appears to be a name: Hawk.

You look up from the letter to see your sister staring at it, mouth agape. &quot;I&#39;m not sure if this is a gift or an insult. You absolutely cannot show that letter to Mother.&quot;

You open the box and...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...throw the letter inside before shutting it. You don&#39;t want this &quot;gift.&quot;|3-6.1]]&lt;/li&gt;
&lt;li&gt;[[...see what the &quot;gift&quot; is.|3-6.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="152" name="3-6.1" tags="draft" position="2125,1275" size="100,100">You open the box and throw the letter inside before shutting it. You don&#39;t want this &quot;gift,&quot; no matter how inadequate that makes you.

&quot;You can still make a run for it. I can—&quot;

Your sister jumps a little when the door suddenly opens, your mother—as has been her way today—not bothering to knock before entering.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|3-7]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="153" name="3-6.2" tags="draft" position="2225,1275" size="100,100">&lt;&lt;set $three.robe=true&gt;&gt;&lt;&lt;set $curiosity+=1&gt;&gt;You open the box and peer into it to see what the &quot;gift&quot; is. The outside of the box is only a few inches deep, but now that you&#39;re able to look inside unimpeded, you realize that you not only can&#39;t see its contents—you can&#39;t see the bottom either. As you try to comprehend the presence of the small chasm before you, you hear the fluttering of fabric approaching from below. Finally, a mass of blue bobs to the top of the box like driftwood floating over a wave. It takes some effort to pull it from the box due to its weight and length, and as you lay it out on a table, Sabine gasps.

The garment before you is neither a dress nor a suit but a long, sky blue silk brocade robe with silver cloud-like whorls. Its high, open collar is ornamented with tiny white jewels that drip down over the long, slate blue velvet sleeves and cape that cascade from underneath the garment&#39;s shoulders. A sash of silver silk wraps around the waist of the robe and ends in a series of small tassels.

This would be an appropriate gift for the king himself, so valuable that you probably couldn&#39;t even sell it. When it comes to the opulence of a wedding, it can be a fine line between impressing one&#39;s guests and immodestly flaunting one&#39;s means. This is far, &lt;i&gt;far&lt;/i&gt; past that line. If this is &quot;adequate,&quot; it&#39;s concerning to think what luxury must mean to an Elf.

You&#39;re still inspecting the robe when the door suddenly opens, your mother—as has been her way today—not bothering to knock before entering.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|3-7]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="154" name="3-7-1" tags="draft" position="2025,1525" size="100,100">You can see your mother making the same calculations you did. &quot;That garment is for...?&quot;

&quot;The wedding,&quot; you reply.

Your mother steels the neutral expression on her face. &quot;You should make your way to the pavillion. Sabine, accompany $ax.them, please. I will inform your betrothed that your wearing this gift today will be impossible.&quot; Sabine snorts. &quot;I will return it.&quot; She moves toward the robe.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I want to wear it.\&quot;&quot;|3-7-1.1]]&lt;/li&gt;
&lt;li&gt;[[Let her take it.|3-7-1.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="155" name="3-7-2" tags="draft" position="2150,1525" size="100,100">&quot;How thoughtful,&quot; your mother says without enthusiasm before promptly moving on. &quot;I&#39;ve remedied as many errors as I could, but I&#39;m still needed for a few matters before the ceremony begins. You should make your way to the pavillion. Sabine, accompany $ax.them, please.&quot; She looks at your sister, waiting for an objection that doesn&#39;t come. &lt;&lt;include [[3-8]]&gt;&gt;</tw-passagedata><tw-passagedata pid="156" name="3-7-1.1" tags="draft genderstuff" position="1975,1650" size="100,100">&quot;I want to wear it.&quot; &lt;&lt;if $pastduty&gt;0&gt;&gt;Despite how inappropriate a choice it is, the robe is undeniably beautiful.&lt;&lt;else&gt;&gt;The audacity of of wearing this robe is more than a little appealing.&lt;&lt;/if&gt;&gt;

Your mother&#39;s hand pauses on its way to take hold of the fabric. &quot;No. You have a perfectly good &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;dress&lt;&lt;else&gt;&gt;suit&lt;&lt;/if&gt;&gt; already.&quot;

Sabine steps toward her. &quot;Mother, just this one thing.&quot;

Closing her fingers around air just inches from the robe, your mother sighs. &quot;And what if it&#39;s damaged? Your $ax.sibling will be wearing this for hours. Do you think we can afford to pay to have even a single stitch repaired? This is not a garment that can be worn. It is priceless.&quot;

Your sister lets out an angry breath but looks away. All three of you know that, although &quot;meager means&quot; is an exaggeration of your circumstances, it&#39;s not enough of one not to linger heavily in the air. You watch your mother pick up the robe and drape it carefully over her arm. &lt;&lt;include [[3-8]]&gt;&gt;</tw-passagedata><tw-passagedata pid="157" name="3-7-1.2" tags="draft" position="2075,1650" size="100,100">You watch your mother pick up the robe and drape it carefully over her arm.

&quot;Are you sure?&quot; Sabine asks you quietly.

You nod.

&lt;&lt;include [[3-8]]&gt;&gt;</tw-passagedata><tw-passagedata pid="158" name="3-8" tags="draft" position="2100,1775" size="100,100">Your mother begins to leave but pauses in the doorway. As she looks back at you, her expression is softer than you&#39;ve seen it since you were a child. She looks as though she&#39;s about to say something before thinking better of it and shuts the door behind her as she leaves.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|3-9]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="159" name="3-9" tags="draft" position="2100,1875" size="100,100">Sabine lifts her glasses to pinch the bridge of her nose. &quot;You know I don&#39;t like this. For more than the usual reasons that I don&#39;t like... any of this.&quot; She gestures vaguely at nothing, but you know she&#39;s trying to indicate &quot;society&quot; as a concept. &quot;Something here is strange. I can feel it. I&#39;ll open all the letters you send straight away, so write if you need help. If you don&#39;t remember the code for something, just do your best. I&#39;ll figure it out.&quot;

You don&#39;t know if it was Sabine or her husband Erich who suggested you memorize a set of code words to use in your letters to indicate that you need their assistance. In reality, it doesn&#39;t matter much; they often think so alike that Sabine says they&#39;re more like a single mind with two bodies than two separate people. Erich, at least, has tried to disguise his attempts to draw information out of you, but Sabine shows no such subtle impulse. You&#39;re fairly certain you&#39;ve managed to &lt;&lt;switch $skill&gt;&gt;&lt;&lt;case &quot;persuasion&quot;&gt;&gt;deflect their attempts&lt;&lt;case &quot;strategy&quot;&gt;&gt;outmaneuver them&lt;&lt;case &quot;persistence&quot;&gt;&gt;frustrate their attempts&lt;&lt;case &quot;evasion&quot;&gt;&gt;skirt carefully around the truth&lt;&lt;/switch&gt;&gt; without giving anything away, but their suspicion remains. It&#39;s difficult to keep things from Sabine in particular since...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...you&#39;ve always been close.|3-9.1]]&lt;/li&gt;
&lt;li&gt;[[...you&#39;ve gotten closer now that you&#39;re adults.|3-9.2]]&lt;/li&gt;
&lt;li&gt;[[...she&#39;s still your sister, even if you aren&#39;t close anymore.|3-9.3]]&lt;/li&gt;
&lt;li&gt;[[...she&#39;s your sister, even if you&#39;ve never been close.|3-9.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="160" name="3-9.1" tags="draft" position="1950,2000" size="100,100">&lt;&lt;set $sabine.rel=2&gt;&gt;It&#39;s difficult to keep things from Sabine since you&#39;ve always been close. You often got roped into her mischief as a child, but she always split the spoils of your escapades with you, whether they were snacks from the kitchen or flowers from the garden. &lt;&lt;if $pastduty&gt;1&gt;&gt;Although you have very different personalities&lt;&lt;elseif $pastduty&lt;-1&gt;&gt;Due to your similar personalities&lt;&lt;else&gt;&gt;Though she has an intense personality&lt;&lt;/if&gt;&gt;, the two of you still get along like a house on fire.

T&lt;&lt;include [[3-10]]&gt;&gt;</tw-passagedata><tw-passagedata pid="161" name="3-9.2" tags="draft" position="2050,2000" size="100,100">&lt;&lt;set $sabine.rel=1&gt;&gt;It&#39;s difficult to keep things from Sabine since you&#39;ve grown close over the years. As a child, she was prone to causing trouble for herself and her companions in mischief, so you kept your distance. But as you&#39;ve gotten older, you&#39;ve grown closer&lt;&lt;if $pastduty&gt;1&gt;&gt; despite your very different personalities&lt;&lt;elseif $pastduty&lt;-1&gt;&gt;, helped along by your similar personalities&lt;&lt;else&gt;&gt; despite her lasting penchant for causing trouble&lt;&lt;/if&gt;&gt;.

T&lt;&lt;include [[3-10]]&gt;&gt;</tw-passagedata><tw-passagedata pid="162" name="3-9.3" tags="draft" position="2150,2000" size="100,100">&lt;&lt;set $sabine.rel=-1&gt;&gt;It&#39;s difficult to keep things from Sabine since she&#39;s still your sister, even if you aren&#39;t close anymore. You often got roped into her mischief as a child, but she always split the spoils of your escapades with you, whether they were snacks from the kitchen or flowers from the garden. Though you still care for her as your sister, &lt;&lt;if $pastduty&gt;1&gt;&gt;her penchant for causing trouble has far outlasted yours&lt;&lt;elseif $pastduty&lt;-1&gt;&gt;your mutual willfulness has hurt rather than helped your relationship in the long run&lt;&lt;else&gt;&gt;her intense personality can be overwhelming&lt;&lt;/if&gt;&gt;.

Nevertheless, t&lt;&lt;include [[3-10]]&gt;&gt;</tw-passagedata><tw-passagedata pid="163" name="3-9.4" tags="draft" position="2250,2000" size="100,100">&lt;&lt;set $sabine.rel=-2&gt;&gt;It&#39;s difficult to keep things from Sabine since she&#39;s still your sister, even if you&#39;ve never been close. As a child, she was prone to causing trouble for herself and her companions in mischief, so you kept your distance. Though you still care for her as your sister, &lt;&lt;if $pastduty&gt;1&gt;&gt;her penchant for causing trouble has kept you at a distance&lt;&lt;elseif $pastduty&lt;-1&gt;&gt;your mutual willfulness has led you to butt heads more than a few times&lt;&lt;else&gt;&gt;her intense personality can be overwhelming&lt;&lt;/if&gt;&gt;.

Nevertheless, t&lt;&lt;include [[3-10]]&gt;&gt;</tw-passagedata><tw-passagedata pid="164" name="3-10" tags="draft majorVarSet" position="2100,2125" size="100,100">he code words were a useful suggestion, particularly given your true purpose. It&#39;s difficult to imagine what they could ultimately do to oppose an Elven sorcerer if things got truly dangerous, but it&#39;s both reassuring and alarming to know that Sabine would try.

Sabine sighs. &quot;I don&#39;t suppose we can put this off any longer. I&#39;ll be with you the whole time. If you need me to mess up reading the vows, just wink at me, alright?&quot;

Although a priestess will perform most of the ceremony, it&#39;s traditional for a family member of each of the betrothed to read out the vows for the other member of the couple. A sibling is the most common choice, and if you&#39;d had your choice...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...you would have chosen your brother.|3-10.1]]&lt;/li&gt;
&lt;li&gt;[[...you still would have chosen your sister.|3-10.2]]&lt;/li&gt;
&lt;li&gt;[[...you don&#39;t know which you would have chosen.|3-10.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="165" name="3-10.1" tags="draft" position="2000,2250" size="100,100">&lt;&lt;if $soren.rel&gt;=$sabine.rel&gt;&gt;&lt;&lt;set $favsibling=&quot;Soren&quot;&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set $favsibling=&quot;none&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;You would have chosen your brother to stand with you and read the vows to your future spouse. His steady presence would have been reassuring on a day of such uncertainty&lt;&lt;if $soren.rel&lt;0&gt;&gt;, even if you aren&#39;t the closest&lt;&lt;/if&gt;&gt;.

&lt;&lt;include [[3-11]]&gt;&gt;</tw-passagedata><tw-passagedata pid="166" name="3-10.2" tags="draft" position="2100,2250" size="100,100">&lt;&lt;if $sabine.rel&gt;=$soren.rel&gt;&gt;&lt;&lt;set $favsibling=&quot;Sabine&quot;&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set $favsibling=&quot;none&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;You still would have chosen your sister to stand with you and read the vows to your future spouse. You know that you can trust her to be on your side no matter the circumstances&lt;&lt;if $sabine.rel&lt;0&gt;&gt;, even if you aren&#39;t the closest&lt;&lt;/if&gt;&gt;.

&lt;&lt;include [[3-11]]&gt;&gt;</tw-passagedata><tw-passagedata pid="167" name="3-10.3" tags="draft" position="2200,2250" size="100,100">&lt;&lt;set $favsibling=&quot;none&quot;&gt;&gt;One of the few positives of Soren&#39;s departure is that it spared you having to choose which of your siblings would stand with you and read the vows to your future spouse. &lt;&lt;if $soren.rel&gt;0&amp;&amp;$sabine.rel&gt;0&gt;&gt;You&#39;re close with them both&lt;&lt;elseif $soren.rel&lt;0&amp;&amp;$sabine.rel&lt;0&gt;&gt;You&#39;re not especially close with either of them&lt;&lt;else&gt;&gt;Though you&#39;re not equally close with them both, you wouldn&#39;t want to play favorites&lt;&lt;/if&gt;&gt;, so making a choice would have been difficiult.

&lt;&lt;include [[3-11]]&gt;&gt;</tw-passagedata><tw-passagedata pid="168" name="3-11" tags="draft endscene" position="2100,2375" size="100,100">&lt;&lt;if $window&gt;&gt;You only saw one figure arrive earlier&lt;&lt;else&gt;&gt;You have a suspicion the Elf didn&#39;t bring any guests with them&lt;&lt;/if&gt;&gt;, so the priestess will probably read you your vows. You don&#39;t know if Elves even &lt;i&gt;have&lt;/i&gt; family.&lt;&lt;if $humor&gt;1&gt;&gt; At least you wouldn&#39;t have any terrifying in-laws to avoid.&lt;&lt;/if&gt;&gt;

You pull on your gloves and make your way out the door that Sabine holds open for you. The walkway between your dressing room and the pavillion itself is enclosed by waist-high walls that support the arches holding up the overhanging roof. Tradition dictates that the pavillion be open to the presence of the Winds on all sides, but at least it doesn&#39;t forbid the roof overhead that&#39;s preventing the drizzle from ruining the guests&#39; clothes.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|4-0]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="169" name="4-0" tags="draft startscene autosave" position="2800,100" size="100,100">&lt;&lt;set $cursc=4&gt;&gt;&lt;&lt;notify&gt;&gt;Autosave complete!&lt;&lt;/notify&gt;&gt;As you approach the pavillion, you can see that only a fraction of the long rows of seats is filled. Your mother wasn&#39;t able to convince your entire extended family to attend, given the short notice, but it&#39;s not a poor showing. There are enough people on your side of the pavillion to dramatically contrast the complete lack on the other side. As you &lt;&lt;if $window&gt;&gt;expected&lt;&lt;else&gt;&gt;suspected&lt;&lt;/if&gt;&gt;, your betrothed seems to have arrived alone.

The gently sloping roof shelters the seats from the worst of the rain, but some still spills in at the edges of the flagstone floor where the pavillion is, unlike the passageways, unprotected by short walls and simply opens out into the grass of the field that surrounds it. At the end of the pavillion neareast you, a dais rises above the flagstones, backed up to the edge of the pavillion which looks out onto miles of open field beyond.

The priestess stands on the dais, robed in pale blue with a golden shawl over her shoulders. When you and Sabine reach the appointed place from which you will walk toward the dais, the priestess nods toward you in acknowledgment.

No one yet stands on the opposite side of the pavillion.

Your sister &lt;&lt;if $sabine.touch&gt;&gt;takes your hand&lt;&lt;else&gt;&gt;steps up beside you&lt;&lt;/if&gt;&gt; as you wait in silence. Your heart pounds&lt;&lt;if $courage&lt;0&gt;&gt; frantically&lt;&lt;/if&gt;&gt; in your chest, and the sounds of the murmuring of the guests in attendance turns into a strangely distant hiss in your ears. Everything feels too real, too sharp. Sabine&#39;s presence is fortifying, but it still takes substantial effort to remain standing where you are as the world starts to become a prickling haze, too warm and too cold at once.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Then, lightning strikes.|4-1]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="170" name="4-1" tags="draft genderstuff" position="2800,200" size="100,100">There are plenty of stories about humans encountering Elves and not realizing what they were until it was too late. But if the Elf who&#39;s appeared on the other side of the pavillion is anything to go by, those stories must have been fabrications. The crowd in the pavillion is entirely, painfully still, taking in this creature of legend. The Elf&#39;s form is human-like, but everything else about their presence is blatantly &lt;i&gt;other&lt;/i&gt;, from the precise straightness of their posture to their breaths which seem too infrequent and too deep. In contrast to their sharp, severe features, their long black hair seems to flow in a gentle breeze that you don&#39;t feel.

You were expecting a &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;man&lt;&lt;else&gt;&gt;woman&lt;&lt;/if&gt;&gt;, but they don&#39;t quite match the traits you expect from one. Though &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;they&#39;re tall enough—&lt;i&gt;more&lt;/i&gt; than tall enough—to be a man, their features are delicate in spite of their sharpness&lt;&lt;else&gt;&gt;their features are delicate in spite of their sharpness, they are &lt;i&gt;far&lt;/i&gt; taller than any woman you&#39;ve ever met&lt;&lt;/if&gt;&gt;. Some stories about Elves cast them as shapeshifters or even beings without gender.&lt;&lt;if ($attraction!=&quot;bi&quot;||$attraction!==&quot;aa&quot;)&amp;&amp;($ax.gender==$ha.gender||$ha.gender==&quot;nb&quot;)&gt;&gt; A tiny sliver of hope wedges itself into your thoughts.&lt;&lt;/if&gt;&gt;

The deep blue silk brocade robe that cascades over their form draws your attention next, as you notice the tiny crystals sewn into the fabric seem to glitter with their own light in the darkness of the rainstorm. The robe&#39;s open collar reveals a slightly immodest amount of their light brown skin, and the black velvet cape that flows out of the robe&#39;s shoulders trails on the floor behind them.&lt;&lt;if $three.robe&gt;&gt; If the robe they sent to you earlier was reminiscent of the daytime sky, this is its perfect opposite: an evocation of a clear, starlit night.&lt;&lt;/if&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|4-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="171" name="4-2" tags="draft" position="2800,300" size="100,100">You feel their gaze land on you before you see it, like their attention has a force of its own. Thunder rumbles as golden-green eyes pierce through you, and you feel an instinctual urge to bolt, like a deer who&#39;s caught sight of a mountain lion just before it strikes. There&#39;s not a hint of emotion to be found in their expression, and their cold, unblinking stare forces you to hold their gaze—a primal compulsion that tells you a moment of weakness now means death.

But as your eyes water, you can no longer fight off the urge to blink. And after a crushing instant of darkness, you&#39;re still in one piece. They haven&#39;t moved at all, still as stone.

Then, their head tilts just slightly, and the threat in their attention snaps like a twig. Nothing in their expression changes, but something in the gesture is reminiscent of &lt;&lt;if $three.letter&gt;&gt;their namesake: a&lt;&lt;else&gt;&gt;a&lt;&lt;/if&gt;&gt; hawk in patient, curious examination.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|4-3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="172" name="4-3" tags="draft majorVarSet" position="2800,400" size="100,100">&quot;Brethren, we begin this momentous occasion with a summer storm—a reminder of the Winds&#39; power and renewal.&quot; The priestess&#39; clear voice wrenches your attention away from your betrothed. &quot;Those who are to be joined today in Their sight, come forward.&quot;

Only when Sabine takes a step forward do you remember that you&#39;re supposed to get &lt;i&gt;closer&lt;/i&gt; to the Elf who has also begun to advance toward the dais. Their movements are as fluid and precise as a cat&#39;s, and the hanging lamps of the pavillion cast shifting shadows over their face as they pass each in turn.

A huge bolt of lightning flares brilliantly, and moments later, thunder louder than you&#39;ve ever heard blasts through the pavillion, shaking the lamps on their chains.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Only Sabine&#39;s presence keeps you from running—you hate thunder.|4-3.1]]&lt;/li&gt;
&lt;li&gt;[[You can&#39;t help the exhilaration coursing through you—you love thunder.|4-3.2]]&lt;/li&gt;
&lt;li&gt;[[You don&#39;t mind thunder, but the timing could be better.|4-3.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="173" name="4-3.1" tags="draft" position="2700,525" size="100,100">&lt;&lt;set $thunder=-1&gt;&gt;Only Sabine&#39;s presence keeps you from running—you hate thunder. &lt;&lt;if $optimist&gt;-1&gt;&gt;You had hoped the cataclysms of today were already accounted for, but apparently not&lt;&lt;else&gt;&gt;Of course this dreaded day somehow got worse&lt;&lt;/if&gt;&gt;.

&lt;&lt;include [[4-4]]&gt;&gt;</tw-passagedata><tw-passagedata pid="174" name="4-3.2" tags="draft" position="2800,525" size="100,100">&lt;&lt;set $thunder=1&gt;&gt;You can&#39;t help the exhilaration coursing through you—you love thunder. There&#39;s something fortifying in the power of a storm, and it adds a little more determination to your steps.

&lt;&lt;include [[4-4]]&gt;&gt;</tw-passagedata><tw-passagedata pid="175" name="4-3.3" tags="draft" position="2900,525" size="100,100">You don&#39;t mind thunder, but the timing could be better. &lt;&lt;if $optimist&gt;-1&gt;&gt;You had hoped today&#39;s misfortunes were already accounted for, but apparently not&lt;&lt;else&gt;&gt;Of course something else was bound to go wrong today&lt;&lt;/if&gt;&gt;.

&lt;&lt;include [[4-4]]&gt;&gt;</tw-passagedata><tw-passagedata pid="176" name="4-4" tags="draft majorVarSet" position="2800,650" size="100,100">The pouring rain has blocked out any view of the lawn around the pavillion. You&#39;re all trapped beneath the pavillion&#39;s roof, but even that knowledge doesn&#39;t completely dismiss the growing urge to bolt as you come to stand before the Elf, close enough to smell a hint of pine and sage. Close enough to reach out and touch them if you dared such a thing. Even as you try to avoid looking at them, their imposing presence fills your view.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[The Elf towers over you utterly. (Under 5&#39;3/160 cm)|4-5.1]]&lt;/li&gt;
&lt;li&gt;[[You stand about shoulder height to them. (5&#39;3-5&#39;9/160-175 cm)|4-5.2]]&lt;/li&gt;
&lt;li&gt;[[Though you&#39;re tall, they&#39;re noticeably taller. (5&#39;9-6&#39;5/175-196 cm)|4-5.3]]&lt;/li&gt;
&lt;li&gt;[[You&#39;re surprisingly close in height. (6&#39;5-6&#39;11/196-211 cm)|4-5.4]]&lt;/li&gt;
&lt;li&gt;[[It&#39;s rare that you meet someone even close to your height. (Over 6&#39;11/ 211 cm)|4-5.5]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="177" name="4-5.1" tags="draft" position="2600,775" size="100,100">&lt;&lt;set $height=1&gt;&gt;The Elf towers over you utterly, filling most of your vision with the deep blue of their robe. Its tiny, luminous jewels catch your eye as they flicker ever so slightly from within. You&#39;re used to others looming over you, but this is even more dramatic than normal.

&lt;&lt;include [[4-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="178" name="4-5.2" tags="draft" position="2700,775" size="100,100">&lt;&lt;set $height=2&gt;&gt;You stand about shoulder height to them, and a large amount of your vision is filled with the deep blue of their robe. Its tiny, luminous jewels catch your eye as they flicker ever so slightly from within. You&#39;re used to being shorter than others, but this is beyond the usual.

&lt;&lt;include [[4-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="179" name="4-5.3" tags="draft" position="2800,775" size="100,100">&lt;&lt;set $height=3&gt;&gt;Though you&#39;re tall, they&#39;re noticeably taller, and your eyes travel about in search of something that isn&#39;t the view directly in front of you: the smooth, tan skin exposed by their high, open collar. It&#39;s not common for you to need to look up to meet someone&#39;s eyes, but you know you&#39;ll need to do it eventually today.

&lt;&lt;include [[4-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="180" name="4-5.4" tags="draft" position="2900,775" size="100,100">&lt;&lt;set $height=4&gt;&gt;You&#39;re surprisingly close in height, and your eyes travel about in search of something, &lt;i&gt;anything&lt;/i&gt; that will give you an excuse to continue avoiding their gaze. It&#39;s unusual not to have to bend over to look someone in the eye, but you&#39;re not sure if you like it in this case.

&lt;&lt;include [[4-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="181" name="4-5.5" tags="draft" position="3000,775" size="100,100">&lt;&lt;set $height=5&gt;&gt;It&#39;s rare that you meet someone even close to your height, and you try not to think too much about the fact that even an Elf is shorter than you. At least it may mean less back pain is in store when you finally have to look them in the eye—something you&#39;ve been avoiding by looking anywhere else.

&lt;&lt;include [[4-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="182" name="4-6" tags="draft" position="2800,900" size="100,100">Sabine&lt;&lt;if $sabine.touch&gt;&gt; lets go of your hand and&lt;&lt;/if&gt;&gt; steps away to take her place beside the priestess. You turn to face the priestess and the wall of water that pours off the edge of the roof a barely safe distance behind her, eager to look somewhere other than in your betrothed&#39;s direction. Ordinarily, you would be expected to hold their hand during the ceremony, but they&#39;re standing far enough away from you that they clearly have no intention of doing any such thing. &lt;&lt;if $touch&gt;&gt;T&lt;&lt;else&gt;&gt;You&#39;re grateful t&lt;&lt;/if&gt;&gt;he priestess doesn&#39;t seem inclined to force the issue and simply begins the ceremony.

She has to shout to be heard over the downpour and pause each time the thunder rumbles, but she carries on, her voice rich and melodic. She invokes the Winds and speaks of how, one day, after your lives end, your souls will return to the Winds, bringing all they learned to join the stores of wisdom held within. But do Elves have souls? Even if they do, they would never return to the Winds if they&#39;re immortal. The priestess, however, seems unconcerned by that particular nuance of the situation and continues with her entirely standard recitation of the wedding ceremony. She rings the chimes when called for, and those in attendance chant in unison when it&#39;s their turn–except for the Elf who remains still and silent over the course of the hour.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|4-7]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="183" name="4-7" tags="draft genderstuff" position="2800,1000" size="100,100">The rain has begun to lighten by the time the priestess turns to you, tome in hand, to read you the traditional wedding vows. &quot;&lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;Sister&lt;&lt;else&gt;&gt;Brother&lt;&lt;/if&gt;&gt;, you are called on this day to vow your love and your loyalty until the end of your life. You are called to &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;follow and respect your husband&lt;&lt;else&gt;&gt;protect and cherish your wife&lt;&lt;/if&gt;&gt; until your final breath. You are called to become one in this life until your souls pass into the Winds and you again become One with all who have lived. Do you vow to answer this call, now and always?&quot;

&lt;&lt;if $nvbook==0&gt;&gt;&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[&quot;\&quot;This I do vow.\&quot;&quot;|4-8]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;&lt;else&gt;&gt;&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Nod solemnly.|4-8]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="184" name="4-8" tags="draft genderstuff" position="2800,1100" size="100,100">As you make your vow, the priestess turns to place her tome in your sister&#39;s hands before she rings the chimes once more. After Sabine takes the tome, she crosses from your side of the dais to the Elf&#39;s, trying–and mostly succeeding–at looking confident as she stands in their shadow. She reads out the counterpart to your own vows: &quot;&lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;Brother&lt;&lt;else&gt;&gt;Sister&lt;&lt;/if&gt;&gt;, you are called on this day to vow your love and your loyalty until the end of your life. You are called to &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;protect and cherish your wife &lt;&lt;else&gt;&gt;follow and respect your husband&quot; (Her contempt at this phrasing is evident in her voice) &quot;&lt;&lt;/if&gt;&gt;until your final breath. You are called to become one in this life until your souls pass into the Winds and you again become One with all who have lived. Do you vow to answer this call, now and always?&quot;

Several moments of tense silence follow before the Elf answers: &quot;This I do vow.&quot;

Their voice is sharp and clear, though its pitch does nothing to clarify their gender. There&#39;s a hint of grit to the sound that contrasts the refined elegance of their appearance, and you&#39;re unable to identify their accent as one you&#39;ve heard before.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|4-9]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="185" name="4-9" tags="draft" position="2800,1200" size="100,100">The priestess strikes the chimes again before taking her tome back and turning it to a page near the back and holding it out to you. You see a long list of names signed in pairs on the unlined pages. If you flipped back a few years, you would see your siblings&#39; names; further back, and you would see your parents&#39;. Sabine holds out a pen to the Elf who takes it and picks a spot at the bottom, close to where the pages meet, to sign their name: Hawk.&lt;&lt;if $three.letter&gt;&gt; That must truly be their name and not an alias, then.&lt;&lt;/if&gt;&gt; Without turning to look at you, they offer the pen to you. You take it and sign your legally recognized name beside theirs.

As soon as you finish, the priestess raises the book over her head and closes her eyes. &quot;Winds, we ask you to bless these vows.&quot; She holds the tome aloft, silent and motionless, waiting for even a breeze to blow through and ruffle the thin pages. In spite of the recent storm, the pages lie still for an unbearably long time—so long that the priestess&#39; arms begin to shake. Out of the corner of your eye, you see Hawk move slightly beside you, and a fierce wind suddenly blows through the pavillion, forcing the priestess to adjust her grip on the tome so it doesn&#39;t sail out of her hands. She then snaps it closed and shouts, &quot;You are now one. Rejoice!&quot;

&quot;Rejoice!&quot; the assembled guests echo.

Sabine approaches you with an open, velvet-lined wooden box that contains the matching silver and emerald ear cuffs that will mark you as wed. Hawk makes no move toward them.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Give Hawk theirs first.|4-9.1]]&lt;/li&gt;
&lt;li&gt;[[Wait for Hawk to give you yours first.|4-9.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="186" name="4-9.1" tags="draft majorVarSet" position="2725,1325" size="100,100">&lt;&lt;set $courage+=1&gt;&gt;You take Hawk&#39;s cuff and turn toward them, hoping they understand what they&#39;re supposed to do. After a moment, they sweep their long, raven hair away from their left ear and onto the opposite shoulder and&lt;&lt;if $height&lt;4&gt;&gt;, leaning down,&lt;&lt;/if&gt;&gt; turn their head to allow you to reach their pointed ear. You&#39;re surprised to see half a dozen earrings there, all of them featuring luminous jewels: four studs in a line along the edge of their ear, and two suspended on delicate chains and hung from the lobe and pointed tip. The only open space for the cuff is over another, unoccupied piercing. Perhaps they were more prepared for this event than expected.

You&#39;re painfully aware of their unnatural stillness as you &lt;&lt;if $touch&gt;&gt;carefully&lt;&lt;else&gt;&gt;reluctantly&lt;&lt;/if&gt;&gt; work the cuff into place. When you finish and pull your hands back, they suddenly turn toward you—far, &lt;i&gt;far&lt;/i&gt; too close. You can see each of their long, dark eyelashes as they finally blink for the first time before moving, just as abruptly, to take your cuff from the box. Just as you did, they wait for you to be ready.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Your head is shaved, so you simply turn your head.|4-9.1-2][$hairlength=-1]]&lt;/li&gt;
&lt;li&gt;[[Your hair is short, so you simply turn your head.|4-9.1-2][$hairlength=1]]&lt;/li&gt;
&lt;li&gt;[[You pull your shoulder-length hair aside.|4-9.1-2][$hairlength=2]]&lt;/li&gt;
&lt;li&gt;[[You pull your long hair over the opposite shoulder.|4-9.1-2][$hairlength=3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="187" name="4-9.2" tags="draft majorVarSet" position="2875,1325" size="100,100">&lt;&lt;set $courage-=1&gt;&gt;You wait, and soon enough, Hawk reaches out to take your cuff from the box and turns to you. They stare at you, waiting.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Your head is shaved, so you simply turn your head.|4-9.2-2][$hairlength=-1]]&lt;/li&gt;
&lt;li&gt;[[Your hair is short, so you simply turn your head.|4-9.2-2][$hairlength=1]]&lt;/li&gt;
&lt;li&gt;[[You pull your shoulder-length hair aside.|4-9.2-2][$hairlength=2]]&lt;/li&gt;
&lt;li&gt;[[You pull your long hair over the opposite shoulder.|4-9.2-2][$hairlength=3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="188" name="4-9.1-2" tags="draft" position="2725,1425" size="100,100">You&lt;&lt;if $hairlength&gt;1&gt;&gt; pull your hair &lt;&lt;if $hairlength==1&gt;&gt;aside&lt;&lt;else&gt;&gt;over your shoulder&lt;&lt;/if&gt;&gt; and&lt;&lt;/if&gt;&gt; turn your head&lt;&lt;if $height==5&gt;&gt;, leaning down&lt;&lt;/if&gt;&gt; to allow Hawk to place the cuff on your ear. Their skin doesn&#39;t even brush yours, and as soon as they&#39;re done, they take a step away from you, taking the scent of pine and herbs with them.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|4-10]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="189" name="4-10" tags="draft genderstuff endscene" position="2800,1550" size="100,100">&quot;You are now &lt;&lt;if $genderstuff&gt;&gt;husband and wife&lt;&lt;else&gt;&gt;married&lt;&lt;/if&gt;&gt;!&quot; the priestess declares, and the crowd applauds as they&#39;re supposed to. &quot;Brethren, let us go and be merry as one family.&quot; The words don&#39;t convey the same heartwarming sentiment with not a single guest from Hawk&#39;s side. &quot;The weather is clearing, so we will gather outside shortly.&quot;

As the guests rise and begin talking among themselves, the priestess speaks just loudly enough to be heard by you and Hawk. &quot;We have a sitting room where you will not be disturbed by any in attendance until the feast. Would you like to make use of it?&quot;

&quot;Yes,&quot; Hawk says before you can respond.

The priestess nods and leads you away from the pavillion and back to the arched pathways through which you entered. The waiting room was close to the pavillion itself, but the whole of the pavillion complex is vast and labyrinthine. Though you have many relatives who likely used the very same sitting room, the winding paths the priestess takes you through instill confidence that no one will disturb you: they&#39;d never be able to find it again. You pass a dozen little courtyards—each adorned with different flowers, trees, fountains, and sculpture—until your perception shifts to understanding the courtyards as the true essential component of the complex. The enclosed rooms are only a coincidental, structural feature.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|5-0]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="190" name="4-9.2-2" tags="draft" position="2875,1425" size="100,100">You&lt;&lt;if $hairlength&gt;1&gt;&gt; pull your hair &lt;&lt;if $hairlength==1&gt;&gt;aside&lt;&lt;else&gt;&gt;over your shoulder&lt;&lt;/if&gt;&gt; and&lt;&lt;/if&gt;&gt; turn your head&lt;&lt;if $height==5&gt;&gt;, leaning down&lt;&lt;/if&gt;&gt; to allow Hawk to place the cuff on your ear. Their skin doesn&#39;t even brush yours as they slip it into position.

Once they&#39;re finished, you take Hawk&#39;s cuff and turn toward them. After a moment, they sweep their long, raven hair away from their left ear and onto the opposite shoulder and&lt;&lt;if $height&lt;4&gt;&gt;, leaning down,&lt;&lt;/if&gt;&gt; turn their head to allow you to reach their pointed ear. You&#39;re surprised to see half a dozen earrings there, all of them featuring luminous jewels: four studs in a line along the edge of their ear, and two suspended on delicate chains and hung from the lobe and pointed tip. The only open space for the cuff is over another, unoccupied piercing. Perhaps they were more prepared for this event than expected.

You&#39;re painfully aware of their unnatural stillness as you &lt;&lt;if $touch&gt;&gt;carefully&lt;&lt;else&gt;&gt;reluctantly&lt;&lt;/if&gt;&gt; work the cuff into place. When you finish and pull your hands back, they suddenly turn toward you—far, &lt;i&gt;far&lt;/i&gt; too close. You can see each of their long, dark eyelashes as they finally blink for the first time. They take a step away from you, taking the scent of pine and herbs with them.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|4-10]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="191" name="5-0" tags="draft startscene autosave" position="3800,100" size="100,100">&lt;&lt;set $cursc=5&gt;&gt;&lt;&lt;set $prehawkcon=clone($confidence)&gt;&gt;&lt;&lt;notify&gt;&gt;Autosave complete!&lt;&lt;/notify&gt;&gt;The room she finally stops at is positioned between one courtyard featuring an ornamental tree whose large leaves bounce with each raindrop and one centered on a sculpture of a winged stag whose antlers twist and spiral—a depiction of the West Wind. Inside the sitting room are two loveseats and a low table set with a pitcher of water and two goblets. Unlike the glass-paned windows elsewhere, the windows of this room are open to the courtyards on either side, and though there are lamps inside, the sky is light enough that you won&#39;t need them.

&quot;I will knock when it is time for the feast. If you are finished sooner, I will be nearby—you need only call for me.&quot; The priestess gives you a significant look. Though she&#39;s maintained a calm air despite the Elf&#39;s presence, she knows what they are—if you, specifically, are finished sooner, she will hear.

When she leaves and closes the door behind her, Hawk&#39;s presence expands to fill the space. The room should be a comfortable size, but it feels too small for an Elf—you&#39;re only making it worse. Hawk surveys the furniture but makes no move to sit. Instead, they stand, gaze fixed on the water pitcher, and unleash a torrent of words.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|5-1]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="192" name="5-1" tags="draft genderstuff todo" position="3800,200" size="100,100">&quot;You mortals are prone to talking around things, so I will be direct: Yes, this was my choice. No, it was not my idea. No, we will not be &#39;consummating&#39; this marriage, now or at any future time. &lt;&lt;if $ax.they==&quot;she&quot;&amp;&amp;$ha.they==&quot;he&quot;&gt;&gt;Yes, I am your &#39;husband,&#39; b&lt;&lt;elseif $ax.they==&quot;he&quot;&amp;&amp;$ha.they==&quot;she&quot;&gt;&gt;Yes, I am your &#39;wife,&#39; b&lt;&lt;else&gt;&gt;No, I am not your &#39;&lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;husband&lt;&lt;else&gt;&gt;wife&lt;&lt;/if&gt;&gt;,&#39; but I will allow your guests to address me as such for the sake of convenience. We do not have the same conception of gender as you do, so I will make a complex idea simple: I am a $ha.person.&lt;&lt;if $ha.person==&quot;person&quot;&gt;&gt; I do not need to be a man or a woman.&lt;&lt;/if&gt;&gt; After we leave this place, you will address me as such, and if you speak of me with another, you will refer to me as &quot;$ha.them.&quot; B&lt;&lt;/if&gt;&gt;ut when it comes to the idea of marriage, we do not have such a thing. Yes, I understand you may have expectations of exclusivity with a $ha.spouse, and no, I will not violate them while you live. If you wish to take other partners, that is none of my concern.&quot;

After their rapid flurry of information is complete, they turn to look at you. &quot;And now, I must dare to ask if you have any further questions or if we can be done with this.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I do have questions.\&quot;&quot;|5-1.1]]&lt;/li&gt;
&lt;li&gt;[[Take a seat and fill a goblet. &quot;Want any?&quot;|5-1.2]]&lt;/li&gt;
&lt;li&gt;[[Get angry. &quot;You&#39;re not the only one with things to say.&quot;|5-1.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;No questions.\&quot;&quot;|5-1.4]]&lt;/li&gt;
&lt;li&gt;[[Remain silent.|5-1.5]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="193" name="5-1.1" tags="draft" position="3550,325" size="100,100">&lt;&lt;set $curiosity+=1&gt;&gt;&quot;I do have questions.&quot;

&lt;&lt;if $nvbook&gt;0&gt;&gt;Hawk doesn&#39;t lean closer to read what you&#39;ve written like most people--most &lt;i&gt;humans&lt;/i&gt;--do. Rather, $ha.they seem&lt;&lt;hs&gt;&gt; able to read it from clear across the room. In response, Hawk simply&lt;&lt;else&gt;&gt;Hawk&lt;&lt;/if&gt;&gt; nods&lt;&lt;if $five.acount==0&gt;&gt; and takes a seat, crossing one leg over the other and lounging back against the cushions&lt;&lt;/if&gt;&gt;. &quot;Then ask.&quot;

&lt;&lt;include [[5-1q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="194" name="5-1.2" tags="draft" position="3675,325" size="100,100">&lt;&lt;set $confidence+=1&gt;&gt;&lt;&lt;set $courage+=1&gt;&gt;&lt;&lt;set $ha.res+=1&gt;&gt;You take a seat and fill a goblet before &lt;&lt;if $nvbook&gt;0&gt;&gt;writing&lt;&lt;else&gt;&gt;asking $ha.them&lt;&lt;/if&gt;&gt;, &quot;Want any?&quot;

&lt;&lt;if $nvbook&gt;0&gt;&gt;Hawk doesn&#39;t lean closer to read what you&#39;ve written like most people--most &lt;i&gt;humans&lt;/i&gt;--do. Rather, $ha.they seem&lt;&lt;hs&gt;&gt; able to read it from clear across the room. In response to your question and apparent calm, y&lt;&lt;else&gt;&gt;Y&lt;&lt;/if&gt;&gt;ou&#39;re rewarded with the first glimpse of recognizable emotion you&#39;ve seen from $ha.them: bafflement. &quot;No.&quot;

You shrug. &quot;Suit yourself.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I do have questions.\&quot;&quot;|5-1.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I have some things of my own to say.\&quot;&quot;|5-1.2-2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;No questions.\&quot;&quot;|5-1.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="195" name="5-1.3" tags="draft" position="3800,325" size="100,100">&lt;&lt;set $ha.res+=1&gt;&gt;The arrogance of $ha.their tirade leaves you fuming. &quot;You&#39;re not the only one with things to say.&quot; &lt;&lt;if $nvbook&gt;0&gt;&gt;Hawk doesn&#39;t lean closer to read what you&#39;ve written like most people--most &lt;i&gt;humans&lt;/i&gt;--do. Rather, $ha.they seem&lt;&lt;hs&gt;&gt; able to read it from clear across the room. Once you finish scratching your irritation onto the page, y&lt;&lt;else&gt;&gt;Y&lt;&lt;/if&gt;&gt;ou take a seat and fold your arms as you look up at $ha.them.

If your intent was to visibly rile $ha.them, it doesn&#39;t seem to have worked. &quot;Very well. Go on.&quot; $ha.They sit&lt;&lt;hs&gt;&gt; down on the other loveseat, crossing one leg over the other and lounging back against the cushions. You feel $ha.their attention settle on you.

&lt;&lt;include [[5-1a]]&gt;&gt;</tw-passagedata><tw-passagedata pid="196" name="5-1.4" tags="draft" position="3925,325" size="100,100">&lt;&lt;set $curiosity-=2&gt;&gt;&quot;No questions.&quot;

&lt;&lt;if $nvbook&gt;0&gt;&gt;Hawk doesn&#39;t lean closer to read what you&#39;ve written like most people--most &lt;i&gt;humans&lt;/i&gt;--do. Rather, $ha.they seem&lt;&lt;hs&gt;&gt; able to read it from clear across the room. In response to your statement, $ha.they briefly scrutinize&lt;&lt;hs&gt;&gt; you.&lt;&lt;else&gt;&gt;Hawk scrutinizes you.&lt;&lt;/if&gt;&gt; &lt;&lt;include [[5-1noq]]&gt;&gt;</tw-passagedata><tw-passagedata pid="197" name="5-1.5" tags="draft" position="4050,325" size="100,100">&lt;&lt;set $ha.silent+=1&gt;&gt;You remain silent, but unlike your mother, $ha.they do&lt;&lt;hes&gt;&gt;n&#39;t seem to take that as agreement with $ha.their preference.

&quot;Well?&quot; When $ha.their sharp question doesn&#39;t immediately prompt a response, $ha.they let&lt;&lt;hs&gt;&gt; out a breath, too long and slow to be a sigh. The barbed edges of $ha.their presence don&#39;t soften, but they do withdraw to a less threatening distance. &quot;You must be curious. Ask, if you wish.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I do have questions.\&quot;&quot;|5-1.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I have some things of my own to say.\&quot;&quot;|5-1.2-2]]&lt;/li&gt;
&lt;li&gt;[[Shake your head.|5-1.5.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="198" name="5-1q" tags="draft genderstuff" position="3350,550" size="100,100">&lt;ul class=&quot;choice&quot;&gt;&lt;&lt;if not hasVisited(&quot;5-1q.name&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;Do you have a title? What should I call you?\&quot;&quot;|5-1q.name]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;5-1q.imm&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;Are you really immortal?\&quot;&quot;|5-1q.imm]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;5-1q.idea&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;What do you mean this wasn&#39;t your idea?\&quot;&quot;|5-1q.idea]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;5-1q.agree&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;Why did you agree to this?\&quot;&quot;|5-1q.agree]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;5-1q.stor&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;Was the storm your doing?\&quot;&quot;|5-1q.stor]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;5-1q.gen&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;What do you mean about having a different conception of gender?\&quot;&quot;|5-1q.gen]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $three.robe&gt;&gt;&lt;&lt;if not hasVisited(&quot;5-1q.robe&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;What is the significance of the robe?\&quot;&quot;|5-1q.robe]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not $three.letter&gt;&gt;&lt;&lt;if not hasVisited(&quot;5-1q.box&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;What is the significance of the box?\&quot;&quot;|5-1q.box]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $five.qcount&gt;0&gt;&gt;&lt;li&gt;[[&quot;\&quot;No more questions.\&quot;&quot;|5-1q.done]]&lt;/li&gt;&lt;&lt;/if&gt;&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="199" name="5-1.2-2" tags="draft" position="3725,450" size="100,100">&quot;I have some things of my own to say first.&quot;

&quot;Very well.&quot; $ha.They sit&lt;&lt;hs&gt;&gt; down, crossing one leg over the other and lounging back against the cushions. You feel $ha.their attention settle on you.

&lt;&lt;include [[5-1a]]&gt;&gt;</tw-passagedata><tw-passagedata pid="200" name="5-1a" tags="draft genderstuff" position="4325,525" size="100,100">&lt;&lt;if $five.acount&gt;0&gt;&gt;&quot;Anything else?&quot; they ask.

&lt;&lt;/if&gt;&gt;&lt;ul class=&quot;choice&quot;&gt;&lt;&lt;if not hasVisited(&quot;5-1a.talk&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;I won&#39;t be talked down to.\&quot;&quot;|5-1a.talk]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $gendervibes==&quot;trans&quot;&gt;&gt;&lt;&lt;if not hasVisited(&quot;5-1a.gent&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;I&#39;m not a &quot;+$ax.person+&quot;.\&quot;&quot;|5-1a.gent]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $gendervibes==&quot;maybe&quot;&gt;&gt;&lt;&lt;if not hasVisited(&quot;5-1a.genm&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;I&#39;m not sure if I&#39;m a &quot;+$ax.person+&quot;.\&quot;&quot;|5-1a.genm]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;5-1a.marr&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;This marriage wasn&#39;t my choice.\&quot;&quot;|5-1a.marr]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $three.letter&gt;&gt;&lt;&lt;if not hasVisited(&quot;5-1a.lett&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;Your letter didn&#39;t make a good first impression.\&quot;&quot;|5-1a.lett]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $three.robe&gt;&gt;&lt;&lt;if not hasVisited(&quot;5-1a.robe&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;I&#39;m sorry I didn&#39;t wear the robe.\&quot;&quot;|5-1a.robe]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not $three.letter&gt;&gt;&lt;&lt;if not hasVisited(&quot;5-1a.gift&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;I&#39;m sorry I didn&#39;t open your gift.\&quot;&quot;|5-1a.gift]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $five.acount&gt;0&gt;&gt;&lt;li&gt;[[&quot;\&quot;That&#39;s all.\&quot;&quot;|5-1a.done]]&lt;/li&gt;&lt;&lt;/if&gt;&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="201" name="5-1noq" tags="draft" position="3500,1075" size="100,100">&quot;Very well.&lt;&lt;if $five.qcount==0&amp;&amp;$five.acount==0&gt;&gt;&quot; $ha.They sit&lt;&lt;hs&gt;&gt; down on a loveseat, crossing one leg over the other and lounging back against the cushions. You feel $ha.their attention settle intently on you.&lt;&lt;/if&gt;&gt; &lt;&lt;include [[5-1haq]]&gt;&gt;</tw-passagedata><tw-passagedata pid="202" name="5-1.5.2" tags="draft" position="4075,425" size="100,100">&lt;&lt;set $curiosity-=2&gt;&gt;&lt;&lt;set $ha.soft+=1&gt;&gt;You shake your head.

&lt;&lt;include [[5-1noq]]&gt;&gt;</tw-passagedata><tw-passagedata pid="203" name="5-1q.name" tags="draft" position="3150,700" size="100,100">&lt;&lt;set $five.qcount+=1&gt;&gt;&quot;Do you have a title? What should I call you?&quot;

&quot;Hawk.&quot;

&quot;That&#39;s all?&quot;

&quot;Yes.&quot;

&lt;&lt;include [[5-1q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="204" name="5-1q.imm" tags="draft" position="3250,700" size="100,100">&lt;&lt;set $five.qcount+=1&gt;&gt;&quot;Are you really immortal?&quot;

&quot;More or less.&quot;

&quot;What does that mean?&quot;

&quot;If I do die, it won&#39;t be soon.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Do you really not need food or drink to survive?\&quot;&quot;|5-1q.imm-food]]&lt;/li&gt;
&lt;li&gt;[[Ask another question.|5-1q]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="205" name="5-1q.idea" tags="draft" position="3350,700" size="100,100">&lt;&lt;set $five.qcount+=1&gt;&gt;&quot;What do you mean this wasn&#39;t your idea?&quot;

&quot;That it wasn&#39;t my idea.&quot;

&lt;&lt;if $ha.ban&gt;0&gt;&gt;You barely resist rolling your eyes. &lt;&lt;/if&gt;&gt;&quot;Whose idea was it?&quot;

&quot;The leader of my Enclave. They proposed it several centuries ago. Acting on it now is a normal timeline for us, but for mortals, it&#39;s an &lt;i&gt;interesting&lt;/i&gt; choice.&quot; The force in $ha.their words chills you. $ha.They do&lt;&lt;hes&gt;&gt;n&#39;t dwell on it, but $ha.they know&lt;&lt;hs&gt;&gt; as well as you that there&#39;s another motive at work here.

&lt;&lt;include [[5-1q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="206" name="5-1q.agree" tags="draft" position="3450,700" size="100,100">&lt;&lt;set $five.qcount+=1&gt;&gt;&quot;Why did you agree to this?&quot;

&quot;I owe the leader of my Enclave a favor, and this is a brief enough commitment.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I&#39;m just a &#39;brief commitment&#39; for you?\&quot;&quot;|5-1q.agree-comm]]&lt;/li&gt;
&lt;li&gt;[[Ask another question.|5-1q]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="207" name="5-1q.stor" tags="draft" position="3625,875" size="100,100">&lt;&lt;set $five.qcount+=1&gt;&gt;&lt;&lt;set $knowhastorm&gt;&gt;&quot;Was the storm your doing?&quot;

&quot;Yes. A side effect of my magic.&quot;

&quot;What kind of magic?&quot;

&quot;Teleportation. I didn&#39;t walk here.&quot; That might be an attempt at humor, but $ha.their expression doesn&#39;t shift. It wouldn&#39;t have landed anyway—the concept of instantly covering the distance of a full day&#39;s carriage ride is too alarming to permit much amusement in its presence. That the once-in-a-season torrential thunderstorm was only incidental is just too much to digest at present.

&lt;&lt;include [[5-1q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="208" name="5-1q.gen" tags="draft genderstuff" position="3550,700" size="100,100">&lt;&lt;set $five.qcount+=1&gt;&gt;&quot;What do you mean about having a different conception of gender?&quot;

&quot;Just that: &#39;Man&#39; and &#39;woman&#39; are unnecessary categories for us, and limiting relationships based on such a thing is ridiculous.&quot;&lt;&lt;if $ha.person!=&quot;person&quot;&gt;&gt;

&quot;Does that mean you aren&#39;t really a $ha.person?&quot;

&quot;I am a $ha.person, but I could live just as easily without giving a name to it.&quot;&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[5-1q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="209" name="5-1q.robe" tags="draft" position="3650,700" size="100,100">&lt;&lt;set $five.qcount+=1&gt;&gt;&quot;What is the significance of the robe you sent?&quot;

&quot;&lt;&lt;if hasVisited(&quot;5-1a.robe&quot;)&gt;&gt;I told you. &lt;&lt;/if&gt;&gt;It was for you to wear if you didn&#39;t have anything appropriate.&quot;

&quot;It looks incredibly valuable, and it seems to match yours.&quot;

&quot;Yes.&quot; $ha.Their cool expression indicates you&#39;re not going to get any more information.

&lt;&lt;include [[5-1q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="210" name="5-1q.box" tags="draft" position="3750,700" size="100,100">&lt;&lt;set $five.qcount+=1&gt;&gt;&quot;What is the significance of the box you sent?&quot;

&quot;You didn&#39;t open it?&quot;

&quot;No, I didn&#39;t.&quot;

&quot;It was something for you to wear if you didn&#39;t have anything appropriate.&quot; You wait for $ha.them to elaborate, but $ha.they do&lt;&lt;hes&gt;&gt;n&#39;t.

&quot;And what was the meaning of the box itself? The carving?&quot;

Hawk waves $ha.their hand dismissively. &quot;It was just a useful size.&quot;

&lt;&lt;include [[5-1q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="211" name="5-1q.done" tags="draft" position="3350,1075" size="100,100">&lt;&lt;if $ach.on&gt;&gt;&lt;&lt;if $five.qcount&gt;=9&gt;&gt;&lt;&lt;set $ach.any=true&gt;&gt;&lt;&lt;set $ach.manyq5=true&gt;&gt;&lt;&lt;notify&gt;&gt;Achievement unlocked: Post-Nuptial Interrogation&lt;&lt;/notify&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;&quot;No more questions.&quot;

Hawk nods, and $ha.their tightly wound demeanor seems to loosen slightly&lt;&lt;if $five.acount==0&gt;&gt; as $ha.they cross&lt;&lt;hs&gt;&gt; one leg over the other and lounge&lt;&lt;hs&gt;&gt; back against the cushions. You feel $ha.their attention settle intently on you.&lt;&lt;else&gt;&gt;.&lt;&lt;/if&gt;&gt; &lt;&lt;include [[5-1haq]]&gt;&gt;</tw-passagedata><tw-passagedata pid="212" name="5-1q.imm-food" tags="draft" position="3250,825" size="100,100">&lt;&lt;set $five.qcount+=1&gt;&gt;&lt;&lt;set $knowhafood=true&gt;&gt;&quot;Do you really not need food or drink to survive?&quot;

&quot;I don&#39;t. Nor do I need sleep or shelter. If my Purpose exists, I exist.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;What is your &#39;Purpose&#39;?\&quot;&quot;|5-1q.imm-pur]]&lt;/li&gt;
&lt;li&gt;[[Ask another question.|5-1q]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="213" name="5-1q.imm-pur" tags="draft" position="3250,950" size="100,100">&lt;&lt;set $five.qcount+=1&gt;&gt;&lt;&lt;set $curiosity+=1&gt;&gt;&quot;What is your &#39;Purpose&#39;?&quot;

&quot;That&#39;s my own business. But if you&#39;re asking generally, it&#39;s our reason to exist and the only thing that sustains us—a goal that exists above all others. I expect it&#39;s similar to the human drive of hunger. If we do not pursue it actively, we will not die, but we will suffer deeply.&quot;

&quot;Did you choose it?&quot;

&quot;No. A Purpose cannot be chosen.&quot;

&quot;Can you choose not to fulfill it?&quot;

&quot;Yes, at great cost.&quot;

&quot;What kind of cost?&quot;

&quot;That isn&#39;t your concern.&quot; You can feel the sharpness of $ha.their presence rise like the spines of a porcupine. If this weapon is related to $ha.their Purpose, this will only get more dangerous as you proceed.

&lt;&lt;include [[5-1q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="214" name="5-1q.agree-comm" tags="draft" position="3450,825" size="100,100">&lt;&lt;set $five.qcount+=1&gt;&gt;&quot;I&#39;m just a &#39;brief commitment&#39; for you?&quot;

&quot;Yes. This is an obligation for both of us. I won&#39;t interfere in your life, and I expect you not to interfere in mine.&quot;

&lt;&lt;include [[5-1q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="215" name="5-1haq" tags="draft" position="3425,1200" size="100,100">&lt;&lt;if $five.acount&lt;1&gt;&gt;&quot;Then I have questions for you&lt;&lt;if $five.qcount&gt;0&gt;&gt;, too&lt;&lt;/if&gt;&gt;.&lt;&lt;else&gt;&gt;&quot;Then I have just &lt;&lt;if hasVisited(&quot;5-1a.genm&quot;)||hasVisited(&quot;5-1a.gent&quot;)&gt;&gt;one question&lt;&lt;else&gt;&gt;two questions&lt;&lt;/if&gt;&gt; for you&lt;&lt;/if&gt;&gt; &lt;&lt;if hasVisited(&quot;5-1a.genm&quot;)||hasVisited(&quot;5-1a.gent&quot;)&gt;&gt;&lt;&lt;include [[5-1haq.name]]&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;include [[5-1haq.gen]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="216" name="5-1a.talk" tags="draft" position="4175,700" size="100,100">&lt;&lt;set $ha.res+=1&gt;&gt;&lt;&lt;set $five.acount+=1&gt;&gt;&quot;I won&#39;t be talked down to.&quot;

&quot;Talked down to? What do you mean by that?&quot; $ha.they give&lt;&lt;hs&gt;&gt; very few hints about $ha.their state of mind, but from the way $ha.they tilt&lt;&lt;hs&gt;&gt; $ha.their head back just slightly, $ha.they not only know&lt;&lt;hs&gt;&gt; exactly what you&#39;re talking about--$ha.they&#39;&lt;&lt;hre&gt;&gt; goading you.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Never mind.\&quot;&quot;|5-1a.talk.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Like I&#39;m beneath you.\&quot;&quot;|5-1a.talk.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Like you&#39;re an arrogant bastard.\&quot;&quot;|5-1a.talk.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="217" name="5-1a.gent" tags="draft genderstuff" position="3875,700" size="100,100">&lt;&lt;set $five.acount+=1&gt;&gt;&lt;&lt;set $ha.knowtrans=true&gt;&gt;&quot;I&#39;m not a $ax.person.&quot;

&quot;I see. What should I call you?&quot; $ha.they ask, as if this were a perfectly normal thing to inquire about.

&quot;I&#39;m a $mc.person. I&#39;d like to be referred to as &#39;$mc.them.&#39;&quot;

$ha.They nod&lt;&lt;hs&gt;&gt;. It&#39;s a strange but welcome experience not needing to explain yourself further. &quot;I imagine I should still use $ax.them at the feast if forced to speak with anyone.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Yes, please.\&quot;&quot;|5-1genJOIN][$feastprn=-2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Yes, unless it&#39;s my sister and her husband or my wife&#39;s brother.\&quot;&quot;|5-1genJOIN][$feastprn=-1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Avoid gendered words if you can.\&quot;&quot;|5-1genJOIN][$feastprn=1]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="218" name="5-1a.genm" tags="draft genderstuff majorVarSet" position="3975,700" size="100,100">&lt;&lt;set $five.acount+=1&gt;&gt;&lt;&lt;set $ha.knowmaybe=true&gt;&gt;&lt;&lt;set $mc.gender=&quot;maybe&quot;&gt;&gt;&lt;&lt;set $mc.person=&quot;person&quot;&gt;&gt;&quot;I&#39;m not sure if I&#39;m a $ax.person.&quot;

&quot;I see. What should I call you, then: wife, husband, or spouse?&quot; $ha.they ask, as if this were a perfectly normal thing to inquire about. &quot;If you change your mind later, just tell me.&quot;

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[&quot;\&quot;Wife.\&quot;&quot;|5-1a.genm-2][$mc.sibling=&quot;sister&quot;]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Husband.\&quot;&quot;|5-1a.genm-2][$mc.sibling=&quot;brother&quot;]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Spouse.\&quot;&quot;|5-1a.genm-2][$mc.sibling=&quot;sibling&quot;]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="219" name="5-1a.marr" tags="draft majorVarSet" position="4500,700" size="100,100">&lt;&lt;set $ha.soft+=1&gt;&gt;&lt;&lt;set $five.acount+=1&gt;&gt;&quot;This marriage wasn&#39;t my choice.&quot;

The temperature of the room drops. &quot;Who forced you into this?&quot; $ha.They stare&lt;&lt;hs&gt;&gt; at you intently, but $ha.their frigid anger isn&#39;t meant for you. When you don&#39;t immediately reply, $ha.they rise&lt;&lt;hs&gt;&gt; from $ha.their seat and turn&lt;&lt;hs&gt;&gt; toward the door. &quot;I will see that this is reversed.&quot;

That&#39;s not going to do you any good.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;No, it&#39;s not like that.\&quot;&quot;|5-1a.marr.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Don&#39;t!\&quot;&quot;|5-1a.marr.2]]&lt;/li&gt;
&lt;span class=&quot;split&quot;&gt;&lt;li&gt;[[Freeze up. You don&#39;t handle others&#39; anger well.|5-1a.marr.3]]&lt;/li&gt;&lt;/span&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="220" name="5-1a.lett" tags="draft" position="4650,700" size="100,100">&lt;&lt;set $five.acount+=1&gt;&gt;&quot;Your letter didn&#39;t make a good first impression.&quot;

&quot;I see.&quot; &lt;&lt;if hasVisited(&quot;5-1a.talk&quot;)&gt;&gt;Unlike your previous attempt to call $ha.them out, $ha.they&lt;&lt;else&gt;&gt;$ha.They&lt;&lt;/if&gt;&gt; look&lt;&lt;hs&gt;&gt; quite indifferent to your statement. &quot;I was told your family was in some degree of poverty. That seems false.&quot; It&#39;s difficult to say if $ha.their misunderstanding actually makes the letter less insulting. &lt;&lt;include [[5-1a]]&gt;&gt;</tw-passagedata><tw-passagedata pid="221" name="5-1a.robe" tags="draft" position="4750,700" size="100,100">&lt;&lt;set $five.acount+=1&gt;&gt;&lt;&lt;set $kind+=1&gt;&gt;&quot;I&#39;m sorry I didn&#39;t wear the robe you sent.&quot;

Hawk waves $ha.their hand dismissively. &quot;Your family isn&#39;t as destitute as I was led to believe. You didn&#39;t need it.&quot; If your family isn&#39;t wealthy enough to risk wearing such a garment, you can&#39;t imagine how someone truly destitute might feel being presented with something so extravagant.

&quot;Even so, thank you.&quot;

Hawk shrugs minutely. &lt;&lt;include [[5-1a]]&gt;&gt;</tw-passagedata><tw-passagedata pid="222" name="5-1a.gift" tags="draft" position="4725,875" size="100,100">&quot;I&#39;m sorry I didn&#39;t open the gift you sent.&quot;

Hawk waves $ha.their hand dismissively. &quot;Your family isn&#39;t as destitute as I was led to believe. You didn&#39;t need it.&quot;

&quot;What was it?&quot;

&quot;Something for you to wear if you didn&#39;t have anything appropriate.&quot; You wait for $ha.them to elaborate, but $ha.they do&lt;&lt;hes&gt;&gt;n&#39;t. &lt;&lt;include [[5-1a]]&gt;&gt;</tw-passagedata><tw-passagedata pid="223" name="5-1a.done" tags="draft" position="3875,1150" size="100,100">&quot;That&#39;s all.&quot;

Hawk leans forward. &quot;Do you wish to ask me anything, then?&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I do have questions.\&quot;&quot;|5-1.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;No questions.\&quot;&quot;|5-1.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="224" name="5-1genJOIN" tags="draft genderstuff" position="3850,850" size="100,100">&lt;&lt;if $feastprn==-2&gt;&gt;&quot;Yes, please.&quot;&lt;&lt;elseif $feastprn==-1&gt;&gt;&quot;Yes, unless it&#39;s my sister and her husband or my wife&#39;s brother.&quot;&lt;&lt;else&gt;&gt;&quot;Avoid gendered words if you can.&quot;&lt;&lt;/if&gt;&gt;

&quot;Understood.&lt;&lt;if $feastprn==-1&gt;&gt; Though I don&#39;t know who those people are anyhow.&quot;

&quot;You met my sister already—she read your vows.&quot;

&quot;Ah.&quot; The lack of interest in $ha.their tone makes you wonder if $ha.they&#39;&lt;&lt;hve&gt;&gt; already forgotten Sabine entirely.&lt;&lt;else&gt;&gt;&quot;&lt;&lt;/if&gt;&gt;

There&#39;s both relief and dissonance in $ha.their blasé acceptance. Realistically, you&#39;re probably just beneath $ha.their interest, but this is probably a better reception than you could have anticipated with another human, at least.

&lt;&lt;include [[5-1a]]&gt;&gt;</tw-passagedata><tw-passagedata pid="225" name="5-1a.genm-2" tags="draft genderstuff majorVarSet" position="3975,800" size="100,100">&lt;&lt;if $mc.sibling==&quot;daughter&quot;&gt;&gt;&quot;Wife.&quot;&lt;&lt;elseif $mc.sibling==&quot;brother&quot;&gt;&gt;&quot;Husband.&quot;&lt;&lt;else&gt;&gt;&quot;Spouse.&quot;&lt;&lt;/if&gt;&gt;

$ha.They nod&lt;&lt;hs&gt;&gt;. &quot;And should I call you her, him, or them?&quot;

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[&quot;\&quot;Her.\&quot;&quot;|5-1a.genm-3][$mc.they=&quot;she&quot;]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Him.\&quot;&quot;|5-1a.genm-3][$mc.they=&quot;he&quot;]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Them.\&quot;&quot;|5-1a.genm-3][$mc.they=&quot;they&quot;]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="226" name="5-1a.genm-3" tags="draft genderstuff" position="3975,900" size="100,100">&lt;&lt;include [[1-10x.2-TSET]]&gt;&gt;&quot;$mc.Them.&quot;

&quot;Very well.&quot;

&lt;&lt;if $ax.they==$mc.they&amp;&amp;$ax.spouse==$mc.spouse&gt;&gt;Even if this doesn&#39;t change how $ha.they&#39;ll address you, i&lt;&lt;else&gt;&gt;I&lt;&lt;/if&gt;&gt;t feels good for someone to finally know that you&#39;ve had these thoughts—though it does feel a little strange to have the boulder you&#39;ve been carrying land with all the force of a pebble in the ocean.

&lt;&lt;if $ax.they==$mc.they&amp;&amp;$ax.spouse==$mc.spouse&gt;&gt;&lt;&lt;include [[5-1a]]&gt;&gt;&lt;&lt;else&gt;&gt;&quot;I imagine I should still use the words your family expects at the feast if forced to speak with anyone.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Yes, please.\&quot;&quot;|5-1genJOIN][$feastprn=-2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Avoid gendered words if you can.\&quot;&quot;|5-1genJOIN][$feastprn=1]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="227" name="5-1a.talk.1" tags="draft" position="4075,825" size="100,100">&lt;&lt;set $ha.soft+=1&gt;&gt;&quot;Never mind,&quot; you &lt;&lt;if $nvbook&gt;0&gt;&gt;write&lt;&lt;else&gt;&gt;say&lt;&lt;/if&gt;&gt;, not wanting to immediately begin verbally sparring with your new $ha.spouse.

&quot;I will keep your request in mind,&quot; $ha.they say&lt;&lt;hs&gt;&gt;, letting the air of antagonism dissipate. &lt;&lt;include [[5-1a]]&gt;&gt;</tw-passagedata><tw-passagedata pid="228" name="5-1a.talk.2" tags="draft" position="4175,825" size="100,100">&lt;&lt;set $ha.res+=1&gt;&gt;&quot;Like I&#39;m beneath you.&quot;

$ha.They tilt&lt;&lt;hs&gt;&gt; their head to the side, sizing you up before replying: &quot;Your complaint is noted.&quot;

&lt;&lt;include [[5-1a]]&gt;&gt;</tw-passagedata><tw-passagedata pid="229" name="5-1a.talk.3" tags="draft" position="4275,825" size="100,100">&lt;&lt;if $ach.on&gt;&gt;&lt;&lt;set $ach.any=true&gt;&gt;&lt;&lt;set $ach.qasnark=true&gt;&gt;&lt;&lt;notify&gt;&gt;Achievement unlocked: Spicy Start&lt;&lt;/notify&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;set $ha.ban+=1&gt;&gt;&quot;Like you&#39;re an arrogant bastard.&quot;

$ha.They raise&lt;&lt;hs&gt;&gt; a loosely curled fist up to block $ha.their lips, but you can see the hint of a crooked smile from behind it. $ha.Their eyes fix on you with the intensity of a bird of prey sizing up a catch.

This is a dangerous path to walk, alone in the room with an Elven sorcerer whose secrets are both valuable and deadly.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Look away.|5-1a.talk.3.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;Hold &quot;+$ha.their+&quot; gaze.&quot;|5-1a.talk.3.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="230" name="5-1a.talk.3.1" tags="draft" position="4175,950" size="100,100">&lt;&lt;if $confidence&gt;2&gt;&gt;Though it isn&#39;t your usual tact, y&lt;&lt;else&gt;&gt;Y&lt;&lt;/if&gt;&gt;ou look away, hoping building pressure in the room will release if you break eye contact.

Eventually, it does, and $ha.they repl&lt;&lt;if $ha.plural&gt;&gt;y&lt;&lt;else&gt;&gt;ies&lt;&lt;/if&gt;&gt; lightly: &quot;Your complaint is noted.&quot; $ha.They lean&lt;&lt;hs&gt;&gt; back again. &lt;&lt;include [[5-1a]]&gt;&gt;</tw-passagedata><tw-passagedata pid="231" name="5-1a.talk.3.2" tags="draft" position="4275,950" size="100,100">&lt;&lt;set $ha.fond+=1&gt;&gt;&lt;&lt;set $courage+=2&gt;&gt;You hold $ha.their gaze, unwilling to let yourself be intimidated.&lt;&lt;if $confidence&lt;2&gt;&gt; This isn&#39;t how you normally handle social situations, but it seems important to appear unflinching.&lt;&lt;elseif $confidence&gt;2&gt;&gt; This isn&#39;t so unusual from how you normally handle people trying to intimidate you, but the stakes this time feel higher.&lt;&lt;/if&gt;&gt; $ha.They seem&lt;&lt;hs&gt;&gt; unbothered by the extended eye contact, letting it stretch silently for much too long.

Then, at last, $ha.they tilt&lt;&lt;hs&gt;&gt; $ha.their head slightly, loosening the taut thread between you. &quot;Your complaint is noted.&quot; $ha.They lean&lt;&lt;hs&gt;&gt; back again. &lt;&lt;include [[5-1a]]&gt;&gt;</tw-passagedata><tw-passagedata pid="232" name="5-1a.marr.1" tags="draft" position="4400,825" size="100,100">&lt;&lt;set $nangav+=1&gt;&gt;&quot;No, it&#39;s not like that.&quot; You stop $ha.them quickly, before $ha.they can make it out the door.

$ha.They turn&lt;&lt;hs&gt;&gt; back around toward you. &quot;Explain.&quot;

&quot;It&#39;s a common arrangement here. &lt;&lt;include [[5-1a.marr.1-2JOIN]]&gt;&gt;</tw-passagedata><tw-passagedata pid="233" name="5-1a.marr.2" tags="draft" position="4500,825" size="100,100">&lt;&lt;set $nangav+=1&gt;&gt;&lt;&lt;set $impulsive+=1&gt;&gt;&quot;Don&#39;t!&quot; You stop $ha.them quickly, before $ha.they can make it out the door.

$ha.They turn&lt;&lt;hs&gt;&gt; back around toward you. &quot;Why not?&quot;

&quot;It&#39;s a common arrangement here.&quot; You try to spin together something sensible after your abrupt declaration. &quot;&lt;&lt;include [[5-1a.marr.1-2JOIN]]&gt;&gt;</tw-passagedata><tw-passagedata pid="234" name="5-1a.marr.3" tags="draft genderstuff" position="4600,825" size="100,100">&lt;&lt;set $angerav=true&gt;&gt;&lt;&lt;set $ha.soft+=2&gt;&gt;&lt;&lt;if hasVisited(&quot;5-1a.marr.3&quot;)&gt;&gt;&lt;&lt;set $ha.fond+=1&gt;&gt;You freeze up at the intensity of $ha.their anger. Though it isn&#39;t directed at you, you&#39;ve never handled other people&#39;s anger well.&lt;&lt;if $pastduty&gt;1&gt;&gt; Maybe that&#39;s why you&#39;ve gone along with what your family expects of you, even when it hurts. It&#39;s better than bearing the disappointment that clawed at you from the inside, long after it had left your parents&#39; minds.&lt;&lt;elseif $pastduty&lt;-1&gt;&gt; You&#39;ve borne it often enough for your wilfullness, and though you&#39;ve tried to steel yourself against your visceral reaction, it&#39;s difficult not to let it break through.&lt;&lt;/if&gt;&gt;&lt;&lt;if $ax.person==&quot;man&quot;&amp;&amp;$gendervibes==&quot;cis&quot;&gt;&gt; It&#39;s compounded by the shame of knowing that a man should be able to handle such things. There&#39;s no reason for you to be so weak.&lt;&lt;/if&gt;&gt;

&quot;Wait...!&quot; you finally manage to choke out, trying to push back against the pall of anxiety that&#39;s come over you.

The door is already open, but $ha.they spin&lt;&lt;hs&gt;&gt; back around toward you. &quot;What?&quot;

&quot;It&#39;s nothing. I&#39;m sorry. You don&#39;t need to... It isn&#39;t like that.&quot;

$ha.Their eyebrows furrow as $ha.they look&lt;&lt;hs&gt;&gt; at you before you see some sort of recognition dawn. The temperature warms, and you hear a tiny pop from the water pitcher: a thin sheet of ice over its surface has cracked as it melts.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|5-1a.marr.3-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="235" name="5-1a.marr.1-2JOIN" tags="draft" position="4425,950" size="100,100">My mother made the decision to accept the offer. I could have refused, but I didn&#39;t make the initial choice. That&#39;s all I meant.&quot;

The temperature warms, and you hear a tiny pop from the water pitcher: a thin sheet of ice over its surface has cracked as it melts.

&quot;I see.&quot; $ha.They return&lt;&lt;hs&gt;&gt; to $ha.their seat, still not seeming entirely satisfied. &quot;But you still want to continue?&quot;

&quot;Yes, I do.&quot;

$ha.They nod&lt;&lt;hs&gt;&gt;. &lt;&lt;include [[5-1a]]&gt;&gt;</tw-passagedata><tw-passagedata pid="236" name="5-1a.marr.3-2" tags="draft" position="4575,925" size="100,100">&quot;I... apologize.&quot; $ha.They shut&lt;&lt;hs&gt;&gt; the door and sit&lt;&lt;hs&gt;&gt; back down farther away from you. &quot;Please, explain.&quot;

You take a deep breath. &quot;My mother made the decision to accept the offer, but I could have refused. I didn&#39;t, but...&quot;

&quot;I see. Are you sure you want to go through with this?&quot;

&quot;Yes.&quot;

$ha.They observe&lt;&lt;hs&gt;&gt; you silently for a moment. &quot;Then I will take you at your word.&quot;

You almost sigh in relief at escaping that near-disaster with no damage but a racing heart.

&lt;&lt;include [[5-1a]]&gt;&gt;</tw-passagedata><tw-passagedata pid="237" name="5-1haq.name" tags="draft todo genderstuff majorVarSet" position="3800,1825" size="100,100">What name should I call you?&lt;&lt;if $ha.knowtrans||$ha.knowmaybe&gt;&gt; I know your legal name, but I won&#39;t use it unless you want me to.&lt;&lt;/if&gt;&gt;&quot;

&lt;blockquote&gt;&lt;i&gt;Please type $mc.their name or nickname with the capitalization you would like to see throughout the story. If your character has a nickname $mc.they reserve&lt;&lt;s&gt;&gt; for close friends or family, you&#39;ll have an opportunity to provide it later in the story.&lt;/i&gt;&lt;/blockquote&gt;

&lt;&lt;textbox &quot;$name&quot; &quot;&quot; &quot;5-2&quot;&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|5-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="238" name="5-1haq.gen" tags="draft genderstuff" position="3500,1325" size="100,100">What should I call you: wife, husband, or spouse?&quot; $ha.they ask, as if this were a perfectly normal thing to inquire about.&lt;&lt;if $attraction==&quot;cs&quot;&amp;&amp;$gendervibes==&quot;cis&quot;&gt;&gt; If not for your brother, you might have thought it truly odd, but if a person can be attracted to someone of their own gender, perhaps gender is not so simple an idea either.&lt;&lt;/if&gt;&gt;

&lt;&lt;if $gendervibes==&quot;maybe&quot;&gt;&gt;You&#39;re not even sure how to answer. How can $ha.they ask as if it&#39;s such a simple thing? But maybe it is for $ha.them.

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[&quot;\&quot;&quot;+$mc.Spouse+&quot;. You&#39;ll keep your thoughts private for now.\&quot;&quot;|5-1haq.gen.maybe.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;&quot;+$mc.Spouse+&quot;, but I&#39;m not sure it&#39;s that simple.\&quot;&quot;|5-1haq.gen.maybe.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;m not sure.\&quot;&quot;|5-1haq.gen.maybe.3]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;else&gt;&gt;&quot;$mc.Spouse.&quot;

$ha.They nod&lt;&lt;hs&gt;&gt;. &quot;And should I call you her, him, or them?&quot;

&quot;$mc.Them.&quot;

&quot;Very well.&lt;&lt;if $gendervibes==&quot;trans&quot;&gt;&gt;&lt;&lt;set $ha.knowtrans=true&gt;&gt;&quot; It&#39;s a strange but welcome experience not needing to explain yourself further. &quot;I imagine I should still use $ax.them at the feast if forced to speak with anyone.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Yes, please.\&quot;&quot;|5-1haq.gen.JOIN][$feastprn=-2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Yes, unless it&#39;s my sister and her husband or my brother&#39;s wife.\&quot;&quot;|5-1haq.gen.JOIN][$feastprn=-1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Avoid gendered words if you can.\&quot;&quot;|5-1haq.gen.JOIN][$feastprn=1]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;else&gt;&gt; Then I have just one more question for you: &lt;&lt;include [[5-1haq.name]]&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="239" name="5-1haq.gen.maybe.1" tags="draft genderstuff" position="3475,1450" size="100,100">&quot;$mc.Spouse.&quot; You&#39;ll keep your thoughts private for now; you&#39;re not ready to share them yet, especially not with a virtual stranger.

$ha.They nod&lt;&lt;hs&gt;&gt;. &quot;And should I call you her, him, or them?&quot;

&quot;$mc.Them.&quot;

&quot;Very well. Then I have just one more question for you: &lt;&lt;include [[5-1haq.name]]&gt;&gt;</tw-passagedata><tw-passagedata pid="240" name="5-1haq.gen.maybe.2" tags="draft genderstuff" position="3575,1450" size="100,100">&lt;&lt;set $ha.knowmaybe=true&gt;&gt;&lt;&lt;set $mc.gender=&quot;maybe&quot;&gt;&gt;&lt;&lt;set $mc.person=clone($ax.person)&gt;&gt;&quot;$mc.Spouse, but I&#39;m not sure it&#39;s that simple.&quot;

$ha.They nod&lt;&lt;hs&gt;&gt;. &quot;So you understand the limitations of human ideas of gender. Should I call you her, him, or them for now? If you change your mind later, just tell me.&quot;

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[&quot;\&quot;Her.\&quot;&quot;|5-1haq.gen.maybe.2-2][$mc.they=&quot;she&quot;]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Him.\&quot;&quot;|5-1haq.gen.maybe.2-2][$mc.they=&quot;he&quot;]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Them.\&quot;&quot;|5-1haq.gen.maybe.2-2][$mc.they=&quot;they&quot;]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="241" name="5-1haq.gen.maybe.3" tags="draft genderstuff" position="3675,1450" size="100,100">&lt;&lt;set $ha.knowmaybe=true&gt;&gt;&lt;&lt;set $mc.gender=&quot;maybe&quot;&gt;&gt;&lt;&lt;set $mc.person=&quot;person&quot;&gt;&gt;&lt;&lt;set $mc.sibling=&quot;sibling&quot;&gt;&gt;&quot;I&#39;m not sure.&quot;

&quot;So you understand the limitations of human ideas of gender,&quot; $ha.they say&lt;&lt;hs&gt;&gt; with disorienting calm. &quot;What should I call you for now, then? If you change your mind later, just tell me.&quot;

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[&quot;\&quot;Wife.\&quot;&quot;|5-1haq.gen.maybe.3-2][$mc.sibling=&quot;sister&quot;]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Husband.\&quot;&quot;|5-1haq.gen.maybe.3-2][$mc.sibling=&quot;brother&quot;]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Spouse.\&quot;&quot;|5-1haq.gen.maybe.3-2][$mc.sibling=&quot;sibling&quot;]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="242" name="5-1haq.gen.JOIN" tags="draft genderstuff" position="3500,1700" size="100,100">&lt;&lt;if $feastprn==-2&gt;&gt;&quot;Yes, please.&quot;&lt;&lt;elseif $feastprn==-1&gt;&gt;&quot;Yes, unless it&#39;s my sister and her husband or my wife&#39;s brother.&quot;&lt;&lt;else&gt;&gt;&quot;Avoid gendered words if you can.&quot;&lt;&lt;/if&gt;&gt;

&quot;Understood.&lt;&lt;if $feastprn==-1&gt;&gt; Though I don&#39;t know who those people are anyhow.&quot;

&quot;You met my sister already—she read your vows.&quot;

&quot;Ah.&quot; The lack of interest in $ha.their tone makes you wonder if $ha.they&#39;&lt;&lt;hve&gt;&gt; already forgotten Sabine entirely.&lt;&lt;else&gt;&gt;&quot;&lt;&lt;/if&gt;&gt;

There&#39;s both relief and dissonance in $ha.their blasé acceptance. Realistically, you&#39;re probably just beneath $ha.their interest, but this is probably a better reception than you could have anticipated with another human, at least.

&quot;Then I have just one more question for you: &lt;&lt;include [[5-1haq.name]]&gt;&gt;</tw-passagedata><tw-passagedata pid="243" name="5-1haq.gen.maybe.2-2" tags="draft genderstuff" position="3525,1575" size="100,100">&lt;&lt;include [[1-10x.2-TSET]]&gt;&gt;&quot;$mc.Them.&quot;

&quot;Very well.&quot;

&lt;&lt;if $ax.they==$mc.they&amp;&amp;$ax.spouse==$mc.spouse&gt;&gt;Even if this doesn&#39;t change how $ha.they&#39;ll address you, i&lt;&lt;else&gt;&gt;I&lt;&lt;/if&gt;&gt;t feels good for someone to finally know that you&#39;ve had these thoughts—though it does feel a little strange to have the boulder you&#39;ve been carrying land with all the force of a pebble in the ocean.

&lt;&lt;if $ax.they==$mc.they&amp;&amp;$ax.spouse==$mc.spouse&gt;&gt;&quot;Then I have just one more question for you: &lt;&lt;include [[5-1haq.name]]&gt;&gt;&lt;&lt;else&gt;&gt;&quot;I imagine I should still use the words your family expects at the feast if forced to speak with anyone.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Yes, please.\&quot;&quot;|5-1haq.gen.JOIN][$feastprn=-2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Avoid gendered words if you can.\&quot;&quot;|5-1haq.gen.JOIN][$feastprn=1]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="244" name="5-1haq.gen.maybe.3-2" tags="draft genderstuff" position="3675,1550" size="100,100">&lt;&lt;if $mc.sibling==&quot;daughter&quot;&gt;&gt;&quot;Wife.&quot;&lt;&lt;elseif $mc.sibling==&quot;brother&quot;&gt;&gt;&quot;Husband.&quot;&lt;&lt;else&gt;&gt;&quot;Spouse.&quot;&lt;&lt;/if&gt;&gt;

$ha.They nod&lt;&lt;hs&gt;&gt;. &quot;And should I call you her, him, or them?&quot;

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[&quot;\&quot;Her.\&quot;&quot;|5-1haq.gen.maybe.2-2][$mc.they=&quot;she&quot;]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Him.\&quot;&quot;|5-1haq.gen.maybe.2-2][$mc.they=&quot;he&quot;]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Them.\&quot;&quot;|5-1haq.gen.maybe.2-2][$mc.they=&quot;they&quot;]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="245" name="5-2" tags="draft" position="3800,1950" size="100,100">&lt;&lt;if $ach.on&gt;&gt;&lt;&lt;if $name[0]==&quot;S&quot;||$name[0]==&quot;s&quot;&gt;&gt;&lt;&lt;set $ach.any=true&gt;&gt;&lt;&lt;set $ach.sname=true&gt;&gt;&lt;&lt;notify&gt;&gt;Achievement unlocked: Fitting the Mold&lt;&lt;/notify&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;if hasVisited(&quot;5-1.5.2&quot;)&amp;&amp;$nvbook&gt;0&gt;&gt;Hawk doesn&#39;t lean closer to read what you&#39;ve written like most people--most &lt;i&gt;humans&lt;/i&gt;--do. Rather, $ha.they seem&lt;&lt;hs&gt;&gt; able to read it from clear across the room.&lt;&lt;/if&gt;&gt; &quot;$name. Very well.&quot; Hawk rises from $ha.their seat. &quot;Shall we go? The rain has stopped.&quot;

The midday sun shines brightly on the courtyards, the heat beginning to dry the last remnants of the rain. You expect your mother has already shifted from fussing over the ceremony to fussing over the feast. You get up to follow Hawk, but before opening the door, $ha.they pause&lt;&lt;hs&gt;&gt;.

&quot;I don&#39;t like to be touched without permission, but I&#39;m granting you permission—within reason—for this event. I understand I may be expected to escort you in. Or the reverse. What do you prefer?&quot;

&lt;&lt;if $touch&gt;&gt;&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I&#39;d like you to escort me.\&quot;&quot;|5-2.haesc]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;d like to escort you.\&quot;&quot;|5-2.mcesc]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;We don&#39;t need to do any of that.\&quot;&quot;|5-2.noesc]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;else&gt;&gt;&quot;I don&#39;t like to be touched without permission either...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;...but I&#39;d like you to escort me this time.\&quot;&quot;|5-2.haesc]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;...but I&#39;d like to escort you this time.\&quot;&quot;|5-2.mcesc]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;...so we don&#39;t need to do any of that.\&quot;&quot;|5-2.noesc]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="246" name="5-2.haesc" tags="draft genderstuff" position="3700,2075" size="100,100">&lt;&lt;set $fescort=1&gt;&gt;&quot;&lt;&lt;if not $touch&gt;&gt;I don&#39;t like to be touched without permission either, but &lt;&lt;/if&gt;&gt;I&#39;d like you to escort me&lt;&lt;if not $touch&gt;&gt; this time&lt;&lt;/if&gt;&gt;.&quot;

Hawk nods, yanks open the door, and heads out of the room, showing no interest in escorting you earlier than needed. &lt;&lt;if $ax.they==&quot;he&quot;&gt;&gt;&lt;&lt;set $courage+=1&gt;&gt;&lt;&lt;if $confidence&lt;0&gt;&gt;You&#39;re not sure where the audacity to make this choice came from, but &lt;&lt;/if&gt;&gt;being escorted by your &lt;&lt;if $ha.gender!=&quot;fem&quot;&gt;&gt;&quot;wife&quot;&lt;&lt;else&gt;&gt;wife&lt;&lt;/if&gt;&gt; will certainly make a splash—probably not in a good way. One positive about soon being whisked away to a sorcerer&#39;s lair is that you may never need to &lt;&lt;if $confidence&lt;0&gt;&gt;face&lt;&lt;else&gt;&gt;see&lt;&lt;/if&gt;&gt; any of these people again.

&lt;&lt;/if&gt;&gt;&lt;&lt;include [[5-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="247" name="5-2.mcesc" tags="draft genderstuff" position="3800,2075" size="100,100">&lt;&lt;set $fescort=2&gt;&gt;&quot;&lt;&lt;if not $touch&gt;&gt;I don&#39;t like to be touched without permission either, but &lt;&lt;/if&gt;&gt;I&#39;d like to escort you this time&lt;&lt;if not $touch&gt;&gt; this time&lt;&lt;/if&gt;&gt;.&quot;

Hawk nods, yanks open the door, and heads out of the room, showing no interest in being escorted earlier than needed. &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;&lt;&lt;set $courage+=1&gt;&gt;&lt;&lt;if $confidence&lt;0&gt;&gt;You&#39;re not sure where the audacity to make this choice came from, but &lt;&lt;/if&gt;&gt;escorting your &lt;&lt;if $ha.gender!=&quot;masc&quot;&gt;&gt;&quot;husband&quot;&lt;&lt;else&gt;&gt;husband&lt;&lt;/if&gt;&gt; in will certainly make a splash—probably not in a good way. One positive about soon being whisked away to a sorcerer&#39;s lair is that you may never need to &lt;&lt;if $confidence&lt;0&gt;&gt;face&lt;&lt;else&gt;&gt;see&lt;&lt;/if&gt;&gt; any of these people again.

&lt;&lt;/if&gt;&gt;&lt;&lt;include [[5-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="248" name="5-2.noesc" tags="draft" position="3900,2075" size="100,100">&lt;&lt;set $fescort=-1&gt;&gt;&quot;&lt;&lt;if not $touch&gt;&gt;I don&#39;t like to be touched without permission either, so w&lt;&lt;else&gt;&gt;W&lt;&lt;/if&gt;&gt;e don&#39;t need to do any of that.&quot;

Hawk nods, yanks open the door, and heads out of the room, leaving you to trail after $ha.them. &lt;&lt;include [[5-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="249" name="5-3" tags="draft endscene" position="3800,2200" size="100,100">The priestess rounds the corner in time to nearly be bowled over by your $ha.spouse. &quot;You have good timing—the guests are being seated. Follow me.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|6-0]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="250" name="6-0" tags="draft startscene todo autosave" position="5200,100" size="100,100">&lt;&lt;set $cursc=6&gt;&gt;&lt;&lt;notify&gt;&gt;Autosave complete!&lt;&lt;/notify&gt;&gt;You hear the sound of chatter well before the scene of the feast comes into view. The guests are being directed toward the seats your mother selected for them at the long, fabric-draped tables resting on beautifully polished flagstone that raise them just above the grass of the surrounding lawn. The large network of trellises that shelters them would have done little against the earlier rain, but the ivy growing across them provides a little relief from the sun. To one side is an open space for dancing which will follow the feast. The priestess slows her approach so that your arrival will be timed to when the last guests take their seats.

As soon as the crowd notices your presence, a hush falls. Your destination lies at the end of the aisle between two tables: a small table set with two chairs. &lt;&lt;if $fescort&gt;0&gt;&gt;Hawk holds $ha.their arm out&lt;&lt;if $fescort==1&gt;&gt; for you to take&lt;&lt;/if&gt;&gt;&lt;&lt;if $height&lt;4&gt;&gt;, lowering it &lt;&lt;if $height&gt;1&gt;&gt;to a convenient height for you&lt;&lt;else&gt;&gt;as much as $ha.they can without bending over&lt;&lt;/if&gt;&gt;&lt;&lt;elseif $height==5&gt;&gt;, raising it to a convenient height for you&lt;&lt;/if&gt;&gt;. You &lt;&lt;if $fescort==1&gt;&gt;place your hand atop $ha.theirs&lt;&lt;else&gt;&gt;lift your arm to support $ha.theirs&lt;&lt;/if&gt;&gt;&lt;&lt;else&gt;&gt;Hawk waits for you to be ready, and when you give $ha.them a nod, you begin to move together&lt;&lt;/if&gt;&gt;. Though the walk in is supposed to be a slow procession, Hawk is unbothered by that tradition. $ha.Their long legs set a quick pace that is difficult to keep up with due to &lt;&lt;if $height&lt;4&gt;&gt;your much shorter legs&lt;&lt;elseif $ax.they==&quot;she&quot;&gt;&gt;the length of your dress&lt;&lt;else&gt;&gt;the stiff fabric of your slacks&lt;&lt;/if&gt;&gt;. It&#39;s a relief when &lt;&lt;if $fescort==1&gt;&gt;$ha.they deposit&lt;&lt;hs&gt;&gt; you beside your chair and&lt;&lt;elseif $fescort&gt;0&gt;&gt;$ha.they remove&lt;&lt;hs&gt;&gt; $ha.their hand from your arm and&lt;&lt;else&gt;&gt;you reach your destination and $ha.they&lt;&lt;/if&gt;&gt; take&lt;&lt;hs&gt;&gt; $ha.their seat. You follow suit and&lt;&lt;if $confidence&lt;0&gt;&gt; try to&lt;&lt;/if&gt;&gt; ignore the dozens of stares aimed in your direction.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|6-0-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="251" name="6-0-2" tags="draft" position="5200,200" size="100,100">The stares are&lt;&lt;if $confidence&lt;0&gt;&gt;, thankfully,&lt;&lt;/if&gt;&gt; broken as small crystal glasses filled with strawberry juice are placed before each person in attendance. Strawberries have been a symbol of eternal love for centuries, but the scrutinizing look Hawk is giving $ha.their glass doesn&#39;t speak to any knowledge of this particular tradition. So you raise your glass and clear your throat to call $ha.their attention to it. $ha.They quickly take&lt;&lt;hs&gt;&gt; the hint and lift&lt;&lt;hs&gt;&gt; $ha.their glass beside yours. The guests raise their own glasses in kind. You attempt to discreetly gesture to Hawk that $ha.they should down the contents in one go before you quickly drain your own glass. When you finish, Hawk&#39;s empty glass is already back on the table. As the crowd finishes their glasses as well, a brief round of polite applause begins.

Hawk looks at you, eyebrow raised.

&quot;It&#39;s an ill omen if newlyweds don&#39;t drain their glasses at once.&quot;

&quot;Glad the fate of this arrangement will be decided by such important activities.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Can you be polite for a few hours?\&quot;&quot;|6-0.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;You and my brother would get along.\&quot;&quot;|6-0.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Comforting, isn&#39;t it?\&quot;&quot;|6-0.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Must you do this?\&quot;&quot;|6-0.4]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Should I have pretended to choke on it?\&quot;&quot;|6-0.5]]&lt;/li&gt;
&lt;li&gt;[[Don&#39;t respond.|6-0.6]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="252" name="6-0.1" tags="draft" position="4950,325" size="100,100">&lt;&lt;set $ha.res+=1&gt;&gt;&quot;Can you be polite for a few hours?&quot;

&quot;&lt;&lt;if $ha.ban&gt;0&gt;&gt;Probably not&lt;&lt;else&gt;&gt;Perhaps&lt;&lt;/if&gt;&gt;.&quot;

&lt;&lt;include [[6-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="253" name="6-0.2" tags="draft" position="5050,325" size="100,100">&quot;You and my brother would get along.&quot;

Hawk tilts $ha.their head quizzically.

&quot;He &lt;&lt;if $skill==&quot;persuasion&quot;&gt;&gt;also weaponizes humor when he&#39;s uncomfortable&lt;&lt;else&gt;&gt;appreciates sarcasm&lt;&lt;/if&gt;&gt;.&quot;

&quot;Hmm.&quot;&lt;&lt;if $skill==&quot;persuasion&quot;&gt;&gt; Hawk narrows $ha.their eyes at you for a moment before apparently losing interest again.&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[6-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="254" name="6-0.3" tags="draft" position="5150,325" size="100,100">&lt;&lt;set $ha.ban+=1&gt;&gt;&quot;Comforting, isn&#39;t it?&quot;

&quot;Very.&quot;

&lt;&lt;include [[6-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="255" name="6-0.4" tags="draft" position="5250,325" size="100,100">&quot;Must you do this?&quot;

&quot;Do what?&quot;

&quot;Be rude about a centuries-old tradition?&quot;

&quot;How old, exactly?&quot;

&quot;I don&#39;t know--probably from before the kingdom broke away from the empire.&quot;

$ha.They snort&lt;&lt;hs&gt;&gt;. &quot;If a tradition is younger than I am, it isn&#39;t all that old. But I will &lt;&lt;if $ha.ban&gt;0&gt;&gt;pretend&lt;&lt;else&gt;&gt;attempt&lt;&lt;/if&gt;&gt; to be less rude.&quot;

The kingdom gained independence nearly four hundred years ago.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Thank you.\&quot;&quot;|6-0.4.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;How kind.\&quot;&quot;|6-0.4.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;You&#39;re looking good for your age.\&quot;&quot;|6-0.4.3]]&lt;/li&gt;
&lt;li&gt;[[You&#39;re too stunned to reply.|6-0.4.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="256" name="6-0.5" tags="draft" position="5350,325" size="100,100">&lt;&lt;set $humor+=1&gt;&gt;&lt;&lt;set $ha.ban+=1&gt;&gt;&quot;Should I have pretended to choke on it?&quot;

&quot;Certainly would have livened things up.&quot;

&lt;&lt;include [[6-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="257" name="6-0.6" tags="draft" position="5450,325" size="100,100">&lt;&lt;set $ha.silent+=1&gt;&gt;You don&#39;t respond, and Hawk doesn&#39;t provide any additional commentary.

&lt;&lt;include [[6-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="258" name="6-1" tags="draft" position="5200,600" size="100,100">The feast is where the majority of concessions Isla won for you are found: four courses of food you find palatable rather than whatever fashionable dishes your mother would have picked. But even as you begin the first course, you find that it&#39;s difficult to enjoy it. Hawk&#39;s presence isn&#39;t just intense in the metaphorical way your mother&#39;s is--it seems to be a physical thing. This close to $ha.them, your skin prickles unpleasantly, and each time you pick up your glass, the sensation as your arm gets closer to $ha.them turns into almost a buzz.

The first course passes without any conversation between the two of you, and most of the guests seem to be avoiding looking at your small table as they eat and talk among themselves. But without anything to distract you from eating, you finish your food rapidly and are free to get up and talk with the guests. The time between courses will be your last chance to talk with your family before you leave. Who knows when--or if--you&#39;ll return?

You rise from your place, and that seems to be enough of a signal for Hawk to know $ha.they should join you.

&quot;Where are we going?&quot;

&quot;To talk with my family.&quot;

$ha.They nod&lt;&lt;hs&gt;&gt; and &lt;&lt;if $fescort==1&gt;&gt;hold&lt;&lt;hs&gt;&gt; out $ha.their arm to you again&lt;&lt;elseif $fescort==2&gt;&gt;place&lt;&lt;hs&gt;&gt; $ha.their hand on yours again&lt;&lt;else&gt;&gt; keep&lt;&lt;hs&gt;&gt; pace beside you&lt;&lt;/if&gt;&gt; as you make your way down the long tables toward the person you want to speak with first:

&lt;&lt;include [[6-1.hSPLIT]]&gt;&gt;</tw-passagedata><tw-passagedata pid="259" name="6-0.4.1" tags="draft" position="5125,450" size="100,100">&quot;Thank you.&quot;

&quot;Of course,&quot; $ha.they repl&lt;&lt;if $ha.plural&gt;&gt;y&lt;&lt;else&gt;&gt;ies&lt;&lt;/if&gt;&gt; with feigned graciousness.

&lt;&lt;include [[6-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="260" name="6-0.4.2" tags="draft" position="5225,450" size="100,100">&lt;&lt;set $ha.ban+=1&gt;&gt;&quot;How kind.&quot;

$ha.They incline&lt;&lt;hs&gt;&gt; $ha.their head in feigned graciousness.

&lt;&lt;include [[6-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="261" name="6-0.4.3" tags="draft" position="5325,450" size="100,100">&lt;&lt;set $humor+=1&gt;&gt;&lt;&lt;if $attraction!=&quot;aa&quot;&gt;&gt;&lt;&lt;set $ha.flirt+=1&gt;&gt;&lt;&lt;/if&gt;&gt;&quot;You&#39;re looking good for your age.&quot;

$ha.They roll&lt;&lt;hs&gt;&gt; their eyes but don&#39;t dignify your remark with a response.

&lt;&lt;include [[6-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="262" name="6-0.4.4" tags="draft" position="5425,450" size="100,100">You&#39;re too stunned to reply, and Hawk doesn&#39;t provide any additional comment.

&lt;&lt;include [[6-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="263" name="6-1.hSPLIT" tags="draft" position="5200,750" size="100,100">&lt;ul class=&quot;loop&quot;&gt;&lt;&lt;if not hasVisited(&quot;6-2is-h&quot;)&gt;&gt;&lt;li&gt;[[Isla|6-2is-h]]&lt;/li&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;6-2sa-h&quot;)&gt;&gt;&lt;li&gt;[[Sabine|6-2sa-h]]&lt;/li&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;6-2mom-h&quot;)&gt;&gt;&lt;li&gt;[[Your mother|6-2mom-h]]&lt;/li&gt;&lt;&lt;/if&gt;&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="264" name="6-2is-h" tags="draft" position="4975,950" size="100,100">&lt;&lt;set $six.count+=1&gt;&gt;With Soren gone, Isla is seated near her parents. When you and Hawk approach, she rises from her seat and gestures for the three of you to move away from the tables and into the grass outside the trellises&#39; canopy to achieve a tiny amount of privacy.

&quot;Congratulations!&quot; Isla&#39;s warm smile doesn&#39;t waver in the face of Hawk&#39;s silent stare. &quot;I&#39;m Isla, Soren&#39;s wife.&quot;

&quot;My sister-in-law,&quot; you clarify&lt;&lt;if $feastprn==1&gt;&gt;, and $ha.they give&lt;&lt;hs&gt;&gt; you a small nod of understanding&lt;&lt;/if&gt;&gt;.

&quot;Hawk.&quot;

Isla dips her head politely in response. &quot;It&#39;s good to meet you at last. Have you enjoyed the feast so far?&quot;

Hawk&#39;s pause before $ha.they respond&lt;&lt;hs&gt;&gt; stretches on and on. &quot;It&#39;s adequate.&quot;

Isla&#39;s smile doesn&#39;t waver. &quot;I&#39;m sure you&#39;re used to more luxurious meals.&quot;

&quot;No.&quot;

You know the silence can&#39;t be that long, but it is unbearable. Isla waits for $ha.them to elaborate, every ounce of sincere interest written on her face as Hawk stares down at her. You can feel the tension intensify around $ha.them, buzzing like static in dry air, before Isla&#39;s sweetness cracks $ha.them.

&quot;I don&#39;t eat often. This is all...&quot; $ha.They trail&lt;&lt;hs&gt;&gt; off and give&lt;&lt;hs&gt;&gt; a vague hand gesture.

Thankfully, Isla seems satisfied with $ha.their response and doesn&#39;t weaponize her patience again. &quot;I hope the two of you will find time to visit now and then--especially for the spring ball.&quot;&lt;&lt;if not hasVisited(&quot;6-2mom-h&quot;)&gt;&gt; The spring ball is an annual tradition, and your parents have been putting it on ever since your father became Earl of Eastthorn, inheriting both his title and the ball at once.&lt;&lt;/if&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;We will.\&quot;&quot;|6-2is-h.1]]&lt;/li&gt;
&lt;li&gt;[[Look at Hawk. &quot;Can we?&quot;|6-2is-h.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I don&#39;t know...\&quot;&quot;|6-2is-h.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I was hoping to avoid it.\&quot;&quot;|6-2is-h.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="265" name="6-2sa-h" tags="draft genderstuff" position="5250,950" size="100,100">&lt;&lt;set $six.count+=1&gt;&gt;Sabine and Erich are seated together, as far from your mother as can be accommodated without it seeming like they&#39;re &lt;i&gt;too&lt;/i&gt; far away. Sabine gets up when she sees you and taps Erich&#39;s shoulder to signal he should come along. He leads the way a short distance down one of the pavillion complex&#39;s pathways so that the four of you are out of earshot of the crowd.

As the group comes to a stop, Erich breaks the ice with a chummy smile that reaches his bright blue eyes. &quot;Hawk, right? Good to meet you. I&#39;m Erich--your brother-in-law... -in-law, I suppose. I&#39;m Sabine&#39;s husband.&quot; He gives an easy laugh at his own joke and extends his hand toward your $ha.spouse.

Hawk just stares at it for a moment, but when Erich doesn&#39;t immediately withdraw his hand, $ha.they take&lt;&lt;hs&gt;&gt; it. Erich gives it a firm shake even as Sabine keeps the same bristling intensity as she had during the ceremony. While your sister often wears her agenda on her sleeve, her husband uses the demeanor of a man entirely confident in his place in society to lure in the unsuspecting before springing his trap at an opportune moment. It&#39;s difficult to tell whether Hawk has detected the deception or if $ha.they just do&lt;&lt;hes&gt;&gt;n&#39;t like his persona, but a unique sensation of unpleasantness seems to roll off of $ha.them like the oppressive humidity of a miserable summer day.

&quot;Why don&#39;t we go talk down the way while my wife and her &lt;&lt;if $gendervibes==&quot;trans&quot;&gt;&gt;sibling&lt;&lt;else&gt;&gt;$ax.sibling&lt;&lt;/if&gt;&gt; say their farewells?&quot; Hawk, with obvious reluctance, follows Erich down another corridor--still within sight but out of earshot. At least, what would be earshot for a human.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|6-2sa-h-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="266" name="6-2mom-h" tags="draft" position="5550,950" size="100,100">&lt;&lt;set $six.count+=1&gt;&gt;&lt;&lt;if $six.count&gt;2&gt;&gt;You&#39;ve put this off for long enough.

&lt;&lt;/if&gt;&gt;Your mother is speaking with one of your cousins when you approach her, but she quickly ends the conversation, smiling graciously at your relatives as she stands and gestures to a quiet corner of the stone-paved feast area. You&#39;re still within earshot of some guests since she&#39;s certainly not going to risk her shoes on the muddy lawn, but those guests look very involved in their conversation.

Your mother looks between you and Hawk.&lt;&lt;if hasVisited(&quot;5-1a.marr&quot;)&gt;&gt; If she can feel the way Hawk bristles in her presence, she doesn&#39;t show it.&lt;&lt;/if&gt;&gt; &quot;Thank you doing us the honor of joining our family, Hawk.&quot; There&#39;s a brief hesitation before $ha.their name where your mother wants to add a title but has none to use. &quot;I know your people don&#39;t deal with humans often, and we understand our customs are different from yours. If anyone has been rude to you for such a reason or has made you feel unwelcome, allow me to apologize on behalf of our family.&quot;

Hawk looks at her silently and intently for a time. &quot;You can&#39;t apologize for someone else. But I understand your meaning.&quot;

&quot;If there is anything that you need to make this arrangement legitimate in the eyes of your Enclave, we would be more than happy to accommodate.&quot;

Despite your mother&#39;s words about differing customs and accommodations, you spend Hawk&#39;s ensuing silence hoping that $ha.they know&lt;&lt;hs&gt;&gt; better than to tell your mother that there&#39;s probably nothing that could make a human marriage relevant to a group of Elves. Blessedly, $ha.they seem&lt;&lt;hs&gt;&gt; to have reached the correct conclusion. &quot;This ceremony is sufficient.&quot;

The relief on your mother&#39;s face is there and gone in an instant. &quot;I hope you&#39;ll come visit us on occasion after you&#39;re settled in together. We hold a ball at the start of spring every year, and we would be honored if you can find the time to join us. I&#39;m sure you&#39;re busy, of course, so we&#39;ll take no offense if you can&#39;t attend.&quot;

Offense doesn&#39;t seem to be something Hawk avoids, but $ha.they simply nod&lt;&lt;hs&gt;&gt; in response.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|6-2mom-h-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="267" name="6-2is-h.1" tags="draft" position="4825,1075" size="100,100">&lt;&lt;set $islapromise=&quot;yes&quot;&gt;&gt;&quot;We will.&quot; You feel a prickle that tells you Hawk isn&#39;t in favor, but $ha.they say&lt;&lt;hs&gt;&gt; nothing.

&quot;Wonderful! &lt;&lt;include [[6-2is-h-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="268" name="6-2is-h.2" tags="draft" position="4925,1075" size="100,100">&lt;&lt;if $islapromise!=&quot;yes&quot;&gt;&gt;&lt;&lt;set $islapromise=&quot;maybe&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;You look at Hawk. &quot;Can we?&quot;

&quot;Do as you wish.&quot;

&quot;Wonderful! I hope you&#39;ll attend as well, Hawk. &lt;&lt;include [[6-2is-h-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="269" name="6-2is-h.3" tags="draft" position="5025,1075" size="100,100">&quot;I don&#39;t know...&quot;

&quot;Well, we would love for you to attend if you can. &lt;&lt;include [[6-2is-h-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="270" name="6-2is-h.4" tags="draft" position="5125,1075" size="100,100">&quot;I was hoping to avoid it.&quot; One of the few positives in this marriage was supposed to be getting out of family obligations.

&quot;Well, if you change your mind, we would love for you to attend. &lt;&lt;include [[6-2is-h-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="271" name="6-2is-h-2" tags="draft" position="4950,1200" size="100,100">Is there anything that would make future events more comfortable for you than today&#39;s feast?&quot;

Isla keeps her warm brown eyes fixed on Hawk as $ha.their customary silence ensues before $ha.they answer&lt;&lt;hs&gt;&gt;. &quot;I don&#39;t eat meat. But I also don&#39;t like &#39;events,&#39; so I doubt that alone will help much.&quot;

&quot;I will keep that in mind. Perhaps it would help for you to come and visit the family a few times before then, just to get to know us?&quot;

&quot;No.&quot;

The swiftness of Hawk&#39;s answer makes the first dent in Isla&#39;s veneer of calm, but she quickly recovers. &quot;Will you let your spouse visit, at least?&quot;

&quot;Of course. &lt;&lt;if $gendervibes==&quot;cis&quot;||$feastprn==-1&gt;&gt;$mc.They can do as $mc.they wish&lt;&lt;es&gt;&gt;&lt;&lt;elseif $feastprn==-2&gt;&gt;$ax.They can do as $ax.they wish&lt;&lt;es&gt;&gt;&lt;&lt;else&gt;&gt;It&#39;s not my decision&lt;&lt;/if&gt;&gt;.&quot;

Isla smiles. &quot;It will be good to see &lt;&lt;if $feastprn==-1&gt;&gt;$mc.them&lt;&lt;else&gt;&gt;$ax.them&lt;&lt;/if&gt;&gt;. But I should let you get back to the feast--it looks like the next course is on its way. Thank you for coming to talk with me.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Hug Isla.|6-2is-h-2.1]]&lt;/li&gt;
&lt;li&gt;[[Smile at Isla.|6-2is-h-2.2]]&lt;/li&gt;
&lt;li&gt;[[Nod to Isla.|6-2is-h-2.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="272" name="6-2is-h-2.1" tags="draft" position="4850,1325" size="100,100">You hug Isla tightly, &lt;&lt;include [[6-2is-h-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="273" name="6-2is-h-2.2" tags="draft" position="4950,1325" size="100,100">You smile at Isla, &lt;&lt;include [[6-2is-h-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="274" name="6-2is-h-3" tags="draft" position="4950,1450" size="100,100">and she returns it. Neither of you speak, but the message is communicated nonetheless: You probably won&#39;t speak again in person for some time, and neither of you knows what your fate will hold.

&quot;Enjoy the rest of the feast!&quot; she says, returning her seat as you and Hawk head back toward yours.

&lt;&lt;include [[6-3h-accSPLIT]]&gt;&gt;</tw-passagedata><tw-passagedata pid="275" name="6-3h-accSPLIT" tags="draft codeonly" position="5200,1975" size="100,100">&lt;&lt;if $six.count&lt;2&gt;&gt;&lt;&lt;include [[6-3hacc1]]&gt;&gt;&lt;&lt;elseif $six.count&lt;3&gt;&gt;&lt;&lt;include [[6-3hacc2]]&gt;&gt;&lt;&lt;elseif $six.count&gt;=3&gt;&gt;&lt;&lt;include [[6-3hacc3]]&gt;&gt;&lt;&lt;else&gt;&gt;this is an error!&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="276" name="6-2sa-h-2" tags="draft genderstuff" position="5250,1075" size="100,100">Now that you and Sabine have some degree of privacy, she steps closer to you and speaks quietly. &quot;Are you alright? &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;He&lt;&lt;else&gt;&gt;She&lt;&lt;/if&gt;&gt; didn&#39;t try anything? No curses so far?&quot;

&quot;&lt;&lt;if ($ax.they==&quot;she&quot;&amp;&amp;$ha.they!=&quot;he&quot;)||($ax.they==&quot;he&quot;&amp;&amp;$ha.they!=&quot;she&quot;)&gt;&gt;&lt;i&gt;$ha.They&lt;/i&gt;. $ha.They didn&#39;t try anything.&quot;

&quot;Oh. Interesting...&quot; Hawk seems to have unintentionally won a couple points with your sister. &quot;How did this marriage even happen then? Actually, never mind. Not important.&lt;&lt;else&gt;&gt;&quot;No, $ha.they didn&#39;t try anything.&quot;

&quot;Good.&lt;&lt;/if&gt;&gt; This is all... I never thought I&#39;d see the three of us separated like this. Married, living a few hours away from each other at most--that&#39;s what I imagined. I hate not knowing when we&#39;ll all be together again. Who&#39;s going to stop Mother and me from killing each other?&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;That was always a possibility anyhow.\&quot;&quot;|6-2sa-h-2.1]]&lt;/li&gt;
&lt;&lt;if $pastduty&lt;-1&gt;&gt;&lt;li&gt;[[&quot;\&quot;Better you than me.\&quot;&quot;|6-2sa-h-2.2]]&lt;/li&gt;
&lt;&lt;/if&gt;&gt;&lt;li&gt;[[&quot;\&quot;You&#39;ll be fine.\&quot;&quot;|6-2sa-h-2.3]]&lt;/li&gt;
&lt;li&gt;[[Just laugh.|6-2sa-h-2.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="277" name="6-2sa-h-2.1" tags="draft" position="5100,1200" size="100,100">&quot;That was always a possibility anyhow.&quot;

She sighs melodramatically. &quot;You&#39;re right. It&#39;s inevitable. &lt;&lt;include [[6-2sa-h-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="278" name="6-2sa-h-2.2" tags="draft" position="5200,1200" size="100,100">&quot;Better you than me.&quot;

She sighs melodramatically. &quot;Leaving me to take the fall for both of us? Very fickle of you. &lt;&lt;include [[6-2sa-h-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="279" name="6-2sa-h-2.3" tags="draft" position="5300,1200" size="100,100">&quot;You&#39;ll be fine.&quot;

She sighs melodramatically. &quot;&lt;&lt;include [[6-2sa-h-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="280" name="6-2sa-h-2.4" tags="draft" position="5400,1200" size="100,100">You laugh, and she sighs melodramatically. &quot;&lt;&lt;include [[6-2sa-h-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="281" name="6-2sa-h-3" tags="draft" position="5250,1325" size="100,100">I just wish you were both going to be here to help me bury the body.&quot;

&quot;You think Soren would help with that?&quot;

&quot;Literally bury? No. But find a good spot and then pretend he knew nothing about it? Yes.&quot; Sabine sighs, and the previous silliness of the conversation dissipates. &quot;I&#39;ll take care of her while you&#39;re away--or try to. As if she&#39;s ever let anyone help her. Visit if you can, and remember to write. If I don&#39;t hear from you for a month, I&#39;m going to send a search party, got it?&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I&#39;ll be fine.\&quot;&quot;|6-2sa-h-3.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Promise?\&quot;&quot;|6-2sa-h-3.2]]&lt;/li&gt;
&lt;li&gt;[[Just hug her.|6-2sa-h-3.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="282" name="6-2sa-h-3.1" tags="draft" position="5150,1450" size="100,100">&quot;I&#39;ll be fine.&quot;

&quot;Sure. But the search party is still a threat and a promise. &lt;&lt;include [[6-2sa-h-4]]&gt;&gt;</tw-passagedata><tw-passagedata pid="283" name="6-2sa-h-3.2" tags="draft" position="5250,1450" size="100,100">&quot;Promise?&quot;

&quot;Of course I promise.&quot; Her voice cracks a little as she holds back tears. &quot;&lt;&lt;include [[6-2sa-h-4]]&gt;&gt;</tw-passagedata><tw-passagedata pid="284" name="6-2sa-h-3.3" tags="draft" position="5350,1450" size="100,100">You hug your sister, and she hugs you back with crushing force. &quot;I wish Soren were here to say something eloquent,&quot; she says quietly, not letting go, &quot;but you&#39;ve just got me. I thought I could just keep protecting you our whole lives but... Write me if you need anything, alright? &lt;i&gt;Anything&lt;/i&gt;.&quot;

Eventually, she lets you go and &lt;&lt;include [[6-2sa-h-5]]&gt;&gt;</tw-passagedata><tw-passagedata pid="285" name="6-2sa-h-4" tags="draft" position="5200,1575" size="100,100">I wish Soren were here to say something eloquent, but you&#39;ve just got me. I thought I could just keep protecting you our whole lives but... Write me if you need anything, alright? &lt;i&gt;Anything&lt;/i&gt;. Promise?&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Promise.\&quot;&quot;|6-2sa-h-4.1]]&lt;/li&gt;
&lt;li&gt;[[Just nod.|6-2sa-h-4.2]]&lt;/li&gt;
&lt;li&gt;[[Just hug her.|6-2sa-h-4.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="286" name="6-2sa-h-5" tags="draft" position="5250,1825" size="100,100">smiles at you weakly. &quot;Alright, let&#39;s get back to it before I&#39;m too far gone.&quot; She signals to Erich who quickly starts heading back in your direction with Hawk in tow.

&quot;--and I&#39;ll teach you croquet when you visit. Delightful game. I&#39;m sure you&#39;ll enjoy it.&quot;

Hawk looks incredibly sure $ha.they &lt;i&gt;won&#39;t&lt;/i&gt; enjoy it, but truthfully, $ha.they&#39;&lt;&lt;hve&gt;&gt; been wearing that same expression most of the day.

Erich takes one look at Sabine and casually wraps his arm around her before taking the lead, sparing her from having to do it in her current frame of mind. &quot;I&#39;m glad we got to talk with you both before you leave--I imagine it&#39;ll be a long journey back! Good to meet you, Hawk, and,&quot; he turns to you, &quot;visit us any time, of course. I&#39;ve been telling Hawk all about our favorite pastimes here. You&#39;re always very welcome.&quot;

&quot;Very welcome&quot; is one of your code phrases--another reminder that they&#39;ll be protecting you as best they can from a distance.

&quot;Shall we get back to our luncheon?&quot; he asks, leading the group back out of the corridors and into the sunlight.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|6-3h-accSPLIT]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="287" name="6-2is-h-2.3" tags="draft" position="5050,1325" size="100,100">You nod to Isla, &lt;&lt;include [[6-2is-h-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="288" name="6-2sa-h-4.1" tags="draft" position="5100,1700" size="100,100">&quot;Promise.&quot;

Your sister &lt;&lt;include [[6-2sa-h-5]]&gt;&gt;</tw-passagedata><tw-passagedata pid="289" name="6-2sa-h-4.2" tags="draft" position="5200,1700" size="100,100">You nod.

Your sister &lt;&lt;include [[6-2sa-h-5]]&gt;&gt;</tw-passagedata><tw-passagedata pid="290" name="6-2sa-h-4.3" tags="draft" position="5300,1700" size="100,100">You hug your sister, and she hugs you back with crushing force. She seems to have run out of words as she tries to fight off tears. Eventually, she lets you go and &lt;&lt;include [[6-2sa-h-5]]&gt;&gt;</tw-passagedata><tw-passagedata pid="291" name="6-2mom-h-2" tags="draft genderstuff" position="5550,1075" size="100,100">Your mother&#39;s surety wavers ever so slightly as she turns her attention toward you.

&quot;Please write if there&#39;s anything that you need. I&#39;m sure I will be here late, but you may leave when you need to. I&#39;ve told the staff to be available when you return to the estate to fetch your things. They will help you load the carriage.&quot;

&quot;We won&#39;t–&quot;

&quot;Thank you, Mother.&quot; You interrupt whatever hazardous piece of information Hawk was about to reveal. Though neither one remarks on it, Hawk bristles&lt;&lt;if hasVisited(&quot;5-1a.marr&quot;)&gt;&gt; further&lt;&lt;/if&gt;&gt;, and your mother looks at you disapprovingly.

&quot;I suppose this will be our farewell, then. I wish you both a safe journey and a very happy marriage.&quot; Your mother smiles pleasantly at you and Hawk, almost like a mother giving her youngest child away to a good match from a good family–not a mother surrendering her child to an unpredictable, immortal sorcerer so $mc.they can steal a magical weapon for the Crown. You can feel the talisman&#39;s pouch against your chest, suspended on a cord hidden under your &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;dress&lt;&lt;else&gt;&gt;shirt&lt;&lt;/if&gt;&gt;, but it takes effort not to reach up and touch it, just to be sure it&#39;s there.

Ordinarily, that would be the end of it. Your mother has said her piece, and you are free to go. But now, she lingers, watching you--waiting for something.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Thank you.\&quot;&quot;|6-2mom-h-2.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Farewell, Mother.\&quot;&quot;|6-2mom-h-2.2]]&lt;/li&gt;
&lt;li&gt;[[Hug her.|6-2mom-h-2.3]]&lt;/li&gt;
&lt;li&gt;[[Just leave.|6-2mom-h-2.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="292" name="6-2mom-h-2.1" tags="draft" position="5400,1325" size="100,100">&quot;Thank you,&quot; you &lt;&lt;if $nvbook&gt;1&gt;&gt;write&lt;&lt;else&gt;&gt;say&lt;&lt;/if&gt;&gt;, unwilling to quite &lt;&lt;if $nvbook&gt;1&gt;&gt;write&lt;&lt;else&gt;&gt;say&lt;&lt;/if&gt;&gt; farewell.

She nods, and for a brief moment, her smile turns both genuine and sad. Then, it&#39;s gone, and she gives Hawk a polite parting nod before she returns to her seat.

&lt;&lt;include [[6-2mom-h-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="293" name="6-2mom-h-2.2" tags="draft" position="5500,1325" size="100,100">&quot;Farewell, Mother.&quot;

She nods, and for a brief moment, her smile turns both genuine and sad. Then, it&#39;s gone, and she gives Hawk a polite parting nod before she returns to her seat.

&lt;&lt;include [[6-2mom-h-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="294" name="6-2mom-h-2.3" tags="draft" position="5600,1325" size="100,100">You catch a glimpse of shock on your mother&#39;s face before you wrap your arms around her. She returns the hug stiffly, sorely out of practice as she is. When you step back, you see a long-forgotten expression you haven&#39;t seen since you were a child. Eventually, you manage to identify it: fondness. It hurts that you couldn&#39;t remember what it looked like, that it&#39;s taken this to see it again.

Soon enough, the moment fades, and her smile turns both genuine and sad. Then, it&#39;s gone, and she gives Hawk a polite parting nod before she returns to her seat.

&lt;&lt;include [[6-2mom-h-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="295" name="6-2mom-h-2.4" tags="draft" position="5700,1325" size="100,100">You have nothing more to say to her after all she&#39;s done, so you simply turn and leave. &lt;&lt;include [[6-2mom-h-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="296" name="6-2mom-h-3" tags="draft" position="5550,1450" size="100,100">Hawk walks beside you silently as you begin to make your way back to your table.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Fight back tears.|6-2mom-h-3.1]]&lt;/li&gt;
&lt;li&gt;[[Fight back a scream of rage.|6-2mom-h-3.2]]&lt;/li&gt;
&lt;li&gt;[[Remain unaffected.|6-2mom-h-3.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="297" name="6-2mom-h-3.1" tags="draft todo" position="5450,1575" size="100,100">You fight back tears. How did this perfectly tuned disaster happen? It&#39;s all just too much. But you&#39;re not going to cry here.&lt;&lt;include [[6-2mom-h-4]]&gt;&gt;</tw-passagedata><tw-passagedata pid="298" name="6-2mom-h-3.2" tags="draft todo" position="5550,1575" size="100,100">You fight back a scream of rage. You don&#39;t deserve this--being backed into a corner with every option leading to disaster. But you&#39;re not going to lose control here.&lt;&lt;include [[6-2mom-h-4]]&gt;&gt;</tw-passagedata><tw-passagedata pid="299" name="6-2mom-h-3.3" tags="draft" position="5650,1575" size="100,100">Everything about this day--your future--is too much. But you&#39;re keeping it together.&lt;&lt;include [[6-2mom-h-4]]&gt;&gt;</tw-passagedata><tw-passagedata pid="300" name="6-2mom-h-4" tags="draft" position="5550,1700" size="100,100">&lt;&lt;if $pastduty&gt;1&gt;&gt; You have a duty to fulfill first.&lt;&lt;elseif $pastduty&lt;-1&gt;&gt; You haven&#39;t let the weight of your responsibilities crush you before, and you won&#39;t let this time be any different.&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[6-3h-accSPLIT]]&gt;&gt;</tw-passagedata><tw-passagedata pid="301" name="6-3hacc1" tags="draft" position="4875,2100" size="100,100">But before you can reach your destination, your aunt--your mother&#39;s sister--accosts you, placing a hand on your arm. &quot;What a lovely wedding, my dear, just lovely. I remember when you were just a little one running around at your cousins&#39; wedding.&quot; She lets go of your arm and makes to take Hawk&#39;s arm instead, but $ha.they dodge&lt;&lt;hs&gt;&gt; out of the way. After looking up at $ha.them, reality seems to set in that she is not, in fact, in the presence of a human. &quot;Yes, well. I suppose I should let you go. Delightful to see you, dear.&quot; She pats your arm one more time before hurrying away, looking a bit in shock.

Hawk doesn&#39;t remark on the incident as you return to your seats and the next course is placed before you. Meat is a common main dish...

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[...but Isla removed it from the menu. You don&#39;t eat meat.|6-3hacc1-2][$veg=true]]&lt;/li&gt;
&lt;li&gt;[[...and it does feature in today&#39;s menu.|6-3hacc1-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="302" name="6-3hacc2" tags="draft" position="5200,2100" size="100,100">On the way back to your seats, you&#39;re again forced to stop but by a more challenging guest this time: the Duchess of Valewood, wife of a friend of your father. She&#39;s far too important to be at such an irrelevant event on such short notice. She approaches you with a viperous smile on her face&lt;&lt;if $confidence&lt;0&gt;&gt;, and you summon all the willpower you have in order to formally introduce your new $ha.spouse to her&lt;&lt;/if&gt;&gt;.

&lt;&lt;if $nvbook&gt;0&gt;&gt;You only get a few words into writing out an introduction before&lt;&lt;else&gt;&gt;&quot;Your Grace, may I introduce Hawk. Hawk, this is--&quot;

Before you can finish the introduction,&lt;&lt;/if&gt;&gt; you see the disaster happen as if time has slowed, but you&#39;re powerless to stop it. The Duchess extends a gloved hand for Hawk to kiss--the appropriate greeting for someone of her status--and from the way Hawk reaches out, you can already tell $ha.they&#39;&lt;&lt;hve&gt;&gt; misunderstood the gesture. The two of them have the energy of two rams charging at one another, stubborn and challenging, and in $ha.their impulse to meet Lady Valewood head on, Hawk&#39;s abandoned $ha.their hesitancy to shake hands the one time it would have been useful. $ha.They grip&lt;&lt;hs&gt;&gt; her hand like a vise, awkwardly positioned and with what appears to be a dawning realization something has gone very wrong. After a single, overly rigid shake, Hawk drops the Duchess&#39; hand, and the noblewoman&#39;s smile morphs into something more like a sneer. The hope she must have had of turning this into a useful connection is instantly spun into a need to strike out against the indignity she just suffered.

&quot;Congratulations on your wedding. How unfortunate that your father and brother couldn&#39;t be here to see you &lt;i&gt;successfully&lt;/i&gt; married.&quot; It was too much to hope that you could get through the day without a reminder of your previous almost-marriage, but it would have been more bearable coming from someone less transparently vicious. She turns to look Hawk up and down before facing you again. &quot;You should have told me that you couldn&#39;t afford proper attire for the both of you. We would have been more than happy to help you, of course.&quot;

It&#39;s almost impressive that she&#39;s managed to somehow insult a robe possibly worth more than her husband&#39;s duchy, but of course, that&#39;s the point. The indignity of her irrelevance to an immortal being must be too much for such a status-conscious person to bear. Indeed, before you can even put together a response to her insults, she takes a step back, ready to be elsewhere. &quot;I have many others to speak with, so forgive me for cutting our time short. I wish you all the best.&quot; With one more venomous smile, the Duchess makes her exit, skirts billowing dramatically in the summer breeze.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|6-3hacc2-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="303" name="6-3hacc3" tags="draft genderstuff" position="5450,2100" size="100,100">And then, the worst happens.

You didn&#39;t know &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;he&lt;&lt;else&gt;&gt;she&lt;&lt;/if&gt;&gt; was here. Perhaps your mother thought that it was only polite or--less charitably--that it would be worth making sure &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;he&lt;&lt;else&gt;&gt;she&lt;&lt;/if&gt;&gt; saw what &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;he&lt;&lt;else&gt;&gt;she&lt;&lt;/if&gt;&gt; missed.

Your former betrothed approaches, as &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;handsome&lt;&lt;else&gt;&gt;beautiful&lt;&lt;/if&gt;&gt; as ever, though the forced smile plastered on &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;his&lt;&lt;else&gt;&gt;her&lt;&lt;/if&gt;&gt; face marrs the perfection somewhat. At least &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;he&lt;&lt;else&gt;&gt;she&lt;&lt;/if&gt;&gt; had the good sense not to bring &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;his wife&lt;&lt;else&gt;&gt;her husband&lt;&lt;/if&gt;&gt; along to speak with you.

&quot;I wanted to congratulate you on your marriage.&quot; &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;He&lt;&lt;else&gt;&gt;She&lt;&lt;/if&gt;&gt; blatantly avoids looking at Hawk as &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;he&lt;&lt;else&gt;&gt;she&lt;&lt;/if&gt;&gt; speaks. &quot;Thank you for inviting us. You didn&#39;t have to, really, but we thought it was such a kind gesture that we couldn&#39;t not attend. We haven&#39;t really spoken since... since &lt;i&gt;then&lt;/i&gt;, but I wanted to thank you for, well, for everything you did for us.&quot; &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;His&lt;&lt;else&gt;&gt;Her&lt;&lt;/if&gt;&gt; words come out in an obviously pre-scripted but sincere rush. &quot;I know it was a terrible thing I did to you. The engagement was a terrible mistake. I was in love with &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;her&lt;&lt;else&gt;&gt;him&lt;&lt;/if&gt;&gt; for so long you know? And you and your family could have truly ruined us, but you didn&#39;t. So... thank you. Our little girl is the best thing that&#39;s ever happened to us, and we&#39;re so happy together.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I&#39;m glad for you.\&quot;&quot;|6-3hacc3.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Stop talking.\&quot;&quot;|6-3hacc3.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Piss off.\&quot;&quot;|6-3hacc3.3]]&lt;/li&gt;
&lt;li&gt;[[Just cry.|6-3hacc3.4]]&lt;/li&gt;
&lt;li&gt;[[Just scream.|6-3hacc3.5]]&lt;/li&gt;
&lt;li&gt;[[Just walk away.|6-3hacc3.6]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="304" name="6-3hacc1-2" tags="draft" position="4875,2200" size="100,100">&lt;&lt;if $veg&gt;&gt;Meat is a common main dish, but Isla removed it from the menu since you don&#39;t eat meat. Although Hawk mostly seems to be absently pushing the food around, at least $ha.they can eat it if they want.

&quot;There isn&#39;t any meat in it,&quot; you &lt;&lt;if $nvbook&gt;0&gt;&gt;write&lt;&lt;else&gt;&gt;say&lt;&lt;/if&gt;&gt;.

&quot;I know.&quot;&lt;&lt;else&gt;&gt;Meat is a common main dish, and it does feature in today&#39;s menu. You didn&#39;t think to remove it, but Hawk is taking care of that for you as they pluck all the pieces of meat out of the dish.

&quot;&lt;&lt;if hasVisited(&quot;6-2is-h&quot;)&gt;&gt;Sorry. I didn&#39;t know that you don&#39;t eat meat&lt;&lt;else&gt;&gt;You don&#39;t eat meat?&quot; $ha.They shake&lt;&lt;hs&gt;&gt; $ha.their head.&quot;Sorry. I didn&#39;t know&lt;&lt;/if&gt;&gt;,&quot; you &lt;&lt;if $nvbook&gt;0&gt;&gt;write&lt;&lt;else&gt;&gt;say&lt;&lt;/if&gt;&gt;.

$ha.They shrug&lt;&lt;hs&gt;&gt;.&lt;&lt;/if&gt;&gt;

The meal passes in silence for another few minutes before Hawk speaks: &quot;We need to leave after the last course.&quot;

&quot;Why?&quot;

&quot;I have business to attend to.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;We can&#39;t stay for one dance?\&quot;&quot;|6-3hacc1-2.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;At least that&#39;s an excuse to avoid dancing.\&quot;&quot;|6-3hacc1-2.2]]&lt;/li&gt;
&lt;li&gt;[[Just nod.|6-3hacc1-2.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="305" name="6-3hacc2-2" tags="draft" position="5200,2200" size="100,100">&quot;Charming.&quot; Hawk gestures toward your small table, and you unfreeze from the odd confrontation and walk beside $ha.them back to your seats. &quot;Not sure what purpose there was in insulting your clothes. There&#39;s nothing wrong with them.&quot;

&quot;She was trying to insult &lt;i&gt;your&lt;/i&gt; clothes, not mine.&quot;

Hawk scoffs. &quot;Even less purpose, then. Why would I care?&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;&lt;if $three.robe||hasVisited(&quot;5-1q.box&quot;)&gt;&gt;&lt;li&gt;[[&quot;\&quot;I wish I could have worn your gift.\&quot;&quot;|6-3hacc2-2.1]]&lt;/li&gt;
&lt;&lt;/if&gt;&gt;&lt;li&gt;[[&quot;\&quot;I won&#39;t miss her.\&quot;&quot;|6-3hacc2-2.2]]&lt;/li&gt;
&lt;li&gt;[[Stay quiet.|6-3hacc2-3][$ha.silent+=1]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="306" name="6-3hacc3.1" tags="draft genderstuff" position="5350,2225" size="100,100">&lt;&lt;set $kind+=1&gt;&gt;&quot;I&#39;m glad for you.&quot;

&lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;He&lt;&lt;else&gt;&gt;She&lt;&lt;/if&gt;&gt; gives you a dazzling smile, &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;his&lt;&lt;else&gt;&gt;her&lt;&lt;/if&gt;&gt; relief obvious. &quot;I won&#39;t keep you, then. I hope  your marriage will be just as happy.&quot; Still avoiding even a single glance at Hawk, &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;he&lt;&lt;else&gt;&gt;she&lt;&lt;/if&gt;&gt; departs as abruptly as &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;he&lt;&lt;else&gt;&gt;she&lt;&lt;/if&gt;&gt; arrived.

You resume your course back to your seat &lt;&lt;include [[6-3hacc3-JOIN]]&gt;&gt;</tw-passagedata><tw-passagedata pid="307" name="6-3hacc3.2" tags="draft genderstuff" position="5450,2225" size="100,100">&quot;Stop talking.&quot;&lt;&lt;if $nvbook&gt;0&gt;&gt; You thrust your book toward them with force.&lt;&lt;/if&gt;&gt;

&lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;He&lt;&lt;else&gt;&gt;She&lt;&lt;/if&gt;&gt; deflates, clearly not expecting this turn of events. &quot;I won&#39;t keep you, then. I hope your marriage will be just as happy.&quot; Still avoiding even a single glance at Hawk, &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;he&lt;&lt;else&gt;&gt;she&lt;&lt;/if&gt;&gt; departs as abruptly as &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;he&lt;&lt;else&gt;&gt;she&lt;&lt;/if&gt;&gt; arrived.

You resume your course back to your seat &lt;&lt;include [[6-3hacc3-JOIN]]&gt;&gt;</tw-passagedata><tw-passagedata pid="308" name="6-3hacc3.3" tags="draft genderstuff" position="5550,2225" size="100,100">&quot;Piss off.&quot;&lt;&lt;if $nvbook&gt;0&gt;&gt; You thrust your book toward them with force.&lt;&lt;/if&gt;&gt;

&lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;His&lt;&lt;else&gt;&gt;Her&lt;&lt;/if&gt;&gt; jaw drops, clearly not expecting this kind of reception. Still avoiding even a single glance at Hawk, &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;he&lt;&lt;else&gt;&gt;she&lt;&lt;/if&gt;&gt; departs as abruptly as &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;he&lt;&lt;else&gt;&gt;she&lt;&lt;/if&gt;&gt; arrived.

You resume your course back to your seat &lt;&lt;include [[6-3hacc3-JOIN]]&gt;&gt;</tw-passagedata><tw-passagedata pid="309" name="6-3hacc3.4" tags="draft" position="5375,2325" size="100,100">&lt;&lt;set $six.react=&quot;cry&quot;&gt;&gt;&lt;&lt;set $ha.soft+=1&gt;&gt;You&#39;ve had enough. You stand rooted to the spot as your tears begin to flow. &lt;&lt;include [[6-3hacc3-notok]]&gt;&gt;</tw-passagedata><tw-passagedata pid="310" name="6-3hacc3.5" tags="draft" position="5475,2325" size="100,100">&lt;&lt;set $six.react=&quot;scream&quot;&gt;&gt;You&#39;ve had enough. You stand rooted to the spot as your scream fills the feasting space. &lt;&lt;include [[6-3hacc3-notok]]&gt;&gt;</tw-passagedata><tw-passagedata pid="311" name="6-3hacc3.6" tags="draft genderstuff" position="5575,2325" size="100,100">You&#39;re quite out of things to say to &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;him&lt;&lt;else&gt;&gt;her&lt;&lt;/if&gt;&gt;, so you turn around and walk away.

You resume your course back to your seat &lt;&lt;include [[6-3hacc3-JOIN]]&gt;&gt;</tw-passagedata><tw-passagedata pid="312" name="6-3hacc1-2.1" tags="draft" position="4775,2325" size="100,100">&lt;&lt;set $six.dan=true&gt;&gt;&quot;We can&#39;t stay for one dance?&quot;

Hawk turns to look at you silently for a moment. &quot;One dance, then we leave.&quot; &lt;&lt;include [[6-3hacc1-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="313" name="6-3hacc1-2.2" tags="draft" position="4875,2325" size="100,100">&quot;At least that&#39;s an excuse to avoid dancing.&quot;

&quot;A terrible fate.&quot; &lt;&lt;include [[6-3hacc1-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="314" name="6-3hacc1-2.3" tags="draft" position="4975,2325" size="100,100">&lt;&lt;set $ha.silent+=1&gt;&gt;You nod. It&#39;s not as if you have any real choice in the matter.

&lt;&lt;include [[6-3hacc1-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="315" name="6-3hacc1-3" tags="draft" position="4875,2450" size="100,100">Seeing that you&#39;ve finished your food, $ha.they rise&lt;&lt;hs&gt;&gt;. &quot;I assume you have more people you need to say farewell to.&quot;

Having your departure moved up by several hours speeds your move toward the next person on your list. It&#39;s only when you&#39;ve nearly reached your target that you realize you don&#39;t know how you&#39;ll be traveling to your new home. &lt;&lt;if $courage&lt;0&gt;&gt;You don&#39;t even want to think about that.&lt;&lt;else&gt;&gt;You&#39;ll have to ask about that later.&lt;&lt;/if&gt;&gt; For now, you catch the attention of:

&lt;&lt;include [[6-1.hSPLIT]]&gt;&gt;</tw-passagedata><tw-passagedata pid="316" name="6-3hacc2-2.1" tags="draft" position="5100,2325" size="100,100">&lt;&lt;set $ha.fond+=1&gt;&gt;&quot;I wish I could have worn your gift.&quot;&lt;&lt;if not $three.letter&gt;&gt;

&quot;You didn&#39;t even open it.&quot;

&quot;I would have if I knew what was in it.&quot;&lt;&lt;/if&gt;&gt;

&quot;Then she would have just attempted to insult both of us. Better that you didn&#39;t.&quot;

&lt;&lt;include [[6-3hacc2-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="317" name="6-3hacc2-2.2" tags="draft" position="5200,2325" size="100,100">&quot;I won&#39;t miss her.&quot;

&quot;Don&#39;t blame you.&quot;

&lt;&lt;include [[6-3hacc2-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="318" name="6-3hacc2-3" tags="draft" position="5225,2450" size="100,100">When the third and largest course is delivered, you can feel time closing in around you. The feast is more than halfway gone. You look out over the tables, taking in the people in attendance--probably the last humans you&#39;ll see for a long time. Even if Hawk has shown glimpses of being a less-than-terrible person, that probably wouldn&#39;t survive long if $ha.they knew your real agenda.

Distracted as you are, Hawk finishes $ha.their course long enough before you do that, when you finally look up, you see $ha.them already watching you. $ha.Their expression is unreadable. &quot;Ready?&quot;

You nod and make your way toward:

&lt;&lt;include [[6-1.hSPLIT]]&gt;&gt;</tw-passagedata><tw-passagedata pid="319" name="6-3hacc3-JOIN" tags="draft" position="5450,2575" size="100,100"> where the fourth course and a pitcher of wine have been set out.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Refrain from drinking.|6-3hacc3-JOIN.1]]&lt;/li&gt;
&lt;li&gt;[[Drink a little.|6-3hacc3-JOIN.2]]&lt;/li&gt;
&lt;li&gt;[[Drink more than you should.|6-3hacc3-JOIN.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="320" name="6-3hacc3-notok" tags="draft genderstuff" position="5375,2450" size="100,100">&lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;He&lt;&lt;else&gt;&gt;She&lt;&lt;/if&gt;&gt; looks on uselessly, clearly not expecting this turn of events.

&quot;Excuse us.&quot; Hawk&lt;&lt;if $fescort&gt;0&gt;&gt; takes your arm and&lt;&lt;/if&gt;&gt; gestures toward your seats, prompting you to dazedly move toward them and leave your former betrothed behind, &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;his&lt;&lt;else&gt;&gt;her&lt;&lt;/if&gt;&gt; mouth still open in shock.

You drop onto your chair and try not to look up at the mass of people you&#39;re certain must all now be staring at you. You keep your eyes fixed on the table &lt;&lt;include [[6-3hacc3-JOIN]]&gt;&gt;</tw-passagedata><tw-passagedata pid="321" name="6-3hacc3-JOIN.1" tags="draft" position="5350,2700" size="100,100">You simply stare at the glittering crystal of your glass.

&lt;&lt;include [[6-3hacc3-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="322" name="6-3hacc3-JOIN.2" tags="draft" position="5450,2700" size="100,100">&lt;&lt;set $six.drink=1&gt;&gt;You pour some wine into your glass and start on it gradually.

&lt;&lt;include [[6-3hacc3-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="323" name="6-3hacc3-JOIN.3" tags="draft" position="5550,2700" size="100,100">&lt;&lt;set $six.drink=2&gt;&gt;You fill your glass and down most of it at once.

&lt;&lt;include [[6-3hacc3-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="324" name="6-3hacc3-2" tags="draft" position="5450,2825" size="100,100">&quot;You alright?&quot; Hawk asks, looking at you intently.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I&#39;m fine.\&quot;&quot;|6-3hacc3-2.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Do I look alright?\&quot;&quot;|6-3hacc3-2.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;No.\&quot;&quot;|6-3hacc3-2.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Can we leave now?\&quot;&quot;|6-3hacc3-2.4]]&lt;/li&gt;
&lt;li&gt;[[Don&#39;t reply.|6-3hacc3-2.5]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="325" name="6-3hacc3-2.1" tags="draft" position="5350,2950" size="100,100">&quot;I&#39;m fine,&quot; you &lt;&lt;if $nvbook&gt;0&gt;&gt;write&lt;&lt;else&gt;&gt;say&lt;&lt;/if&gt;&gt;&lt;&lt;if $six.react==&quot;cry&quot;&gt;&gt;, still trying to stem the flow of tears&lt;&lt;elseif $six.react==&quot;scream&quot;&amp;&amp;$nvbook&lt;1&gt;&gt;, voice still a little hoarse&lt;&lt;/if&gt;&gt;.

Hawk looks at you silently for another moment&lt;&lt;if $six.react&gt;&gt;, clearly not quite buying it&lt;&lt;/if&gt;&gt; before $ha.they nod&lt;&lt;hs&gt;&gt;.

&lt;&lt;include [[6-3hacc3-3stay]]&gt;&gt;</tw-passagedata><tw-passagedata pid="326" name="6-3hacc3-2.2" tags="draft" position="5450,2950" size="100,100">&quot;Do I look alright?&quot; you ask&lt;&lt;if $six.react==&quot;cry&quot;&gt;&gt;, still trying to stem the flow of tears&lt;&lt;elseif $six.react==&quot;scream&quot;&amp;&amp;$nvbook&lt;1&gt;&gt;, voice still a little hoarse&lt;&lt;/if&gt;&gt;.

Hawk looks at you more closely. &quot;&lt;&lt;if $six.react==&quot;cry&quot;||$six.react==&quot;scream&quot;&gt;&gt;Not particularly.&lt;&lt;else&gt;&gt;Yes&lt;&lt;/if&gt;&gt;. &lt;&lt;include [[6-3hacc3-2ASK]]&gt;&gt;</tw-passagedata><tw-passagedata pid="327" name="6-3hacc3-2.3" tags="draft" position="5550,2950" size="100,100">&quot;No,&quot; you &lt;&lt;if $nvbook&gt;0&gt;&gt;write&lt;&lt;else&gt;&gt;say&lt;&lt;/if&gt;&gt;&lt;&lt;if $six.react==&quot;cry&quot;&gt;&gt;, still trying to stem the flow of tears&lt;&lt;elseif $six.react==&quot;scream&quot;&amp;&amp;nvbook&lt;1&gt;&gt;, voice still a little hoarse&lt;&lt;/if&gt;&gt;.

&quot;&lt;&lt;include [[6-3hacc3-2ASK]]&gt;&gt;</tw-passagedata><tw-passagedata pid="328" name="6-3hacc3-2.4" tags="draft" position="5400,3050" size="100,100">&quot;Can we leave now?&quot; you ask&lt;&lt;if $six.react==&quot;cry&quot;&gt;&gt;, still trying to stem the flow of tears&lt;&lt;elseif $six.react==&quot;scream&quot;&amp;&amp;$nvbook&lt;1&gt;&gt;, voice still a little hoarse&lt;&lt;/if&gt;&gt;.

&quot;&lt;&lt;if $six.dan&gt;&gt;What about the dance?&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I want to leave. Now.\&quot;&quot;|6-3hacc3-2.4.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;After the dance, then?\&quot;&quot;|6-3hacc3-2.4.2]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;else&gt;&gt;Yes.&quot;

&lt;&lt;include [[6-3hacc3-3leave]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="329" name="6-3hacc3-2.5" tags="draft" position="5500,3050" size="100,100">&lt;&lt;set $ha.silent+=1&gt;&gt;You &lt;&lt;if $six.react&gt;&gt;aren&#39;t really in a state&lt;&lt;else&gt;&gt;can&#39;t find the will&lt;&lt;/if&gt;&gt; to reply, but Hawk doesn&#39;t look away.

&quot;&lt;&lt;include [[6-3hacc3-2ASK]]&gt;&gt;</tw-passagedata><tw-passagedata pid="330" name="6-3hacc3-3stay" tags="draft" position="5275,3325" size="100,100">You finish eating in silence&lt;&lt;if $six.react&gt;&gt; as you carefully continue not looking up from your food for as long as it takes you to calm yourself&lt;&lt;/if&gt;&gt;. By that time, the musicians have assembled and begun playing to signal that the luncheon is ending, and the time for dancing is beginning. A few people have started to assemble, still on the paved area but out from under the protection of the trellises where they can dance unimpeded. The small group hasn&#39;t yet gathered enough people to create the complex formations expected of formal dancing, so they&#39;ve settled for a few simple ones for the time being.&lt;&lt;if $six.dan&gt;&gt; Hawk looks on, seemingly attempting to catalog their movements. Eventually, deciding $ha.they can no longer put it off, $ha.they rise&lt;&lt;hs&gt;&gt; from $ha.their seat. &quot;&lt;&lt;include [[6-3hacc4-DANCE]]&gt;&gt;&lt;&lt;else&gt;&gt;

Hawk pays them no mind as $ha.they put&lt;&lt;hs&gt;&gt; $ha.their utensils down with a strange degree of finality. &quot;Time to leave.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Can we stay for one dance?\&quot;&quot;|6-3hacc3-3stay.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Let&#39;s go.\&quot;&quot;|6-3hacc3-2ASK.2]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="331" name="6-3hacc3-2ASK" tags="draft" position="5500,3250" size="100,100">$name,&quot; $ha.they say&lt;&lt;hs&gt;&gt;&lt;&lt;if $gendervibes!=&quot;cis&quot;&gt;&gt; quietly&lt;&lt;/if&gt;&gt;, &quot;do you&lt;&lt;if $six.dan&gt;&gt; still&lt;&lt;/if&gt;&gt; want to stay, or should we leave?&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I want to stay.\&quot;&quot;|6-3hacc3-2ASK.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Let&#39;s go.\&quot;&quot;|6-3hacc3-2ASK.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="332" name="6-3hacc3-2.4.1" tags="draft" position="5275,3175" size="100,100">&quot;I want to leave. Now.&quot;

&lt;&lt;include [[6-3hacc3-3leave]]&gt;&gt;</tw-passagedata><tw-passagedata pid="333" name="6-3hacc3-2.4.2" tags="draft" position="5375,3175" size="100,100">&quot;After the dance, then?&quot;

&quot;Very well.&quot;

&lt;&lt;include [[6-3hacc3-3stay]]&gt;&gt;</tw-passagedata><tw-passagedata pid="334" name="6-3hacc3-3leave" tags="draft" position="5200,4250" size="100,100">Without another word, $ha.they stand&lt;&lt;hs&gt;&gt; and lead&lt;&lt;hs&gt;&gt; the way back to one of the pavillion&#39;s corridors, out of sight of the feast.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|6-3hacc3-5]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="335" name="6-3hacc3-2ASK.1" tags="draft" position="5425,3375" size="100,100">&quot;I want to stay.&quot;

&quot;Very well.&quot;

&lt;&lt;include [[6-3hacc3-3stay]]&gt;&gt;</tw-passagedata><tw-passagedata pid="336" name="6-3hacc3-2ASK.2" tags="draft" position="5675,3350" size="100,100">&quot;Let&#39;s go.&quot;

&lt;&lt;include [[6-3hacc3-3leave]]&gt;&gt;</tw-passagedata><tw-passagedata pid="337" name="6-3hacc4-DANCE" tags="draft" position="5100,3600" size="100,100">&lt;&lt;set $six.stay=true&gt;&gt;Shall we?&quot; $ha.they ask&lt;&lt;hs&gt;&gt;, misery dripping from $ha.their voice.

&lt;&lt;if $fescort==1&gt;&gt;$ha.They escort&lt;&lt;hs&gt;&gt; you&lt;&lt;elseif $fescort==2&gt;&gt;You escort $ha.them&lt;&lt;else&gt;&gt;You walk together&lt;&lt;/if&gt;&gt; to join the group of dancers, and you can feel the side of your body nearest $ha.them getting colder as you approach.

&quot;I don&#39;t know how this works,&quot; $ha.they hiss&lt;&lt;hes&gt;&gt; now that you&#39;ve made it close enough to the group that you can&#39;t retreat without seeming impolite. One line of dancers ducks under the other line&#39;s raised arms before spinning out from under them in near-perfect time with the music.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Neither do I.\&quot;&quot;|6-3hacc4-DANCE.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Too late now.\&quot;&quot;|6-3hacc4-DANCE.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;ll teach you.\&quot;&quot;|6-3hacc4-DANCE.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Please let me have this.\&quot;&quot;|6-3hacc4-DANCE.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="338" name="6-3hacc3-3stay.1" tags="draft" position="5250,3450" size="100,100">&quot;Can we stay for one dance?&quot;

&quot;I didn&#39;t think you wanted to.&quot;

&quot;I changed my mind.&quot;

$ha.They sigh&lt;&lt;hs&gt;&gt; and rise&lt;&lt;hs&gt;&gt; from $ha.their seat. &quot;Fine. &lt;&lt;include [[6-3hacc4-DANCE]]&gt;&gt;</tw-passagedata><tw-passagedata pid="339" name="6-3hacc4-DANCE.1" tags="draft" position="4950,3725" size="100,100">&quot;Neither do I.&quot;

$ha.They roll&lt;&lt;hs&gt;&gt; $ha.their eyes. &quot;Perfect.&quot;&lt;&lt;if $six.drink==2&gt;&gt; After a quick look over you, $ha.they ask&lt;&lt;hs&gt;&gt;, &quot;Are you up to this?&quot;

The alcohol has definitely started to make its effects known, but you can probably get through this. &quot;I&#39;m fine.&quot; You hope.&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[6-3hacc4-DANCE-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="340" name="6-3hacc4-DANCE.2" tags="draft" position="5050,3725" size="100,100">&quot;Too late now.&quot;

&quot;How encouraging.&quot;&lt;&lt;if $six.drink==2&gt;&gt; $ha.They take&lt;&lt;hs&gt;&gt; a quick look over you. &quot;Are you up to this?&quot;

The alcohol has definitely started to make its effects known, but you can probably get through this. &quot;I&#39;m fine.&quot; You hope.&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[6-3hacc4-DANCE-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="341" name="6-3hacc4-DANCE.3" tags="draft" position="5150,3725" size="100,100">&quot;I&#39;ll teach you.&quot;

&quot;&lt;&lt;if $six.drink==2&gt;&gt;Are you capable of that right now?&quot;

The alcohol has definitely started to make its effects known, but you can probably get through this. &quot;I&#39;m fine.&quot; You hope.&lt;&lt;else&gt;&gt;I&#39;m not optimistic.&quot;&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[6-3hacc4-DANCE-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="342" name="6-3hacc4-DANCE.4" tags="draft" position="5250,3725" size="100,100">&quot;Please let me have this.&quot;

&quot;We stayed, didn&#39;t we?&quot;&lt;&lt;if $six.drink==2&gt;&gt; $ha.They take&lt;&lt;hs&gt;&gt; a quick look over you. &quot;Are you up to this?&quot;

The alcohol has definitely started to make its effects known, but you can probably get through this. &quot;I&#39;m fine.&quot; You hope.&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[6-3hacc4-DANCE-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="343" name="6-3hacc4-DANCE-2" tags="draft" position="5100,3850" size="100,100">&lt;&lt;if $attraction!=&quot;aa&quot;&gt;&gt;&lt;&lt;set $ha.spark+=1&gt;&gt;&lt;&lt;/if&gt;&gt;The first song flows smoothly into the next, and $ha.they do&lt;&lt;hes&gt;&gt;n&#39;t seem to even noticed it&#39;s time to join the dance. You take $ha.their hand and pull $ha.them into the growing assemblage of dancers. Mercifully, it isn&#39;t a difficult dance.&lt;&lt;if $six.drink==2&gt;&gt; You probably couldn&#39;t handle anything more complicated than this with the way the wine is making your head swim.&lt;&lt;/if&gt;&gt; Pulling $ha.them into the formation, you take both $ha.their hands in yours as you stand across from $ha.them. The two lines of dancers face one another, standing nearly shoulder to shoulder--except for the dancers to Hawk&#39;s left and right who almost instinctively give $ha.them a wide berth. You raise your arms to form a long arch with the rest of the line&lt;&lt;if $height&lt;3&gt;&gt;--though Hawk lifts $ha.theirs only slightly to avoid lifting you off the floor--&lt;&lt;else&gt;&gt; &lt;&lt;/if&gt;&gt;and wait for your turn to hurry under the long arch of people to the end of the line.

Even as the seconds tick by, you feel no warmth from their hands through your gloves. The people standing beside $ha.them breathe quickly from the warmth of the afternoon and the exertion of the first dance, but Hawk&#39;s breaths come slowly and at irregular intervals, no more than twice a minute. The vibrance of human life surrounding $ha.them stands out against $ha.their stillness like a cloud of noisy jays flocking around an ancient pine.

Though you occasionally glance toward the front of the line to see how quickly it&#39;s approaching, Hawk never looks away from you. Yet when it&#39;s your turn, $ha.they move&lt;&lt;hs&gt;&gt; before you do, letting go of one of your hands and ducking under the other dancers&#39; raised arms with &lt;&lt;if $height&gt;3&gt;&gt;far more grace than you manage&lt;&lt;else&gt;&gt;unnatural grace&lt;&lt;/if&gt;&gt;. When you emerge on the other side, $ha.they immediately take&lt;&lt;hs&gt;&gt; both your hands once again and raise&lt;&lt;hs&gt;&gt; them to what you&#39;re fairly certain is precisely the same height as before.&lt;&lt;if $six.drink==2&gt;&gt; The speed of it all is making your head spin terribly, and as you start to list to one side, $ha.they tighten&lt;&lt;hs&gt;&gt; $ha.their grip to hold you upright.&lt;&lt;/if&gt;&gt;

When the last few dancers make their way through, archway disappears as the pairs break apart to dance on their own for a time. Hawk stands frozen until you...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;...place your hand on &quot;+$ha.their+&quot; upper back.&quot;|6-3hacc4-DANCE-2.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;...place your hand on &quot;+$ha.their+&quot; shoulder.&quot;|6-3hacc4-DANCE-2.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="344" name="6-3hacc4-DANCE-2.1" tags="draft" position="5050,3975" size="100,100">You place your hand on $ha.their upper back, leading $ha.them into the next part of the dance&lt;&lt;if $six.drink==2&gt;&gt; even as your head pounds&lt;&lt;/if&gt;&gt;.&lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt; You&#39;re pushing the bounds of propriety to be sure, but given that you may never see these people again, why should it matter?&lt;&lt;/if&gt;&gt; &lt;&lt;include [[6-3hacc4-DANCE-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="345" name="6-3hacc4-DANCE-2.2" tags="draft" position="5150,3975" size="100,100">You place your hand on $ha.their shoulder, trying to subtly prompt $ha.them into the next part of the dance&lt;&lt;if $six.drink==2&gt;&gt; even as your head pounds&lt;&lt;/if&gt;&gt;.&lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt; You&#39;re pushing the bounds of propriety to be sure, but given that you may never see these people again, why should it matter?&lt;&lt;/if&gt;&gt; &lt;&lt;include [[6-3hacc4-DANCE-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="346" name="6-3hacc4-DANCE-3" tags="draft" position="5100,4100" size="100,100">Hawk clearly doesn&#39;t know the steps, but to an observer who had never seen this particular dance before, it may very well look like $ha.they do&lt;&lt;hes&gt;&gt;. $ha.They follow&lt;&lt;hs&gt;&gt; your movements without difficulty, gliding smoothly through each turn despite the heavy fabric of $ha.their robe. Eventually, $ha.they seem&lt;&lt;hs&gt;&gt; to have identified a pattern in the steps, steadily picking up confidence until $ha.their movements are more connected and precise than your own&lt;&lt;if $six.drink==2&gt;&gt;--though that isn&#39;t a difficult feat at the moment. At least $ha.they&#39;&lt;&lt;hre&gt;&gt; keeping you upright&lt;&lt;/if&gt;&gt;.

This time, when the song ends, $ha.they notice&lt;&lt;hs&gt;&gt; and immediately lead you away from the floor though there&#39;s no real pause in the music. &quot;We have to go. We&#39;ll pick up your things first.&quot; &lt;&lt;include [[6-3hacc3-3leave]]&gt;&gt;</tw-passagedata><tw-passagedata pid="347" name="6-3hacc3-5" tags="draft" position="5200,4375" size="100,100">Hawk reaches into a pocket in $ha.their robe and pulls out what appears to be a leafless twig. $ha.They hold&lt;&lt;hs&gt;&gt; it out to you, and you see a line of tiny symbols carved into the wood. &quot;Think of your house and snap this in half. It will get us there faster than a carriage&lt;&lt;if $six.stay&gt;&gt;, and we don&#39;t have time to waste&lt;&lt;/if&gt;&gt;.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Is it dangerous?\&quot;&quot;|6-3hacc3-5.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;d prefer a carriage.\&quot;&quot;|6-3hacc3-5.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I don&#39;t know how to use magic.\&quot;&quot;|6-3hacc3-5.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;You&#39;re joking, right?\&quot;&quot;|6-3hacc3-5.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="348" name="6-3hacc3-5.1" tags="draft" position="5050,4500" size="100,100">&quot;Is it dangerous?&quot;

&quot;Can you picture or otherwise recall the feeling of being in your home?&quot;

&quot;Yes.&quot;

&quot;Is it less than an hour away by carriage?&quot;

&quot;Yes.&quot;

&quot;Then, no, it&#39;s not dangerous.&quot;

&lt;&lt;include [[6-3hacc3-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="349" name="6-3hacc3-5.2" tags="draft" position="5150,4500" size="100,100">&quot;I&#39;d prefer a carriage.&quot;

&quot;I&#39;m sure you would, but it&#39;s a waste of time we can&#39;t afford.&quot;

&lt;&lt;include [[6-3hacc3-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="350" name="6-3hacc3-5.3" tags="draft" position="5250,4500" size="100,100">&quot;I don&#39;t know how to use magic.&quot;

&quot;Then it&#39;s good breaking a twig doesn&#39;t require any.&quot;

&lt;&lt;include [[6-3hacc3-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="351" name="6-3hacc3-5.4" tags="draft" position="5350,4500" size="100,100">&quot;You&#39;re joking, right?&quot;

&quot;No. Why would I joke about this?&quot;

&lt;&lt;include [[6-3hacc3-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="352" name="6-3hacc3-6" tags="draft endscene" position="5200,4625" size="100,100">Hawk looks at you wordlessly until you take the twig from $ha.them. Aside from the carved runes, nothing about it seems anything but ordinary. The heirloom clock in your mother&#39;s sitting room encompasses almost your entire contact with magic. Its elaborate construction and dysfunctional ticking make this situation seem almost farcical: like sitting on a plank of wood and expecting to bring you across town like a carriage.

&quot;&lt;&lt;if $ha.soft&gt;0&gt;&gt;It&#39;s perfectly safe.&lt;&lt;else&gt;&gt;It&#39;s not going to do anything if you just stare at it.&lt;&lt;/if&gt;&gt;&quot;

What&#39;s the worst that could happen? You &lt;&lt;if $optimist&gt;0&gt;&gt;look foolish for breaking an ordinary twig&lt;&lt;else&gt;&gt;botch this and end up a wet smear of viscera trying to teleport to three places at once&lt;&lt;/if&gt;&gt;? You&#39;re surely in for worse over the course of this marriage, but it would be preferable to at least attempt to get this first test right. You close your eyes and focus on the thought of being back in the only home you&#39;ve ever known. The one you&#39;ll be leaving, &lt;&lt;if $confidence&gt;0&gt;&gt;possibly&lt;&lt;else&gt;&gt;probably&lt;&lt;/if&gt;&gt; forever.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[You snap the twig.|7-0]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="353" name="7-0" tags="draft startscene autosave" position="6000,100" size="100,100">&lt;&lt;set $cursc=7&gt;&gt;&lt;&lt;set $subt.loc=&quot;Home&quot;&gt;&gt;&lt;&lt;notify&gt;&gt;Autosave complete!&lt;&lt;/notify&gt;&gt;A fierce wind whirls around you and sweeps the floor out from under you. You keep your eyes closed to shield them from the roaring air, but the illumination of daylight beyond your eyelids is gone. You&#39;re suspended in the dark vortex for a few terrifying moments before your feet hit a hard floor as you launch toward it at a strange angle. Your legs fold under you as your eyes flash open. &lt;&lt;if $touch&gt;&gt;Before you hit the floor, someone grabs your shoulders and eases your descent before releasing you&lt;&lt;else&gt;&gt;The pain of your knees hitting the floor brings you back to reality&lt;&lt;/if&gt;&gt;.

You&#39;re home. You made it. The entrance hall is still a bit hazy as the dizziness fades and your vision clears. Thankfully, you don&#39;t seem to have startled any servants with your arrival. You can still see sunlight outside the windows, and the functioning mundane clock near the staircase indicates that it isn&#39;t even two in the afternoon yet. If any time has passed since you broke the twig, it isn&#39;t much.

As you&#39;re trying to recover, Hawk takes a step forward from behind you. &quot;No need to get up. Just tell me where-- Ah, those are your things?&quot; $ha.They gesture&lt;&lt;hs&gt;&gt; to an assortment of luggage piled up against the wall and out of the way.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[You have a lot of things to bring with you.|7-0.1]]&lt;/li&gt;
&lt;li&gt;[[You have few things to bring with you.|7-0.2]]&lt;/li&gt;
&lt;li&gt;[[You have a reasonable number of things to bring with you.|7-0.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="354" name="7-0.1" tags="draft" position="5900,225" size="100,100">&lt;&lt;set $luggage=3&gt;&gt;You have a lot of things to bring with you. Since you don&#39;t know when you&#39;ll next be home, you need to make sure you don&#39;t forget anything: clothes, toiletries, books, keepsakes--anything you have any chance of missing.

&quot;Never mind, you will need to get up. I&#39;m not dragging all that over to you. Doubt your family would like me to teleport the whole room with us.&quot;

It takes a moment, but you struggle to your feet and shakily walk over to join Hawk beside your luggage.

&lt;&lt;include [[7-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="355" name="7-0.2" tags="draft genderstuff" position="6000,225" size="100,100">&lt;&lt;set $luggage=2&gt;&gt;You don&#39;t have many things to bring with you. You&#39;ve packed the necessities but no more. Better to travel light and let go of the things you probably won&#39;t need.

Hawk brings the few bags and boxes over to where you remain sitting on the floor, &lt;&lt;if $ax.they==&quot;she&quot;&gt;&gt;skirt pooled around you&lt;&lt;else&gt;&gt;trousers surely smudged with dirt and floor wax&lt;&lt;/if&gt;&gt;.

&lt;&lt;include [[7-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="356" name="7-0.3" tags="draft" position="6100,225" size="100,100">&lt;&lt;set $luggage=1&gt;&gt;You have a reasonable number of things to bring: not too many, not too few. Aside from the basics, you&#39;ve packed a few comforts, too.

Hawk raises $ha.their hand with $ha.their palm facing the bags and boxes before sharply twisting it toward $ha.them, curling $ha.their long fingers inward like a bird&#39;s talons. Your luggage skids wildly across the floor, careening toward you. But before you can scramble away, Hawk turns $ha.their palm back toward them, and they stop instantly a few inches from you.

&lt;&lt;include [[7-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="357" name="7-1" tags="draft" position="6000,350" size="100,100">&quot;I was hoping to do this outside, but,&quot; $ha.they look&lt;&lt;hs&gt;&gt; &lt;&lt;if $luggage&gt;2&gt;&gt;at your vast pile of luggage&lt;&lt;else&gt;&gt;down at where you remain on the floor&lt;&lt;/if&gt;&gt;, &quot;that doesn&#39;t seem viable. How well are your cleaning staff paid?&quot;

You have no idea; your mother handles those matters. Before you can tell $ha.them as much, $ha.they continue&lt;&lt;hs&gt;&gt; speaking anyway.

&quot;Never mind. I&#39;m sure it&#39;s not enough.&quot; $ha.They desposit&lt;&lt;hs&gt;&gt; a small envelope on a side table nearby. &quot;Especially for what I&#39;m about to do.&quot;

$ha.They pull&lt;&lt;hs&gt;&gt; a pouch out of a pocket in $ha.their robe and open&lt;&lt;hs&gt;&gt; it, filling the space with the smell of spent firewood. Walking a circle around you and your belongings, $ha.they pour&lt;&lt;hs&gt;&gt; a thick line of what you expect is wood ash onto the floorboards.&lt;&lt;if $luggage==3&gt;&gt; Since $ha.they can only manage a semicircle on the floor, you cringe as $ha.they draw&lt;&lt;hs&gt;&gt; a line of ash directly atop the highest layer of boxes that touch the wall.&lt;&lt;/if&gt;&gt; Before the shape is fully closed, $ha.they step&lt;&lt;hs&gt;&gt; inside it with you, then complete the last few inches. It&#39;s difficult to tell if the magic is taking effect already, but the space inside the line of ash feels oppressively small. Admittedly, you are packed in there with your&lt;&lt;if $luggage==3&gt;&gt; large quantity of&lt;&lt;/if&gt;&gt; luggage and a very tall sorcerer who&#39;s currently pulling a number of additional items out of $ha.their pockets, and neither of those are helping the crowding sensation.

&quot;Hold this.&quot; Hawk thrusts a large white feather in front of you, and you take it. &quot;And don&#39;t step outside the line.&quot; $ha.They gesture&lt;&lt;hs&gt;&gt; at the &lt;&lt;if $luggage==3&gt;&gt;semi-&lt;&lt;/if&gt;&gt;circle with a sprig of rosemary. &quot;Don&#39;t walk, jump, fall over, or pass out outside the line. First rule of ritual magic.&quot;

A chill runs down your spine.&lt;&lt;if $nvbook&gt;0&gt;&gt; The feather bobs as you hold it and your pen together while you write.&lt;&lt;/if&gt;&gt; &quot;What happens if I do?&quot;

&quot;Nothing catastrophic. Usually. I just have to start over if you do that. I don&#39;t enjoy this particular spell, so I&#39;d recommend not putting me in a situation where I have to cast it multiple times.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Got it.\&quot;&quot;|7-1.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;ll try to faint in the correct direction.\&quot;&quot;|7-1.2]]&lt;/li&gt;
&lt;li&gt;[[Pretend you&#39;re about to cross the line.|7-1.3]]&lt;/li&gt;
&lt;li&gt;[[Nod in understanding.|7-1.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="358" name="7-1.1" tags="draft" position="5850,475" size="100,100">&quot;Got it.&quot;

&quot;Thank you.&quot;

$ha.They &lt;&lt;include [[7-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="359" name="7-1.2" tags="draft" position="5950,475" size="100,100">&lt;&lt;set $ha.ban+=1&gt;&gt;&lt;&lt;set $humor+=1&gt;&gt;&quot;I&#39;ll try to faint in the correct direction.&quot;

The corner of Hawk&#39;s mouth briefly twitches upward. &quot;&lt;&lt;if $ha.ban&gt;0&gt;&gt;See that you do&lt;&lt;else&gt;&gt;I appreciate it&lt;&lt;/if&gt;&gt;.&quot;

$ha.They &lt;&lt;include [[7-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="360" name="7-1.3" tags="draft majorVarSet" position="6050,475" size="100,100">You lurch forward as if you&#39;re about to cross the line, but you&#39;re stopped far short when Hawk steps in front of you.

&lt;&lt;if $luggage&lt;3||$height&lt;4&gt;&gt;$ha.They tower&lt;&lt;hs&gt;&gt; over you, and&lt;&lt;elseif $height&lt;5&gt;&gt;There isn&#39;t much difference in height between you, but&lt;&lt;else&gt;&gt;$ha.They&#39;&lt;&lt;hre&gt;&gt; shorter than you, but&lt;&lt;/if&gt;&gt; the air goes still and cold around you. Ever since you left the feast, the unsettlingly arcane nature of $ha.their mere presence had dissipated until you forgot about it entirely. But it&#39;s returned now with alarming force as your breaths fog in the frigid air.

&lt;&lt;if $angerav&gt;&gt;&lt;&lt;include [[7-1.3.angerav]]&gt;&gt;&lt;&lt;else&gt;&gt;&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Stay where you are.|7-1.3.nangerav]]&lt;/li&gt;
&lt;span class=&quot;split&quot;&gt;&lt;li&gt;[[Shrink into yourself. You don&#39;t handle others&#39; anger well.|7-1.3.angerav]]&lt;/li&gt;&lt;/span&gt;&lt;/ul&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="361" name="7-1.4" tags="draft" position="6150,475" size="100,100">&lt;&lt;set $ha.silent+=1&gt;&gt;You nod in understanding.

&quot;Thank you.&quot;

$ha.They &lt;&lt;include [[7-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="362" name="7-2" tags="draft" position="6000,725" size="100,100">return&lt;&lt;hs&gt;&gt; $ha.their attention to the various things $ha.they&#39;&lt;&lt;hve&gt;&gt; pulled from $ha.their pockets. $ha.They turn&lt;&lt;hs&gt;&gt; slowly in place before stopping sharply as $ha.they face&lt;&lt;hs&gt;&gt; due west. Tearing the rosemary spring apart, $ha.they drop&lt;&lt;hs&gt;&gt; a few needles in each of the four directions and speak quietly in a language you don&#39;t recognize. The words are strange and guttural in a way you don&#39;t think your human voice could replicate, and a sense of unease settles over you until $ha.they go&lt;&lt;hes&gt;&gt; quiet again.

As the eerie sensation fades, Hawk plucks the feather from your grasp and splits it down the middle with a small knife. &quot;This will be easier if you refrain from thinking too much until we arrive. We&#39;ll be between places for longer this time--a few minutes. I suggest you keep your eyes closed.&quot; $ha.They remove&lt;&lt;hs&gt;&gt; a small flask from another pocket and open&lt;&lt;hs&gt;&gt; it, perfuming the air with an unpleasantly potent mixture of herbal scents. $ha.They dump&lt;&lt;hs&gt;&gt; its contents onto the just-waxed wood floor and drag&lt;&lt;hs&gt;&gt; the vane of one feather half through it, making swirling shapes in the sludgy mix of green and brown as it begins to seep into the wood grain. A sickly grey vapor rises from the spreading puddle, and you can feel a faint buzz in your teeth. Hawk hands you the feather section $ha.they coated in whatever it is that&#39;s starting to strip away the varnish on the floor, and a wave of nausea passes through you as you take it, blacking out your vision for a moment.

&quot;It&#39;s time. Don&#39;t let go of that feather, got it?&quot; $ha.They do&lt;&lt;hes&gt;&gt;n&#39;t wait for you to reply before $ha.they clap&lt;&lt;hs&gt;&gt; $ha.their hands together. The sound echoes through your ears like thunder as wind rips through the hall.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Close your eyes|7-3]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="363" name="7-1.3.angerav" tags="draft" position="6025,600" size="100,100">&lt;&lt;set $angerav=true&gt;&gt;&lt;&lt;set $ha.soft+=1&gt;&gt;&lt;&lt;set $knowhaleak=1&gt;&gt;You shrink into yourself as you retreat from the line. You weren&#39;t expecting such a strong reaction from $ha.them. &quot;I&#39;m sorry.&quot; You&#39;re shivering, and not just from the cold.

&quot;No. It&#39;s alright. There are worse things than having to start a ritual again.&lt;&lt;if $luggage&lt;3&gt;&gt;&quot; $ha.They crouch&lt;&lt;hs&gt;&gt; down in front of you but not too near. The room begins to warm, and you can&#39;t feel the ice in your throat anymore. &quot;&lt;&lt;else&gt;&gt; &lt;&lt;/if&gt;&gt;I&#39;m not used to dealing with humans much, and I know my thoughts...&quot; $ha.they gesture as if pulling thoughts out of $ha.their head and into the room, &quot;...leak. I&#39;m sorry. I&#39;ll do better. I can explain later if you wish, but for now, I do need to get us home.&quot;

When you don&#39;t make any further moves toward the ash line, $ha.they &lt;&lt;include [[7-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="364" name="7-1.3.nangerav" tags="draft" position="6125,600" size="100,100">&lt;&lt;set $nangav+=1&gt;&gt;&quot;Don&#39;t.&quot; $ha.They do&lt;&lt;hes&gt;&gt;n&#39;t need to raise $ha.their voice. The message is already clear.

When you don&#39;t make any further moves toward the ash line, the room begins to warm, and $ha.they &lt;&lt;include [[7-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="365" name="7-3" tags="draft" position="6000,825" size="100,100">&lt;&lt;set $subt.month=&quot;&quot;&gt;&gt;&lt;&lt;set $subt.loc=&quot;BETWEEN&quot;&gt;&gt;The wind claws at you as the light vanishes, and the rushing air is deafening. Rather than floating in a void, this time, you&#39;re dragged through the darkness, spun and twisted in all directions as the Four Winds seem to fight for possession of you.

Your mind screams at you to do something, &lt;i&gt;anything&lt;/i&gt; to stop what&#39;s happening, but it also can&#39;t seem to decide what wouldn&#39;t make this worse. Perhaps this is what it feels like to be caught up in a tornado, praying to return to solid ground without your bones being shattered when you get there. But at least that imparts some sense of an end--one way or another. You clutch the feather tightly, hoping it will eventually get you to a destination where &lt;i&gt;something&lt;/i&gt; exists.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[The darkness doesn&#39;t end.|7-4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="366" name="7-4" tags="draft" position="6000,925" size="100,100">The minutes stretch on as you spiral helplessly through the dark, wind roaring in your ears as if attempting to dislodge the contents of your skull.&lt;&lt;if $humor&gt;0||$ha.ban&gt;0&gt;&gt; If you eventually arrive somewhere and splatter onto the ground, at least you&#39;ll never have to do this again.&lt;&lt;/if&gt;&gt; You&#39;re not even sure if you&#39;re panicked or calm--you&#39;ve forgotten what normal feels like already.

Eventually, as you begin to feel an eternity of this stretching out before you, you give up trying to fight through the overwhelming sensations. You simply exist, thoughts draining from your mind as you run out of the energy to hold them there. You&#39;re nothing more than a brittle leaf swept up in the churning waters of a storm-swollen river. A part of something that is essentially &lt;i&gt;you&lt;/i&gt; begins to break away like a tree trunk split by lightning. It cracks off and begins to drift out of reach, leaving what&#39;s left of your mind cold, still, and slow.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Then, the wind stops.|7-5]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="367" name="7-5" tags="draft" position="6000,1025" size="100,100">&lt;&lt;set $subtitle=&quot;Late Summer: A Pine Forest?&quot;&gt;&gt;The piece of yourself you were beginning to lose snaps back into your skull as your knees hit the grass. You feel yourself tip forward, and you remember the sensation of being on the ground as your cheek hits it. The recollection of corporeal existence returns only in disorienting waves.

You&#39;re cold.

You&#39;re damp.

You&#39;re alive, somehow.

You&#39;re about to...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...make sure Hawk becomes no longer alive.|7-5.1]]&lt;/li&gt;
&lt;li&gt;[[...be sick. Right now.|7-5.2]]&lt;/li&gt;
&lt;li&gt;[[...lie here all night.|7-5.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="368" name="7-5.1" tags="draft" position="5900,1150" size="100,100">You wobble into a kneeling position and look around for Hawk. You&#39;re going to murder $ha.them. B&lt;&lt;include [[7-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="369" name="7-5.2" tags="draft" position="6000,1150" size="100,100">You struggle upright just enough to lean over and be sick into the wet grass.&lt;&lt;if $six.drink&gt;0&gt;&gt; The wine was a mistake.&lt;&lt;/if&gt;&gt; When you regain shaky control of your body, you look around for Hawk. B&lt;&lt;include [[7-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="370" name="7-5.3" tags="draft" position="6100,1150" size="100,100">You make your peace with the fact that your clothes are starting to soak through and close your eyes again. There&#39;s nothing left in you but an exhaustion that can only be filled by sleep--possibly several days&#39; worth. But before your consciousness leaves you, the sensation of a rock digging into your ribs knocks you back into waking. You open your eyes and drag yourself partially upright so you can soothe the dent in your side.

You look around for Hawk, b&lt;&lt;include [[7-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="371" name="7-6" tags="draft" position="6000,1275" size="100,100">ut all you see around you is a crowd of ancient pines that stretch toward the grey sky. They offer some shelter from the rain but not enough to keep you dry for long. Between that and the experience you just survived, it doesn&#39;t take long before you&#39;re shivering. As the misery settles into your bones, a wolf howls. As a chorus of more lupine voices joins in, something from deep in your ancestral instinct reminds you that, even if the human species are dangerous predators and conquerors of nature, a single, unarmed human is prey. You haul yourself shakily to your feet and manage to stumble toward the trunk of a huge pine in time to keep yourself upright. Its rough bark scrapes your palms, but you&#39;re too full of survival drive to feel it as anything more than a distant sensation. The sky is too densely clouded to tell where the sun is, but you can hear flowing water nearby. You have no idea where you&#39;re going to or what landmarks to look for, but perhaps a river would at least give you some direction so you don&#39;t stumble in circles until you&#39;re set upon by a pack of wolves.

Staggering from tree to tree across the muddy ground, you make slow progress toward the river until, at last, you can see it through the trees. The water flows quickly within wide banks, and as the trees thin, you can see mountains on the other side of the river, dwarfing the huge pine trees that flow up their sides. When you finally emerge from the trees, the unimpeded rainfall has little left of you to soak through. It&#39;s falling more heavily now, and you squint through its haze in search of anything that would give you direction: a town or tower, any sign of life.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Finally, you see something.|7-7]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="372" name="7-7" tags="draft" position="6000,1375" size="100,100">&lt;&lt;set $subt.month=&quot;Late Summer&quot;&gt;&gt;&lt;&lt;set $subt.loc=&quot;The Spire&quot;&gt;&gt;You mistake it for a small, isolated mountain at first: a spire of jagged black rock that tapers from a wide base into a peak that looms over the nearby river. But then you see the distant specks of warm lantern light where it meets the ground and the hint of a track that follows the river, just past the tree line. The whole sky is painted over with rainclouds, but a small, charcoal-grey stormcloud hovers over the spire&#39;s peak, refusing to travel in time with the rest of the clouds. A lightning strike spears the towering mass of stone, and thunder shakes the ground.

You&#39;re not sure where you expected an Elven sorcerer to live: a castle? a tower? a dilapidated manor? But now that you see it, you&#39;re certain of what it is. And it seems to be your only option for shelter. As you force yourself forward up the path, the spire looms over you, so tall that it makes you dizzy to look up. The trees finally clear not far from the base of the spire, and you see a pair of huge carved stone doors set into a deep alcove in the black rock. The lanterns hanging beside them illuminate the comparatively small figure of Hawk who looks at you impassively as you stumble your way toward the entrance. $ha.They &lt;&lt;hare&gt;&gt; conspicuously dry.

&quot;Your things are already inside,&quot; $ha.they announce&lt;&lt;hs&gt;&gt; as you approach. &quot;I assumed you could handle yourself, but,&quot; $ha.they look&lt;&lt;hs&gt;&gt; at you, muddy, bruised, and drenched, &quot;I guess not.&quot; With a brief gesture from Hawk, the doors swing open just a crack compared to their size, but it makes an opening wide enough for four people to walk through side-by-side. &quot;Not long before sundown. Let&#39;s get inside.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|7-8]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="373" name="7-8" tags="draft" position="6000,1475" size="100,100">As you follow Hawk through the doors, you&#39;re greeted by a colossal cavern whose roof is punctured by a huge cascade of water that falls with crashing force from far above into a pool that takes up much of the floor of the cavern. Two sets of stairs that look to be carved into natural formations in the stone meander upward in different directions, and under and around them, three more lit passages split off on the same level as the cavern floor. Stalactites hang from walkways that ring the waterfall at least fifty feet overhead. Huge cracks in the side of the spire let in rain and streams of pallid light. Your arrival seems to have startled a colony of bats who go streaming from where they were resting under a walkway out the nearest large rock fissure. Their shrill chatter echoes and collides with the waterfall that already fills the cavern with sound.

You only realize Hawk has been trying to draw your attention when $ha.they step&lt;&lt;hs&gt;&gt; in front of you and wave a flat black stone before your eyes. &quot;$name, listen.&quot; The sound of the cascade dulls somewhat, the sheer volume in the cavern suddenly distant and less overwhelming. &quot;This will take you to any floor in the spire that&#39;s safe for you.&quot; The stone is carved with a single spiral. Most of the curve is undisturbed, but starting from the outer end, four hatch marks cut through its outermost portion. Hawk lays the stone in your hand and points to the first hatch. &quot;This is where we are now. If you touch it there with the intent to travel, you will end up right about here.&quot; $ha.They gesture&lt;&lt;hs&gt;&gt; to the floor where you stand near the door. &quot;It only works while you&#39;re inside, and you will move instantly.&quot; $ha.They point&lt;&lt;hs&gt;&gt; to the third mark from the end. &quot;This is where your room is as well as the kitchen and everything else you&#39;ll need. We can talk about the rest tomorrow. For now, touch the mark for your floor and think of moving upward.&quot; When you hesitate, recalling the all-too-recent terror of your last teleportation, $ha.they add&lt;&lt;hs&gt;&gt;, &quot;There&#39;s a hot bath ready for you as well as something to eat and drink if you want it.&quot;

No more convincing is necessary.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Touch the third mark.|7-9]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="374" name="7-9" tags="draft todo" position="6000,1575" size="100,100">When you touch the stone with the thought of a warm bath in your mind, you&#39;re instantly elsewhere. The stone passage you stand in looks naturally formed, but it&#39;s much smaller--the size of a hallway at home. You stand in front of an oddly ordinary wooden door with a wrought iron knob.

&quot;Your room,&quot; Hawk says, having appeared silently beside you. &quot;Go on.&quot;

Forcing yourself to think of becoming warm and dry rather than the idea that you&#39;ll be living in a cave, you open the door.

The first thing you notice is the large bed outfitted with bedclothes in deep blues and greys. Its intricately carved wooden frame stands out against the draped blue curtain that shields it from the stone wall behind the headboard. Side tables stand on either side of the bed, lamps already glowing with warm candlelight. The stone floor is covered with a network of finely woven rugs that span the distance between the bed on the left and the wardrobe on the right. Lanterns suspended on hooks illuminate the fine dark wood of the wardrobe and the matching floor mirror beside it. Opposite the door is a desk, lit by its own lamp and the weak light that falls in through the large windows set into the stone wall above it. A tray of bread and fruit and a pitcher sit waiting on the desk. The things you brought with you are piled &lt;&lt;if $luggage==1&gt;&gt;in one corner of the room&lt;&lt;elseif $luggage==2&gt;&gt;around the corners of the room&lt;&lt;else&gt;&gt;all around the room, starting from the corners and sprawling inward&lt;&lt;/if&gt;&gt;.

Hawk gestures to a door that sits ajar beside the wardrobe. &quot;Your bath is in there. But before that, if you never listen to another thing I say, hear this: Do not wander at night. This spire is very old, and we and the bats are not the only creatures who live here. Most will do you no harm, but some are dangerous.&quot; $ha.They draw&lt;&lt;hs&gt;&gt; your attention to a bolt on the inside of your door. &quot;Never forget to lock your door before dark. Do it as soon as I leave, and don&#39;t remove it until first light. Explore as you wish during the day--I will show you around tomorrow--but it&#39;s been several hours since we left your house. Dusk is coming, and in spite of what you may think, I don&#39;t wish for any harm to come to you. So bolt the door, take your bath, and go to bed. Good night.&quot; Rather than walking away, $ha.they simply vanish&lt;&lt;hes&gt;&gt;, leaving you alone in your room.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|7-10]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="375" name="7-10" tags="draft" position="6000,1675" size="100,100">You shiver from the cold, from the memories of nothingness, from the threat of creatures in the night, from the fact that you&#39;re entirely alone in a room that&#39;s both yours and not yours. You shut the door and lean back against it, reaching up to clutch the pouch around your neck. It would be so much easier to use it, to just leave now and give up on this whole thing. But you think of &lt;&lt;if $motive==&quot;family&quot;&gt;&gt;your family&lt;&lt;elseif $motive==&quot;kingdom&quot;&gt;&gt;the fate of the kingdom&lt;&lt;else&gt;&gt;the path to freedom that lies ahead of you&lt;&lt;/if&gt;&gt;--you can hold out. At least a little longer. You push yourself off the door and bolt it shut before shuffling into the bathroom.

Though the room is small, it&#39;s well lit and well furnished with a bathtub, sink, and toilet--all with running water. Even for wealthy families of your acquaintance, such a setup is an expensive luxury. But from the runes carved into the various handles and spouts, these are almost certainly enchanted rather than using mundane plumbing--not that a large source of water would be difficult to find here. When you manage to strip off your soaked wedding clothes, you realize you&#39;re not sure what to even do with them. You&#39;ve always had servants to attend to things like this.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Leave them on the floor--a problem for later.|7-10.1]]&lt;/li&gt;
&lt;li&gt;[[Clear off a towel bar and put them there.|7-10.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="376" name="7-10.1" tags="draft" position="5950,1800" size="100,100">&lt;&lt;set $seven.clothes=&quot;floor&quot;&gt;&gt;You deposit your clothes on the floor--you&#39;ll deal with them in the morning. Hopefully, you&#39;ll have more energy to figure something out then.

&lt;&lt;include [[7-11]]&gt;&gt;</tw-passagedata><tw-passagedata pid="377" name="7-10.2" tags="draft" position="6050,1800" size="100,100">&lt;&lt;set $seven.clothes=&quot;bar&quot;&gt;&gt;By relocating some towels to the edge of the sink, you make room for your wedding clothes. They probably aren&#39;t supposed to be jammed up against the wall, but it&#39;s better than the floor, right?

&lt;&lt;include [[7-11]]&gt;&gt;</tw-passagedata><tw-passagedata pid="378" name="7-11" tags="draft" position="6000,1925" size="100,100">You finally step into the bath and find it hot but not scalding. There&#39;s a slightly herbal scent to the water, but you can&#39;t place it. Your shivering subsides as the warmth permeates your body, and you eventually summon the energy needed to scrub off the mud and moss.

After spending entirely too long soaking in water that never seems to lose its heat, you finally force yourself to get out and determine which handle will drain the water. You pull every handle but the correct one first, filling the bath with even more hot and cold and lukewarm water before you find the right one, causing the water to instantly vanish instead of draining.

By the time you&#39;re ready to sleep, it feels like you&#39;ve used up a week&#39;s worth of energy rather than a day&#39;s. As you lie down in bed, the reality of your situation hits you in full. This bed is soft, but it isn&#39;t yours. This room is well furnished, but it isn&#39;t yours. Your $ha.spouse is abrasive, to put it mildly, and you have to lock your door so you won&#39;t end up eaten by--

By whatever just growled outside your door.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|7-12]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="379" name="7-12" tags="draft" position="6000,2025" size="100,100">The door shakes on its hinges, and the bolt groans against the force attempting to break through it. You try not to even breathe audibly as the beast outside snarls in frustration at your door. Claws scrape against the stone floor, and it tries once more to push through, meeting the same stubborn resistance as the first time. The rattling and growling seems to go on and on before silence finally returns.

You let out your breath all at once, but you&#39;re rewarded by the sound of something huge slamming against your door so hard that you hear the wood of the doorframe creak. But it doesn&#39;t give. With a great roar of frustration, you hear the beast bound away down the passage.

Your heart pounds in your chest, and the room suddenly feels very small and fragile.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Try to calm down enough to sleep.|7-13.1]]&lt;/li&gt;
&lt;li&gt;[[Cry.|7-13.2]]&lt;/li&gt;
&lt;li&gt;[[Go exploring.|7-13.3]]&lt;/li&gt;
&lt;li&gt;[[Try to stay up all night, just in case.|7-13.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="380" name="7-13.1" tags="draft" position="5850,2150" size="100,100">&lt;&lt;set $seven.feel=1&gt;&gt;You try to slow your breaths and force yourself to believe you&#39;re safe for now. If it couldn&#39;t break through the door, you should at least make it through the night. Right? You close your eyes and pretend you&#39;re home in your own bed, that your sister is down the hall to protect you from nightmares like she did when you were little. You pretend this is just a nightmare, that it will all be gone in the morning.

Eventually, the fear drains away, and you&#39;re left with only the weight of exhaustion that quickly drags you into sleep.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Sleep...|7-demoend]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="381" name="7-13.2" tags="draft" position="5950,2150" size="100,100">&lt;&lt;set $seven.feel=-2&gt;&gt;&lt;&lt;if $six.react&gt;&gt;You thought you&#39;d had enough at the feast--but then, everything &lt;i&gt;else&lt;/i&gt; happened.&lt;&lt;else&gt;&gt;You&#39;ve kept it together so far, but you&#39;ve finally hit your limit.&lt;&lt;/if&gt;&gt; The tears come pouring out before you can stop them, and you&#39;re soon shaking with the weight of everything you&#39;ve endured and everything you have yet to endure. At first, you try to be quiet so the creature won&#39;t be lured back, but eventually, the fear drains away. You&#39;re left with the cloud of &lt;i&gt;too much&lt;/i&gt;, and you give into it until you have no tears left. Finally, the weight of exhaustion that drags you into sleep.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Sleep...|7-demoend]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="382" name="7-13.3" tags="draft" position="6050,2150" size="100,100">&lt;&lt;set $seven.feel=2&gt;&gt;&lt;&lt;set $beastseen=7&gt;&gt;&lt;&lt;set $ha.trust-=1&gt;&gt;&lt;&lt;set $ha.res-=1&gt;&gt;&lt;&lt;set $curiosity+=2&gt;&gt;You&#39;re taking your life into your hands, but you have to know what&#39;s out there. &lt;&lt;if $height&lt;3&gt;&gt;It takes some doing, but y&lt;&lt;else&gt;&gt;Y&lt;&lt;/if&gt;&gt;ou pluck one of the hanging lanterns off its hooks, wrap a robe around yourself, and put a pair of houseshoes from your luggage on before you approach the door. With one last deep breath, you carefully pull back the bolt and open the door as quietly as you can.

The passage outside is pitch black, the lamps you navigated by earlier having apparently been doused. Your lantern&#39;s light casts eerie shadows off the uneven stone walls and ceiling as you cautiously proceed into the darkness. There are more doors set into the same wall as yours, but all of them are locked with only silence audible from inside. The darkness is oppressive, and you&#39;re painfully aware of the fragility of the flame guiding your way. You try not to think about the fact that you have nothing with which to relight it should it go out. The passage seems to go on endlessly, and you wonder if you&#39;ve made a full circuit of a single path around the spire. But then, you see a faint light from around the bend.

You pick up the pace, hopeful that you&#39;ll find something to make this excursion worthwhile even as your weary muscles protest. Finally a staircase comes into view, as wide as the passage as it slopes gently upward toward candlelight beyond. But as you reach the first step, you look up to see a shadow near the top of the stairs, looming over you.

Huge, batlike wings blot out the light above, casting you back into darkness.&lt;&lt;if $skill==&quot;evasion&quot;&gt;&gt; Your immediate instinct is to try and blend back into the shadows of the hall, but you get the sense that it has already noticed you.&lt;&lt;/if&gt;&gt; You hear something wet and viscous drip onto the floor as it turns its head slowly in your direction. It seems bipedal, at first, until it lurches forward, slamming its wings down onto the steps where its talons grind audibly against the stone. The gust of air propelled by the descent of its wings makes you stumble back a step, and in the moment it takes you to recover, the beast has started crawling down the steps toward you at alarming speed.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Run.|7-13.3-2]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="383" name="7-13.4" tags="draft" position="6150,2150" size="100,100">&lt;&lt;set $seven.feel=-1&gt;&gt;You sit up in bed and keep your eyes trained on the door as you try to keep watch for the creature&#39;s return. The desk or wardrobe might slow it down if you pushed them against the door, but even thinking about the exertion needed to do that makes your muscles ache.

Eventually, the fear drains away, and you&#39;re left with only the weight of exhaustion that slows your thoughts and pulls you back and forth between sleeping and waking. It&#39;s no use. You&#39;ve endured too much today to ask your body for any more. Finally, you give in and lie down, hoping you&#39;ll make it until morning.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Sleep...|7-demoend]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="384" name="7-demoend" tags="draft endscene todo" position="6000,2525" size="100,100">&lt;&lt;include [[8-0]]&gt;&gt;</tw-passagedata><tw-passagedata pid="385" name="7-13.3-2" tags="draft" position="6050,2250" size="100,100">Clutching the lantern tightly, instinct takes over as you race down the hall. You hear the creature&#39;s claws scrape against the floor as it skids along the curving path behind you. It slams into the walls, briefly slowing it down each time before it quickly regains speed.

You reach what you hope is the series of doors that includes yours and frantically rattle each locked knob, praying that you didn&#39;t already pass yours. The beast is close enough that you can hear its heavy breaths and the saliva flying from its jaws.

&lt;i&gt;You&#39;re going to die.&lt;/i&gt;

Another locked door.

&lt;i&gt;You&#39;re going to be ripped to pieces.&lt;/i&gt;

Locked.

&lt;i&gt;Shredded.&lt;/i&gt;

Locked.

&lt;i&gt;Eaten.&lt;/i&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|7-13.3-3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="386" name="7-13.3-3" tags="draft" position="6050,2350" size="100,100">&lt;&lt;if $ach.on&gt;&gt;&lt;&lt;set $ach.any=true&gt;&gt;&lt;&lt;set $ach.bat=true&gt;&gt;&lt;&lt;notify&gt;&gt;Achievement unlocked: Like a Bat Out of Hell&lt;&lt;/notify&gt;&gt;&lt;&lt;/if&gt;&gt;You practically fall through your door when it unexpectedly opens, but you hang onto the knob, flinging the lantern into the room as you use both hands to shove the door closed and bolt it. The lantern glass shatters, and the candle is snuffed out, plunging the room into darkness as the beast heaves itself against the door. The hinges creak, and you hear claws rake across the wood mere inches from your flesh as you press all your weight against the door to keep it shut.

Finally, &lt;i&gt;finally&lt;/i&gt;, the door goes still with a roar of frustration from the beast outside. You hear it bound away in the direction it came from, leaving you in peace at last.

There&#39;s just enough moonlight streaming through the windows to see your way around the shards of glass back to the bed. Exhaustion grips you, and as soon as you reach your bed, it pulls you under into darkness.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Sleep...|7-demoend]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="387" name="8-0" tags="draft startscene majorVarSet autosave" position="6600,100" size="100,100">&lt;&lt;set $cursc=8&gt;&gt;&lt;&lt;if $testing&gt;&gt;&lt;&lt;include [[preset_SET]]&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;if $attraction!=&quot;bi&quot;&amp;&amp;$attraction!=&quot;aa&quot;&gt;&gt;&lt;&lt;include [[8-0SH_SET]]&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;notify&gt;&gt;Autosave complete!&lt;&lt;/notify&gt;&gt;You jolt awake from a heavy sleep to someone pounding on your door&lt;&lt;if $six.drink==2&gt;&gt;--though it feels like they&#39;re pounding directly on your skull&lt;&lt;/if&gt;&gt;. That&#39;s the first sign to your clouded brain that you&#39;re not at home–you&#39;ve never been woken by such a racket. The second sign is the weak grey sunlight that hovers around the window, too frail to venture in any farther. Then, the rest of the room comes into view.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[At least, as much as it can before you put on your glasses.|8-1][$glasses=true]]&lt;/li&gt;
&lt;li&gt;[[The room is clear enough without assistance.|8-1]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="388" name="8-1" tags="draft" position="6600,200" size="100,100">&lt;&lt;if $glasses&gt;&gt;You fumble for your glasses on the bedside table. At least you managed to put them safely aside despite your exhaustion&lt;&lt;if $beastseen==7&gt;&gt; and panic&lt;&lt;/if&gt;&gt;.&lt;&lt;/if&gt;&gt; The grey stone walls bow over you, but the slight chill of the room can&#39;t permeate your bones through the warmth of the blanket.

Another knock.

&quot;$name. Breakfast. It&#39;s morning.&quot; Hawk&#39;s voice is softened by the heavy wood of the door.

&lt;&lt;if $nvbook&gt;0&gt;&gt;&lt;&lt;include [[8-2]]&gt;&gt;&lt;&lt;else&gt;&gt;&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Is that what that light means?\&quot;&quot;|8-1.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I know.\&quot;&quot;|8-1.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Is whatever was trying to break my door down gone?\&quot;&quot;|8-1.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;m not getting out of this bed.\&quot;&quot;|8-1.4]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;m getting dressed!\&quot;&quot;|8-1.5]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="389" name="8-1.1" tags="draft" position="6400,325" size="100,100">&lt;&lt;set $humor+=1&gt;&gt;&lt;&lt;set $ha.ban+=1&gt;&gt;&quot;Is that what that light means?&quot;

The sigh is audible through the door. &quot;Hurry up.&quot;

&lt;&lt;include [[8-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="390" name="8-1.2" tags="draft" position="6500,325" size="100,100">&lt;&lt;set $ha.ban+=1&gt;&gt;&quot;I know.&quot;

&quot;Then hurry up.&quot;

&lt;&lt;include [[8-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="391" name="8-1.3" tags="draft" position="6600,325" size="100,100">&quot;Is whatever was trying to break my door down gone?&quot;

&quot;Yes. It doesn&#39;t usually come out during the day.&quot;

&quot;Usually?&quot;

&quot;Usually. So hurry up.&quot;

&lt;&lt;include [[8-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="392" name="8-1.4" tags="draft" position="6700,325" size="100,100">&quot;I&#39;m not getting out of this bed.&quot;

&quot;You need to eat something.&quot;

&lt;&lt;if $six.drink==2&gt;&gt;Despite the wretchedness of your hangover, you probably ought to try and get something down--even if it&#39;s just water&lt;&lt;else&gt;&gt;You &lt;i&gt;are&lt;/i&gt; starting to feel hunger claw at your stomach&lt;&lt;/if&gt;&gt;. &quot;Give me a moment.&quot;

&lt;&lt;include [[8-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="393" name="8-1.5" tags="draft" position="6800,325" size="100,100">&quot;I&#39;m getting dressed!&quot;

&quot;Hurry up.&quot;

&lt;&lt;include [[8-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="394" name="8-2" tags="draft" position="6600,450" size="100,100">You force yourself out of the warmth of your bed&lt;&lt;if $beastseen==7&gt;&gt; and avoid the shattered glass scattered on the floor. You should probably clean that up--or hide it, at least&lt;&lt;/if&gt;&gt;. Deciding on clothes for breakfast shouldn&#39;t be as significant as it feels right now, but at least it&#39;s something you do get to choose.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Wear something nice.|8-2.1][$eight.breakclothes=2]]&lt;/li&gt;
&lt;li&gt;[[Wear everyday clothes.|8-2.1][$eight.breakclothes=1]]&lt;/li&gt;
&lt;li&gt;[[Just put a robe on over what you wore to bed.|8-2.2][$eight.breakclothes=0]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="395" name="8-2.1" tags="draft todo" position="6550,575" size="100,100">You&#39;re about to pull &lt;&lt;if $eight.breakclothes==2&gt;&gt;something nice&lt;&lt;else&gt;&gt;some everyday clothes&lt;&lt;/if&gt;&gt; out of your luggage when you realize that you can wear anything you like. There&#39;s no need to be limited to what would be acceptable to your mother&#39;s standards.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Wear a shirt and trousers.|8-2.1-2][$eight.breakclothesg=1]]&lt;/li&gt;
&lt;li&gt;[[Wear a dress.|8-2.1-2][$eight.breakclothesg=2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="396" name="8-2.2" tags="draft" position="6650,575" size="100,100">You &lt;&lt;if $nvbook&gt;0&gt;&gt;tuck your book and pen into a pocket in your robe and put it on. That will have to be sufficient.&lt;&lt;else&gt;&gt;put on a robe and consider that sufficient.&lt;&lt;/if&gt;&gt;

&lt;&lt;if $beastseen==7&gt;&gt;&lt;&lt;include [[8-2lantern]]&gt;&gt;&lt;&lt;else&gt;&gt;Now that you&#39;re ready for breakfast, you make your way to the door and unbolt it. &lt;&lt;include [[8-3]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="397" name="8-2.1-2" tags="draft" position="6550,675" size="100,100">You put on a &lt;&lt;if $eight.breakclothesg==1&gt;&gt;shirt and trousers&lt;&lt;else&gt;&gt;dress&lt;&lt;/if&gt;&gt;. &lt;&lt;if ($eight.breakclothesg==1&amp;&amp;$ax.gender!=&quot;male&quot;)||($eight.breakclothesg==2&amp;&amp;$ax.gender!=&quot;female&quot;)&gt;&gt;It&#39;s liberating to pick something different from what you&#39;re expected to wear.&lt;&lt;else&gt;&gt;For now, your usual clothes work best for you. Maybe you&#39;ll try something else another day if the mood strikes. Hawk doesn&#39;t seem the type to be bothered by such things.&lt;&lt;/if&gt;&gt;

&lt;&lt;if $beastseen==7&gt;&gt;&lt;&lt;include [[8-2lantern]]&gt;&gt;&lt;&lt;else&gt;&gt;Dressed and ready for the day, you make your way to the door and unbolt it. &lt;&lt;include [[8-3]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="398" name="8-2lantern" tags="draft" position="6450,800" size="100,100">Before you open the door, you should probably address the demolished lantern that&#39;s scattered glass and wax all over the floor. You haven&#39;t heard Hawk move, so trying to actually clean it up is sure to cause a perfectly audible ruckus. You don&#39;t have many other options at the moment, but it&#39;ll be in plain view once you open the door.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Leave it as it is.|8-2lantern.1]]&lt;/li&gt;
&lt;li&gt;[[Cover it with a rug.|8-2lantern.2]]&lt;/li&gt;
&lt;li&gt;[[Carefully clean it up.|8-2lantern.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="399" name="8-3" tags="draft" position="6600,1050" size="100,100">You open the door and are faced with Hawk, standing entirely too close. $ha.They&#39;&lt;&lt;hre&gt;&gt; no longer wearing $ha.their night-sky robe but a loose white shirt–laced at the chest but not tied–and brown trousers hidden below the knee under tall boots. Over that, $ha.they wear&lt;&lt;hs&gt;&gt; a long, sleeveless coat of soft green, tied with a thick, deep brown sash.&lt;&lt;if $skill==&quot;evasion&quot;&gt;&gt;You notice that nothing $ha.they wear&lt;&lt;hs&gt;&gt; appears to be leather–even $ha.their boots are a tightly woven fabric.&lt;&lt;/if&gt;&gt;

For better or worse, $ha.they do&lt;&lt;hes&gt;&gt;n&#39;t seem to notice what you&#39;re wearing at all and instead &lt;&lt;if $beastseen==7&gt;&gt;look past you into the room. &quot;&lt;&lt;if $eight.glass&lt;2&gt;&gt;What&#39;s that?&lt;&lt;else&gt;&gt;What was all the noise?&lt;&lt;/if&gt;&gt;&quot;

&quot;Nothing. I&lt;&lt;if $eight.glass&lt;2&gt;&gt;&#39;ll take care of it later&lt;&lt;else&gt;&gt; took care of it&lt;&lt;/if&gt;&gt;.&quot;

$ha.Their eyes narrow, but $ha.they do&lt;&lt;hes&gt;&gt;n&#39;t press you. &lt;&lt;else&gt;&gt;fix&lt;&lt;hes&gt;&gt; you with $ha.their usual piercing stare. &lt;&lt;/if&gt;&gt;&quot;Food&#39;s downstairs--tower entrance.&lt;&lt;if $attraction==&quot;bi&quot;||$attraction==&quot;aa&quot;&gt;&gt; We have a visitor.

&lt;ul class=&quot;choice split&quot;&gt;&lt;li&gt;[[&quot;\&quot;She has places to be.\&quot;&quot;|8-3-2][$sh.they=&quot;she&quot;]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;He has places to be.\&quot;&quot;|8-3-2][$sh.they=&quot;he&quot;]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;They have places to be.\&quot;&quot;|8-3-2][$sh.they=&quot;they&quot;]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;else&gt;&gt; &lt;&lt;include [[8-3-2]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="400" name="8-2lantern.1" tags="draft" position="6350,925" size="100,100">You step around the fragments of lantern and unbolt the door.

&lt;&lt;include [[8-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="401" name="8-2lantern.2" tags="draft" position="6450,925" size="100,100">&lt;&lt;set $eight.glass=1&gt;&gt;You pull the lantern frame out of the mess and put it back in its place before dragging a faded blue rug over the glass shards and spilled wax. It doesn&#39;t lie anything close to flat, but maybe Hawk won&#39;t notice. You step around the lumpy carpet and unbolt the door.

&lt;&lt;include [[8-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="402" name="8-2lantern.3" tags="draft" position="6550,925" size="100,100">&lt;&lt;set $eight.glass=2&gt;&gt;You pull open the wardrobe and, using one of your less valuable handkerchiefs, you begin picking up the larger glass shards and shoveling them inside as quickly and carefully as you can. As you put one large piece on the pile, they all shift, clinking noisily.

&quot;What are you doing?&quot; Hawk asks.

&quot;Everything&#39;s fine!&quot;

It takes a couple minutes to get all the remains of the lantern into the wardrobe, but when your work is complete, you close the wardrobe and unbolt the bedroom door.

&lt;&lt;include [[8-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="403" name="8-8.1" tags="draft" position="6500,2025" size="100,100">&quot;In this room?&quot;

Hawk tilts $ha.their head, and you see a hint of amusement in $ha.their eyes. &quot;Yes.&quot;

&lt;&lt;if $ha.ban&gt;3||$humor&gt;4&gt;&gt;&lt;&lt;set $ha.ban+=1&gt;&gt;&quot;That&#39;s reassuring.&quot;&lt;&lt;else&gt;&gt;That&#39;s not especially reassuring.&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[8-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="404" name="8-8.2" tags="draft" position="6600,2025" size="100,100">&quot;I don&#39;t believe you&#39;d poison me.&quot;

&quot;I wouldn&#39;t. But you should be more cautious.&quot;

&quot;I&#39;ll keep that in mind.&quot;&lt;&lt;if $ha.ban&gt;3||$humor&gt;4&gt;&gt; You lay on the sarcasm thick enough that it couldn&#39;t be missed.&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[8-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="405" name="8-8.3" tags="draft majorVarSet" position="6700,2025" size="100,100">&lt;&lt;$ha.silent+=1&gt;&gt;You remain silent&lt;&lt;if $ha.silent&gt;=4&amp;&amp;$nvbook&lt;2&gt;&gt;&lt;&lt;set $bookask=true&gt;&gt;, and Hawk tilts $ha.their head to look at you more closely. &quot;I unsettle you.&quot; It&#39;s a statement, but the hint of a question is there. &quot;You don&#39;t need to speak to me if you don&#39;t want to. But I can get you a book to write in if that&#39;s easier. Shall I?&quot;

&lt;ul class=&quot;split&quot;&gt;&lt;li&gt;[[Nod.&quot;|8-8.3.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Please.\&quot;&quot;|8-8.3.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;No. I&#39;m alright.\&quot;&quot;|8-8.3.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;No, thank you. And you don&#39;t unsettle me.\&quot;&quot;|8-8.3.4]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;else&gt;&gt;.

&lt;&lt;include [[8-9]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="406" name="8-8.3.1" tags="draft" position="6650,2150" size="100,100">&lt;&lt;set $nvbook=3&gt;&gt;&lt;&lt;set $ha.soft+=1&gt;&gt;You nod.

&lt;&lt;include [[8-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="407" name="8-8.3.2" tags="draft" position="6750,2150" size="100,100">&lt;&lt;set $nvbook=3&gt;&gt;&lt;&lt;set $ha.soft+=1&gt;&gt;&quot;Please.&quot;

&lt;&lt;include [[8-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="408" name="8-8.3.3" tags="draft" position="6675,2250" size="100,100">&quot;No. I&#39;m alright.&quot;

&quot;Very well.&quot;

&lt;&lt;include [[8-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="409" name="8-10.1" tags="draft" position="6500,2800" size="100,100">&lt;&lt;set $cooking=2&gt;&gt;Pancakes may be a little ambitious, but you could probably concoct something edible. You recall &lt;&lt;if $soren.rel==2||$soren.rel==-1&gt;&gt;an especially messy pancake-based experiment from your childhood when you tried to make chocolate pancakes for Soren when he was bedridden. You wonder if anyone ever managed to get the scorched chocolate off that pan or if it was a total loss.&lt;&lt;else&gt;&gt;an occasion from your childhood when Sabine decided she wanted to learn how to cook by making batch after batch of pancakes. You both thought that, if you meticulously washed every pan and wiped down every flour-covered surface, no one would know you&#39;d been there. But needless to say, the obvious depletion of the pantry was noticed almost immediately.&lt;&lt;/if&gt;&gt; It&#39;s been a while since you&#39;ve tried making pancakes, but least you&#39;ve grown older and wiser since then.&lt;&lt;include [[8-11]]&gt;&gt;</tw-passagedata><tw-passagedata pid="410" name="8-10.2" tags="draft" position="6600,2800" size="100,100">&lt;&lt;set $cooking=1&gt;&gt;Toast would be a viable option--assuming there&#39;s bread somewhere in the room. As a child, you &lt;&lt;if $soren.rel==2||$soren.rel==-1&gt;&gt;managed to make Soren a rather burnt stack of toast one night when he was bedridden. You slathered them in jam in a feeble attempt to hide the scorched parts, but Soren&#39;s lack of criticism was almost certainly due to his politeness rather than any real success in subterfuge. He insisted on eating every slice himself, but you never found out if it was because he was truly that hungry or because he wanted to spare you the suffering of tasting your work&lt;&lt;else&gt;&gt;joined Sabine in her quest to concoct the perfect jam by mixing together other completely adequate jams. You were scolded for being &quot;wasteful&quot; when you tried it at breakfast, so it resulted in yet another nighttime kitchen venture with your sister. You started by making stacks and stacks of mostly burnt toast (&quot;We have to try our new jam in its natural environment!&quot;) and ran out of room in your stomachs before you could get through it all. You never got in trouble for the copious amount of bread you toasted, but maybe the kitchen staff knew hiding the rest in your rooms and having to secretly eat slice after slice of burn, jamless toast was punishment enough&lt;&lt;/if&gt;&gt;. Toast isn&#39;t too ambitious, and you&#39;ve grown older and wiser since you last tried.&lt;&lt;include [[8-11]]&gt;&gt;</tw-passagedata><tw-passagedata pid="411" name="8-10.3" tags="draft" position="6700,2800" size="100,100">&lt;&lt;set $cooking=-1&gt;&gt;You just being in a kitchen is a disaster waiting to happen. As a child, you &lt;&lt;if $soren.rel==2||$soren.rel==-1&gt;&gt;often snuck into the kitchen at night to try making food for Soren who often woke famished after his fevers broke. At best, you made things that only someone as charitable as Soren could describe as &quot;edible.&quot; At worst, you caused varying degrees of bodily and property damage. Eventually, the kitchen staff were forced to prepare food for Soren to eat overnight--just in case he awoke famished--to prevent you from having any excuse to visit destruction upon their workplace&lt;&lt;else&gt;&gt;joined Sabine for many a nighttime venture to the kitchen for countless different food-based schemes. But your sister&#39;s aim was always enjoyment--not the chaos you brought every time you attempted any cooking-related activity.They were all accidents--blackened pans, plumes of soot, flying knives. But eventually, you were relegated to fetching ingredients and providing moral support. Even those were sometimes too much&lt;&lt;/if&gt;&gt;. But surely, it couldn&#39;t be as bad now, right? You&#39;ve grown older and wiser since you last tried to cook.&lt;&lt;include [[8-11]]&gt;&gt;</tw-passagedata><tw-passagedata pid="412" name="8-11" tags="draft" position="6600,2925" size="100,100">&lt;&lt;if $humor&gt;0||$confidence&lt;0&gt;&gt; Hopefully.&lt;&lt;/if&gt;&gt;

Perhaps Hawk can be persuaded to start your tour in the kitchen&lt;&lt;if $cooking&lt;0&gt;&gt;--if you want to risk it&lt;&lt;/if&gt;&gt;. But for now, there are no pans in sight--only the absurd scope of your food delivery. 

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Attempt to start unpacking.|8-11.1]]&lt;/li&gt;
&lt;li&gt;[[Wait for Hawk to return.|8-11.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="413" name="credits" tags="" position="100,625" size="100,100">&lt;div style=&quot;padding:20px 15px&quot;&gt;&lt;ul class=&quot;bltlist&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://twinery.org/&quot; target=&quot;_blank&quot;&gt;Twine&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://vahnya.itch.io/twine-template-ii&quot; target=&quot;_blank&quot;&gt;Theme by Vahnya&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/ChapelR/custom-macros-for-sugarcube-2&quot; target=&quot;_blank&quot;&gt;Custom macros by Chapel&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/cyrusfirheir/cycy-wrote-custom-macros&quot; target=&quot;_blank&quot;&gt;Custom macros by Cycy&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;https://fontawesome.com/&quot; target=&quot;_blank&quot;&gt;Icons by FontAwesome&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="414" name="help" tags="" position="0,625" size="100,100">&lt;div style=&quot;padding:20px 15px&quot;&gt;&lt;b&gt;CHOICE ICONS:&lt;/b&gt;
⇄ = long term effects or split path
↺ = option will loop back to allow more choices
🗨 = new dialog will appear without moving screens
♥ = indicate romantic/physical attraction

&lt;b&gt;TOP BAR ICONS:&lt;/b&gt;
&lt;i class=&quot;fas fa-user&quot;&gt;&lt;/i&gt; = stats/profile
&lt;i class=&quot;fas fa-book&quot;&gt;&lt;/i&gt; = codex/journal
&lt;i class=&quot;fas fa-question&quot;&gt;&lt;/i&gt; = help (you are here!)
&lt;i class=&quot;fas fa-copyright&quot;&gt;&lt;/i&gt; = credits

&lt;i class=&quot;fas fa-chevron-down&quot;&gt;&lt;/i&gt; = open title/mobile menu

&lt;i class=&quot;fas fa-save&quot;&gt;&lt;/i&gt; = save/load
&lt;i class=&quot;fas fa-cog&quot;&gt;&lt;/i&gt; = settings
&lt;i class=&quot;fas fa-undo&quot;&gt;&lt;/i&gt; = restart (this will delete ALL unsaved progress)
&lt;i class=&quot;fas fa-expand-arrows-alt&quot;&gt;&lt;/i&gt; = toggle fullscreen

&lt;b&gt;BOTTOM BAR ICONS:&lt;/b&gt;
&lt;i class=&quot;fas fa-chevron-left&quot;&gt;&lt;/i&gt; = back
&lt;i class=&quot;fas fa-chevron-right&quot;&gt;&lt;/i&gt; = forward&lt;/div&gt;</tw-passagedata><tw-passagedata pid="415" name="cTheFall" tags="codex noreturn" position="0,875" size="100,100">!The Fall

Long ago, in the earliest days of this world, the Winds were whole and perfect in Their unity. But the world They guarded was barren, no more than rock and dust. The Winds wished to see it flourish with life, and so They split off slivers of Themselves to make seas and forests and fields. But even as They looked upon the world, They wished to see it with new eyes and to learn the lessons it might impart. And so, They decided to fragment Themselves so that They might live brief, fragile lives from which They might gather wisdom They could never learn while They kept Their power and perfection.

But They could not leave the world unprotected from those beyond, and so, They first broke off the greatest pieces of Themselves to become guardians of the world. These first great souls made from the Winds were formless beings of the sky, and chief among them was the Seraph who was given command of all their number. Thus, with the world protected, the Winds shattered Themselves into countless mortal souls, protected by the might of the first souls who would later be known to mortals as the Elves.

In those days, the Elves seldom took form and walked among mortals, but those who did came to love them and brought them magic and knowledge unparalleled. For many ages, mortals used the Elves’ gifts with wisdom, but although every mortal soul is a fragment of the Winds, they could not attain the perfection of the whole. They could not foresee the doom they brought upon themselves when they used the knowledge the Elves had given them to break open the shield that protected the world from those beyond.

The mortals pleaded with the Elves to aid them as horrors from worlds unknown destroyed even their greatest kingdoms, but for centuries, no answer came. Those mortals who survived retreated to the wilds, and the greatness of their ancestors became legend, the truth of the past lost to their own hubris.

As the mortals suffered, the Elves grieved. But although many wished to aid the mortals, the Seraph would not permit it. In those days, all Elves were beholden to her authority above all, and no Elves could enter the world to grant mortals even the slightest relief from their suffering. But although the Seraph commanded power over all the Elves, their grief was too great to be born, and many among them sought to break her hold. For centuries, they plotted, and when the time was right, the grieving Elves lured her into her corporeal form, cut the manifold wings from her back, and struck her down. But when they smote the greatest and most luminous of their number, every other Elf fell in turn, their haven in the sky lost to them forever for what they had done.

Yet, an even greater price was to be paid. The Elves had never known free will, and without the steady hand of the Seraph, many fell into depravity. They killed monster and mortal alike, for they did not know good from evil. In time, some learned of goodness and repented of their dark deeds and took up the mantle of guardian once more. But others yet took joy in their vicious power and wished only to hunt mortals or rule them eternally. The lands claimed by the Elves in those days remain in their hands millennia later, and the lands in which mortals live freely are only free out of the benevolence or indifference of the Elves who reside within.

The Winds, in Their perfection, could not conceive of the many foolish deeds of mortals who lived in darkness without the fullness of Their wisdom. So great was the cost of mortal hubris and misuse of the arcane that both mortals and immortals still bear its price. But one day, at the end of time, all shall be made whole once more, and all that was good and evil shall be known. There shall be mortal and immortal no more, only the perfection of the Winds whose wisdom and love will be beyond reckoning.

&lt;span style=&quot;display: block; text-align: center;&quot;&gt;
&lt;&lt;link &quot;« Return to game&quot; $return&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;/span&gt;</tw-passagedata><tw-passagedata pid="416" name="8-0SH_SET" tags="nobr codeonly" position="6700,125" size="100,100">&lt;&lt;if $attraction!=&quot;bi&quot;&amp;&amp;$attraction!=&quot;aa&quot;&gt;&gt;&lt;&lt;switch $ha.they&gt;&gt;
	&lt;&lt;case &quot;she&quot;&gt;&gt;
    	&lt;&lt;set $sh.they=&quot;she&quot;&gt;&gt;
	&lt;&lt;case &quot;he&quot;&gt;&gt;
    	&lt;&lt;set $sh.they=&quot;he&quot;&gt;&gt;
	&lt;&lt;case &quot;they&quot;&gt;&gt;
    	&lt;&lt;set $sh.they=&quot;they&quot;&gt;&gt;
	&lt;&lt;default&gt;&gt;
    	SH PRONOUNS ARE BIG BROKEN, PLS FIX
&lt;&lt;/switch&gt;&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;switch $sh.they&gt;&gt;
	&lt;&lt;case &quot;they&quot;&gt;&gt;
		&lt;&lt;set $sh.gender=&quot;nb&quot;&gt;&gt;
		&lt;&lt;set $sh.person=&quot;person&quot;&gt;&gt;
    	&lt;&lt;set $sh.child=&quot;child&quot;&gt;&gt;
		&lt;&lt;set $sh.betrothed=&quot;betrothed&quot;&gt;&gt;
		&lt;&lt;set $sh.spouse=&quot;spouse&quot;&gt;&gt;
		&lt;&lt;set $sh.Spouse=&quot;Spouse&quot;&gt;&gt;
		&lt;&lt;set $sh.parent=&quot;parent&quot;&gt;&gt;
		&lt;&lt;set $sh.mx=&quot;Mx.&quot;&gt;&gt;
    	&lt;&lt;set $sh.they=&quot;they&quot;&gt;&gt;
		&lt;&lt;set $sh.They=&quot;They&quot;&gt;&gt;
		&lt;&lt;set $sh.them=&quot;them&quot;&gt;&gt;
		&lt;&lt;set $sh.Them=&quot;Them&quot;&gt;&gt;
		&lt;&lt;set $sh.their=&quot;their&quot;&gt;&gt;
		&lt;&lt;set $sh.Their=&quot;Their&quot;&gt;&gt;
		&lt;&lt;set $sh.theirs=&quot;theirs&quot;&gt;&gt;
		&lt;&lt;set $sh.Theirs=&quot;Theirs&quot;&gt;&gt;
		&lt;&lt;set $sh.themself=&quot;themself&quot;&gt;&gt;
		&lt;&lt;set $sh.Themself=&quot;Themself&quot;&gt;&gt;
		&lt;&lt;set $sh.plural=true&gt;&gt;
	&lt;&lt;case &quot;he&quot;&gt;&gt;
		&lt;&lt;set $sh.gender=&quot;masc&quot;&gt;&gt;
		&lt;&lt;set $sh.person=&quot;man&quot;&gt;&gt;
    	&lt;&lt;set $sh.child=&quot;son&quot;&gt;&gt;
		&lt;&lt;set $sh.betrothed=&quot;fiancé&quot;&gt;&gt;
		&lt;&lt;set $sh.spouse=&quot;husband&quot;&gt;&gt;
		&lt;&lt;set $sh.Spouse=&quot;Husband&quot;&gt;&gt;
		&lt;&lt;set $sh.parent=&quot;father&quot;&gt;&gt;
		&lt;&lt;set $sh.mx=&quot;Mr.&quot;&gt;&gt;
    	&lt;&lt;set $sh.they=&quot;he&quot;&gt;&gt;
		&lt;&lt;set $sh.They=&quot;He&quot;&gt;&gt;
		&lt;&lt;set $sh.them=&quot;him&quot;&gt;&gt;
		&lt;&lt;set $sh.Them=&quot;Him&quot;&gt;&gt;
		&lt;&lt;set $sh.their=&quot;his&quot;&gt;&gt;
		&lt;&lt;set $sh.Their=&quot;His&quot;&gt;&gt;
		&lt;&lt;set $sh.theirs=&quot;his&quot;&gt;&gt;
		&lt;&lt;set $sh.Theirs=&quot;His&quot;&gt;&gt;
		&lt;&lt;set $sh.themself=&quot;himself&quot;&gt;&gt;
		&lt;&lt;set $sh.Themself=&quot;Himself&quot;&gt;&gt;
		&lt;&lt;set $sh.plural=false&gt;&gt;
	&lt;&lt;case &quot;she&quot;&gt;&gt;
		&lt;&lt;set $sh.gender=&quot;fem&quot;&gt;&gt;
		&lt;&lt;set $sh.person=&quot;woman&quot;&gt;&gt;
    	&lt;&lt;set $sh.child=&quot;daughter&quot;&gt;&gt;
		&lt;&lt;set $sh.betrothed=&quot;fiancée&quot;&gt;&gt;
		&lt;&lt;set $sh.spouse=&quot;wife&quot;&gt;&gt;
		&lt;&lt;set $sh.Spouse=&quot;Wife&quot;&gt;&gt;
		&lt;&lt;set $sh.parent=&quot;mother&quot;&gt;&gt;
		&lt;&lt;set $sh.mx=&quot;Mrs.&quot;&gt;&gt;
    	&lt;&lt;set $sh.they=&quot;she&quot;&gt;&gt;
		&lt;&lt;set $sh.They=&quot;She&quot;&gt;&gt;
		&lt;&lt;set $sh.them=&quot;her&quot;&gt;&gt;
		&lt;&lt;set $sh.Them=&quot;Her&quot;&gt;&gt;
		&lt;&lt;set $sh.their=&quot;her&quot;&gt;&gt;
		&lt;&lt;set $sh.Their=&quot;Her&quot;&gt;&gt;
		&lt;&lt;set $sh.theirs=&quot;hers&quot;&gt;&gt;
		&lt;&lt;set $sh.Theirs=&quot;Hers&quot;&gt;&gt;
		&lt;&lt;set $sh.themself=&quot;herself&quot;&gt;&gt;
		&lt;&lt;set $sh.Themself=&quot;Herself&quot;&gt;&gt;
		&lt;&lt;set $sh.plural=false&gt;&gt;
	&lt;&lt;default&gt;&gt;
    	SH PRONOUNS ARE BROKEN, PLS FIX
&lt;&lt;/switch&gt;&gt;</tw-passagedata><tw-passagedata pid="417" name="8-4" tags="draft" position="6600,1150" size="100,100">&lt;&lt;set $subt.loc=&quot;Spire Entrance&quot;&gt;&gt;In the exhaustion of yesterday, your brain didn&#39;t have the strength to revolt against the much less offensive teleportation the stone offered. But now, it has more than enough energy to send a pulse of existential horror through you--the sensation of missing not just one but possibly several hundred steps on a familiar set of stairs. But once your mind is able to establish that you are not in immediate danger of meeting your end, you&#39;re able to sluggishly turn its attention to the chamber around you.

Judging by the dim morning light wandering in through the huge open door, you&#39;re in the right place, and presumably the right time, too. A large area around the door is occupied by crates and bags and bushels that you don&#39;t remember from last night. As you approach, you smell fruits, vegetables, cheese, and freshly baked bread. You could feed an army with all this.

You spot Hawk standing by a much shorter person, both of them poring over a small collection of papers laid out on one of the crates. Neither one notices you, absorbed as they are in their task. When you get closer, you see the papers appear to be an accounting of the new contents of the entry hall--almost entirely food--written out in a small, neat hand.

&quot;When is the wedding, exactly?&quot; the stranger asks conversationally as Hawk continues to make $ha.their way down the list.

&quot;Yesterday.&quot;

&quot;Yesterday? Then, the reception is...?&quot;

&quot;Yesterday.&quot;

The stranger&#39;s brow furrows as $sh.they attempt&lt;&lt;ss&gt;&gt; to make sense of Hawk&#39;s responses, and when $sh.they look&lt;&lt;ss&gt;&gt; up, $sh.they spot&lt;&lt;ss&gt;&gt; you.&lt;&lt;if $eight.breakclothes==0&gt;&gt; Maybe you should have put on something more than a robe.&lt;&lt;/if&gt;&gt; 

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|8-5]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="418" name="8-5" tags="draft" position="6600,1250" size="100,100">$sh.They smile&lt;&lt;ss&gt;&gt; at you, and it lights up $sh.their face--especially $sh.their bright green eyes. A waterlogged coat is cast over another crate, and $sh.their shirt sleeves are rolled up to reveal muscular, light but sun-freckled forearms. $sh.Their light brown hair is cut short and looks to have escaped the rain unscathed.

&quot;Then you must be the spouse! I&#39;m Shea--owner of the general store in town and today&#39;s delivery$sh.person.&quot; Shea approaches you and sweeps a jovial bow before holding out $sh.their hand to you.

Without looking up from the papers $ha.they&#39;&lt;&lt;hre&gt;&gt; persusing, Hawk says, &quot;This is $name.&lt;&lt;if $touch&gt;&gt;&quot;&lt;&lt;else&gt;&gt; $mc.They do&lt;&lt;es&gt;&gt;n&#39;t like to be touched either.&quot;

Shea puts $sh.their hand down and gives you a cheerfully polite nod.&lt;&lt;/if&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;It&#39;s nice to meet you.\&quot;&quot;|8-5.1]]&lt;/li&gt;
&lt;li&gt;[[Smile at them.|8-5.2]]&lt;/li&gt;
&lt;li&gt;[[Nod in return.|8-5.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="419" name="8-6" tags="draft" position="6600,1500" size="100,100">&quot;$name, I&#39;m glad to meet you. It&#39;s been a long time since we&#39;ve had someone new in town, so I hope you&#39;ll come visit us often! I imagine you&#39;re from somewhere much more urban, but there&#39;s still plenty to do here if you know where to look. Perhaps if you spend time in town, it&#39;ll persuade Hawk to do the same.&quot;

&quot;It won&#39;t.&quot; Hawk&#39;s voice reaches you from much closer than you were expecting, and $ha.they hold&lt;&lt;hs&gt;&gt; out the stack of papers to Shea. &quot;But $name can visit town if $mc.they wish&lt;&lt;es&gt;&gt;.&quot;

&quot;I&#39;ll look forward to seeing you soon, then, $name. We have an autumn festival next month that even Hawk usually manages to make an appearance for. Make sure you come!&quot;

&quot;Shea. We have things to do today.&quot; Hawk waves the manifest impatiently in front of Shea who finally takes it.

&quot;Of course. Sorry! I get a little carried away.&quot; $sh.They wink&lt;&lt;ss&gt;&gt; at you. &quot;$name, please do visit, and drop by any time if you need something!&quot; $sh.They give&lt;&lt;ss&gt;&gt; you another polite but slightly less theatrical bow before picking up $sh.their coat and heading back out into the rain.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|8-7]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="420" name="8-5.2" tags="draft" position="6600,1375" size="100,100">You smile at $sh.them, and $sh.they continue&lt;&lt;ss&gt;&gt; to return it.

&lt;&lt;if $touch&gt;&gt;$sh.They retract&lt;&lt;ss&gt;&gt; $sh.their hand, unoffended.&lt;&lt;/if&gt;&gt; &lt;&lt;include [[8-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="421" name="8-5.1" tags="draft" position="6500,1375" size="100,100">&quot;It&#39;s nice to meet you,&quot; you &lt;&lt;if $nvbook&gt;0&gt;&gt;write. It takes $sh.them a moment to realize what the book is for, but after $sh.they lean&lt;&lt;ss&gt;&gt; in and read what you&#39;ve written, $sh.they smile&lt;&lt;ss&gt;&gt; in understanding.&lt;&lt;else&gt;&gt;say.&lt;&lt;/if&gt;&gt;&lt;&lt;if $touch&gt;&gt;&lt;&lt;set $sh.touch=true&gt;&gt; You reach out to shake their hand, and $sh.their grip is firm but not crushing.&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[8-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="422" name="8-5.3" tags="draft" position="6700,1375" size="100,100">You nod at $sh.them, and $sh.they seem&lt;&lt;ss&gt;&gt; unbothered that you haven&#39;t demonstrated the same level enthusiasm.

&lt;&lt;if $touch&gt;&gt;$sh.They retract&lt;&lt;ss&gt;&gt; $sh.their hand, unoffended.&lt;&lt;/if&gt;&gt; &lt;&lt;include [[8-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="423" name="8-7" tags="draft" position="6600,1600" size="100,100">&quot;Humans,&quot; Hawk mutters, fully audible beside you, before turning to survey the assortment of containers that were delivered. &quot;I don&#39;t know what humans eat, so I got some of everything. There&#39;s another delivery coming next week. This should last you until then.&quot;&lt;&lt;if $skill==&quot;persuasion&quot;&gt;&gt; Though it&#39;s a statement, you can detect a little uncertainty in $ha.their tone.&lt;&lt;/if&gt;&gt;

Though you&#39;re not sure what, exactly, is in this particular delivery, this is a downright alarming amount of food. It&#39;s surely more than enough to keep you fed for several months. How much do&lt;&lt;hes&gt;&gt; $ha.they think humans need to survive?

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Ask.|8-7.1]]&lt;/li&gt;
&lt;li&gt;[[Don&#39;t ask.|8-8]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="424" name="8-7.1" tags="draft" position="6550,1725" size="100,100">&quot;How much do you expect me to eat daily?&quot;

Hawk glances &lt;&lt;if $nvbook&gt;0&gt;&gt;from the book to inspect your general shape&lt;&lt;else&gt;&gt;at you&lt;&lt;/if&gt;&gt;, then returns to scanning the crates as if searching for an answer there. &quot;I wasn&#39;t sure. The local store&#39;s choices are less varied than you&#39;re used to, I&#39;m sure, and yesterday&#39;s dinner was... extensive. But with three meals a day, there should be enough until the next delivery. I will procure more.&quot;

The steady, determined look Hawk has leveled at you would probably be reassuring if $ha.they weren&#39;t under the misapprehension that somewhere between nine and twelve feasts&#39; worth of food is too small an amount rather than far, &lt;i&gt;far&lt;/i&gt; too much for a handful of days.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Explain how much humans actually eat.|8-7.1.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;Don&#39;t correct &quot;+$ha.their+&quot; assumption.&quot;|8-8]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="425" name="8-8" tags="draft" position="6600,1900" size="100,100">$ha.They gesture&lt;&lt;hs&gt;&gt; at the delivery $ha.they&#39;&lt;&lt;hve&gt;&gt; made no move to unpack. &quot;Help yourself. I don&#39;t intend to eat any of it, but if it makes you more comfortable, I will partake. Nothing in this room is poisoned.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;In this room?\&quot;&quot;|8-8.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I don&#39;t belive you&#39;d poison me.\&quot;&quot;|8-8.2]]&lt;/li&gt;
&lt;li&gt;[[Don&#39;t say anything.|8-8.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="426" name="8-7.1.1" tags="draft" position="6475,1850" size="100,100">&lt;&lt;set $ha.trust+=1&gt;&gt;&lt;&lt;set $ha.knowfood=true&gt;&gt;&quot;We don&#39;t need to eat usually eat as much as we did at the feast. That much food is enough for a day or more.&quot;

Hawk stares at you. &quot;Really?&quot;

&quot;Really.&quot;

&quot;Well.&quot; $ha.they glance&lt;&lt;hs&gt;&gt; away. &quot;It should keep. Someone will eat anything you don&#39;t want.&quot; $ha.They do&lt;&lt;hes&gt;&gt;n&#39;t clarify if &quot;someone&quot; means $ha.they&#39;ll send it back to town for a human to eat or if it will go to one of the creatures that&#39;s apparently one of your housemates. Probably better not to ask.

&lt;&lt;include [[8-8]]&gt;&gt;</tw-passagedata><tw-passagedata pid="427" name="8-9" tags="draft" position="6600,2575" size="100,100">&quot;I&#39;ll be back. Help yourself,&quot; $ha.they say&lt;&lt;hs&gt;&gt;, as if breakfast were laid out on a table before you and not still ingredients stuffed into bags and boxes, scattered around the hall. But before you make any other move, Hawk simply vanishes.

Where do you even begin with all this? Is it all really edible? &lt;i&gt;Could&lt;/i&gt; it be poisoned?&lt;&lt;if $skill==&quot;strategy&quot;&gt;&gt; And now that you think about it, even if Hawk did eat some, would they have any reaction to a poison meant for humans? Does any sort of poison work on Elves? Perhaps better to shelve that line of thought for another time.&lt;&lt;/if&gt;&gt; Even if it&#39;s all perfectly normal, human-consumable food, that doesn&#39;t solve a significant problem: You&#39;ve never had to cook for yourself.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|8-10]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="428" name="8-8.3.4" tags="draft" position="6775,2250" size="100,100">&quot;No, thank you. And you don&#39;t unsettle me.&quot;

&quot;I unsettle other &lt;i&gt;elves&lt;/i&gt;. You shouldn&#39;t lie for the sake of politeness. I don&#39;t care enough.&quot; $ha.Their stare pierces through you.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I&#39;ve noticed.\&quot;&quot;|8-8.3.4.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;m not lying.\&quot;&quot;|8-8.3.4.2]]&lt;/li&gt;
&lt;li&gt;[[Look away. You do find Hawk unsettling.|8-8.3.4.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="429" name="8-8.3.4.1" tags="draft" position="6725,2375" size="100,100">&quot;I&#39;ve noticed.&quot;

The corner of $ha.their mouth quirks up for a moment, and $ha.they do&lt;&lt;hes&gt;&gt;n&#39;t press you further on the matter. &lt;&lt;include [[8-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="430" name="8-8.3.4.2" tags="draft" position="6825,2375" size="100,100">&lt;&lt;set $courage+=1&gt;&gt;&quot;I&#39;m not lying.&quot; &lt;&lt;if $courage&lt;0&gt;&gt;Perhaps you&#39;re just trying to make yourself believe it, but it doesn&#39;t feel untrue.&lt;&lt;else&gt;&gt;And you speak the truth: you won&#39;t let yourself be intimidated.&lt;&lt;/if&gt;&gt;&lt;&lt;if $skill==&quot;persistence&quot;&gt;&gt; This is the path you&#39;ve chosen, and you will not waver.&lt;&lt;/if&gt;&gt;

Hawk scrutinizes you a moment longer before seeming to make up $ha.their mind. It&#39;s difficult to tell whether $ha.they believe&lt;&lt;hs&gt;&gt; you, but $ha.they do&lt;&lt;hes&gt;&gt;n&#39;t press you further on the matter. &lt;&lt;include [[8-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="431" name="8-8.3.4.3" tags="draft" position="6775,2475" size="100,100">&lt;&lt;set $courage-=1&gt;&gt;You look away, chagrined. It&#39;s difficult not to find $ha.them unsettling, especially with those assessing gold eyes on you. &lt;&lt;if $courage&lt;0&gt;&gt;You wish you had more fortitude to draw upon, but your meager reserves fail you.&lt;&lt;else&gt;&gt;You&#39;re usually much more difficult to intimidate, but something about $ha.them gets to you.&lt;&lt;/if&gt;&gt;&lt;&lt;if $skill==&quot;persistence&quot;&gt;&gt; But this is the path you&#39;ve chosen, and you will not waver.&lt;&lt;/if&gt;&gt;

Hawk doesn&#39;t press you further on the matter. &lt;&lt;include [[8-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="432" name="8-10" tags="draft" position="6600,2675" size="100,100">If Hawk kept any staff at all, surely they wouldn&#39;t be answering the door $ha.themself. A being who has no need to eat certainly has no need to hire a cook, and $ha.they do&lt;&lt;hes&gt;&gt;n&#39;t seem like the sort to have thought that, perhaps, they should hire one for your sake.

Your family&#39;s head cook was very protective of her domain and felt no need to show deference to the children of an earl--you were very much forbidden from the kitchen. She was immune to Soren&#39;s charm and never surrendered in her war against Sabine&#39;s nighttime ventures. All three of you moved out of the house before she did, so she can declare victory last.

If you do truly need to prepare your own breakfast, your skill level is sufficient that you...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...might be able to make pancakes.|8-10.1]]&lt;/li&gt;
&lt;li&gt;[[...could probably manage toast, at best.|8-10.2]]&lt;/li&gt;
&lt;li&gt;[[...are a hazard just being near pots and pans.|8-10.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="433" name="8-11.1" tags="draft" position="6550,3050" size="100,100">&lt;&lt;set $kind+=1&gt;&gt;&lt;&lt;set $eight.unpack=true&gt;&gt;After quickly learning that cracking the crates open with your bare hands isn&#39;t a viable option, you set about assessing the contents of things that aren&#39;t nailed shut. You find--among other things--apples, potatoes, hard cheese, bread, and grapes--bunches and bunches of grapes. Everything is fresh and fragrant as though it was harvested or made just this morning&lt;&lt;if $optimistic&lt;1&gt;&gt;. At least there&#39;s one positive to being forced to relocate to the middle of nowhere.&lt;&lt;elseif $optimistic&gt;1&gt;&gt;--surely just the first of many positives of living in the countryside.&lt;&lt;else&gt;&gt;--a benefit of being in the countryside.&lt;&lt;/if&gt;&gt;

Before you can extract too much food, Hawk returns&lt;&lt;if $nvbook==3&gt;&gt; &lt;&lt;include [[8-11.book]]&gt;&gt;&lt;&lt;else&gt;&gt;. &lt;&lt;include [[8-12]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="434" name="8-11.2" tags="draft" position="6650,3050" size="100,100">The crates look sturdy enough, so you take a seat on one to wait for Hawk. No need to make a mess of things before $ha.they get&lt;&lt;hs&gt;&gt; back.

As you wait, you watch the water cascading into the pool in the middle of the chamber. Every once in a while, you see a flash of silver scales crest just above the surface of the water. A distant shrill cacophony signals the return of a colony of bats to a hollow somewhere below.

Before too long, Hawk returns&lt;&lt;if $nvbook==3&gt;&gt; &lt;&lt;include [[8-11.book]]&gt;&gt;&lt;&lt;else&gt;&gt;. &lt;&lt;include [[8-12]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="435" name="2-11.1" tags="draft" position="1250,2075" size="100,100">&lt;&lt;set $optimistic+=1&gt;&gt;&quot;I&#39;m hoping that I won&#39;t need to be saved.&quot;

&quot;As am I. But it&#39;s—&quot; &lt;&lt;include [[2-12]]&gt;&gt;</tw-passagedata><tw-passagedata pid="436" name="2-11.2" tags="draft" position="1350,2075" size="100,100">&lt;&lt;set $humor+=1&gt;&gt;&quot;Didn&#39;t think you&#39;d have such a poor view of married life.&quot;

The corner of Soren&#39;s mouth turns up, and he shakes his head. &quot;Only married life with a creature who could—&quot; &lt;&lt;include [[2-12]]&gt;&gt;</tw-passagedata><tw-passagedata pid="437" name="2-11.3" tags="draft" position="1450,2075" size="100,100">&lt;&lt;set $optimistic-=1&gt;&gt;&quot;I have a feeling I&#39;ll be taking her up on that.&quot;

He sighs. &quot;I hope you won&#39;t have to, but it&#39;s—&quot; &lt;&lt;include [[2-12]]&gt;&gt;</tw-passagedata><tw-passagedata pid="438" name="2-11.4" tags="draft" position="1550,2075" size="100,100">&quot;I don&#39;t think she needs a reason to begin plotting.&quot;

&quot;You&#39;re probably right, but it might be warranted this time. I hate to think--&quot; &lt;&lt;include [[2-12]]&gt;&gt;</tw-passagedata><tw-passagedata pid="439" name="2-12" tags="draft" position="1400,2200" size="100,100">He cuts himself off. &quot;No. Let&#39;s not talk about this now. This isn&#39;t how I want us to remember today. I want you to remember how proud I am of you. You deserve so much more than this, but,&quot; he gestures to his uniform, &quot;&lt;&lt;if $pastduty&gt;0&gt;&gt;you and I both know &lt;&lt;/if&gt;&gt;we don&#39;t always have a choice about what we must do. You&#39;re protecting this family—and, if I were to hazard a guess at the particulars of the arrangement, probably the kingdom—as much as I am.&quot;

Soren has always taken his duty to the family &lt;&lt;if $pastduty&gt;1&gt;&gt;as seriously as you do&lt;&lt;elseif $pastduty&lt;-1&gt;&gt;far more seriously than you do&lt;&lt;else&gt;&gt;very seriously and encouraged you to do the same&lt;&lt;/if&gt;&gt;. Though he expects much the same adherence to societal expectation that your mother does, he knows very well the quiet damage it inflicts and &lt;&lt;if $pastduty&gt;0&gt;&gt;doesn&#39;t take your compliance for granted&lt;&lt;else&gt;&gt;usually manages to show some compassion for your willfulness&lt;&lt;/if&gt;&gt;.

The two of you...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...have been close as long as you can remember.|2-12.1]]&lt;/li&gt;
&lt;li&gt;[[...didn&#39;t become close until adulthood.|2-12.2]]&lt;/li&gt;
&lt;li&gt;[[...were close as children but drifed apart.|2-12.3]]&lt;/li&gt;
&lt;li&gt;[[...get along but have never been especially close.|2-12.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="440" name="giveStats" tags="" position="275,750" size="100,100">pastduty: $pastduty
newduty: $newduty
optimistic: $optimistic
humor: $humor
courage: $courage
confidence: $confidence
kind: $kind
curiosity: $curiosity
impulsive: $impulsive

eyecolor: $eyecolor
height: $height
haircolor: $haircolor
hairlength: $hairlength
thunder: $thunder
angerav: $angerav
nangav: $nangav
name: $name
nick: $nick
veg: $veg
glasses: $glasses
cooking: $cooking

skill: $skill
motiv: $motiv
window: $window
knowhafood: $knowhafood
knowhastorm: $knowhastorm
feastprn: $feastprn
fescort: $fescort
luggage: $luggage
knowhaleak: $knowhaleak
beastseen: $beastseen
nvbook: $nvbook
bookask: $bookask

three.letter: $three.letter
three.robe: $three.letter

five.qcount: $five.qcount
five.acount: $five.acount

six.count: $six.count
six.dan: $six.dan
six.react: $six.react
six.drink: $six.drink
six.stay: $six.stay

seven.clothes: $seven.clothes
seven.feel: $seven.feel

gendervibes: $gendervibes
prncust: $prncust
axab: $axab

mc.gender: $mc.gender
mc.they: $mc.they

rom: $rom
romatt: $romatt
phys: $phys
physatt: $physatt
attraction: $attraction

ha.they: $ha.they
ha.res: $ha.res
ha.fond: $ha.fond
ha.trust: $ha.trust
ha.rom: $ha.rom
ha.phys: $ha.phys
ha.flirt: $ha.flirt
ha.ban: $ha.ban
ha.soft: $ha.soft
ha.sus: $ha.sus
ha.silent: $ha.silent
ha.spark: $ha.spark
ha.vc: $ha.vc
ha.touch: $ha.touch
ha.knowtrans: $ha.knowtrans
ha.knowmaybe: $ha.knowmaybe
ha.knowthunder: $ha.knowthunder
ha.knowfood: $ha.knowfood
ha.knowcook: $ha.knowcook

touch: $touch
islapromise: $islapromise
favsibling: $favsibling

soren.rel: $soren.rel
soren.touch: $soren.touch

sabine.rel: $sabine.rel
sabine.touch: $sabine.touch</tw-passagedata><tw-passagedata pid="441" name="8-12" tags="draft" position="6600,3425" size="100,100">&lt;&lt;if $nvbook==3&gt;&gt;Use it however you like.&quot; With the book apparently handled, $ha.They look&lt;&lt;hs&gt;&gt; around at the state of the absurd food delivery. &lt;&lt;/if&gt;&gt;&lt;&lt;if $eight.unpack&gt;&gt;&quot;Good. Keep unpacking. I&#39;ll bring it to the kitchen.&quot; With a wave of $ha.their hand, the nailed-on crate lids fly off and land in a noisy clatter in a pile near the door. Hawk then vanishes again, along with several bags you had opened--all halfway across the room from where $ha.they &lt;&lt;hwere&gt;&gt; just standing.&lt;&lt;else&gt;&gt;$ha.They survey&lt;&lt;hs&gt;&gt; the unchanged assortment of delivered food. &quot;Nothing&#39;s to your liking.&quot; Another statement that should be a question--as though you were supposed to just eat the produce straight out of the bags. &quot;This will go faster if you help. I&#39;ll bring what you unpack to the kitchen.&quot; With a wave of $ha.their hand, the nailed-on crate lids fly off and land in a noisy clatter in a pile near the door. Hawk then vanishes again, along with the contents of one of the newly opened crates. It now sits empty, clear across the room from where $ha.they &lt;&lt;hwere&gt;&gt; standing.&lt;&lt;/if&gt;&gt;

It&#39;s not entirely clear what the point of unpacking is if Hawk can just magically open and transport everything to wherever the kitchen is. Nevertheless, there&#39;s not much else to do.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Unpack.|8-13]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="442" name="8-11.book.1" tags="draft" position="6375,3300" size="100,100">You nod in understanding, and $ha.they tilt&lt;&lt;hs&gt;&gt; $ha.their head at you.

&lt;&lt;if $ha.ban&gt;1&gt;&gt;&lt;&lt;set $ha.soft+=1&gt;&gt;&quot;The book is so you don&#39;t have to keep nodding at me.&quot; The words are teasing, but the hint of a smile on $ha.their lips is unexpectedly gentle. &quot;But&lt;&lt;else&gt;&gt;&quot;Well,&lt;&lt;/if&gt;&gt; I suppose it&#39;ll take some getting used to. &lt;&lt;include [[8-12]]&gt;&gt;</tw-passagedata><tw-passagedata pid="443" name="8-11.book.2" tags="draft" position="6475,3300" size="100,100">The pen glides smoothly across the page, leaving a trail of black ink. &quot;Thank you,&quot; you write and hold the book toward Hawk.

$ha.They lean&lt;&lt;hs&gt;&gt; closer to read it and nod&lt;&lt;hs&gt;&gt;. &quot;You&#39;re welcome. &lt;&lt;include [[8-12]]&gt;&gt;</tw-passagedata><tw-passagedata pid="444" name="8-11.book.3" tags="draft" position="6575,3300" size="100,100">&quot;Thank you,&quot; you say aloud. You&#39;ll have opportunity to use the book later.

$ha.They nod&lt;&lt;hs&gt;&gt;. &quot;You&#39;re welcome. &lt;&lt;include [[8-12]]&gt;&gt;</tw-passagedata><tw-passagedata pid="445" name="8-11.book" tags="draft" position="6475,3175" size="100,100">with a small cloth-bound book which they hand over. Its cover is blue and unornamented, and a pen is secured to its spine with a cord. You flip through it to see that each page is blank and unlined.&lt;&lt;if $skill==&quot;evasion&quot;||$skill==&quot;strategy&quot;&gt;&gt; They don&#39;t give off the scent of aging paper, so the book must be a recent acquisition.&lt;&lt;/if&gt;&gt;

&quot;Write what you need to in there. The pen doesn&#39;t need ink. If it stops working, give it back to me. I can reenchant it.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Nod your understanding.|8-11.book.1]]&lt;/li&gt;
&lt;li&gt;[[Write, &quot;Thank you.&quot;|8-11.book.2]]&lt;/li&gt;
&lt;li&gt;[[Say, &quot;Thank you.&quot;|8-11.book.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="446" name="8-13" tags="draft todo" position="6600,3525" size="100,100">As you unpack, &lt;&lt;switch $skill&gt;&gt;\
&lt;&lt;case &quot;persuasion&quot;&gt;&gt;you start organizing the food based on how likely you are to eat it. May as well separate out what doesn&#39;t interest you so Hawk can get it sent to whoever (or whatever) will eventually be eating it. That should eliminate some of the clutter, too.\
&lt;&lt;case &quot;strategy&quot;&gt;&gt;you start organizing the food on how it&#39;ll need to be stored. It likely isn&#39;t entirely correct, given your lack of experience with such things, but some of it certainly seems like it&#39;ll need to be kept somewhere cold so it doesn&#39;t spoil in the next few days. The crust on most of the bread loaves is thick, but they&#39;ll probably find some way to mold if the air&#39;s too moist. You have no idea what to do with the peach pie, though.\
&lt;&lt;case &quot;persistence&quot;&gt;&gt;you start with the most difficult things first. You drag the hefty sacks of potatoes to one spot, then you start to haul over the melons. The largest ones take a little extra thought to prevent strain, but you settle on just rolling them over to save your strength for the long haul ahead.\
&lt;&lt;case &quot;evasion&quot;&gt;&gt;you keep everything close to the container it came from. There&#39;s probably some sort of rationale to how it was organized for the journey over--no need to reinvent the wheel. Unfortunately, the strategy behind the packing of delivery doesn&#39;t reveal itself to you. But you do manage to find a surprisingly intact peach pie.\
&lt;&lt;default&gt;&gt;\
this is an error!&lt;&lt;/switch&gt;&gt;

It takes about an hour before Hawk loses patience with the process.

&quot;I&#39;ll finish this later. We have things to do. Since you haven&#39;t eaten yet, I assume you need the kitchen. Let&#39;s go. Same floor as your bedroom.&quot; $ha.They promptly vanish&lt;&lt;hes&gt;&gt; again, leaving you fumbling for your stone to catch up. Between the dizziness and endless parade of closed doors, it takes you a moment to realize you teleported directly outside your own room rather than to the random spot you originally arrived at yesterday. But before you can give it more thought, you see Hawk farther down the passage, beckoning you to follow $ha.them.&lt;&lt;if $beastseen==7&gt;&gt; Toward where you saw the creature last night.&lt;&lt;/if&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[&quot;Follow &quot;+$ha.them+&quot;.&quot;|8-14]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="447" name="8-14" tags="draft" position="6600,3625" size="100,100">&lt;&lt;set $subt.loc=&quot;Third Floor Hall&quot;&gt;&gt;Hawk sets a quick pace&lt;&lt;if $height&lt;4&gt;&gt;, and you have to jog a little to keep up&lt;&lt;else&gt;&gt; that keeps you at a brisk walk&lt;&lt;/if&gt;&gt;. &quot;Most rooms on this floor are guest bedrooms and storage rooms. If you need something and don&#39;t know where it is, ask me. Don&#39;t go poking around.&quot;

You&#39;ll need to do exactly that, but mentioning that you married $ha.them solely to poke around $ha.their tower seems like an unwise idea. So instead, you...

&lt;&lt;include [[8-14-q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="448" name="8-14.2" tags="draft" position="6575,3875" size="100,100">&lt;&lt;set $eight.qcount+=1&gt;&gt;&lt;&lt;if $nvbook==3&amp;&amp;$eight.qcount&lt;2&gt;&gt;You write the question in your book and hurry forward to wave it in front of Hawk: &lt;&lt;/if&gt;&gt;&quot;Is there anywhere I shouldn&#39;t go? &lt;&lt;if $skill==&quot;persuasion&quot;&gt;&gt;&lt;&lt;set $ha.res+=1&gt;&gt;I don&#39;t want to overstep any boundaries or inconvenience you or the tower&#39;s... other residents.&quot; Perhaps you&#39;re laying it on a bit thick, but Hawk nods in what you hope is approval.

&quot;The tower has thirteen floors. The first four you may explore as you wish. Most doors on this floor are locked, but the rooms you&#39;ll need aren&#39;t. Above the fourth floor is where I do my work. I&#39;d rather you didn&#39;t go up there and make a mess.&quot;&lt;&lt;else&gt;&gt;&lt;&lt;if $ha.soft&lt;=2&gt;&gt;&lt;&lt;set $ha.sus+=1&gt;&gt;&lt;&lt;/if&gt;&gt;For safety reasons.&quot; It&#39;s difficult to tell if Hawk believes your excuse, but $ha.they do&lt;&lt;hes&gt;&gt; answer.

&quot;You have free access to the first four floors. Don&#39;t go higher.&quot;&lt;&lt;/if&gt;&gt;

That seems to be all you&#39;ll get out of $ha.them, so you...

&lt;&lt;include [[8-14-q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="449" name="8-14-q" tags="draft endscene" position="6550,3750" size="100,100">&lt;&lt;if $eight.qcount&lt;3&gt;&gt;&lt;ul class=&quot;choice&quot;&gt;&lt;&lt;if hasVisited(&quot;8-14.1&quot;)==false&amp;&amp;hasVisited(&quot;8-14.3&quot;)==false&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[...ask about the creature at your door last night.|8-14.1]]&lt;/li&gt;&lt;/span&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;if not hasVisited(&quot;8-14.2&quot;)&gt;&gt;\
&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[...ask about places you shouldn&#39;t go. What you&#39;re looking for is surely there.|8-14.2]]&lt;/li&gt;&lt;/span&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;if $beastseen==7&amp;&amp;hasVisited(&quot;8-14.3&quot;)==false&gt;&gt;\
&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[...admit to leaving your room last night.|8-14.3]]&lt;/li&gt;&lt;/span&gt;&lt;&lt;/if&gt;&gt;
&lt;li&gt;[[...follow Hawk in silence.|9-0]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;else&gt;&gt;\
&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...follow the rest of the way in silence.|9-0]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="450" name="8-14.1" tags="draft" position="6475,3875" size="100,100">&lt;&lt;set $eight.qcount+=1&gt;&gt;&lt;&lt;if $nvbook==3&amp;&amp;$eight.qcount&lt;2&gt;&gt;You write the question in your book and hurry forward to wave it in front of Hawk: &lt;&lt;/if&gt;&gt;&quot;Something tried to break my door down last night. What was it?&quot;

&quot;I told you. Many creatures live in this tower. It isn&#39;t dangerous to you. Humans aren&#39;t nocturnal, so you have no reason to cross paths.&quot;

&quot;&lt;&lt;if $humor&gt;2||$ha.ban&gt;0&gt;&gt;How comforting. &lt;&lt;/if&gt;&gt;You let it just roam around?&quot;

&quot;It&#39;s lived here since before you were born and doesn&#39;t like strangers. It&#39;ll get bored soon enough. The door will hold until then.&quot; The reminder that your door isn&#39;t indestructible is not reassuring&lt;&lt;if $beastseen==7&gt;&gt;, especially given its particular battering after your venture last night&lt;&lt;/if&gt;&gt;.

Since Hawk has nothing more to add, you...

&lt;&lt;include [[8-14-q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="451" name="9-0" tags="draft startscene autosave" position="7300,100" size="100,100">&lt;&lt;set $cursc=9&gt;&gt;&lt;&lt;set $subt.loc=&quot;The Kitchen&quot;&gt;&gt;&lt;&lt;notify&gt;&gt;Autosave complete!&lt;&lt;/notify&gt;&gt;Finally, when a staircase&lt;&lt;if $beastseen==7&gt;&gt;--&lt;i&gt;the&lt;/i&gt; staircase--&lt;&lt;else&gt;&gt; &lt;&lt;/if&gt;&gt;comes into view, Hawk opens the nearest door on the outside wall of the passage. $ha.They stand&lt;&lt;hs&gt;&gt; aside and wave&lt;&lt;hs&gt;&gt; you into the room.

You blink as you enter brightly lit kitchen, eyes adjusting from the gloom of the hallway. Like the other rooms you&#39;ve seen, it&#39;s oddly shaped, and cabinets bend gently around a sudden turn in the middle of the room. The walls are covered with shelves upon shelves filled with mismatched crockery, pots, and jars of what you hope are herbs and oils for cooking. The shelves are interrupted only by a door and two large windows that flood the room with bright sunlight from beyond a thin veil of rain that seems to stop not far beyond the walls of the tower.&lt;&lt;if $skill==&quot;strategy&quot;&gt;&gt; From the position of the sun, this room faces east. Judging by the the pale light you awoke to and the distance you covered between your bedroom and the kitchen, your room likely faces west.&lt;&lt;/if&gt;&gt; In the middle of the room is a large table for food preparation, and pushed up against the wall near one window is a smaller table with three chairs.

Hawk gestures to the door. &quot;Food&#39;s in there.&quot; $ha.They then point&lt;&lt;hs&gt;&gt; out two large cabinets in turn, each marked with complex glyphs that glow faintly. &quot;That&#39;s hot, and that&#39;s cold. Should be simple enough.&quot; For better or worse, you expect even your family&#39;s head cook would need a little more direction than that to be able to cook anything in this kitchen. But as usual, Hawk seems disinclined to provide any additional information.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Tell Hawk you don&#39;t know how to cook with arcane cabinets.|9-0.1]]&lt;/li&gt;
&lt;li&gt;[[Tell Hawk you don&#39;t know how to cook, in general.|9-0.2]]&lt;/li&gt;
&lt;li&gt;[[Try to figure out the arcane cabinets.|9-0.3]]&lt;/li&gt;
&lt;li&gt;[[Find something to eat that doesn&#39;t require cooking.|9-0.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="452" name="8-14.3" tags="draft" position="6675,3875" size="100,100">&lt;&lt;if not hasVisited(&quot;8-14.3.q&quot;)&gt;&gt;&lt;&lt;set $eight.qcount+=1&gt;&gt;&lt;&lt;if $nvbook==3&amp;&amp;$eight.qcount&lt;2&gt;&gt;You write in your book and hurry forward to wave it in front of Hawk: &lt;&lt;/if&gt;&gt;&lt;&lt;set $ha.trust+=1&gt;&gt;&quot;I left my room last night.&quot;

&quot;That explains all the noise,&quot; $ha.they say&lt;&lt;hs&gt;&gt;, apparently unfazed by the fact you nearly got mauled last night.

&lt;&lt;/if&gt;&gt;&lt;ul class=&quot;choice&quot;&gt;&lt;&lt;if not hasVisited(&quot;8-14.3.q&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;I saw the creature. What is it really?\&quot;&quot;|8-14.3.q]]&lt;/li&gt;&lt;/span&gt;&lt;&lt;/if&gt;&gt;
&lt;li&gt;[[&quot;\&quot;Would you have helped if it caught me?\&quot;&quot;|8-14.3.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;m sorry.\&quot;&quot;|8-14.3.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Why do you let that creature live here?\&quot;&quot;|8-14.3.3]]&lt;/li&gt;
&lt;li&gt;[[Say nothing else.|8-14.3.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="453" name="8-14.3.1" tags="draft" position="6625,4000" size="100,100">&quot;Would you have helped if it caught me?&quot;

&quot;Yes. But it didn&#39;t, and I hope it won&#39;t have another chance now that you&#39;ve seen it yourself.&quot; $ha.They look at you, eyebrow raised, half expectant and half doubtful. &lt;&lt;if $confidence&gt;3&gt;&gt;You return $ha.their stare until $ha.they look&lt;&lt;hs&gt;&gt; away&lt;&lt;else&gt;&gt;You look away&lt;&lt;/if&gt;&gt;, and $ha.they say&lt;&lt;hs&gt;&gt; no more about it.

With that confession of your chest, you &lt;&lt;include [[8-14-q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="454" name="8-14.3.2" tags="draft" position="6725,4000" size="100,100">&lt;&lt;set $kind+=1&gt;&gt;&lt;&lt;set $ha.res+=1&gt;&gt;&quot;I&#39;m sorry.&quot;

Hawk sighs. &quot;You seem to still be alive, so no harm done. But I hope you will at least consider my advice in the future.&quot;

With that confession of your chest, you &lt;&lt;include [[8-14-q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="455" name="8-14.3.3" tags="draft" position="6650,4100" size="100,100">&lt;&lt;set $ha.soft-=1&gt;&gt;&quot;Why do you let that creature live here?&quot;

&quot;It&#39;s lived here centuries longer than you&#39;ve been alive,&quot; $ha.they say&lt;&lt;hs&gt;&gt; sharply. &quot;This is its home, and it&#39;s territorial. It will get used to your presence.&quot; It&#39;s difficult to say if that&#39;s supposed to be comforting or not.&lt;&lt;if $humor&gt;1&gt;&gt; Wonderful.&lt;&lt;/if&gt;&gt;

With that confession of your chest, you &lt;&lt;include [[8-14-q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="456" name="8-14.3.4" tags="draft" position="6750,4100" size="100,100">You have nothing to add, so with that confession of your chest, you &lt;&lt;include [[8-14-q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="457" name="8-14.3.q" tags="draft" position="6825,3925" size="100,100">&lt;&lt;set $beasthint+=1&gt;&gt;&quot;I saw the creature. What is it really?&quot;

&quot;Something very old. A prolific hunter.&quot;

That conjures images of the awful bat creature soaring across ancient skies, descending on quiet villages and picking up cattle or horses or humans to feast upon in the fields or to bring back to its lair for later consumption.&lt;&lt;if $courage &lt;0&gt;&gt; A shiver runs down your spine.&lt;&lt;/if&gt;&gt;

...That&#39;s enough of that line of thought.

&lt;&lt;include [[8-14.3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="458" name="9-0.1" tags="draft" position="7100,225" size="100,100">&lt;&lt;set $impulsive-=1&gt;&gt;&quot;I haven&#39;t used those before.&quot; You gesture at the strange cabinets&lt;&lt;if $nvbook&gt;0&gt;&gt; with your pen&lt;&lt;/if&gt;&gt;.

&quot;That&#39;s why I told you what they are.&quot;

&quot;I don&#39;t know &lt;i&gt;how&lt;/i&gt; to use them.&quot;

Hawk approaches the cabinets reluctantly &lt;&lt;include [[9-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="459" name="9-0.2" tags="draft" position="7225,225" size="100,100">&lt;&lt;set $impulsive-=1&gt;&gt;&lt;&lt;set $ha.knowcook=true&gt;&gt;&lt;&lt;set $ha.trust+=1&gt;&gt;&quot;I don&#39;t know how to cook.&quot;

&quot;You... what?&quot; Given Hawk&#39;s general expressionlessness, you&#39;re not sure it&#39;s possible for $ha.them to look flabbergasted. But it&#39;s a reasonable assumption that $ha.their wide golden eyes and dramatically raised eyebrows are as close as $ha.they get&lt;&lt;hs&gt;&gt;.

&quot;I &lt;&lt;if $cooking&gt;0&gt;&gt;can cook a little&lt;&lt;if $confidence&lt;0&gt;&gt;. Somewhat&lt;&lt;/if&gt;&gt;. &quot;If it&#39;s very simple.&quot;&lt;&lt;else&gt;&gt;shouldn&#39;t really be in a kitchen unless you want something to go wrong,&quot; you &lt;&lt;if $nvbook&gt;0&gt;&gt;write&lt;&lt;else&gt;&gt;say&lt;&lt;/if&gt;&gt;&lt;&lt;if $humor&gt;2&gt;&gt; with a grin&lt;&lt;/if&gt;&gt;. &quot;I usually make a mess when I try to cook.&quot;&lt;&lt;/if&gt;&gt;

Hawk crosses $ha.their arms over $ha.their chest and emits a long, heartfelt sigh. &quot;I suppose it&#39;s better to know this now. My knowledge of cooking is limited since I have no need for it. I assumed a human would know how, but I suppose it makes sense for creatures who live in groups to specialize. I will find cookbooks for you. You should learn.&quot;

&lt;&lt;if $confidence&gt;0||$optimistic&gt;0||$skill==&quot;persistence&quot;&gt;&gt;It&#39;s true--you probably &lt;i&gt;should&lt;/i&gt; learn how to cook.&lt;&lt;if $cooking&lt;0&gt;&gt; Maybe it won&#39;t be a total disaster.&lt;&lt;/if&gt;&gt; It&#39;s worth a try. Maybe you&#39;ll even be good at it someday.&lt;&lt;if $cooking&lt;0&gt;&gt; &lt;i&gt;Maybe&lt;/i&gt;.&lt;&lt;/if&gt;&gt;&lt;&lt;else&gt;&gt;Perfect. You&#39;ve already disappointed your $ha.spouse less than a day into your marriage, and if you don&#39;t figure out how to cook eventually, you&#39;re going to end up eating meals of nothing but grapes. You&#39;ll have to try.&lt;&lt;/if&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|9-0.2-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="460" name="9-0.3" tags="draft" position="7375,225" size="100,100">&lt;&lt;if $ach.on&gt;&gt;&lt;&lt;set $ach.any=true&gt;&gt;&lt;&lt;set $ach.burn=true&gt;&gt;&lt;&lt;notify&gt;&gt;Achievement unlocked: Hazardous Breakfast&lt;&lt;/notify&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;set $impulsive+=1&gt;&gt;&lt;&lt;set $courage+=1&gt;&gt;&lt;&lt;set $nine.burn=true&gt;&gt;You approach the cabinets and look them over. Nothing about them seems unusual aside from the glyphs, but the glyphs are odd enough. The hot glyph ripples with orange like wood in a smoldering fire, and the cold one shimmers like fresh snow under moonlight. You&#39;ve seen glyphs before as an element of blessings, but they&#39;re nowhere near as complex as these, nor do they bear much stylistic resemblance. These look to be almost scratched into the wood, lines hacked and uneven and curves wobbly and jagged.

You open the cold cabinet first, and it promptly begins to leech the warmth out of your skin. Your breath comes out in plumes of mist, and when you wave your hand over the shelves inside, your fingers immediately go numb. Seeking relief, you quickly shut the cold cabinet and throw open the hot, plunging your hand into the heat radiating from inside.

But in your haste, you skim the shelf with the edge of your palm. You instinctively pull away immediately, and you hiss in pain as your mind catches up with your body.

In a moment, Hawk is standing beside you. &quot;Let me see.&quot; Still slightly stunned, you hold your hand up to show $ha.them the burn. &quot;Not severe. Run water on it.&quot; $ha.They point&lt;&lt;hs&gt;&gt; to an enchanted spout mounted over a basin in a nearby cabinet. &quot;I&#39;ll be back.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|9-0.3-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="461" name="9-0.4" tags="draft" position="7500,225" size="100,100">Risking the strange magical cabinets doesn&#39;t seem like the wisest idea&lt;&lt;if $six.drink==2&gt;&gt;, especially since your pounding headache isn&#39;t doing your problem-solving skills any favors&lt;&lt;/if&gt;&gt;. &lt;&lt;include [[9-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="462" name="9-0.2-2" tags="draft" position="7225,325" size="100,100">&quot;For now, let me show you these.&quot; Hawk approaches the cabinets &lt;&lt;include [[9-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="463" name="9-1" tags="draft" position="7125,450" size="100,100">and opens the door to the &quot;hot&quot; one. Inside, it looks like a perfectly ordinary cabinet--until you notice the air around it ripples from the heat. With a flick of $ha.their wrist, a cupboard flies open, releases a ceramic cup, and shuts again. The cup soars into Hawk&#39;s waiting hand, and $ha.they fill&lt;&lt;hs&gt;&gt; the cup with water from an enchanted spout mounted over a basin in a nearby cabinet. If Hawk had indicated much previous interest in showing off, you&#39;d think $ha.they &lt;&lt;hwere&gt;&gt; just trying to look impressive. But on the contrary, $ha.they look&lt;&lt;hs&gt;&gt; somewhere between bored and inconvenienced as $ha.they set&lt;&lt;hs&gt;&gt; the cup inside the enchanted cabinet, close the door for a few seconds, and pull out a steaming-hot cup of water. &quot;That&#39;s how to use it.&quot; As $ha.they set&lt;&lt;hs&gt;&gt; the cup down on the counter, you see bright red marks on $ha.their fingers that quickly begin to fade. &quot;You shouldn&#39;t reach in with your bare hands. The cold one either.&quot;

Shutting the hot cabinet, they move on to the cold one, again placing the cup inside for a few moments before taking it out to reveal a block of ice inside. &quot;Careful with this one. Things explode in there sometimes--can crack glass as they expand.&quot;&lt;&lt;if $skill==&quot;strategy&quot;&gt;&gt; That would be equally true of anything that can freeze water, but a history of explosions still doesn&#39;t do much to recommend an appliance.&lt;&lt;/if&gt;&gt; Hawk&#39;s demonstrations have at least shown &lt;i&gt;how&lt;/i&gt; to use the cabinets but not necessarily proven &lt;i&gt;why&lt;/i&gt; you should put your life in danger to do so.

&lt;&lt;include [[9-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="464" name="9-0.3-2" tags="draft" position="7375,325" size="100,100">It takes a moment to get the water running cool enough, but it seems to work on the same principle as your bathtub. The pain dulls slightly under the water, but your hand still throbs. &lt;&lt;if $confidence&gt;1||$optimistic&gt;1&gt;&gt;You&#39;ll probably laugh about this someday, but right now, you just feel ridiculous.&lt;&lt;else&gt;&gt;What a ridiculous thing to do. You&#39;ve now made even more of a fool of yourself in front of your new $ha.spouse. &lt;&lt;if $favsibling==&quot;Soren&quot;&gt;&gt;If Soren were here, he&#39;d think of something kind to say: that failure is part of the learning process and someday, you&#39;ll look back on this as a silly but necessary piece of the life you&#39;ve built. But right now, he&#39;s far, far away.&lt;&lt;else&gt;&gt;If Sabine were here, she&#39;d tease you about it, of course. But eventually, she&#39;d spin off into some story about her own foolishness until the two of you were laughing together. But right now, she&#39;s far away.&lt;&lt;/if&gt;&gt; You&#39;re alone.&lt;&lt;/if&gt;&gt;

It&#39;s several more minutes before Hawk returns with a small jar of something that smells oddly &lt;i&gt;green&lt;/i&gt;. $ha.They turn&lt;&lt;hs&gt;&gt; off the tap and gesture toward the small table by the window. &quot;Sit.&quot; As you do so, $ha.they pull&lt;&lt;hs&gt;&gt; one of the other chairs over to sit near you and set the jar on the table. $ha.They hold&lt;&lt;hs&gt;&gt; $ha.their hand out to you, palm up. &quot;May I?&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;Place your burned hand in &quot;+$ha.theirs+&quot;.&quot;|9-0.3-2.1]]&lt;/li&gt;
&lt;li&gt;[[Shake your head. You can do it yourself.|9-0.3-2.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="465" name="9-0.3-2.1" tags="draft" position="7325,450" size="100,100">You place your hand in Hawk&#39;s, and $ha.they begin&lt;&lt;hs&gt;&gt; to rub the ointment onto your burn. The sensation reminds you strangely of running your hand over dewy grass, and by the time $ha.they&#39;&lt;&lt;hre&gt;&gt; done, the pain has decreased to barely an occasional twinge. It&#39;s certainly magical--you&#39;ve never experienced any relief so effective.

&quot;I&#39;m no healer, but that should help. I don&#39;t recommend doing that again.&quot; The soft rumble of $ha.their voice makes you look up from your hand to $ha.their face. $ha.Their&lt;&lt;if not $attraction==&quot;aa&quot;&gt;&gt; mesmerizing&lt;&lt;/if&gt;&gt; golden eyes, narrowed slightly in amusement, look into yours, and a small smile tilts up the corner of $ha.their lips.&lt;&lt;if not $attraction==&quot;aa&quot;&gt;&gt; You&#39;re suddenly very aware of your hand in &lt;&lt;if $height&lt;4&gt;&gt;their large one&lt;&lt;else&gt;&gt;theirs&lt;&lt;/if&gt;&gt;.&lt;&lt;/if&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;span class=&quot;heart&quot;&gt;&lt;li&gt;[[Blush and look away.|9-0.3-2.1.1]]&lt;/li&gt;&lt;/span&gt;
&lt;span class=&quot;heart&quot;&gt;&lt;li&gt;[[Oh no. Hawk is too attractive to be this close.|9-0.3-2.1.2]]&lt;/li&gt;&lt;/span&gt;
&lt;span class=&quot;heart&quot;&gt;&lt;li&gt;[[Get flustered. &quot;You can let go now.&quot;|9-0.3-2.1.3]]&lt;/li&gt;&lt;/span&gt;
&lt;li&gt;[[Pull your hand back.|9-0.3-2.1.4]]&lt;/li&gt;
&lt;li&gt;[[&quot;You can let go.&quot;|9-0.3-2.1.5]]&lt;/li&gt;
&lt;li&gt;[[&quot;Thank &quot;+$ha.them+&quot;.&quot;|9-0.3-2.1.6]]&lt;/li&gt;
&lt;li&gt;[[Let the moment pass.|9-0.3-2.1.7]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="466" name="9-0.3-2.2" tags="draft" position="7425,450" size="100,100">You shake your head and reach for the jar to do it yourself. You rub the ointment onto your burn, and the sensation reminds you strangely of running your hand over dewy grass, By the time you&#39;re done, the pain has decreased to barely an occasional twinge. It&#39;s certainly magical--you&#39;ve never experienced any relief so effective.

You look up to see Hawk watching you, and $ha.they nod&lt;&lt;hs&gt;&gt;, apparently satisfied with the job you&#39;ve done applying the ointment. &lt;&lt;include [[9-0.3-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="467" name="9-0.3-2.1.1" tags="draft" position="7225,575" size="100,100">&lt;&lt;set $ha.spark+=1&gt;&gt;You can feel the heat rising to your cheeks, and you quickly look away. If Hawk notices your change in demeanor, $ha.they do&lt;&lt;hes&gt;&gt;n&#39;t comment on it. Instead, $ha.they release&lt;&lt;hs&gt;&gt; your hand and push&lt;&lt;hes&gt;&gt; the small jar toward you across the table. &lt;&lt;include [[9-0.3-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="468" name="9-0.3-2.1.2" tags="draft" position="7325,575" size="100,100">&lt;&lt;set $ha.spark+=1&gt;&gt;&lt;&lt;set $ha.phys+=1&gt;&gt;Hawk is definitely too attractive for you to be this close to $ha.them, $ha.their sharp features are softened by $ha.their smile. Oh no--how long have you been staring at $ha.them? Apparently too long, since $ha.their smile has already started to vanish. Too soon, $ha.they release&lt;&lt;hs&gt;&gt; your hand and push&lt;&lt;hes&gt;&gt; the small jar toward you across the table. &lt;&lt;include [[9-0.3-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="469" name="9-0.3-2.1.3" tags="draft" position="7425,575" size="100,100">&lt;&lt;set $ha.spark+=1&gt;&gt;Your thoughts are increasingly starting to feel like a kettle being brought to a frantic boil. &quot;You can let go now.&quot;

Hawk&#39;s smile vanishes, and $ha.they look&lt;&lt;hs&gt;&gt; down at where your hand is held loosely in $ha.theirs. $ha.They snap&lt;&lt;hs&gt;&gt; $ha.their hand back with startling speed. As you carefully retract your own hand, $ha.they push&lt;&lt;hes&gt;&gt; the small jar toward you across the table. &lt;&lt;include [[9-0.3-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="470" name="9-0.3-2.1.4" tags="draft" position="7250,675" size="100,100">You pull your hand back out of Hawk&#39;s grip. $ha.They look briefly surprised but shift&lt;&lt;hs&gt;&gt; quickly to push the small jar toward you across the table. &lt;&lt;include [[9-0.3-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="471" name="9-0.3-2.1.5" tags="draft" position="7350,675" size="100,100">&quot;You can let go.&quot;

Hawk&#39;s smile vanishes, and $ha.they look&lt;&lt;hs&gt;&gt; down at where your hand is held loosely in $ha.theirs. $ha.They release&lt;&lt;hs&gt;&gt; your hand and push&lt;&lt;hes&gt;&gt; the small jar toward you across the table. &lt;&lt;include [[9-0.3-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="472" name="9-0.3-2.1.6" tags="draft" position="7450,675" size="100,100">&quot;Thank you.&quot;

$ha.They nod&lt;&lt;hs&gt;&gt; at you in acknowledgment and release&lt;&lt;hs&gt;&gt; your hand. $ha.They then push&lt;&lt;hes&gt;&gt; the small jar toward you across the table. &lt;&lt;include [[9-0.3-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="473" name="9-0.3-3" tags="draft" position="7375,825" size="100,100">&quot;Use that once a day. It won&#39;t do much to heal, but it will reduce the pain.&quot;

Even with Hawk&#39;s concoction, the cabinets seem more than a little dangerous. Perhaps too dangerous to risk your life for breakfast.

&lt;&lt;include [[9-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="474" name="9-2" tags="draft" position="7300,950" size="100,100">&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[You&#39;ve had enough magic for now. Or possibly forever.|9-2.1]]&lt;/li&gt;
&lt;li&gt;[[You&#39;re not sure how to feel about magic, but you&#39;re not up to trying the cabinets yet.|9-2.2]]&lt;/li&gt;
&lt;li&gt;[[You&#39;re not sure how to feel about magic, but you&#39;ll give the cabinets a try.|9-2.3]]&lt;/li&gt;
&lt;li&gt;[[You&#39;re excited to learn more about magic--including these cabinets.|9-2.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="475" name="9-2.1" tags="draft" position="7250,1075" size="100,100">&lt;&lt;set $magicvibes-=1&gt;&gt;You&#39;ve had enough magic for now. Or possibly forever. No hazardous cabinets this morning, thank you. &lt;&lt;include [[9-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="476" name="9-2.2" tags="draft" position="7350,1075" size="100,100">You&#39;re not sure how to feel about magic, but you&#39;re not up to trying the cabinets yet. They&#39;re more than a little concerning, especially with your &lt;&lt;if $cooking&gt;0&gt;&gt;lack of non-magical cooking experience&lt;&lt;else&gt;&gt;ability to cause chaos with even non-magical cooking&lt;&lt;/if&gt;&gt;. &lt;&lt;include [[9-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="477" name="9-2.3" tags="draft" position="7275,1175" size="100,100">&lt;&lt;set $nine.cook=true&gt;&gt;You&#39;re not sure how to feel about magic, but perhaps the cabinets are worth a try&lt;&lt;if $nine.burn&gt;&gt;--even if they do seem a little murderous&lt;&lt;/if&gt;&gt;. &lt;&lt;include [[9-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="478" name="9-2.4" tags="draft" position="7375,1175" size="100,100">&lt;&lt;set $magicvibes+=1&gt;&gt;&lt;&lt;set $nine.cook=true&gt;&gt;You&#39;re excited to learn more about magic, arcane cabinets included&lt;&lt;if $nine.burn&gt;&gt;--even if they do seem a little murderous&lt;&lt;/if&gt;&gt;. &lt;&lt;include [[9-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="479" name="9-3" tags="draft" position="7300,1300" size="100,100">&lt;&lt;if $nine.cook&gt;&gt;You&#39;re reasonably confident in your ability to &lt;&lt;if $cooking&gt;0&gt;&gt;toast&lt;&lt;else&gt;&gt;burn&lt;&lt;/if&gt;&gt; things, so you may as well get started. In order to do that&lt;&lt;else&gt;&gt;Instead&lt;&lt;/if&gt;&gt;, you&#39;ll have to brave the pantry. But when you open the door to look for &lt;&lt;if $nine.cook&gt;&gt;bread&lt;&lt;else&gt;&gt;something that won&#39;t require additional effort&lt;&lt;/if&gt;&gt;, you see that &quot;pantry&quot; is perhaps not the best word to describe it.

Its ceiling is not especially high, but you see rows of shelves stretch away from you until they follow the tower&#39;s curve out of sight. You recognize most of what&#39;s close to the door as being from this morning&#39;s delivery, but there are things you don&#39;t recognize, too--things you don&#39;t even recognize as edible. Next to a loaf of bread is what appears to be a faintly glowing purple melon. As you walk on, you pass a water-filled jar with what looks like ordinary seaweed until it leans toward you as you pass, giving you a careful inspection before apparently losing interest and drifting back to the middle of the jar. You walk past shelves that are cold and warm, wet and dry. Your skin prickles, and the hair on the back of your neck stands on end. More magic.&lt;&lt;if not $nine.cook&gt;&gt; Of course.&lt;&lt;/if&gt;&gt; &lt;&lt;if $magicvibes&lt;0&gt;&gt;Is there not a single room in this tower that&#39;s not invaded by magic?&lt;&lt;else&gt;&gt;You wonder if there&#39;s a single room in this tower that&#39;s not &lt;&lt;if $magicvibes&gt;0&gt;&gt;overflowing with&lt;&lt;else&gt;&gt;affected by&lt;&lt;/if&gt;&gt; magic.&lt;&lt;/if&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;i&gt;[[&quot;\&quot;&quot;+$name+&quot;.\&quot;&quot;|9-4]]&lt;/i&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="480" name="9-4" tags="draft" position="7300,1400" size="100,100">As you continue, the mixture of edible and odd turns abruptly in favor of odd: eldritch plants, vessels of goopy liquid, a metal-banded chest, and strangely fragrant rocks. You turn around and find that you can&#39;t see the door anymore, hidden beyond the tower&#39;s curvature. Hawk doesn&#39;t seem to have followed you in. You&#39;re entirely alone: even the mice and spiders you might have seen in your own pantry at home are conspicuous in their absence. Surrounded an unnatural stillness, it&#39;s easy to remember why you&#39;re here: Somewhere in this tower, there may be something powerful enough to turn the tide of the war. Keeping it deep in a pantry full of strange things wouldn&#39;t be a bad way to hide it.&lt;&lt;if $ha.spark&gt;0&amp;&amp;$nine.burn&gt;&gt; Even if you and Hawk shared a moment earlier, you can&#39;t let that sway you. Your &lt;&lt;if $motiv==&quot;kingdom&quot;&gt;&gt;country&lt;&lt;else&gt;&gt;$motiv&lt;&lt;/if&gt;&gt; is more important.&lt;&lt;/if&gt;&gt; You should--

&quot;$name.&quot;

You turn to see Hawk standing directly behind you, $ha.their expression cool as $ha.they look&lt;&lt;hs&gt;&gt;&lt;&lt;if $height&lt;4&gt;&gt; down&lt;&lt;/if&gt;&gt; at you&lt;&lt;if $ha.spark&gt;0&gt;&gt; and $ha.their earlier softness entirely gone&lt;&lt;/if&gt;&gt;. &quot;Don&#39;t wander. I have things to do today. You can waste your own time later when you&#39;re not also wasting mine. Find something to eat, and let&#39;s go.&quot; $ha.They step&lt;&lt;hs&gt;&gt; aside and gesture&lt;&lt;hs&gt;&gt; for you to lead the way back to the kitchen--no way to search for the weapon now.

On the way out, you grab...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...an apple.|9-4.1]]&lt;/li&gt;
&lt;li&gt;[[...bread.|9-4.2]]&lt;/li&gt;
&lt;li&gt;[[...a peach pie.|9-4.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="481" name="9-4.1" tags="draft" position="7200,1525" size="100,100">&lt;&lt;set $nine.food=&quot;apple&quot;&gt;&gt;As you near the kitchen, you grab an apple from a bushel. It&#39;s far from a full breakfast, but &lt;&lt;if $six.drink==2&gt;&gt;you&#39;re not sure how much more your stomach can handle just now&lt;&lt;else&gt;&gt;it should keep you going until lunch&lt;&lt;/if&gt;&gt;. There&#39;s no real need to cook it...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...so you don&#39;t.|9-5_nocook]]&lt;/li&gt;&lt;&lt;if $nine.cook&gt;&gt;
&lt;li&gt;[[...but you really want to try the cabinets.|9-5_cook]]&lt;/li&gt;&lt;&lt;/if&gt;&gt;
&lt;li&gt;[[...but you&#39;d like to annoy Hawk.|9-5_cook][$nine.cookwhyhawk=true]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="482" name="9-4.2" tags="draft" position="7300,1525" size="100,100">&lt;&lt;set $nine.food=&quot;bread&quot;&gt;&gt;As you near the kitchen, you grab a loaf of bread off a shelf. It&#39;s a versatile food: served with butter or preserves or unaccompanied; toasted or not. It&#39;s not really a full breakfast, but &lt;&lt;if $six.drink==2&gt;&gt;you&#39;re not sure how much more your stomach can handle just now&lt;&lt;else&gt;&gt;it should keep you going until lunch with enough slices&lt;&lt;/if&gt;&gt;. You don&#39;t strictly need to toast it...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...so you don&#39;t.|9-5_nocook]]&lt;/li&gt;
&lt;li&gt;[[...but you&#39;d like to try the cabinets.|9-5_cook]]&lt;/li&gt;
&lt;li&gt;[[...but you&#39;d like to annoy Hawk.|9-5_cook][$nine.cookwhyhawk=true]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="483" name="9-4.3" tags="draft" position="7400,1525" size="100,100">&lt;&lt;set $nine.food=&quot;pie&quot;&gt;&gt;As you near the kitchen, you grab &lt;&lt;if $skill==&quot;strategy&quot;||$skill==&quot;evasion&quot;&gt;&gt;the peach pie you spotted earlier&lt;&lt;else&gt;&gt;a peach pie you spotted on the way in&lt;&lt;/if&gt;&gt;. It would surely horrify both your mother and the head cook to know you&#39;re eating peach pie for breakfast, but Sabine would doubtless be proud. It&#39;s not really a breakfast food, but &lt;&lt;if $six.drink==2&gt;&gt;perhaps it will do the impossible and rid you of your hangover&lt;&lt;else&gt;&gt;it will get you through until lunch if you eat enough&lt;&lt;/if&gt;&gt;. It&#39;s warm from the pantry&#39;s magic, so there&#39;s no need to do anything further to it.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[So you don&#39;t.|9-5_nocook]]&lt;/li&gt;
&lt;li&gt;[[But you&#39;d like to try the cabinets.|9-5_cook]]&lt;/li&gt;
&lt;li&gt;[[But you&#39;d like to annoy Hawk.|9-5_cook][$nine.cookwhyhawk=true]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="484" name="9-5_nocook" tags="draft" position="7225,1650" size="100,100">&lt;&lt;set $nine.cook=false&gt;&gt;&lt;&lt;if $nine.food!=&quot;apple&quot;&gt;&gt;When you reemerge into the kitchen, you scan the crowded cabinets for a knife to cut yourself a slice of $nine.food.

&lt;&lt;include [[9-5-2]]&gt;&gt;&lt;&lt;else&gt;&gt;Since your apple is portable, you&#39;re ready to begin your tour of the tower. You probably won&#39;t be able to avoid cooking forever, but at least you&#39;ve escaped it for now.

&lt;&lt;include [[9-7]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="485" name="9-5_cook" tags="draft" position="7375,1650" size="100,100">&lt;&lt;set $nine.cook=true&gt;&gt;You approach the hot cabinet with your $nine.food, and you hear Hawk sigh.

&lt;&lt;include [[9-5-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="486" name="9-5-2.1" tags="draft" position="7225,1900" size="100,100">&lt;&lt;set $confidence-=1&gt;&gt;You turn to look&lt;&lt;if $height&lt;4&gt;&gt; up&lt;&lt;/if&gt;&gt; at Hawk. &quot;Can you help?&quot;

&quot;Help?&quot;

You gesture to the knives in the drawer, and Hawk steps closer to select a knife from the drawer: one with &lt;&lt;if $nine.food==&quot;apple&quot;&gt;&gt;a small, sharp blade.&lt;&lt;else&gt;&gt;a long, ridged blade.&lt;&lt;if $ha.knowcook&gt;&gt; &quot;Serrated, for the crust,&quot; $ha.they explain&lt;&lt;hs&gt;&gt;.&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt; $ha.They make&lt;&lt;hs&gt;&gt; short work of your $nine.food, slicing it with inhuman precision&lt;&lt;if $nine.cook&gt;&gt; before--with no further input on your part--deftly using the same knife to shovel the slice&lt;&lt;if $nine.food!=&quot;pie&quot;&gt;&gt;s&lt;&lt;/if&gt;&gt; into the cabinet.&lt;&lt;if $nine.food==&quot;bread&quot;&gt;&gt;&lt;&lt;set $nine.food=&quot;toast&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I wanted to cook it myself.\&quot;&quot;|9-5-2.1.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Thank you.\&quot;&quot;|9-5-2.1.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;Let &quot;+$ha.them+&quot; proceed.&quot;|9-5-2.1.3]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;else&gt;&gt;. Against all odds, you have accomplished breakfast. &lt;&lt;include [[9-6]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="487" name="9-5-2.2" tags="draft" position="7375,1900" size="100,100">&lt;&lt;set $confidence+=1&gt;&gt;&lt;&lt;set $newcook+=1&gt;&gt;After assessing your food for too long, you make the first slice. Eventually, you end up with a &lt;&lt;if $cooking&gt;0&gt;&gt;reasonably acceptable&lt;&lt;else&gt;&gt;rather unfortunate-looking&lt;&lt;/if&gt;&gt; &lt;&lt;if $nine.food==&quot;pie&quot;&gt;&gt;piece&lt;&lt;else&gt;&gt;collection of pieces&lt;&lt;/if&gt;&gt;. &lt;&lt;if $nine.cook&gt;&gt;&lt;&lt;set $newcook+=1&gt;&gt;Now, for the moment of truth: the cabinet. &lt;&lt;if $cooking&gt;1&gt;&gt;You have the presence of mind to dig a spatula out of the drawer to lay the $nine.food inside on the shelf and, as the slice&lt;&lt;if $nine.food!=&quot;pie&quot;&gt;&gt;s&lt;&lt;/if&gt;&gt; &lt;&lt;if $nine.food==&quot;bread&quot;&gt;&gt;toast&lt;&lt;else&gt;&gt;warm&lt;&lt;if $nine.food==&quot;pie&quot;&gt;&gt;s&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;, you cautiously &lt;&lt;if $nine.food==&quot;pie&quot;&gt;&gt;remove it when it starts&lt;&lt;else&gt;&gt;flip them when they start&lt;&lt;/if&gt;&gt; to smell a little too charred. &lt;&lt;if $nine.food==&quot;bread&quot;&gt;&gt;&lt;&lt;set $nine.food=&quot;toast&quot;&gt;&gt;&lt;&lt;/if&gt;&gt; Once all is said and done, your $nine.food is a little smoky but surprisingly edible.&lt;&lt;else&gt;&gt;You toss the slice&lt;&lt;if $nine.food!=&quot;pie&quot;&gt;&gt;s&lt;&lt;/if&gt;&gt; onto the shelf, careful not to burn yourself&lt;&lt;if $nine.burn&gt;&gt; again&lt;&lt;/if&gt;&gt;. When you start to smell something burning, you realize you&#39;re going to need to get &lt;&lt;if $nine.food==&quot;pie&quot;&gt;&gt;it&lt;&lt;else&gt;&gt;them&lt;&lt;/if&gt;&gt; out somehow. Your hands aren&#39;t going to work. Yanking open the drawer, you rummage for something that will do the job. Eventually, you settle on a spatula which you use to coax the slice&lt;&lt;if $nine.food!=&quot;pie&quot;&gt;&gt;s&lt;&lt;/if&gt;&gt; off the shelf and onto a plate from a nearby stack. &lt;&lt;if $nine.food==&quot;bread&quot;&gt;&gt;&lt;&lt;set $nine.food=&quot;toast&quot;&gt;&gt;&lt;&lt;/if&gt;&gt;Once all is said and done, your $nine.food is &lt;&lt;if $cooking&gt;0&gt;&gt;a little overcooked but fairly edible&lt;&lt;else&gt;&gt;fairly burnt on the bottom, but you can eat around it. Mostly&lt;&lt;/if&gt;&gt;.&lt;&lt;/if&gt;&gt;

By some miracle&lt;&lt;else&gt;&gt;Against all odds&lt;&lt;/if&gt;&gt;, you have accomplished breakfast. &lt;&lt;include [[9-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="488" name="9-5-2" tags="draft" position="7300,1775" size="100,100">&quot;Knives are in the left drawer.&quot;

&lt;&lt;if $ha.ban&gt;3&gt;&gt;&quot;I thought you didn&#39;t cook.&quot;

&quot;Didn&#39;t know knives were only used for cooking.&quot; Hawk lets that ominous remark sit for a moment before adding, &quot;This is my home, if you forgot.&quot; You feel a little twinge of guilt for your almost-snooping. &quot;Everything in it is where I put it--except what you brought with you.&quot;

&lt;&lt;elseif $ha.silent&lt;4||$nvbook==0&gt;&gt;&quot;Thank you.&quot; &lt;&lt;/if&gt;&gt;You open the drawer to find a small assortment of mismatched utensils. They&#39;re either brand new or magically preserved--there&#39;s no way to tell which. &lt;&lt;if $nine.food!=&quot;pie&quot;&gt;&gt;Before you can make&lt;&lt;if $confidence&lt;0&gt;&gt; more of&lt;&lt;/if&gt;&gt; a fool of yourself, Hawk sets a cutting board down on the counter next to you. $ha.They stand&lt;&lt;hs&gt;&gt; aside and watch&lt;&lt;hs&gt;&gt; you&lt;&lt;else&gt;&gt;Hawk comes over to stand nearby and watch you&lt;&lt;/if&gt;&gt;. &lt;&lt;if $ha.knowcook&gt;&gt;Presumably $ha.they&#39;&lt;&lt;hre&gt;&gt; preparing to step in if this becomes &lt;&lt;if $cooking&gt;0&gt;&gt;a mess&lt;&lt;else&gt;&gt;as much of a disaster as you implied it might&lt;&lt;/if&gt;&gt;.&lt;&lt;elseif $nine.burn&gt;&gt;You&#39;ve already brought chaos to this kitchen today, so it&#39;s not a surprise $ha.they&#39;&lt;&lt;hre&gt;&gt; watching you closely&lt;&lt;else&gt;&gt;Have you somehow given away that you don&#39;t know what you&#39;re doing?&lt;&lt;/if&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Ask Hawk to slice it.|9-5-2.1]]&lt;/li&gt;
&lt;li&gt;[[Slice it yourself.|9-5-2.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="489" name="9-5-2.1.1" tags="draft" position="7175,2025" size="100,100">&lt;&lt;set $confidence+=1&gt;&gt;&lt;&lt;set $newcook+=1&gt;&gt;&quot;I wanted to cook it myself.&quot;

Hawk blinks at you before holding the knife out to you--as if you could proficiently balance your breakfast on it they way $ha.they did. But you take it, and as your $nine.food is starting to smell a little burnt, you &lt;&lt;if $skill!=&quot;persistence&quot;&gt;&gt;use the knife to push your food off the shelf and onto a plate from a nearby stack that you&#39;re holding below. It ends up in more of a disheveled pile than anything presentable, but it looks more or less edible&lt;&lt;if $cooking&lt;0&gt;&gt; aside from a few blackened spots you&#39;ll need to cut away&lt;&lt;/if&gt;&gt;.&lt;&lt;else&gt;&gt;manage to coax the knife blade between &lt;&lt;if $nine.food==&quot;pie&quot;&gt;&gt;the&lt;&lt;else&gt;&gt;a&lt;&lt;/if&gt;&gt; slice of $nine.food and the shelf. You hold a plate from a nearby stack as close as you safely can and quickly lift it up and onto the plate&lt;&lt;if $nine.food!=&quot;pie&quot;&gt;&gt; before following with the other slices&lt;&lt;/if&gt;&gt;. &lt;&lt;if $cooking&gt;0&gt;&gt;You&#39;re sure there&#39;s&lt;&lt;else&gt;&gt;There&#39;s probably&lt;&lt;/if&gt;&gt; a better way to do this, but you rose to the challenge presented to you. The results aren&#39;t especially attractive, but it looks more or less edible&lt;&lt;if $cooking&lt;0&gt;&gt; aside from a few blackened spots you&#39;ll need to cut away&lt;&lt;/if&gt;&gt;.&lt;&lt;/if&gt;&gt;

&lt;&lt;if $cooking&gt;0&gt;&gt;By some miracle&lt;&lt;else&gt;&gt;Against all odds&lt;&lt;/if&gt;&gt;, you have accomplished breakfast. &lt;&lt;include [[9-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="490" name="9-5-2.1.2" tags="draft" position="7275,2025" size="100,100">&quot;Thank you.&quot;

&lt;&lt;include [[9-5-2.1.3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="491" name="9-5-2.1.3" tags="draft" position="7250,2150" size="100,100">Hawk continues to watch your food cook until $ha.they&#39;&lt;&lt;hre&gt;&gt; apparently satisfied with it. In a few more seconds, you have a plate full of breakfast. &lt;&lt;include [[9-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="492" name="9-6" tags="draft" position="7300,2275" size="100,100">Now, all that&#39;s left to do is eat it. And judging by the way Hawk is staring at you impatiently, the time you have to do so is limited. &lt;&lt;if $newcook&gt;0&gt;&gt;&lt;&lt;if $nine.food==&quot;pie&quot;&gt;&gt;It probably isn&#39;t quite right to take credit for warming an already baked slice of pie, but p&lt;&lt;else&gt;&gt;P&lt;&lt;/if&gt;&gt;reparing your own breakfast is a satisfying feeling&lt;&lt;if $nine.food!=&quot;pie&quot;&gt;&gt;--even if it&#39;s a little overcooked and bland&lt;&lt;/if&gt;&gt;.&lt;&lt;else&gt;&gt;You probably won&#39;t be able to avoid cooking forever, but at least you&#39;ve escaped it for now.&lt;&lt;/if&gt;&gt;

The moment you finish your last bite of $nine.food, Hawk snatches your dishes and deposits them in the sink. &quot;Let&#39;s go.&quot;

&lt;&lt;include [[9-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="493" name="9-7" tags="draft endscene" position="7300,2400" size="100,100">&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Follow Hawk.|10-0]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="494" name="10-0" tags="draft startscene autosave" position="8000,100" size="100,100">&lt;&lt;set $cursc=10&gt;&gt;&lt;&lt;set $subt.loc=&quot;Third Floor Hallway&quot;&gt;&gt;&lt;&lt;notify&gt;&gt;Autosave complete!&lt;&lt;/notify&gt;&gt;You follow Hawk back into the corridor, and $ha.they gesture&lt;&lt;hs&gt;&gt; in the direction of your room. &quot;You&#39;ve seen what&#39;s on this floor: bedrooms, storage, kitchen. You&#39;ve seen the entrance, too. No need to waste more time. Just don&#39;t wander too much down there. The caves under the tower were here first, and I have no authority there. Don&#39;t fall down any holes. It annoys them.&lt;&lt;if $ha.silent&lt;4||$bookask==true&gt;&gt;&quot;

&quot;&#39;Them?&#39;&quot;

&quot;All sorts of things live down there. Most of them eat anything in their territory--including humans.&lt;&lt;/if&gt;&gt; We have a deal: I don&#39;t bother them, they don&#39;t bother me. I expect you to keep it that way.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Understood.\&quot;&quot;|10-0.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;What if I don&#39;t?\&quot;&quot;|10-0.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Don&#39;t think you could take them?\&quot;&quot;|10-0.3]]&lt;/li&gt;
&lt;li&gt;[[Nod.|10-0.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="495" name="10-0.1" tags="draft" position="7850,225" size="100,100">&quot;Understood.&quot;

&quot;Good. &lt;&lt;include [[10-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="496" name="10-0.2" tags="draft" position="7950,225" size="100,100">&quot;What if I don&#39;t?&quot;

&quot;Then I leave you to your fate.&quot;

&quot;Really?&quot;

&quot;&lt;&lt;if $ha.ban&gt;3&gt;&gt;Maybe&lt;&lt;else&gt;&gt;No&lt;&lt;/if&gt;&gt;. &lt;&lt;include [[10-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="497" name="10-0.3" tags="draft stuff" position="8050,225" size="100,100">&lt;&lt;set $ha.ban+=1&gt;&gt;&quot;Don&#39;t think you could take them?&quot;

Hawk stares at you silently for a moment, perfectly still as $ha.they watch&lt;&lt;hes&gt;&gt; you. &quot;You don&#39;t know who you&#39;re talking to. This is a mercy for them, not me. Violence isn&#39;t something to make light of.&quot; $ha.They do&lt;&lt;hes&gt;&gt;n&#39;t speak with anger, but you can feel the force of conviction in $ha.their words. &quot;&lt;&lt;include [[10-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="498" name="10-0.4" tags="draft" position="8150,225" size="100,100">&lt;&lt;set $ha.silent+=1&gt;&gt;You nod.

&quot;Good. &lt;&lt;include [[10-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="499" name="10-1" tags="draft" position="8000,350" size="100,100">Now, second floor.&quot; Without another word, $ha.they disappear&lt;&lt;hs&gt;&gt;.

It takes you a moment of fumbling to pull out your stone and follow them.

Someday, you may get used to the dizzy, surreal sensation of moving between floors this way, but it won&#39;t be today. Your vision spins, and you can vaguely make out Hawk moving away from you toward an open doorway. By the time you steady yourself enough to follow, $ha.they&#39;&lt;&lt;hre&gt;&gt; far ahead of you down another curving passageway. Like the rest of the tower, it looks naturally formed, but the air is more humid and warm. When you turn to follow Hawk through another doorway, you can see why.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|10-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="500" name="10-2" tags="draft" position="8000,450" size="100,100">&lt;&lt;set $subt.loc=&quot;Second Floor Gardens&quot;&gt;&gt;You enter a large chamber filled with plants, most of which you&#39;ve never seen before. They grow in disorganized beds divided from one another by irregular water channels and lit by white-hot spheres suspended from the chamber roof. The heat, the damp, and the potently mingling scents of earth, greenery, and flowers forms an overwhelming wall of sensation very much unlike any proper garden you&#39;ve ever been in.

No effort has been put into any aesthetic cohesion. Bright, clashing colors fill the room, with some plants even hosting flowers of dozens of different hues blooming from one stem. Others that you pass have only one huge flower weighing down tall stalks or bursting out of dense masses of leaves. Bees and small birds fly between flowers, adding the occasional flurry of movement and even more color to the chamber. Even the plants that don&#39;t have flowers are brilliantly green.

&quot;These are tropical. Don&#39;t eat any of them. Don&#39;t touch the ones with signs.&quot; Hawk gestures to a small red marker sticking out of the soil as you pass it. As $ha.they lead&lt;&lt;hs&gt;&gt; the way, Hawk stops suddenly to crouch down beside a large viney plant that&#39;s wound its way up a short companion tree and stretched out over its whole bed. Your hair stands on end as Hawk begins to speak in the strange language $ha.they used when preparing $ha.their teleportation spell at your house. It makes your ribs shudder and scratches the inside of your skull. It&#39;s hard to say how long it goes on, but when it ends, you blink away the daze that came over you to see the vines slithering away from a red marker they&#39;d grown over entirely. &quot;Keep an eye on this one. It gets carried away.&quot; When $ha.they stand&lt;&lt;hs&gt;&gt; and start&lt;&lt;hs&gt;&gt; on $ha.their way again, you follow $ha.them toward the sound of roaring water in the chamber ahead.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|10-3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="501" name="10-3" tags="draft" position="8000,550" size="100,100">The tower&#39;s central waterfall pours in through the ceiling and down through the floor, spraying water into nearby reservoirs that feed the network of channels in this chamber and the previous. You recognize many of the plants in the expanse before you, including several fruit trees accommodated by the high ceiling. A large fissure in the wall opens to the rainy forest outside. Pine boughs have grown into through the opening, giving access to birds and squirrels, and a small beehive is tucked into a nearby overhang. A dark alcove is overrun with mushrooms large and small, plain and colorful. Vines crawl up the walls, and rivulets of flowers stream down from the ceiling. Dragonflies and frogs linger around several small ponds occupied by reeds and lilypads.

&quot;These are mostly safe. Don&#39;t eat them either, unless you&#39;re sure you know what they are. Don&#39;t eat any mushrooms. Or touch them. Some are delicate. Don&#39;t bother the bees, and they won&#39;t bother you. Don&#39;t feed the squirrels, or they&#39;ll never leave. Enough living here as it is.&quot; Hawk strolls through the chamber toward a heavy wood door. As you approach, the air gives off a faint buzzing sensation that you&#39;ve already started to associate with magic. &quot;The plants in there are fragile. Don&#39;t bother them. That&#39;s all for the garden. Fourth floor.&quot;

Hawk again disappears with no further ceremony, leaving you beside the closed, unattended door.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;Join &quot;+$ha.them+&quot; on the fourth floor.&quot;|10-4]]&lt;/li&gt;
&lt;li&gt;[[Open the door.|10-3.1]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="502" name="10-4" tags="draft" position="8000,775" size="100,100">&lt;&lt;set $subt.loc=&quot;Fourth Floor Library&quot;&gt;&gt;When you arrive on the fourth floor, your field of vision is filled almost entirely by books. Shelves are arrayed around the outer wall and in rows scattered around a room that seems to span the full width of the tower. Rain pelts the banks of windows set over the towering wooden bookcases, and lamps with radiant spheres drip from the ceiling, illuminating the work tables and desks scattered around the expanse.

&quot;Borrow whatever books you wish,&quot; Hawk says, reminding you of $ha.their presence. &quot;They&#39;re organized by topic. Don&#39;t damage them. There aren&#39;t any here I can&#39;t repair, but I don&#39;t want to have to waste that time.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I won&#39;t damage them.\&quot;&quot;|10-4.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Why do you think I&#39;ll destroy things?\&quot;&quot;|10-4.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Thank you for letting me borrow them.\&quot;&quot;|10-4.3]]&lt;/li&gt;
&lt;li&gt;[[Nod.|10-4.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="503" name="10-3.1" tags="draft stuff" position="7925,650" size="100,100">&lt;&lt;set $curiosity+=1&gt;&gt;&lt;&lt;set $ten.door=true&gt;&gt;A shiver runs down your spine as you step closer to the door, and when you touch the handle, your fingers crawl with prickling numbness. It takes substantial effort to force your stiff, heavy arm to pull the handle. But even when you do, the door doesn&#39;t budge. Locked. Of course. 

Time to follow Hawk before $ha.they notice&lt;&lt;hs&gt;&gt; you&#39;ve delayed on purpose.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;Join &quot;+$ha.them+&quot; on the fourth floor.&quot;|10-4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="504" name="10-4.1" tags="draft" position="7950,900" size="100,100">&quot;I won&#39;t damage them.&quot;

&quot;Good. &lt;&lt;include [[10-5]]&gt;&gt;</tw-passagedata><tw-passagedata pid="505" name="10-4.2" tags="draft" position="8050,900" size="100,100">&quot;Why do you think I&#39;ll destroy things?&quot;

&quot;Humans usually do.&quot; There isn&#39;t much venom to $ha.their words, only certainty. &quot;&lt;&lt;include [[10-5]]&gt;&gt;</tw-passagedata><tw-passagedata pid="506" name="10-4.3" tags="draft" position="7975,1000" size="100,100">&quot;Thank you for letting me borrow them.&quot;

Hawk nods. &quot;I hope you&#39;ll be comfortable for the rest of your time here.&quot;

You&#39;re not planning to stay long, but as far as Hawk knows, the &quot;rest of your time&quot; in the tower is the full remainder of your life.

&quot;&lt;&lt;include [[10-5]]&gt;&gt;</tw-passagedata><tw-passagedata pid="507" name="10-4.4" tags="draft" position="8075,1000" size="100,100">&lt;&lt;set $ha.silent+=1&gt;&gt;You nod, and Hawk seems satisfied.

&quot;&lt;&lt;include [[10-5]]&gt;&gt;</tw-passagedata><tw-passagedata pid="508" name="10-5" tags="draft" position="8000,1125" size="100,100">That&#39;s all there is to show you. When you&#39;re settled, we can go into town. Or maybe Shea will take you. Don&#39;t leave your room after dark, but especially don&#39;t leave the tower at night. I raised this spire with my own magic. I&#39;m connected to it. The forest is much older than anyone I know, and dark things live in it. Vicious things were done on this land, and it draws vicious things to it. Now, I have things to do. Do what you wish on the floors I&#39;ve shown you. If you need my attention, &lt;&lt;if $nvbook==0&gt;&gt;say my name twice&lt;&lt;else&gt;&gt;write my name in your book twice&lt;&lt;/if&gt;&gt;. Don&#39;t abuse it--I&#39;ll know.&quot;

Again, Hawk vanishes, this time to somewhere you presumably can&#39;t follow.

The cavernous library looms around you, and the only sound you can hear is the rain on the windows. &lt;&lt;if $optimistic&gt;0&gt;&gt;It&#39;s likely wishful thinking, but perhaps you could get lucky on your first day here by beginning your search for Hawk&#39;s secrets in earnest&lt;&lt;else&gt;&gt;You have an opportunity now to begin what may well be a long search for Hawk&#39;s secrets&lt;&lt;/if&gt;&gt;. But there&#39;s nothing to prevent you from taking some time to catch your breath after all that you&#39;ve experienced in the last few days.

&lt;ul class=&quot;choice&quot;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[Investigate the entrance hall.|10-6ent]]&lt;/li&gt;&lt;/span&gt;
&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[Investigate the gardens.|10-6gar]]&lt;/li&gt;&lt;/span&gt;
&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[Investigate the pantry.|10-7pan]]&lt;/li&gt;&lt;/span&gt;
&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[Investigate the library.|10-7lib]]&lt;/li&gt;&lt;/span&gt;
&lt;li&gt;[[Give up the chance to search and return to your room.|10-7bed]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="509" name="10-6ent" tags="draft" position="7650,1250" size="100,100">&lt;&lt;set $ten.excount+=1&gt;&gt;&lt;&lt;set $subt.loc=&quot;Spire Entrance&quot;&gt;&gt;The cavernous entrance hall somehow feels even larger now that you&#39;re here alone. The distance between floor and ceiling dwarfs most buildings you&#39;ve been in, and the huge cascade hits the pool below with terrifying force. You see small shapes moving on the walkways high above, but you can&#39;t see a clear way to reach the walkways from the floor. It&#39;s difficult to say if you&#39;d want to encounter those creatures up close anyhow.

You spend some time wandering around the hall, trying to familiarize yourself with its irregular alcoves and hidden fissures that open to the caves below. It&#39;s unlikely anyone would try to hide a weapon so close to their front door, but you may as well rule it out early. &lt;&lt;include [[10-6.motiv]]&gt;&gt;

Your search is rewarded with &lt;&lt;if $eight.breakclothes==0&gt;&gt;a damp robe&lt;&lt;else&gt;&gt;damp clothes&lt;&lt;/if&gt;&gt; and an assortment of cobwebs stuck to you. On the whole, &lt;&lt;if $optimistic&gt;0&gt;&gt;less than you were hoping for&lt;&lt;else&gt;&gt;a complete waste of time&lt;&lt;/if&gt;&gt;. But before you go, you might as well take one last look at...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...the cascade pool.|10-6ent.1]]&lt;/li&gt;
&lt;li&gt;[[...the openings to the caves below.|10-6ent.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="510" name="10-6gar" tags="draft" position="7875,1250" size="100,100">&lt;&lt;set $ten.excount+=1&gt;&gt;&lt;&lt;set $subt.loc=&quot;Second Floor Gardens&quot;&gt;&gt;When you return to the gardens, they&#39;re just as sensationally chaotic as before, but the animals&lt;&lt;if $skill==&quot;evasion&quot;&gt;&gt;--and perhaps even some of the plants--&lt;&lt;else&gt;&gt; &lt;&lt;/if&gt;&gt;seem a little more shy now that it&#39;s just you. Considering Hawk&#39;s warnings about the dangers of the plants growing here, it seems entirely possible one or more could theoretically be a &quot;weapon&quot; in the right circumstances. Even your mother&#39;s rose garden could be dangerous if you pushed someone into it. So even if the weapon is here, it&#39;s less a matter of looking for a needle in a haystack as it is looking for the largest, deadliest needle in a stack of smaller needles.

You wander through the two main garden chambers, getting as close as you dare to the plants and animals living in them. There are too many oddities here for one day&#39;s investigation--especially without much horticultural knowledge to accompany you--but it&#39;s worth a start. &lt;&lt;include [[10-6.motiv]]&gt;&gt;

By the time you&#39;ve perused the entirety of the gardens again, you&#39;ve seen plenty of things you didn&#39;t even know were possible, hues of flowers you didn&#39;t know existed. But you&#39;re no closer to the answer you need than you were before. &lt;&lt;if $optimistic&gt;0&gt;&gt;Even so, you&#39;ve seen some interesting things&lt;&lt;else&gt;&gt;Not an unexpected outcome&lt;&lt;/if&gt;&gt;. But before you go, there&#39;s something you&#39;d like to take a closer look at...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...the large chamber window.|10-6gar.1]]&lt;/li&gt;
&lt;li&gt;[[...the forbidden door.|10-6gar.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="511" name="10-7pan" tags="draft" position="8125,1250" size="100,100">&lt;&lt;set $ten.excount+=1&gt;&gt;&lt;&lt;set $subt.loc=&quot;The Kitchen&quot;&gt;&gt;&lt;&lt;if $ten.excount&lt;2&gt;&gt;You return to the kitchen to find it in more or less the same state you left it.&lt;&lt;else&gt;&gt;Since you already came here for lunch, it&#39;s worth taking a more thorough look around.&lt;&lt;/if&gt;&gt; There isn&#39;t much chance that Hawk is hiding a weapon in the kitchen itself--unless the enchanted cabinets count as weapons--but the pantry is another story. A large quantity of the things you saw in there didn&#39;t seem particularly edible. It&#39;s unlikely Hawk is storing anything especially sensitive in a place you&#39;ll be entering frequently, but maybe $ha.they just didn&#39;t think you&#39;d go that far in.

You retrace your steps deep into the pantry tunnel as the goosebumps rise on your arms in response to the growing density of magic. Even if it was built to store food initially, it doesn&#39;t seem to have been an actual priority until recently. There are far too many bizarre things in the pantry to do much beyond an initial survey, but you&#39;ll have plenty of opportunities to return. &lt;&lt;include [[10-6.motiv]]&gt;&gt;

By the time you give up on reaching the far end of the pantry, you&#39;ve long since forgotten most of what you saw on the way there. You&#39;ll need days to fully explore this place–if it&#39;s even possible to do so. The humming pressure of magic has gradually increased as you&#39;ve progressed, and the shelves have gotten more bizarre: shelves with water droplets suspended around them for moisture progress to shelves holding huge water droplets that suspend objects inside them. This is not something you can reasonably attempt to fathom in one day, so as you make your way back, you stop to look at just one thing you saw on the way in:

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[The moving seaweed.|10-6pan.1]]&lt;/li&gt;
&lt;li&gt;[[The metal-banded chest.|10-6pan.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="512" name="10-7lib" tags="draft" position="8350,1250" size="100,100">&lt;&lt;set $ten.excount+=1&gt;&gt;&lt;&lt;set $subt.loc=&quot;Fourth Floor Library&quot;&gt;&gt;&lt;&lt;if $ten.excount&lt;2&gt;&gt;Since you&#39;re already here, you might as well take a better look around. &lt;&lt;/if&gt;&gt;Apart from the entrance hall, the library is the most expansive room you&#39;ve seen so far, and the only way in which it seems to significantly lose out is in height: It&#39;s only equivalent to about two ordinary stories. Many shelves nearly reach the ceiling, but as you wander, you don&#39;t spot any ladders. Even so, there are plenty of books within reach--more than you could hope to read in a lifetime.

The organization of Hawk&#39;s collection isn&#39;t immediately apparent, so if you&#39;re to use any books in pursuing your goal, you&#39;ll need to determine how to find them first. It&#39;s probably only a matter of time before you&#39;ll need to do some research, so it&#39;s better to start assessing the situation now. &lt;&lt;include [[10-6.motiv]]&gt;&gt;

When the headache sets in, you&#39;ve only made it a fraction of the way through Hawk&#39;s collection. To say it&#39;s organized by subject may be true, but if it is, most of those subjects aren&#39;t ones you understand. Various texts on history and biology are shelved together, separated from their fellows in subject matter which reside near books on magic or even fiction. It might even be better to assume they&#39;re just shelved randomly rather than accept the possibility that you might have to read large parts of these books to even begin to decipher Hawk&#39;s organization. &lt;&lt;if $optimistic&gt;0&gt;&gt;You were hoping for more substantial progress, but perhaps you can come back and skim another time&lt;&lt;else&gt;&gt;The idea of coming back to catalog all these books is, frankly, a little alarming&lt;&lt;/if&gt;&gt;. But for now, you&#39;ve managed to isolate a couple large clusters of books: one of fiction and one on magic. You decide to peruse the...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...fiction.|10-6lib.1]]&lt;/li&gt;
&lt;li&gt;[[...texts on magic.|10-6lib.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="513" name="10-7bed" tags="draft" position="8200,1575" size="100,100">&lt;&lt;set $subt.loc=&quot;Your Room&quot;&gt;&gt;&lt;&lt;set $ten.bed=true&gt;&gt;&lt;&lt;if $ten.excount==0&gt;&gt;&lt;&lt;set $curiosity-=2&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;set $curiosity-=1&gt;&gt;&lt;&lt;/if&gt;&gt;You spend the rest of the day settling into your new room&lt;&lt;if $beastseen==7&gt;&gt; and tidying up the glass from last night&lt;&lt;/if&gt;&gt;. Your clothes from the wedding &lt;&lt;if $seven.clothes==&quot;floor&quot;&gt;&gt;are a rumpled heap after residing on the floor for so long, but you put them into your wardrobe in the hope that they&#39;ll sort themselves out a little.&lt;&lt;else&gt;&gt;aren&#39;t in the best state, but you at least manage to get them into the wardrobe in an orderly fashion.&lt;&lt;/if&gt;&gt; The mud isn&#39;t doing the ensemble any favors, though. Washing your clothes is an even less desirable activity than cooking, so that can wait for another time.

&lt;&lt;if $luggage&lt;2&gt;&gt;Since you packed light, it doesn&#39;t take long to find places for the rest of your belongings&lt;&lt;elseif $luggage&lt;3&gt;&gt;It takes a little while, but you manage to get your things mostly unpacked&lt;&lt;if $ten.excount==0&gt;&gt; and organized&lt;&lt;else&gt;&gt;, though it&#39;s going to take some more work to get them organized&lt;&lt;/if&gt;&gt;&lt;&lt;else&gt;&gt;By the time you&#39;re a few hours into unpacking, it becomes clear you may have overpacked a bit. This is going to take more than one day to handle, but you&#39;ve made some headway&lt;&lt;/if&gt;&gt;. You have your daily necessities sorted out in good time to get yourself a reasonably sized but unambitious dinner before sunset, and you return to your room with a few additional provisions for the evening.

&lt;&lt;include [[10-8]]&gt;&gt;</tw-passagedata><tw-passagedata pid="514" name="10-6.motiv" tags="draft" position="8000,1275" size="100,100">&lt;&lt;if $ten.excount&lt;2&gt;&gt;You owe it to &lt;&lt;switch $motiv&gt;&gt;&lt;&lt;case &quot;family&quot;&gt;&gt;your family&lt;&lt;case &quot;kingdom&quot;&gt;&gt;the kingdom&lt;&lt;case &quot;freedom&quot;&gt;&gt;yourself&lt;&lt;/switch&gt;&gt; to be thorough. If you succeed, &lt;&lt;switch $motiv&gt;&gt;&lt;&lt;case &quot;family&quot;&gt;&gt;they&#39;ll never want for anything. No more wondering what will need to be given up to pay for Soren&#39;s doctors and medicine. No more worrying how much you&#39;ll need to sacrifice to give the next generation of your family a decent life.&lt;&lt;case &quot;kingdom&quot;&gt;&gt;the kingdom stands a chance to win the war. You&#39;ll have your father and brother back--as will many other families. The idea of a rival army full of sorcerers someday reaching your home is terrifying. But &lt;i&gt;you&lt;/i&gt; could turn the tide.&lt;&lt;case &quot;freedom&quot;&gt;&gt;you&#39;ll finally be able to live the life you wish. Your family won&#39;t be able to dictate what you must do. If you save the kingdom, even society at large will have little say in how you live. You&#39;ll be free.&lt;&lt;/switch&gt;&gt; You &lt;&lt;if $optimistic&gt;0||$confidence&gt;0||$courage&gt;0&gt;&gt;can&lt;&lt;else&gt;&gt;need to&lt;&lt;/if&gt;&gt; do this.&lt;&lt;else&gt;&gt;

You wonder &lt;&lt;switch $motiv&gt;&gt;&lt;&lt;case &quot;family&quot;&gt;&gt;how the rest of your family is faring, scattered as they are now. Sabine and Erich are surely doing what they can to support Isla. Would your mother even accept support if it were given? Your father and brother--the most likely to be sympathetic--are gone and may never return. You could say the same for yourself, even if Hawk hasn&#39;t&lt;&lt;case &quot;kingdom&quot;&gt;&gt;how the war is proceeding now. The only news you&#39;ve heard comes filtered through official declarations and your father&#39;s letters--hardly objective sources. There are rumors that, if the army can&#39;t take and hold the island on which the war is currently localized, you may be invaded. Even if this kingdom isn&#39;t perfect&lt;&lt;if $attraction!=&quot;cs&quot;||$gendervibes!=&quot;cis&quot;&gt;&gt;--far from it--&lt;&lt;else&gt;&gt;, &lt;&lt;/if&gt;&gt;it&#39;s still your home. If Hawk does have a weapon here somewhere, you could save it. But there&#39;s no doubt Hawk is dangerous, even if $ha.they ha&lt;&lt;hve&gt;&gt;n&#39;t&lt;&lt;case &quot;freedom&quot;&gt;&gt;what your life might be like &lt;&lt;if $confidence&gt;0&gt;&gt;when you&lt;&lt;else&gt;&gt;if you can&lt;&lt;/if&gt;&gt; pull this off. You can trade a weapon that&#39;s doing no one any good out here for a life worth living--one where you can be who you want, do what you want, form your own ideas about the path you take. Until now, your future has been dictated to you. Now, it&#39;s time to take hold of your own destiny, no matter the risk. There&#39;s no doubt Hawk is dangerous, even if $ha.they ha&lt;&lt;hve&gt;&gt;n&#39;t&lt;&lt;/switch&gt;&gt; been especially threatening so far. $ha.They wield&lt;&lt;hs&gt;&gt; $ha.their power effortlessly, and if you draw $ha.their ire, there&#39;s no telling what $ha.they could do. But your course is set. You need to find what you came here for.&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="515" name="preset_SET" tags="codeonly nobr" position="6450,150" size="100,100">&lt;&lt;set $cTheFall=true&gt;&gt;

&lt;&lt;switch $preset&gt;&gt;
&lt;&lt;case &quot;bo&quot;&gt;&gt;
&lt;&lt;set $pastduty=3&gt;&gt;
&lt;&lt;set $newduty=-1&gt;&gt;
&lt;&lt;set $optimistic=-1&gt;&gt;
&lt;&lt;set $humor=1&gt;&gt;
&lt;&lt;set $courage=3&gt;&gt;
&lt;&lt;set $confidence=2&gt;&gt;
&lt;&lt;set $prehawkcon=2&gt;&gt;
&lt;&lt;set $kind=1&gt;&gt;
&lt;&lt;set $curiosity=5&gt;&gt;
&lt;&lt;set $impulsive=0&gt;&gt;

&lt;&lt;set $eyecolor=&quot;amber&quot;&gt;&gt;
&lt;&lt;set $height=1&gt;&gt;
&lt;&lt;set $hairlength=1&gt;&gt;
&lt;&lt;set $thunder=1&gt;&gt;
&lt;&lt;set $angerav=false&gt;&gt;
&lt;&lt;set $nangav=0&gt;&gt;
&lt;&lt;set $name=&quot;Boniface&quot;&gt;&gt;
&lt;&lt;set $nick=&quot;&quot;&gt;&gt;
&lt;&lt;set $veg=true&gt;&gt;
&lt;&lt;set $glasses=false&gt;&gt;
&lt;&lt;set $cooking=0&gt;&gt;

&lt;&lt;set $skill=&quot;evasion&quot;&gt;&gt;
&lt;&lt;set $motiv=&quot;family&quot;&gt;&gt;
&lt;&lt;set $attrand=false&gt;&gt;
&lt;&lt;set $window=true&gt;&gt;
&lt;&lt;set $knowhafood=true&gt;&gt;
&lt;&lt;set $knowhastorm=false&gt;&gt;
&lt;&lt;set $feastprn=0&gt;&gt;
&lt;&lt;set $fescort=2&gt;&gt;
&lt;&lt;set $luggage=2&gt;&gt;
&lt;&lt;set $knowhaleak=0&gt;&gt;
&lt;&lt;set $beastseen=0&gt;&gt;

&lt;&lt;set $three.letter=true&gt;&gt;
&lt;&lt;set $three.robe=true&gt;&gt;

&lt;&lt;set $five.qcount=7&gt;&gt;
&lt;&lt;set $five.acount=2&gt;&gt;

&lt;&lt;set $six.count=3&gt;&gt;
&lt;&lt;set $six.dan=true&gt;&gt;
&lt;&lt;set $six.react=&quot;&quot;&gt;&gt;
&lt;&lt;set $six.drink=2&gt;&gt;
&lt;&lt;set $six.stay=true&gt;&gt;

&lt;&lt;set $seven.clothes=&quot;bar&quot;&gt;&gt;
&lt;&lt;set $seven.feel=-2&gt;&gt;

&lt;&lt;set $gendervibes=&quot;cis&quot;&gt;&gt;
&lt;&lt;set $prncust=false&gt;&gt;
&lt;&lt;set $axab=&quot;amab&quot;&gt;&gt;
&lt;&lt;include [[1-10SET]]&gt;&gt;
&lt;&lt;set $mc=clone($ax)&gt;&gt;
&lt;&lt;set $mc.gender=&quot;masc&quot;&gt;&gt;
&lt;&lt;set $mc.plural=false&gt;&gt;

&lt;&lt;set $rom=&quot;masc&quot;&gt;&gt;
&lt;&lt;set $romatt=3&gt;&gt;
&lt;&lt;set $phys=&quot;masc&quot;&gt;&gt;
&lt;&lt;set $physatt=2&gt;&gt;
&lt;&lt;set $attraction=&quot;cg&quot;&gt;&gt;

&lt;&lt;set $ha.they=&quot;he&quot;&gt;&gt;
&lt;&lt;include [[2-6SET]]&gt;&gt;
&lt;&lt;set $ha.res=3&gt;&gt;
&lt;&lt;set $ha.fond=0&gt;&gt;
&lt;&lt;set $ha.trust=0&gt;&gt;
&lt;&lt;set $ha.rom=0&gt;&gt;
&lt;&lt;set $ha.phys=0&gt;&gt;
&lt;&lt;set $ha.flirt=0&gt;&gt;
&lt;&lt;set $ha.ban=2&gt;&gt;
&lt;&lt;set $ha.soft=0&gt;&gt;
&lt;&lt;set $ha.sus=0&gt;&gt;
&lt;&lt;set $ha.silent=2&gt;&gt;
&lt;&lt;set $ha.spark=0&gt;&gt;
&lt;&lt;set $ha.vc=0&gt;&gt;
&lt;&lt;set $ha.touch=false&gt;&gt;
&lt;&lt;set $ha.knowtrans=false&gt;&gt;
&lt;&lt;set $ha.knowmaybe=false&gt;&gt;
&lt;&lt;set $ha.knowthunder=false&gt;&gt;
&lt;&lt;set $ha.knowfood=false&gt;&gt;
&lt;&lt;set $ha.knowcook=0&gt;&gt;

&lt;&lt;set $touch=false&gt;&gt;
&lt;&lt;set $islapromise=&quot;maybe&quot;&gt;&gt;
&lt;&lt;set $favsibling=&quot;Soren&quot;&gt;&gt;

&lt;&lt;set $soren.rel=2&gt;&gt;
&lt;&lt;set $soren.touch=true&gt;&gt;

&lt;&lt;set $sabine.rel=1&gt;&gt;
&lt;&lt;set $sabine.touch=true&gt;&gt;



&lt;&lt;case &quot;max&quot;&gt;&gt;
&lt;&lt;set $pastduty=-1&gt;&gt;
&lt;&lt;set $newduty=-1&gt;&gt;
&lt;&lt;set $optimistic=-1&gt;&gt;
&lt;&lt;set $humor=3&gt;&gt;
&lt;&lt;set $courage=4&gt;&gt;
&lt;&lt;set $confidence=-1&gt;&gt;
&lt;&lt;set $prehawkcon=-1&gt;&gt;
&lt;&lt;set $kind=1&gt;&gt;
&lt;&lt;set $curiosity=7&gt;&gt;
&lt;&lt;set $impulsive=-1&gt;&gt;

&lt;&lt;set $eyecolor=&quot;hazel&quot;&gt;&gt;
&lt;&lt;set $height=2&gt;&gt;
&lt;&lt;set $hairlength=2&gt;&gt;
&lt;&lt;set $thunder=1&gt;&gt;
&lt;&lt;set $angerav=false&gt;&gt;
&lt;&lt;set $nangav=0&gt;&gt;
&lt;&lt;set $name=&quot;Max&quot;&gt;&gt;
&lt;&lt;set $nick=&quot;&quot;&gt;&gt;
&lt;&lt;set $veg=false&gt;&gt;
&lt;&lt;set $glasses=false&gt;&gt;
&lt;&lt;set $cooking=0&gt;&gt;

&lt;&lt;set $skill=&quot;persuasion&quot;&gt;&gt;
&lt;&lt;set $motiv=&quot;freedom&quot;&gt;&gt;
&lt;&lt;set $attrand=false&gt;&gt;
&lt;&lt;set $window=true&gt;&gt;
&lt;&lt;set $knowhafood=true&gt;&gt;
&lt;&lt;set $knowhastorm=false&gt;&gt;
&lt;&lt;set $feastprn=-2&gt;&gt;
&lt;&lt;set $fescort=-1&gt;&gt;
&lt;&lt;set $luggage=1&gt;&gt;
&lt;&lt;set $knowhaleak=0&gt;&gt;
&lt;&lt;set $beastseen=7&gt;&gt;

&lt;&lt;set $three.letter=true&gt;&gt;
&lt;&lt;set $three.robe=true&gt;&gt;

&lt;&lt;set $five.qcount=7&gt;&gt;
&lt;&lt;set $five.acount=2&gt;&gt;

&lt;&lt;set $six.count=3&gt;&gt;
&lt;&lt;set $six.dan=true&gt;&gt;
&lt;&lt;set $six.react=&quot;&quot;&gt;&gt;
&lt;&lt;set $six.drink=1&gt;&gt;
&lt;&lt;set $six.stay=true&gt;&gt;

&lt;&lt;set $seven.clothes=&quot;floor&quot;&gt;&gt;
&lt;&lt;set $seven.feel=2&gt;&gt;

&lt;&lt;set $prncust=false&gt;&gt;
&lt;&lt;set $axab=&quot;afab&quot;&gt;&gt;
&lt;&lt;include [[1-10SET]]&gt;&gt;
&lt;&lt;set $gendervibes=&quot;maybe&quot;&gt;&gt;
&lt;&lt;set $mc.they=&quot;they&quot;&gt;&gt;
&lt;&lt;set $mc.gender=&quot;maybe&quot;&gt;&gt;
&lt;&lt;set $mc.sibling=&quot;sibling&quot;&gt;&gt;
&lt;&lt;include [[1-10x.2-TSET]]&gt;&gt;

&lt;&lt;set $rom=&quot;nb&quot;&gt;&gt;
&lt;&lt;set $romatt=2&gt;&gt;
&lt;&lt;set $phys=&quot;nb&quot;&gt;&gt;
&lt;&lt;set $physatt=2&gt;&gt;
&lt;&lt;set $attraction=&quot;nb&quot;&gt;&gt;

&lt;&lt;set $ha.they=&quot;they&quot;&gt;&gt;
&lt;&lt;include [[2-6SET]]&gt;&gt;
&lt;&lt;set $ha.res=1&gt;&gt;
&lt;&lt;set $ha.fond=1&gt;&gt;
&lt;&lt;set $ha.trust=-1&gt;&gt;
&lt;&lt;set $ha.rom=0&gt;&gt;
&lt;&lt;set $ha.phys=0&gt;&gt;
&lt;&lt;set $ha.flirt=0&gt;&gt;
&lt;&lt;set $ha.ban=1&gt;&gt;
&lt;&lt;set $ha.soft=0&gt;&gt;
&lt;&lt;set $ha.sus=0&gt;&gt;
&lt;&lt;set $ha.silent=0&gt;&gt;
&lt;&lt;set $ha.spark=0&gt;&gt;
&lt;&lt;set $ha.vc=0&gt;&gt;
&lt;&lt;set $ha.touch=false&gt;&gt;
&lt;&lt;set $ha.knowtrans=false&gt;&gt;
&lt;&lt;set $ha.knowmaybe=true&gt;&gt;
&lt;&lt;set $ha.knowthunder=false&gt;&gt;
&lt;&lt;set $ha.knowfood=false&gt;&gt;
&lt;&lt;set $ha.knowcook=0&gt;&gt;

&lt;&lt;set $touch=true&gt;&gt;
&lt;&lt;set $islapromise=&quot;maybe&quot;&gt;&gt;
&lt;&lt;set $favsibling=&quot;Sabine&quot;&gt;&gt;

&lt;&lt;set $soren.rel=-2&gt;&gt;
&lt;&lt;set $soren.touch=true&gt;&gt;

&lt;&lt;set $sabine.rel=2&gt;&gt;
&lt;&lt;set $sabine.touch=true&gt;&gt;
&lt;&lt;/switch&gt;&gt;</tw-passagedata><tw-passagedata pid="516" name="0-1preset" tags="" position="375,375" size="100,100">&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Bo|8-0][$preset=&quot;bo&quot;]]&lt;/li&gt;
&lt;li&gt;[[Max|8-0][$preset=&quot;max&quot;]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="517" name="10-7" tags="draft" position="8000,1550" size="100,100">&lt;&lt;if $ten.excount&lt;2&gt;&gt;You return to the kitchen for a quick lunch before you resume your search. So far, Hawk seems to have made good on $ha.their threat to let you do as you wish: you&#39;ve seen no sign of $ha.them since $ha.they left you in the library. A few more hours remain before sunset, so you have time to look around one more spot.

&lt;ul class=&quot;choice&quot;&gt;&lt;&lt;if not $ten.ent&gt;&gt;&lt;li&gt;[[Investigate the entrance hall.|10-6ent]]&lt;/li&gt;
&lt;&lt;/if&gt;&gt;&lt;&lt;if not $ten.gar&gt;&gt;&lt;li&gt;[[Investigate the gardens.|10-6gar]]&lt;/li&gt;
&lt;&lt;/if&gt;&gt;&lt;&lt;if not $ten.pan&gt;&gt;&lt;li&gt;[[Investigate the pantry.|10-7pan]]&lt;/li&gt;
&lt;&lt;/if&gt;&gt;&lt;&lt;if not $ten.lib&gt;&gt;&lt;li&gt;[[Investigate the library.|10-7lib]]&lt;/li&gt;
&lt;&lt;/if&gt;&gt;&lt;li&gt;[[You&#39;ve searched enough. Return to your room.|10-7bed]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;else&gt;&gt;&lt;&lt;include [[10-8]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="518" name="10-8" tags="draft" position="8000,1700" size="100,100">&lt;&lt;set $subt.loc=&quot;Your Room&quot;&gt;&gt;&lt;&lt;if not $ten.bed&gt;&gt;There isn&#39;t much time before sunset, so you prepare a quick dinner for yourself and return to your room with a few additional provisions for the evening. &lt;&lt;if $height&gt;3&gt;&gt;As you pass through the door, you suddenly realize that you haven&#39;t once had to duck through a doorway today. It&#39;s a pleasant change from your usual experience in unfamiliar buildings, but Hawk does seem like the sort of person who might just enlarge a doorway by force if it became a repeated annoyance.

&lt;&lt;/if&gt;&gt;Before settling in, you&lt;&lt;if $beastseen==7&gt;&gt; tidy up the glass from last night and&lt;&lt;/if&gt;&gt; move your wedding clothes to your wardrobe. &lt;&lt;if $seven.clothes==&quot;floor&quot;&gt;&gt;They&#39;re a bit of a rumpled mess after residing on the floor for so long, but hopefully, they&#39;ll sort themselves out a little in the wardrobe.&lt;&lt;else&gt;&gt;They aren&#39;t in the best state, but you at least manage to get them hung up in an orderly fashion.&lt;&lt;/if&gt;&gt; Apart from that, you only have the time and energy to unpack a few daily necessities and wash up before you&#39;re very much ready to go to bed.

Then,&lt;&lt;else&gt;&gt;You&#39;ve washed up and prepared yourself for bed when&lt;&lt;/if&gt;&gt; you hear something scrabbling at your door.

It doesn&#39;t sound anything like the cacophony last night: just tiny claws scratching at the bottom of your door--probably something as keen to avoid being on the wrong end of the beast&#39;s jaws as you are. It&#39;s already dark, but you can&#39;t leave it out there to be eaten. When you open the door, a tiny, green-scaled creature propels itself inside and promptly begins to climb your clothes. Once it&#39;s halfway up your leg, it freezes, and moments later, you hear what it did: something large hurtling down the passage toward your room.

You slam the door closed and bolt it before backing away, careful not to dislodge the tiny lizard clinging to you. The creature outside the door repeats last night&#39;s activity, slamming into the door and raking its claws across the wood for several minutes before apparently losing interest, growling at it, and wandering away. Neither you nor the lizard moves until the beast seems to have moved on.

While the adrenaline is still pumping through you, the lizard resumes its ascent until it reaches your chest, just over the pouch your mother gave you. It attempts to dig toward the pouch with one tiny forefoot, but its claws are too small to even do superficial damage to your clothes.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Let the lizard investigate the pouch.|10-8.1]]&lt;/li&gt;
&lt;li&gt;[[Put the lizard on the floor.|10-8.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="519" name="10-6ent.2" tags="draft" position="7700,1400" size="100,100">&lt;&lt;set $ten.ent=&quot;cave&quot;&gt;&gt;&lt;&lt;set $crit.dar+=1&gt;&gt;You approach an especially large fissure in the cavern floor and look down into the darkness. The chasm stretches deep into the earth as an almost sheer drop until you lose sight of its walls to the darkness. It would be easy to tip over the edge and be lost forever, swallowed by the abyss, but the idea of the tower&#39;s neighbors below is worth a little investigation. You carefully lean over the edge in the hope that you&#39;ll glimpse something.

You observe the darkness for some time before you hear stones begin to plink down the chasm walls deep within. It isn&#39;t long before the sound draws close enough for you to understand what you&#39;re hearing: little pieces of cliff face breaking free and falling into the dark. A quiet scraping approaches, and you see light glinting off a cluster of at least half a dozen huge black eyes rising out of the chasm. Long, arachnoid legs reach up out of the darkness, and you back away rapidly before the ascending creature can reach the surface, taking the teleportation stone from your pocket in case you need to use it. But nothing emerges into the room, and after several anxious moments, you hear the scraping grow more distant, descending back to the depths.

You&#39;ve spent enough time here for now. More than enough. Being somewhere else for a while is probably a good idea.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|10-7]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="520" name="10-6ent.1" tags="draft" position="7600,1400" size="100,100">&lt;&lt;set $ten.ent=&quot;pool&quot;&gt;&gt;&lt;&lt;set $crit.mys+=1&gt;&gt;When you reach the edge of the pool, you peer down into the water. Its surface is unnaturally still despite the torrent crashing into it, smooth as glass except a few brief disruptions by long, silver-scaled fish periodically breaking the surface. Their bodies ripple languidly through the water until they catch sight of you and, in a flutter of ribbonlike fins and tails, dive deeper. And deeper.

Though you expected it to only be a few feet deep, you lean over to watch them descend past where the light can reach, glittering silver winking out like stars behind a cloud. But from far below, a violet light radiates with sufficient power to reach you at the surface. You can&#39;t help but draw closer, trying to see any details about its source. It&#39;s not until your nose is touching the pool that sheet of silver obscures your view of the light, and you return to your senses. You push yourself away from the pool, coughing to expel the water you had started to inhale. Glancing back at the pool, you see one of the fish seem to float above the water, staring at you, for a moment before it vanishes beneath the surface. When you look into the pool, you don&#39;t see a single fish.

You&#39;ve spent enough time here for now. More than enough. Being somewhere else for a while is probably a good idea.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|10-7]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="521" name="10-6gar.1" tags="draft" position="7825,1400" size="100,100">&lt;&lt;set $ten.gar=&quot;wind&quot;&gt;&gt;&lt;&lt;set $crit.sof+=1&gt;&gt;It&#39;s unlikely Hawk would keep $ha.their weapon outside in the forest, but you can&#39;t help wanting a closer look. Compared to the colossal front doors, this fissure in the wall is a much more inviting access point to the tower. The animals who make their way into and out of the tower do so in such a casual way that it must be just an ordinary part of their day--very much unlike your own experience.

There&#39;s nothing at all to suggest the forest outside is dangerous. Squirrels spring deftly through the trees, and little birds perch contentedly on their boughs. The scent of wet pine and the soft sounds of rain and bird chatter give the tower&#39;s surroundings a pervading sense of serenity. A large, brightly colored bird lands on the stone ledge beside you and takes you in, its head making rapid, curious adjustments to examine you in full. It chirps at you and then, as suddenly as it arrived, flies off, propelling a gust of wind toward you.

It&#39;s probably a signal you should move on, too. There isn&#39;t much more you&#39;ll be able to learn here today.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|10-7]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="522" name="10-6gar.2" tags="draft" position="7925,1400" size="100,100">&lt;&lt;if $ach.on&gt;&gt;&lt;&lt;set $ach.any=true&gt;&gt;&lt;&lt;set $ach.door=true&gt;&gt;&lt;&lt;notify&gt;&gt;Achievement unlocked: Worth a Try&lt;&lt;/notify&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;set $ten.gar=&quot;door&quot;&gt;&gt;&lt;&lt;set $crit.str+=1&gt;&gt;&lt;&lt;if $ten.door&gt;&gt;&lt;&lt;set $curiosity+=1&gt;&gt;You&#39;ve already discovered that the door is not only forbidden but locked as well. But you can&#39;t help being curious about it.&lt;&lt;else&gt;&gt;Even though--or perhaps because--the garden door is forbidden, you can&#39;t help but feel curious about it.&lt;&lt;/if&gt;&gt; There&#39;s nothing especially remarkable about it: a heavy door made of dark wood that isn&#39;t particularly dissimilar to the other doors in the tower. But the way your teeth vibrate as you approach is very much not the norm.&lt;&lt;if not $ten.door&gt;&gt; When you touch the handle, your fingers crawl with prickling numbness. It takes substantial effort to force your stiff, heavy arm to pull the handle. But even when you do, the door doesn&#39;t budge. Locked.&lt;&lt;/if&gt;&gt; You place your palm on the wood, and every bone in your body shudders.

Your vision goes white, and you&#39;re filled with an urge to run. Yet your hand is all but adhered to the door, your body frozen in place as your shivering bones tether you to the ground. The inability of your body to obey the command to retreat fills your mind with panicked static that stretches every second into an immeasurable expanse--until you feel something impact your side, detatching you from the door. You stumble into the wall to catch yourself and turn to see what struck you. A lupine creature with thick black fur and feathered wings stares at you with pale grey eyes. It emits a low rumble that isn&#39;t quite a growl before running out of the gardens.

It&#39;s probably a signal you should move on, too, so you gather yourself and prepare to move on. There isn&#39;t much more you&#39;ll be able to learn here today.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|10-7]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="523" name="10-6pan.1" tags="draft" position="8075,1400" size="100,100">&lt;&lt;set $ten.pan=&quot;sea&quot;&gt;&gt;&lt;&lt;set $crit.sof+=1&gt;&gt;It doesn&#39;t seem likely that the seaweed that leaned toward you is conscious, but it&#39;s become alarmingly difficult to tell how much of what seems sensible to you applies to anything in this tower. Is it sentient? It doesn&#39;t seem as unlikely as one might hope. When you finally make your way back to the seaweed jar, you find it floating placidly until you come within several feet of it. Then, you see it ripple in a manner similar to the feeling of a shiver down your spine. It sways toward you, and as you move back and forth back and front it, it follows, drifting gently within its little jar. Its vibrant green leaves are oddly barbed but don&#39;t seem to have suffered from the relatively little light it&#39;s receiving. But perhaps it&#39;s used to that from growing underwater--if your assumption of it being seaweed is even correct. In an attempt to assess its level of consciousness, you perform a feint in front of it. It follows you perfectly in a way a sentient creature likely wouldn&#39;t. Unless it could somehow see what you were going to do before you did it...

But before you can explore that possibility too deeply, you hear a squeak from a shelf above you. You look up to see a creature the size of a large cat staring down at you. Its large black eyes are dwarfed by huge, rounded ears sitting atop its head. Long whiskers vibrate as the pink nose at the end of its long, rodential muzzle continually sniffs the air. When it realizes its squeak drew your attention, it freezes, unblinking. After a few seconds, the staring contest ends when you blink. You see it scampering soundlessly away along the top level of shelves, deeper into the pantry.

You&#39;ve seen enough--you need a break. On your way out, you grab something edible &lt;&lt;if $optimistic&gt;0&gt;&gt;as a reward for your efforts today&lt;&lt;else&gt;&gt;to make sure your excursion wasn&#39;t a total loss&lt;&lt;/if&gt;&gt;.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|10-7]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="524" name="10-6pan.2" tags="draft" position="8175,1400" size="100,100">&lt;&lt;set $ten.pan=&quot;chest&quot;&gt;&gt;&lt;&lt;set $crit.mys+=1&gt;&gt;You return to the metal-banded chest you saw earlier, ready to solve the mystery of what&#39;s inside--or attempt to, at least. The chest itself is reasonably unremarkable until you notice that the bands you thought were steel have a strange blue cast that shifts as you examine them from different directions. There&#39;s no sign of a lock or even a place to put one, so it must either be unimportant and unlocked or important and magically locked. As you hold your hand out toward it, you don&#39;t feel a tingling that would indicate enchantment. But when you try to open it, the lid doesn&#39;t budge.&lt;&lt;if $skill==&quot;persistence&quot;&gt;&gt; You throw your whole weight into it, but it doesn&#39;t even shift as you&#39;d expect an ordinary lid to.&lt;&lt;/if&gt;&gt;

Just as you&#39;re about to give up and move on, you see a trail of smoke wind its way between the chest&#39;s lid and base. After a few moments, the chest suddenly flies open, The smoke plume briefly obscures its contents before floating up and out of the way to reveal... absolutely nothing. The chest is entirely empty&lt;&lt;if $skill==&quot;evasion&quot;||$skill==&quot;strategy&quot;&gt;&gt;--not even a false bottom to be found&lt;&lt;/if&gt;&gt;. The smoke plume likewise seems disappointed as it appears to deflate for a moment before losing interest and spiraling away, deeper into the pantry.

You&#39;ve seen enough--you need a break. On your way out, you grab something edible &lt;&lt;if $optimistic&gt;0&gt;&gt;as a reward for your efforts today&lt;&lt;else&gt;&gt;to make sure your excursion wasn&#39;t a total loss&lt;&lt;/if&gt;&gt;.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|10-7]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="525" name="10-6lib.1" tags="draft" position="8300,1400" size="100,100">&lt;&lt;set $ten.lib=&quot;fic&quot;&gt;&gt;&lt;&lt;set $crit.str+=1&gt;&gt;From your limited sampling, Hawk&#39;s collection has proportionately little fiction. Most of the books in the library have only small signs of wear, but the fiction seems especially untouched. It is rather difficult to picture Hawk relaxing with a good novel, but that doesn&#39;t mean you need to avoid them. Most of the books in this group look, from their titles, to be adventure novels--primarily the seafaring kind. A few are in languages you don&#39;t recognize, but when you pull them off the shelf to look at their covers, most are helpfully illustrated with ships and swords.

You only realize you&#39;re balancing half a dozen books in your arms when one begins to slip off toward the floor. There&#39;s a sudden clattering of hooves, and before the book can hit the floor, a streak of white bows low to catch it. The cloven-hoofed creature raises its head slowly, careful not to drop the book as it offers it to you. You replace a few books on the shelves to accept the book, revealing a head much like a deer&#39;s but with the beard of a goat. It looks up at you with large, dark eyes between which is a round, hairless plateau that you belatedly realize must have once been a horn. You catch a brief glimpse of jagged gouges across the plateau before it turns and races off as quickly as it arrived, revealing a long, tufted tail before it rounds a bookshelf and vanishes from sight.

After searching for the creature and finding no trace of it, you spend only a little while longer in the library. You&#39;re probably not going to see anything more exciting than that.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|10-7]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="526" name="10-6lib.2" tags="draft" position="8400,1400" size="100,100">&lt;&lt;set $ten.lib=&quot;mag&quot;&gt;&gt;&lt;&lt;set $crit.dar+=1&gt;&gt;&lt;&lt;if $magicvibes&lt;0&gt;&gt;You haven&#39;t exactly taken to magic very well, but that makes it all the more important to learn what it can do&lt;&lt;elseif $magicvibes&gt;0&gt;&gt;Learning more about magic is an opportunity you can&#39;t pass up&lt;&lt;else&gt;&gt;You ought to learn a little about magic considering how pervasive it seems to be in Hawk&#39;s vicinity&lt;&lt;/if&gt;&gt;. Taking a few books off the shelf at random, you bring them to a desk nearby. But if you were hoping for manuals on magic for a novice, that doesn&#39;t appear to be what you&#39;ve found. They are, instead, even less decipherable than Sabine&#39;s texts on theoretical mathematics and contain even more bizarre symbols. The fact that even the parts you can read are written archaically--either as a stylistic choice or due to their far distant date of publication--doesn&#39;t improve matters.

In an attempt to ease your swiftly worsening headache, you close the books and bring them back to their shelves. As you return them to their places, you feel something watching you, but each time you turn, you see nothing--until you reach the last one. You crouch down to replace the final book, and out of the corner of your eye, you see your shadow beside you take too long to follow. As you look at it, it holds your shape for a few more seconds before it starts to contort into strange shapes, then stretch longer and longer into a swirling inky mass before your engorged shadow finally snaps into two pieces: one that slithers away behind a shelf and one that crouches next to you. You stand up, and the shadow follows--it&#39;s yours. Hopefully.

It&#39;s time to be somewhere else. As quickly as possible.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|10-7]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="527" name="10-8.1" tags="draft" position="7950,1825" size="100,100">&lt;&lt;set $crit.liz+=1&gt;&gt;&lt;&lt;set $kind+=1&gt;&gt;You carefully pluck the lizard off your clothes and place it on your desk before removing the pouch and putting it down next to the tiny creature. Its tongue darts out of its mouth to lick its round turquoise eyes before it approaches the pouch. As soon as it steps onto the fabric, its scales begin to ripple with waves of blue and purple. Once it has crawled fully onto the pouch, it lowers its belly to the fabric and folds its front legs back along its sides. The rippling slows, and after &lt;&lt;include [[10-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="528" name="10-8.2" tags="draft" position="8050,1825" size="100,100">You carefully pluck the lizard off your clothes and place it on the floor. Its tongue darts out of its mouth to lick its round turquoise eyes before it attempts to climb you again. You step away, and it sits there for a moment, perplexed, before trudging off toward the bathroom. You follow it inside and find it attempting to climb the sheer side of the tub. When it becomes clear the little creature has no hope of making it up the side on its own, you drape a towel over the side and watch it scale the fabric up onto the tub ledge. It makes a beeline for the enchanted taps and promptly curls around one. As soon as it comes into contact with the hot water tap, its scales begin to ripple with waves of blue and purple. It lowers its belly to the tub and folds its front legs back along its sides, and after a few moments, the rippling slows. After &lt;&lt;include [[10-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="529" name="10-9" tags="draft" position="8000,1950" size="100,100">a couple minutes, it appears to be asleep.

If only you could fall asleep so quickly after having your door battered. But if it held last night, it should hold tonight. The only thing you can do is spend some time trying to calm yourself with one of the things you unpacked today for that purpose:

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Your sketchbook.|10-9.1]]&lt;/li&gt;
&lt;li&gt;[[Your cross-stitch.|10-9.2]]&lt;/li&gt;
&lt;li&gt;[[Your notebook.|10-9.3]]&lt;/li&gt;
&lt;li&gt;[[Your lute.|10-9.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="530" name="10-9.1" tags="draft" position="7950,2075" size="100,100">&lt;&lt;set $hobby=&quot;sketch&quot;&gt;&gt;You pick up your sketchbook and begin working on a fresh page. It&#39;s calming to focus your attention on bringing the details of an image to life on paper. The lizard gradually takes shape as you feel exhaustion begin to push the nervous energy from your mind. When you finally put your sketchbook aside and tuck yourself into bed, you drift off thinking of the many strange things in this tower you could sketch next.

&lt;&lt;include [[10-10]]&gt;&gt;</tw-passagedata><tw-passagedata pid="531" name="10-9.2" tags="draft" position="8050,2075" size="100,100">&lt;&lt;set $hobby=&quot;stitch&quot;&gt;&gt;The in-progress sampler you brought from home made the trip safely. It&#39;s calming to focus your attention on executing your vision in richly colored thread. &lt;&lt;if $genderstuff&amp;&amp;$axab==&quot;amab&quot;&gt;&gt;It isn&#39;t something that&#39;s &quot;appropriate&quot; for people like you, but when you expressed interest, Sabine taught you the basics of needlework herself. It&#39;s come in handy for practical use plenty of times, but the artistic side is something you enjoy for its own sake. When you finally put your sampler aside and tuck yourself into bed, you drift off thinking about how much more you&#39;ll be able to get done since you won&#39;t need to hide your hobby here.&lt;&lt;else&gt;&gt;Needlework is a skill that&#39;s come in handy for practical use plenty of times, but the artistic side is something you enjoy for its own sake. When you finally put your sampler aside and tuck yourself into bed, you drift off wondering if you even have thread that could capture the strange colors in this tower.&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[10-10]]&gt;&gt;</tw-passagedata><tw-passagedata pid="532" name="10-9.3" tags="draft" position="7975,2175" size="100,100">&lt;&lt;set $hobby=&quot;write&quot;&gt;&gt;You pick up your notebook and begin working on a fresh page. It&#39;s calming to focus your attention on turning thoughts into words as a creative outlet. They come slowly at first but eventually begin to flow as your thoughts calm. When you finally put your notebook aside and tuck yourself into bed, you drift off wondering how you could even describe some of the things you experienced today.

&lt;&lt;include [[10-10]]&gt;&gt;</tw-passagedata><tw-passagedata pid="533" name="10-9.4" tags="draft" position="8075,2175" size="100,100">&lt;&lt;set $hobby=&quot;lute&quot;&gt;&gt;You pick up your lute and begin strumming it as quietly as you can. It survived the trip largely in-tune, so it&#39;s calming to focus your attention on letting the melodies flow. You don&#39;t want to attract the beast&#39;s attention, but even muting the strings allows you to transport your mind somewhere else. When you finally put your lute aside and tuck yourself into bed, you drift off wondering how best to set the emotions of the last few days to music.

&lt;&lt;include [[10-10]]&gt;&gt;</tw-passagedata><tw-passagedata pid="534" name="10-10" tags="draft endscene" position="8000,2300" size="100,100">&lt;ul class=&quot;choice&quot;&gt;&lt;b&gt;&lt;li&gt;[[Fall asleep...|11-0]]&lt;/li&gt;&lt;/b&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="535" name="11-0" tags="draft startscene autosave" position="8600,100" size="100,100">&lt;&lt;set $cursc=11&gt;&gt;&lt;&lt;set $subt.month=&quot;Early Autumn&quot;&gt;&gt;&lt;&lt;set $subt.loc=&quot;The Spire&quot;&gt;&gt;&lt;&lt;notify&gt;&gt;Autosave complete!&lt;&lt;/notify&gt;&gt;Only a few days into your search, you&#39;re at your wits&#39; end. You&#39;ve seen plenty of &lt;&lt;if $magicvibes&gt;0&gt;&gt;amazing&lt;&lt;elseif $magicvibes==0&gt;&gt;strange&lt;&lt;else&gt;&gt;terrible&lt;&lt;/if&gt;&gt; things, but you&#39;re no closer to completing your mission than you were the day you got here.&lt;&lt;if $nine.burn&gt;&gt; At least your burn is mostly healed.&lt;&lt;/if&gt;&gt; You haven&#39;t seen Hawk since the day after you arrived, but after a week of no further communication, it seems increasingly possible $ha.they just forgot about you entirely. There&#39;s little for you to do but investigate the tower, but since everything here is strange, very little stands out as being more dangerous than anything else. Anything could point you toward some information you need, but you know so little about it all that, the truth quickly becomes clear: Without more information, your investigation will be fruitless. But the indecipherable organization of Hawk&#39;s library thwarts your research attempts, too. Your search quickly loses momentum, and the week stretches out into bored, frustrated misery.

At home, even the most uneventful weeks were interrupted by a handful of social calls and other events that required the attendance of the earl&#39;s least relevant child. But out here, you couldn&#39;t make social calls even if you wanted to, considering you lack transport and know only one person in town--not to mention a shopkeep isn&#39;t exactly an appropriate acquaintance for someone of your status. But Hawk isn&#39;t exactly an appropriate spouse either, so perhaps the rules can be bent a little until this is all over.

But even if you wanted to go into town, the forest presents a significant barrier. It isn&#39;t like the well maintained woods you&#39;ve experienced before. The views of the forest floor you&#39;ve gotten through the tower windows include dense foliage interspersed with brambles and rotting fallen trees. It&#39;s clearer near the stream you followed when you arrived, but you have no idea how long it would take you to get to town that way–assuming it led you directly there. You might not even make it all the way to town before nightfall.

So thus far, you&#39;ve remained cooped up in the tower without anyone to talk to, but it&#39;s impossible to feel alone with all the strange creatures that lurk around the tower. The tiny lizard has returned several times to curl up &lt;&lt;if $crit.liz&gt;0&gt;&gt;on your pouch&lt;&lt;else&gt;&gt;around your taps&lt;&lt;/if&gt;&gt; and apparently fall asleep, eyes still wide open. The beast that prowls the corridors at night already seems to be losing interest, advancing from pummeling and clawing and growling to only doing one or two of those things per night. Nothing else in the tower has made a serious attempt to eat you, and you don&#39;t seem to be in much danger of starving either. You&#39;ve even managed to avoid incineration...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...by avoiding the enchanted cabinets.|11-0.1]]&lt;/li&gt;
&lt;li&gt;[[...despite using the enchanted cabinets.|11-0.2]]&lt;/li&gt;&lt;/ul&gt; </tw-passagedata><tw-passagedata pid="536" name="11-0.1" tags="draft" position="8550,225" size="100,100">&lt;&lt;if $nine.cook&gt;&gt;One round with the cabinets was enough. &lt;&lt;elseif $magicvibes&lt;0&gt;&gt;Magic unnerves you, and while you can&#39;t avoid it completely, you&#39;re not seeking it out either. &lt;&lt;/if&gt;&gt;Since there&#39;s plenty of food that can be eaten uncooked, that&#39;s exactly what you&#39;ve done.

&lt;&lt;include [[11-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="537" name="11-0.2" tags="draft" position="8650,225" size="100,100">You&#39;ve evaded&lt;&lt;if $nine.burn&gt;&gt; further&lt;&lt;/if&gt;&gt; injury when preparing your meals, though &lt;&lt;if $cooking&gt;0&gt;&gt;it&#39;s taken some effort&lt;&lt;else&gt;&gt;you&#39;ve had some close calls&lt;&lt;/if&gt;&gt;.&lt;&lt;if $magicvibes&gt;0&gt;&gt; It isn&#39;t the most exciting start to your life surrounded by magic, but at least it isn&#39;t as traumatic as your first teleportation experience.&lt;&lt;elseif $magicvibes&lt;0&gt;&gt; They&#39;re too much of a convenience to continue avoiding, even if they are a little alarming.&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[11-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="538" name="11-1" tags="draft" position="8600,350" size="100,100">You&#39;ve just finished another solitary breakfast and resigned yourself to another day of aimless searching when the tolling of a huge bell vibrates through the tower. It comes from far below–too far not to be magical. After a minute of gradually dulling reverberation, it tolls again, and you reach the conclusion that this must be Hawk&#39;s doorbell. When it tolls again, you reach an even less pleasant conclusion: Your $ha.spouse has no plans to answer the door.

This is your residence now, too&lt;&lt;if $confidence&lt;0&gt;&gt;, right?&lt;&lt;else&gt;&gt;.&lt;&lt;/if&gt;&gt; Surely Hawk won&#39;t begrudge you answering the door to prevent an ongoing ruckus. It wouldn&#39;t be surprising if $ha.they cast some kind of spell to prevent unwanted visitors from reaching the tower. And you can always call for $ha.them if you need help.&lt;&lt;if $humor&gt;0||$ha.ban&gt;2&gt;&gt; Considering $ha.their promptness with the doorbell, $ha.they might even bother to arrive before the scavengers pick your bones clean.&lt;&lt;/if&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|11-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="539" name="11-2" tags="draft" position="8600,450" size="100,100">&lt;&lt;set $subt.loc=&quot;Spire Entrance&quot;&gt;&gt;As you&#39;ve explored the tower, you&#39;ve discovered that, while staircases connect the second through fourth floors, nothing connects them to the first or fifth floors. The only way to get to the front door is with the teleportation stone Hawk gave you when you arrived, and your body has been gradually&lt;&lt;if $magicvibes&lt;0&gt;&gt; and unnervingly&lt;&lt;/if&gt;&gt; adapting to the sensation of short-range teleportation. So when you arrive in the entrance hall, you&#39;re able to quickly turn your attention to the most pressing concern: figuring out how to even get the doors open. They stretch most of the way to the towering cavern roof, but there&#39;s no apparent mechanism to haul them open apart from ordinary iron rings fastened to them.

The bell tolls again, the sound coming from everywhere around you and giving the sensation of your skeleton being vigorously shaken. Your body&#39;s not going to tolerate much of this, so you do the only thing you can:

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Try to pull the door open.|11-2.1]]&lt;/li&gt;
&lt;li&gt;[[Think thoughts of opening at the door.|11-2.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="540" name="11-2.1" tags="draft" position="8550,575" size="100,100">You grab hold of a ring with both hands and pull with your whole weight. The colossal door swings inward with shocking ease, leaving you to stumble backward as Shea peers in at you through the now open doorway.

&lt;&lt;include [[11-3]]&gt;&gt;</tw-passagedata><tw-passagedata pid="541" name="11-2.2" tags="draft" position="8675,575" size="100,100">&lt;&lt;set $magicattempts+=1&gt;&gt;You don&#39;t really know how magic works, so you try thinking intently at the door, willing it to open. By the time the bell tolls again, the door hasn&#39;t budged. You&#39;ll have to open it the old fashioned way. &lt;&lt;include [[11-2.1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="542" name="11-3" tags="draft" position="8600,700" size="100,100">&quot;$name! Good morning!&quot; $sh.They&#39;&lt;&lt;sre&gt;&gt; dressed much the same a the last time $sh.they &lt;&lt;swere&gt;&gt; here but &lt;&lt;sare&gt;&gt; noticeably less drenched this time. &quot;I&#39;m here to deliver some more supplies--not as many this time! I&#39;ll have them unloaded in short order.&quot; $sh.They give&lt;&lt;ss&gt;&gt; you a little salute and head back out into the perpetual rain.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;Let &quot;+$sh.them+&quot; bring the supplies in.&quot;|11-3.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;Help &quot;+$sh.them+&quot; bring the supplies in.&quot;|11-3.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="543" name="11-3.1" tags="draft" position="8550,825" size="100,100">You may get in the way if you try to help, so you wait as Shea brings in the boxes--a much smaller quantity than $sh.their first delivery.

&quot;Is Hawk around? &lt;&lt;include [[11-4]]&gt;&gt;</tw-passagedata><tw-passagedata pid="544" name="11-3.2" tags="draft" position="8650,825" size="100,100">&lt;&lt;set $kind+=1&gt;&gt;&lt;&lt;set $sh.fond+=1&gt;&gt;You follow Shea out and help bring the boxes from $sh.their cart into the tower. You&#39;re not used to manual labor, so it isn&#39;t long before &lt;&lt;if $skill==&quot;persistence&quot;&gt;&gt;&lt;&lt;set $sh.res+=1&gt;&gt;you feel your muscles begin to burn. But you press on, keeping pace with Shea.

&quot;Thank you, $name! Maybe I should hire you to make deliveries if this is the kind of work you put in.&quot; $sh.They smile&lt;&lt;ss&gt;&gt; at you brightly. &quot;&lt;&lt;else&gt;&gt;you begin to slow your pace. Thankfully, there aren&#39;t many boxes this time, and the work is done in a few minutes.

&quot;Thank you, $name!&lt;&lt;/if&gt;&gt; Did Hawk send you down to help? &lt;&lt;include [[11-4]]&gt;&gt;</tw-passagedata><tw-passagedata pid="545" name="11-4" tags="draft" position="8600,950" size="100,100">$ha.They usually bring&lt;&lt;hs&gt;&gt; everything upstairs $ha.themself.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;No, it&#39;s just me today.\&quot;&quot;|11-4.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I haven&#39;t seen &quot;+$ha.them+&quot; in days.\&quot;&quot;|11-4.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;m sure &quot;+$ha.they+&quot;&#39;ll get it soon.\&quot;&quot;|11-4.3]]&lt;/li&gt;
&lt;li&gt;[[Shake your head.|11-4.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="546" name="11-4.1" tags="draft" position="8550,1075" size="100,100">&quot;No, it&#39;s just me today.&quot;

Shea &lt;&lt;if $nvbook&gt;0&gt;&gt;moves a little closer to read what you&#39;ve written, then smiles once $sh.they&#39;&lt;&lt;sve&gt;&gt; done so&lt;&lt;else&gt;&gt;smiles&lt;&lt;/if&gt;&gt;. &quot;Well, as nice as it is to see Hawk, I&#39;m glad to see you as well. Nothing $ha.they ordered is perishable--it&#39;ll keep until $ha.they get&lt;&lt;hs&gt;&gt; to it.&quot; &lt;&lt;include [[11-5]]&gt;&gt;</tw-passagedata><tw-passagedata pid="547" name="11-4.2" tags="draft" position="8650,1075" size="100,100">&lt;&lt;set $sh.soft+=1&gt;&gt;&quot;I haven&#39;t seen $ha.them in days.&quot;

Shea &lt;&lt;if $nvbook&gt;0&gt;&gt;moves a little closer to read what you&#39;ve written, then frowns once $sh.they&#39;&lt;&lt;sve&gt;&gt; done so&lt;&lt;else&gt;&gt;frowns&lt;&lt;/if&gt;&gt;. &quot;I know this wasn&#39;t a love match, but that still seems... inconsiderate of $ha.them.&quot; &lt;&lt;include [[11-5]]&gt;&gt;</tw-passagedata><tw-passagedata pid="548" name="11-4.3" tags="draft" position="8575,1175" size="100,100">&quot;I&#39;m sure $ha.they&#39;ll get it soon.&quot;

&lt;&lt;if $nvbook&gt;0&gt;&gt;Shea moves a little closer to read what you&#39;ve written. &lt;&lt;/if&gt;&gt;&quot;Nothing $ha.they ordered is perishable--it&#39;ll keep until $ha.they can take care of it.&quot; &lt;&lt;include [[11-5]]&gt;&gt;</tw-passagedata><tw-passagedata pid="549" name="11-4.4" tags="draft" position="8675,1175" size="100,100">&lt;&lt;set $sh.silent+=1&gt;&gt;You shake your head.

Shea smiles. &quot;Well, as nice as it is to see Hawk, I&#39;m glad to see you as well. Nothing $ha.they ordered is perishable--it&#39;ll keep until $ha.they get&lt;&lt;hs&gt;&gt; to it.&quot; &lt;&lt;include [[11-5]]&gt;&gt;</tw-passagedata><tw-passagedata pid="550" name="11-5" tags="draft" position="8600,1300" size="100,100">After a moment of silence, you can almost see the gears in $sh.their mind turn to a new, exciting thought. Shea reminds you very much of a puppy: all bright, spontaneous energy. &quot;You haven&#39;t been to town yet, have you? If you&#39;re not busy, I can show you around. We should go to the post office, at least--you may have some letters by now. I can have you home by suppertime. What do you say?&quot;

It&#39;s difficult not to be swayed by $sh.their obvious enthusiasm, and frankly, you don&#39;t have anything to do today that&#39;s likely to result in anything useful. Perhaps you&#39;ll even be able to gather some information in town--and receiving a letter from your family would be very welcome.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I&#39;d like that.\&quot;&quot;|11-5.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Let&#39;s go!\&quot;&quot;|11-5.2]]&lt;/li&gt;
&lt;li&gt;[[Sigh. &quot;Why not?&quot;|11-5.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;You&#39;re sure I&#39;ll be home before dark?\&quot;&quot;|11-5.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="551" name="11-5.1" tags="draft" position="8550,1425" size="100,100">&quot;I&#39;d like that.&quot;

&quot;Good! Then let&#39;s get going.&quot; &lt;&lt;include [[11-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="552" name="11-5.2" tags="draft" position="8650,1425" size="100,100">&quot;Let&#39;s go!&quot; Finally, something to break the monotony of the last few days.

Shea beams. &quot;That&#39;s what I like to hear. Come on!&quot; &lt;&lt;include [[11-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="553" name="11-5.3" tags="draft" position="8575,1525" size="100,100">You sigh. It&#39;s not as if you have anything more productive to do. &quot;Why not?&quot;

&quot;Don&#39;t sound so excited, $name,&quot; $sh.they say&lt;&lt;ss&gt;&gt; in sarcastic good humor. &lt;&lt;include [[11-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="554" name="11-5.4" tags="draft" position="8675,1525" size="100,100">&lt;&lt;set $impulsive-=1&gt;&gt;&quot;You&#39;re sure I&#39;ll be home before dark?&quot;

Shea nods. &quot;I&#39;ve made the journey here many times. You&#39;ll be home with time to spare.&quot;

&quot;Alright. I&#39;ll go.&quot;

&quot;Don&#39;t sound so excited, $name,&quot; $sh.they say&lt;&lt;ss&gt;&gt; in sarcastic good humor. &lt;&lt;include [[11-6]]&gt;&gt;</tw-passagedata><tw-passagedata pid="555" name="11-6" tags="draft" position="8600,1650" size="100,100">Shea leads the way out into the unseasonably cool rain, and you shut the door behind you as you leave.

For the first time, you look straight up toward the top of the spire, but what catches your attention is the sky above. The dark, heavy clouds spin and churn around an eye of brilliant teal that seems anchored to the tower. They occasionally flash with lightning that jumps within the cloud, never reaching out toward the ground. Even the terrible storm on your wedding day looked less threatening than the one above you, but all that reaches the ground is a light rain and a gentle breeze.

&quot;Scary, isn&#39;t it?&quot; Shea asks. &quot;It usually only really gets bad in the winter when it turns to snow. Finn here doesn&#39;t like trudging through the snow very much. He takes some coaxing.&quot; Looking at the huge draft horse at the head of Shea&#39;s cart, it&#39;s difficult to imagine Finn would have trouble with anything less than a blizzard&#39;s worth of snow. But if it&#39;s his preference not deal with snow, it probably wouldn&#39;t be easy to force him to do it either. Though right now, he seems perfectly unbothered by the weather, and he waits patiently a little as you and Shea climb onto the cart.

Shea removes a waxed blanket from under $sh.their seat and hands it to you. &quot;Just in case.&quot; $sh.They take&lt;&lt;ss&gt;&gt; the reins and turn to look at you. &quot;Ready?&quot; You nod, and after a moment, you&#39;re off.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|11-7]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="556" name="11-7" tags="draft" position="8600,1750" size="100,100">&lt;&lt;set $subt.loc=&quot;The Pine Forest&quot;&gt;&gt;Finn sets a steady pace as you plunge into the trees, surrounding you with the rich, resinous smell of pine. The track just barely leaves enough room between trees for the cart to thread between them, and the carpet of fallen pine needles disguises hoofprints and wheel ruts well enough that, if you were lost in the forest, you might not realize this was a path at all. It takes bends around huge standing trunks and fallen rotting ones, and the cart clips off leaves and twigs from smaller plants that have grown in too close. You haven&#39;t gone far when the raindrops stop reaching you entirely, but it&#39;s difficult to tell whether it&#39;s because the rain has stopped or because the canopy above is too dense to let it through. Nothing about the dappled light shining down or the bird sounds echoing through the trees paints the picture of a cursed place.

&quot;How have you been settling in, $name?&quot; Shea asks, pulling your mind back from wandering off into the woods. &quot;I&#39;m sure it&#39;s difficult to make such a big change.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;It&#39;s exciting!\&quot;&quot;|11-7.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;m doing alright.\&quot;&quot;|11-7.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;ve been better.\&quot;&quot;|11-7.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;m not doing very well.\&quot;&quot;|11-7.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="557" name="11-7.1" tags="draft" position="8550,1875" size="100,100">&lt;&lt;set $optimistic+=1&gt;&gt;&lt;&lt;set $eleven.mood=1&gt;&gt;&quot;It&#39;s exciting! I&#39;ve gotten to see all sorts of new things.&quot;

Shea&lt;&lt;if $nvbook&gt;0&gt;&gt; leans over to read what you&#39;ve written and&lt;&lt;/if&gt;&gt; laughs. &quot;I&#39;m sure! &lt;&lt;include [[11-8]]&gt;&gt;</tw-passagedata><tw-passagedata pid="558" name="11-7.2" tags="draft" position="8650,1875" size="100,100">&lt;&lt;set $eleven.mood=0&gt;&gt;&quot;I&#39;m doing alright.&quot;

Shea&lt;&lt;if $nvbook&gt;0&gt;&gt; leans over to read what you&#39;ve written and&lt;&lt;/if&gt;&gt; nods. &quot;It must be overwhelming. &lt;&lt;include [[11-8]]&gt;&gt;</tw-passagedata><tw-passagedata pid="559" name="11-7.3" tags="draft" position="8575,1975" size="100,100">&lt;&lt;set $eleven.mood=0&gt;&gt;&quot;I&#39;ve been better.&quot;

Shea&lt;&lt;if $nvbook&gt;0&gt;&gt; leans over to read what you&#39;ve written and&lt;&lt;/if&gt;&gt; nods. &quot;It must be overwhelming. &lt;&lt;include [[11-8]]&gt;&gt;</tw-passagedata><tw-passagedata pid="560" name="11-7.4" tags="draft" position="8675,1975" size="100,100">&lt;&lt;set $optimistic-=1&gt;&gt;&lt;&lt;set $eleven.mood=-1&gt;&gt;&quot;I&#39;m not doing very well. &lt;&lt;if $motiv==&quot;family&quot;&gt;&gt;I&#39;ve never been this far from my family before&lt;&lt;else&gt;&gt;It&#39;s been difficult to adjust&lt;&lt;/if&gt;&gt;.&quot;

Shea&lt;&lt;if $nvbook&gt;0&gt;&gt; leans over to read what you&#39;ve written and&lt;&lt;/if&gt;&gt; nods. &quot;I wouldn&#39;t want to be in your shoes. &lt;&lt;include [[11-8]]&gt;&gt;</tw-passagedata><tw-passagedata pid="561" name="11-8" tags="draft" position="8600,2100" size="100,100">Has Hawk been treating you well?&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Yes, Hawk&#39;s been kind.\&quot;&quot;|11-8.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;More or less.\&quot;&quot;|11-8.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Hawk hasn&#39;t been around much.\&quot;&quot;|11-8.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Not particularly.\&quot;&quot;|11-8.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="562" name="11-8.1" tags="draft" position="8550,2225" size="100,100">&lt;&lt;set $sh.havibes+=1&gt;&gt;&quot;Yes, Hawk&#39;s been kind.&quot;

&quot;Really?&quot;

&quot;You sound surprised.&quot;

&quot;I am! Not that Hawk is &lt;i&gt;unkind&lt;/i&gt;, exactly, but $ha.they&#39;&lt;&lt;hre&gt;&gt; not especially...&quot;

&lt;div id=&quot;rpl&quot;&gt;&lt;ul class=&quot;choice chat&quot;&gt;&lt;li&gt;&lt;&lt;link &quot;\&quot;Friendly?\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#rpl&quot;&gt;&gt;&lt;&lt;timed 10ms t8n&gt;&gt;&quot;Friendly?&quot; you offer.

&quot;Among other things. But I&#39;m glad $ha.they&#39;&lt;&lt;hve&gt;&gt; been good to you.&quot;

&lt;&lt;include [[11-9]]&gt;&gt;&lt;&lt;/timed&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/li&gt;
&lt;li&gt;&lt;&lt;link &quot;\&quot;Considerate?\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#rpl&quot;&gt;&gt;&lt;&lt;timed 10ms t8n&gt;&gt;&quot;Considerate?&quot; you offer.

&quot;Among other things. But I&#39;m glad $ha.they&#39;&lt;&lt;hve&gt;&gt; been good to you.&quot;

&lt;&lt;include [[11-9]]&gt;&gt;&lt;&lt;/timed&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/li&gt;
&lt;li&gt;&lt;&lt;link &quot;\&quot;Human?\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#rpl&quot;&gt;&gt;&lt;&lt;timed 10ms t8n&gt;&gt;&quot;Human?&quot; you offer.

&quot;Among other things. But I&#39;m glad $ha.they&#39;&lt;&lt;hve&gt;&gt; been good to you.&quot;

&lt;&lt;include [[11-9]]&gt;&gt;&lt;&lt;/timed&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/li&gt;
&lt;li&gt;&lt;&lt;link &quot;Wait for Shea to finish.&quot;&gt;&gt;&lt;&lt;replace &quot;#rpl&quot;&gt;&gt;&lt;&lt;timed 10ms t8n&gt;&gt;You wait for Shea to finish $sh.their thought.

&quot;...Solicitous. But I&#39;m glad $ha.they&#39;&lt;&lt;hve&gt;&gt; been good to you.&quot;

&lt;&lt;include [[11-9]]&gt;&gt;&lt;&lt;/timed&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="563" name="11-8.2" tags="draft" position="8650,2225" size="100,100">&quot;More or less.&quot;

&quot;More or less?&quot;

&quot;&lt;&lt;if $humor&gt;2&gt;&gt;I&#39;m still alive, so it&#39;s better than it could have been&lt;&lt;else&gt;&gt;I have food and a roof over my head&lt;&lt;/if&gt;&gt;.&quot;

&quot;I don&#39;t think that counts as treating you well, $name. But I am glad you&#39;re still with us.&quot;

&lt;&lt;include [[11-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="564" name="11-8.3" tags="draft" position="8575,2325" size="100,100">&quot;Hawk hasn&#39;t been around much.&quot;

&quot;I was afraid of that. $ha.They&#39;&lt;&lt;hve&gt;&gt; never been social, as far as I&#39;ve heard.&quot;

&lt;&lt;include [[11-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="565" name="11-8.4" tags="draft" position="8675,2325" size="100,100">&lt;&lt;set $sh.havibes-=1&gt;&gt;&quot;Not particularly.&quot;

&quot;Ha&lt;&lt;hve&gt;&gt; $ha.they hurt you?&quot;

&lt;div id=&quot;rpl&quot;&gt;&lt;ul class=&quot;choice chat&quot;&gt;&lt;li&gt;&lt;&lt;link &quot;\&quot;No.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#rpl&quot;&gt;&gt;&lt;&lt;timed 10ms t8n&gt;&gt;&quot;No, but I wouldn&#39;t say $ha.they&#39;&lt;&lt;hve&gt;&gt; been kind.&quot;

Shea nods. &quot;I understand. $ha.They can be... difficult.&quot;

&lt;&lt;include [[11-9]]&gt;&gt;&lt;&lt;/timed&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/li&gt;
&lt;li&gt;&lt;&lt;link &quot;\&quot;Only emotionally.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#rpl&quot;&gt;&gt;&lt;&lt;timed 10ms t8n&gt;&gt;&lt;&lt;set $humor+=1&gt;&gt;&quot;Only emotionally.&quot;

Shea sighs. &quot;I understand. $ha.They can be abrasive.&quot;

&lt;&lt;include [[11-9]]&gt;&gt;&lt;&lt;/timed&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/li&gt;
&lt;li&gt;&lt;&lt;link &quot;\&quot;Some things in the tower have tried.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#rpl&quot;&gt;&gt;&lt;&lt;timed 10ms t8n&gt;&gt;&quot;Some things in the tower have tried.&quot;

Shea shakes $sh.their head. &quot;I don&#39;t envy you having to live there. It&#39;s a strange place.&quot;

&lt;&lt;include [[11-9]]&gt;&gt;&lt;&lt;/timed&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="566" name="11-9" tags="draft" position="8600,2450" size="100,100">&lt;&lt;if $nvbook&gt;0&gt;&gt;Shea lapses&lt;&lt;else&gt;&gt;You lapse&lt;&lt;/if&gt;&gt; back into silence for a while, and the sounds of the forest and Finn&#39;s hooves on the dirt creep back in. Though Shea holds the reins, $sh.they do&lt;&lt;ses&gt;&gt;n&#39;t need to do much directing; Finn clearly knows where he&#39;s going. Though you&#39;ve &lt;&lt;if $skill==&quot;strategy&quot;||$skill==&quot;evasion&quot;&gt;&gt;kept an eye out for trail markers&lt;&lt;else&gt;&gt;occasionally looked for trail markers along the way&lt;&lt;/if&gt;&gt;, you&#39;ve been unable to spot any. Even landmarks are few and far between. Young and old trees are interspersed with no recognizable pattern, and though you can faintly hear the river you followed when you first arrived, it&#39;s too distant to use as anything but an auditory compass. You&#39;ve seen no obvious signs of the wolves you heard that first evening, but they may not be active this morning.

Shea&#39;s voice again returns you to the present. &quot;I know most of the people in the valley, so I know you&#39;re not from Heliona. Where &lt;i&gt;are&lt;/i&gt; you from?&quot;

&quot;A day or so east of here. Near Kelfeldt.&quot;

&quot;Is your family there, too?&quot;

&lt;&lt;if $skill==&quot;persuasion&quot;&gt;&gt;It&#39;s difficult to tell if $sh.they&lt;&lt;sre&gt;&gt; fishing for who you are, exactly, but y&lt;&lt;else&gt;&gt;Y&lt;&lt;/if&gt;&gt;ou&#39;re probably not going to be able to put off telling Shea who your father is. It&#39;s just a question of how to frame it.

You explain that your father is the Earl of Eastthorn...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...and it&#39;s alright if people know.|11-9.1]]&lt;/li&gt;
&lt;li&gt;[[...but you&#39;d rather people not know.|11-9.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="567" name="11-9.1" tags="draft" position="8550,2575" size="100,100">&lt;&lt;set $eleven.titlepub=true&gt;&gt;&quot;My father is the Earl of Eastthorn. It isn&#39;t a secret--it just didn&#39;t come up before.&quot;

&quot;Oh! I should use your... Do you have a title?&quot;

&lt;&lt;include [[11-10]]&gt;&gt;</tw-passagedata><tw-passagedata pid="568" name="11-9.2" tags="draft" position="8650,2575" size="100,100">&quot;My father is the Earl of Eastthorn, but I don&#39;t want it to be public knowledge.&quot;

&quot;Oh! I should use your... Do you have a title?&quot;

&quot;&lt;&lt;if $humor&gt;2&gt;&gt;If you use a title, that&#39;s going to give it away&lt;&lt;else&gt;&gt;I&#39;d rather you didn&#39;t&lt;&lt;/if&gt;&gt;.&quot;

&quot;Alright, but if a situation does come up, what should I call you?&quot;

&lt;&lt;include [[11-10]]&gt;&gt;</tw-passagedata><tw-passagedata pid="569" name="11-10" tags="draft" position="8600,2700" size="100,100">&lt;&lt;if $gendervibes==&quot;cis&quot;||$genderstuff==false&gt;&gt;Technically, your title is &lt;&lt;if $genderstuff&amp;&amp;$mc.they==&quot;she&quot;&gt;&gt;&lt;&lt;set $mctitle=&quot;Lady&quot;&gt;&gt;Lady&lt;&lt;else&gt;&gt;&lt;&lt;set $mctitle=&quot;The Honorable&quot;&gt;&gt;The Honorable&lt;&lt;/if&gt;&gt; $name of Eastthorn. But there&#39;s nothing to say that you &lt;i&gt;have&lt;/i&gt; to use it since it&#39;s likely no one knows who you are here.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;It&#39;s &quot;+$mctitle+&quot; &quot;+$name+&quot;.\&quot;&quot;|11-10.1]]&lt;/li&gt;&lt;&lt;if $eleven.titlepub&gt;&gt;
&lt;li&gt;[[&quot;\&quot;It&#39;s &quot;+$mctitle+&quot; &quot;+$name+&quot;, but I&#39;d rather you didn&#39;t use it.\&quot;&quot;|11-10.2]]&lt;/li&gt;&lt;&lt;/if&gt;&gt;
&lt;li&gt;[[&quot;\&quot;You can just use my name.\&quot;&quot;|11-10.3][$mctitle=&quot;nope&quot;]]&lt;/li&gt;&lt;/ul&gt;\
&lt;&lt;else&gt;&gt;That&#39;s not the easiest question to answer. You do have one, but &lt;&lt;if $gendervibes==&quot;trans&quot;&gt;&gt;it doesn&#39;t match who you are&lt;&lt;else&gt;&gt;you&#39;re not sure it matches who you are&lt;&lt;/if&gt;&gt;. You couldn&#39;t be Lord Eastthorn anyway, since the title of Lord is reserved for your father and, in the future, your brother. So if you&#39;re to use a title, you&#39;ll need to pick between Lady $name of Eastthorn and The Honorable $name of Eastthorn. But you could just as well reject them both.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;It&#39;s Lady &quot;+$name+&quot;.\&quot;&quot;|11-10.1][$mctitle=&quot;Lady&quot;]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;It&#39;s The Honorable &quot;+$name+&quot;.\&quot;&quot;|11-10.1][$mctitle=&quot;The Honorable&quot;]]&lt;/li&gt;&lt;&lt;if $eleven.titlepub&gt;&gt;
&lt;li&gt;[[&quot;\&quot;It&#39;s Lady &quot;+$name+&quot;, but I&#39;d rather you didn&#39;t use it.\&quot;&quot;|11-10.2][$mctitle=&quot;Lady&quot;]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;It&#39;s The Honorable &quot;+$name+&quot;, but I&#39;d rather you didn&#39;t use it.\&quot;&quot;|11-10.2][$mctitle=&quot;The Honorable&quot;]]&lt;/li&gt;&lt;&lt;/if&gt;&gt;
&lt;li&gt;[[&quot;\&quot;You can just use my name.\&quot;&quot;|11-10.3][$mctitle=&quot;nope&quot;]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="570" name="11-10.1" tags="draft" position="8500,2825" size="100,100">&quot;It&#39;s $mctitle $name.&quot;

&quot;Then I&#39;m glad to officially meet you, $mctitle $name.&quot; Shea bows $sh.their head to you in lighthearted politeness before turning back to look at the path.&lt;&lt;if not $eleven.titlepub&gt;&gt; &quot;I promise I won&#39;t misuse this knowledge.&quot;&lt;&lt;/if&gt;&gt;

&lt;&lt;if $genderstuff&amp;&amp;$gendervibes!=&quot;cis&quot;&gt;&gt;&lt;&lt;include [[11-11]]&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;include [[11-12]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="571" name="11-10.2" tags="draft" position="8600,2825" size="100,100">&lt;&lt;set $eleven.titlepub=false&gt;&gt;&quot;It&#39;s $mctitle $name, but I&#39;d rather you didn&#39;t use it.&quot;

&quot;Understood.&quot; Shea bows $sh.their head to you in lighthearted politeness before turning back to look at the path. &quot;I promise I won&#39;t misuse this knowledge.&quot;

&lt;&lt;if $genderstuff&amp;&amp;$gendervibes!=&quot;cis&quot;&gt;&gt;&lt;&lt;include [[11-11]]&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;include [[11-12]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="572" name="11-10.3" tags="draft" position="8700,2825" size="100,100">&lt;&lt;set $eleven.titlepub=false&gt;&gt;&quot;You can just use my name.&quot;

&quot;Understood.&quot; Shea bows $sh.their head to you in lighthearted politeness before turning back to look at the path.

&lt;&lt;if $genderstuff&amp;&amp;$gendervibes!=&quot;cis&quot;&gt;&gt;&lt;&lt;include [[11-11]]&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;include [[11-12]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="573" name="11-11" tags="draft" position="8575,2950" size="100,100">Quiet returns, but it&#39;s less comfortable this time. Any occasion that causes you to remember the contrast between what your gender &quot;should&quot; be and who you are breaks the fragile peace you experience when you can forget what society thinks. &lt;&lt;if $ax.they!=$mc.they&gt;&gt;Shea hasn&#39;t seemed bothered by your choice of address&lt;&lt;else&gt;&gt;It&#39;s difficult to shake the feeling that Shea must have noticed something by now, but $sh.they h&lt;&lt;save&gt;&gt;n&#39;t seemed bothered by it&lt;&lt;/if&gt;&gt;.&lt;&lt;if $sh.they==&quot;they&quot;&gt;&gt; Of course, why would they be? $sh.They&#39;&lt;&lt;sre&gt;&gt; just as unconventional.&lt;&lt;/if&gt;&gt; It hasn&#39;t been long since you met $sh.them, but perhaps this is someone who would understand.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Ask if people like you are common here.|11-11.1]]&lt;/li&gt;
&lt;li&gt;[[Don&#39;t bring it up.|11-11.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="574" name="11-11.1" tags="draft" position="8500,3075" size="100,100">&lt;&lt;set $sh.knowtrans=true&gt;&gt;&lt;&lt;set $sh.soft+=1&gt;&gt;&lt;&lt;if $nvbook&gt;0&gt;&gt;You write your question down and hold your book toward Shea to get $sh.their attention. &lt;&lt;/if&gt;&gt;&quot;Are people like &lt;&lt;if $sh.they==&quot;they&quot;&gt;&gt;us&lt;&lt;else&gt;&gt;me&lt;&lt;/if&gt;&gt; common here?&quot;

&quot;What do you mean?&quot;

&quot;People who aren&#39;t comfortable with the gender they were given at birth.&quot;

&lt;&lt;if $sh.they==&quot;they&quot;&gt;&gt;&quot;Ah. No, we&#39;re not especially common. &lt;&lt;else&gt;&gt;Shea chuckles. &quot;You mean &#39;us?&#39; I&#39;m the same.&quot; Perhaps it speaks to your own residual preconceptions about gender, but you wouldn&#39;t have guessed from Shea&#39;s appearance that $sh.they shared your experience. &quot;&lt;&lt;/if&gt;&gt;I imagine it was difficult for you elsewhere, but most people in town are... relatively understanding. We&#39;re a small community, and even though Hawk is the only Elf who lives nearby, others do visit. They don&#39;t see gender the way humans do--though you&#39;ve probably gotten that talk already. It&#39;s something that&#39;s seeped into our culture here, though not everyone accepts that humans can deviate from whatever gender they first seem to be. I won&#39;t say it&#39;s easy to live this way, but it&#39;s possible.&quot;

Even &quot;possible&quot; seems like a miracle. Finding someone like you, someone &lt;i&gt;human&lt;/i&gt; who understands what this is like, is almost dizzying.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Do you have any advice?\&quot;&quot;|11-11.1.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;How did you know who you were?\&quot;&quot;|11-11.1.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;m glad I&#39;m not the only one.\&quot;&quot;|11-11.1.3]]&lt;/li&gt;
&lt;li&gt;[[Fail to stop yourself from crying.|11-11.1.4]]&lt;/li&gt;
&lt;li&gt;[[Let the silence return.|11-11.1.5]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="575" name="11-11.2" tags="draft" position="8725,3075" size="100,100">&lt;&lt;if $mc.they==&quot;they&quot;&gt;&gt;&lt;&lt;set $sh.knowtrans=true&gt;&gt;&lt;&lt;/if&gt;&gt;It doesn&#39;t feel like the right time to talk about this with $sh.them, so you let the silence return. &lt;&lt;include [[11-12]]&gt;&gt;</tw-passagedata><tw-passagedata pid="576" name="11-11.1.1" tags="draft" position="8400,3200" size="100,100">&quot;Do you have any advice?&quot;

&quot;Be clear about what you want people to call you. If they don&#39;t respect it, ignore them. They&#39;re not people you want to be around. No one else can tell you who you are. I don&#39;t have any secrets to make that part easier, though.&quot;

The silence returns, though more amicable this time. &lt;&lt;include [[11-12]]&gt;&gt;</tw-passagedata><tw-passagedata pid="577" name="11-11.1.2" tags="draft" position="8500,3200" size="100,100">&quot;How did you know who you were?&quot;

&quot;I always knew, really. But it took me a while to understand that not everyone felt... wrong in their skin. What about you?&quot;

&lt;div id=&quot;rpl&quot;&gt;&lt;ul class=&quot;choice chat&quot;&gt;&lt;li&gt;&lt;&lt;link &quot;\&quot;I&#39;ve always known, too.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#rpl&quot;&gt;&gt;&lt;&lt;timed 10ms t8n&gt;&gt;&quot;I&#39;ve always known, too--for as long as I can remember.&quot;

&quot;It&#39;s a strange thing to come to terms with, especially if no one else has experienced what you have.&quot;

The silence returns, though more amicable this time. &lt;&lt;include [[11-12]]&gt;&gt;&lt;&lt;/timed&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/li&gt;
&lt;li&gt;&lt;&lt;link &quot;\&quot;I only figured it out recently.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#rpl&quot;&gt;&gt;&lt;&lt;timed 10ms t8n&gt;&gt;&quot;I only figured it out recently.&quot;

&quot;It takes time, especially if no one else has experienced what you have.&quot;

The silence returns, though more amicable this time. &lt;&lt;include [[11-12]]&gt;&gt;&lt;&lt;/timed&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/li&gt;
&lt;li&gt;&lt;&lt;link &quot;\&quot;I&#39;m still trying to figure it out.\&quot;&quot;&gt;&gt;&lt;&lt;replace &quot;#rpl&quot;&gt;&gt;&lt;&lt;timed 10ms t8n&gt;&gt;&quot;I&#39;m still trying to figure it out.&quot;

&quot;It takes time, especially if no one else has experienced what you have. You&#39;ll get there.&quot;

The silence returns, though more amicable this time. &lt;&lt;include [[11-12]]&gt;&gt;&lt;&lt;/timed&gt;&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/link&gt;&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="578" name="11-11.1.4" tags="draft" position="8450,3300" size="100,100">&lt;&lt;set $eleven.cry=true&gt;&gt;You try to hold back your tears, but with everything you&#39;ve been through in the last few days, this is just too much.

It takes Shea a moment to notice, but when $sh.they do&lt;&lt;ses&gt;&gt;, $sh.their bright green eyes fix on you. $sh.Their brows furrow in concern, and $sh.they pull&lt;&lt;ss&gt;&gt; a handkerchief from $sh.their pocket and hand it to you. &quot;It&#39;s alright. Cry as much as you need to.&quot;

Apart from your sniffles, the silence returns. &lt;&lt;include [[11-12]]&gt;&gt;</tw-passagedata><tw-passagedata pid="579" name="11-11.1.5" tags="draft" position="8550,3300" size="100,100">The silence returns, though more amicable this time. &lt;&lt;include [[11-12]]&gt;&gt;</tw-passagedata><tw-passagedata pid="580" name="11-11.1.3" tags="draft" position="8600,3200" size="100,100">&quot;I&#39;m glad I&#39;m not the only one.&quot;

&quot;Me too! I&#39;m happy you&#39;re here.&quot;

The silence returns, though more amicable this time. &lt;&lt;include [[11-12]]&gt;&gt;</tw-passagedata><tw-passagedata pid="581" name="11-12" tags="draft" position="8600,3425" size="100,100">&lt;&lt;set $subt.loc=&quot;Heliona Valley&quot;&gt;&gt;After a while longer, the forest ahead begins to lighten, and soon, the cart breaks out into the sunlight. Between your time in the forest and the tower, you haven&#39;t seen much of the &quot;valley&quot; part of Heliona Valley, but now, the mountains rise up on either side of you, unobstructed. The brilliant green and gold of meadows and fields stretches out ahead, cradled between the slopes that stretch so tall that they&#39;re lost in low-floating white clouds. You&#39;re soon on a dirt road--not especially well traveled, by the look of it, but a road nonetheless. It winds along parallel to the river some distance to your left, and it doesn&#39;t take long before you spot farmhouses and fences. Curious cattle and horses drift toward you as you pass, and Shea waves at people busy with the harvest out in the fields. Shea tells you their names, but they&#39;re much too distant for you to have any hope of putting a name to a face in the future.

Eventually, you approach a dense congregation of buildings. &quot;Almost there!&quot; Shea says. &quot;Welcome to Cheldwick.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|11-13]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="582" name="11-13" tags="draft" position="8600,3525" size="100,100">&lt;&lt;set $subt.loc=&quot;Cheldwick&quot;&gt;&gt;A generous person might call Cheldwick quaint, but truthfully, after spending your whole life surrounded by the ornamentation expected of the gentry, every building looks incredibly plain. Most are small and stocky, built of wood or brick without much apparent concern for the aesthetic result. Shea all but glows as $sh.they introduce&lt;&lt;ss&gt;&gt; you to building after building that you have no hope of telling apart. $sh.They greet&lt;&lt;ss&gt;&gt; the occasional passerby, and as they squint up at you, you&#39;re particularly conscious of your clothes--too elaborate to blend in and unmarked by field dirt or hearth soot.&lt;&lt;if $eleven.cry&gt;&gt; And the fact that you&#39;re still recovering from your tearful incident in the woods doesn&#39;t set you at ease either.&lt;&lt;/if&gt;&gt; The unpleasant thought occurs to you that you may have little more in common with these people than you do with Hawk.

Eventually, you reach a brown brick building on the edge of town that&#39;s slightly larger than the others around it. Finn pulls the cart up a short drive and stops. &quot;Home at last!&quot; Shea jumps down from the cart and hurries around to your side of the cart to offer a leather-gloved hand to help you down.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;Take &quot;+$sh.their+&quot; hand.&quot;|11-13.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;Thank &quot;+$sh.them+&quot; but don&#39;t take &quot;+$sh.their+&quot; hand.&quot;|11-13.2]]&lt;/li&gt;
&lt;li&gt;[[Get down by yourself.|11-13.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="583" name="11-13.1" tags="draft" position="8475,3650" size="100,100">&lt;&lt;set $sh.touch=true&gt;&gt;You take $sh.their hand, and $sh.they support&lt;&lt;ss&gt;&gt; you as you drop down from the cart. This close, you can smell a hint of hay and lavender and see the delicate filaments in $sh.their vibrant green eyes. $sh.They smile&lt;&lt;ss&gt;&gt; &lt;&lt;if $height&lt;3&gt;&gt;down &lt;&lt;elseif $height&gt;3&gt;&gt;up &lt;&lt;/if&gt;&gt;at you before quickly releasing your hand.&lt;&lt;if $attraction!=&quot;aa&quot;&gt;&gt; You...

&lt;ul class=&quot;choice&quot;&gt;&lt;span class=&quot;heart&quot;&gt;&lt;li&gt;[[&quot;...wish &quot;+$sh.they+&quot; hadn&#39;t let go so soon.&quot;|11-13.1.1]]&lt;/li&gt;&lt;/span&gt;
&lt;li&gt;[[&quot;...let the moment pass.&quot;|11-13.1.2]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;else&gt;&gt; &lt;&lt;include [[11-13.1.2]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="584" name="11-13.2" tags="draft" position="8600,3650" size="100,100">&quot;I&#39;m alright, but thank you.&quot;

Shea smiles and steps back, making sure you&#39;re safely on the ground before $sh.they place&lt;&lt;ss&gt;&gt; $sh.their hand gently on Finn&#39;s flank. $sh.They speak&lt;&lt;ss&gt;&gt; in a soothing tone as $sh.they begin unhitching him from the cart. &lt;&lt;include [[11-14]]&gt;&gt;</tw-passagedata><tw-passagedata pid="585" name="11-13.3" tags="draft" position="8700,3650" size="100,100">You get down on your own, and Shea steps back, making sure you&#39;re safely on the ground before $sh.they place&lt;&lt;ss&gt;&gt; $sh.their hand gently on Finn&#39;s flank. $sh.They speak&lt;&lt;ss&gt;&gt; in a soothing tone as $sh.they begin unhitching him from the cart. &lt;&lt;include [[11-14]]&gt;&gt;</tw-passagedata><tw-passagedata pid="586" name="11-13.1.1" tags="draft" position="8425,3775" size="100,100">&lt;&lt;set $sh.spark+=1&gt;&gt;If Hawk projects an aura of cold, Shea&#39;s is all warmth and comfort. It may just be the lack of human contact in the last few days following the uprooting of your life, but you can&#39;t help but wish $sh.they&#39;d held your hand just a little longer. Though judging by the friendly reactions they received from everyone you encountered on the way, surely this wasn&#39;t personal anyway--$sh.they &lt;&lt;swere&gt;&gt; just being polite. $sh.They barely know&lt;&lt;ss&gt;&gt; you. Perhaps $sh.they even ha&lt;&lt;sve&gt;&gt; a partner already--&lt;i&gt;you&lt;/i&gt; have a $ha.spouse already, even if Hawk is unbothered by you showing interest in others.

&quot;$name? Are you alright?&quot; While you were experiencing a minor crisis, Shea has started carefully unhitching Finn from the cart. You quickly nod. &lt;&lt;include [[11-14]]&gt;&gt;</tw-passagedata><tw-passagedata pid="587" name="11-13.1.2" tags="draft" position="8525,3775" size="100,100">You watch Shea place $sh.their hand gently on Finn&#39;s flank, speaking in a soothing tone as $sh.they begin unhitching him from the cart. &lt;&lt;include [[11-14]]&gt;&gt;</tw-passagedata><tw-passagedata pid="588" name="11-14" tags="draft" position="8600,3900" size="100,100">&quot;You can wait inside. I&#39;ll be in shortly.&quot;

As you approach the door of what must be--judging by the &quot;Closed&quot; sign in the window--Shea&#39;s store, you can see spots where the white paint on the door is beginning to peel, and the window glass is scratched and smudged in places. The hinges creak minutely as you push the door open and enter the dark room within.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|11-15]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="589" name="11-15" tags="draft" position="8600,4000" size="100,100">&lt;&lt;set $subt.loc=&quot;Cheldwick General Store&quot;&gt;&gt;Your eyes slowly adjust to the dim natural light coming in through the few windows dotted around the walls and the newly opened front door. Shelves block the sunlight from illuminating the center of the room, but you can see unlit lamps dotted around the dark spots. After the high-ceilinged caverns of Hawk&#39;s tower, the store feels a little claustrophobic with its perfectly ordinary walls and ceiling. The wood floor has been scuffed and even lacerated in places, but given the huge bags of animal feed, excessively sharp farming and gardening implements, and manifold cans of food, this place has probably seen all sorts of odd damage.

You&#39;re still looking around when Shea enters, running a hand through $sh.their short brown hair. &quot;Bit dark in here, huh? Let&#39;s see...&quot; $sh.They duck&lt;&lt;ss&gt;&gt; behind the counter to fetch a candle that&#39;s thoroughly melted onto its holder. Once it&#39;s lit, the warm radiance chases away some of the eerie feeling the store had when you entered. &quot;If I start lighting the lamps, someone&#39;s going to pop in and tell me the sign still says &#39;Closed.&#39; So just a quick look around before we get lunch.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|11-16]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="590" name="11-16" tags="draft" position="8600,4100" size="100,100">Shea leads you on a quick circuit through the store, pointing out general sections and things that might interest you. The wares on display are clearly based around the needs of a farm town and not the $mc.spouse of a reclusive Elven sorcerer, but you have a feeling you&#39;ll need some practical clothes and tools eventually.

But it&#39;s not until you reach a corner that makes your skin tingle that you really take notice of the store&#39;s wares. On a shelf beside an assortment of mundane but clearly ornamental candles and incense holders are a few bottles of strangely colored liquids. By now, you&#39;re plenty familiar with the sensation of magic, but feeling it in a general store is unexpected. You&#39;ve heard rumors that the aversion to magic that took hold elsewhere didn&#39;t reach every edge of the kingdom, but it&#39;s strange to see it out in the open in an otherwise ordinary place.

&quot;Hawk made those,&quot; Shea says, clearly having noticed what&#39;s drawn your attention. &quot;Nothing too powerful, but better than home remedies. Not everyone likes having an Elf nearby, but most won&#39;t argue with something that can cure what ails them. &quot;&lt;&lt;if $nine.burn&gt;&gt; You can personally attest to the potency of Hawk&#39;s burn remedy, at least.&lt;&lt;/if&gt;&gt; Out of curiosity, you look for a price on the potions, but you don&#39;t see any tags or signs like you&#39;ve seen throughout the rest of the shop.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Ask about the cost.|11-16.1]]&lt;/li&gt;
&lt;li&gt;[[Let Shea move on.|11-17]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="591" name="11-16.1" tags="draft" position="8550,4225" size="100,100">&lt;&lt;set $curiosity+=1&gt;&gt;&quot;How much do the potions cost?&quot;

&quot;Nothing. I&#39;ve told Hawk it makes some people suspicious that $ha.they give&lt;&lt;hs&gt;&gt; them away, but $ha.they forbid me from setting even a small fee. It&#39;s a kind gesture. I think it&#39;s done some good to make people think better of $ha.them, but I don&#39;t think $ha.they even thought of that.&quot; Shea shakes $sh.their head. &quot;$ha.They&#39;&lt;&lt;hre&gt;&gt; a strange bird--no pun intended.&quot;

&lt;&lt;include [[11-17]]&gt;&gt;</tw-passagedata><tw-passagedata pid="592" name="11-17" tags="draft" position="8600,4350" size="100,100">Next, Shea points out the nearby supplies clearly intended for setting and renewing blessings: chalk, candles, incense, and the special paint used to draw glyphs. &quot;The most magic that people here usually practice is just the traditional blessings, though. Corner blessings, natal blessings--that sort of thing. Though I&#39;ve heard people in the city don&#39;t usually work their own blessings. Is that true?&quot;

Your family has always requested the services of a priestess to work and renew blessings. It&#39;s less that such a thing wouldn&#39;t be terribly respectable--though it wouldn&#39;t--and more that the thought to do otherwse would never even occur to your parents. Even calling blessings &quot;magic&quot; would be considered blasphemous by some, but your brother-in-law has some very strong opinions on the matter. &lt;i&gt;&quot;A tradition can be both spiritual and magical,&quot;&lt;/i&gt; is a common refrain from Erich, though not usually when your parents are around. His fascination with magical history tends to conflict with your brother&#39;s interest in political and military history, so you&#39;ve learned far more than you might have liked about the societal delineation of what is and isn&#39;t magic from what Isla likes to call their &quot;overly lively discussions.&quot;

But regardless of what blessings technically are or are not, they are ancient rituals that date back to the height of mortals&#39; magical power. They protect homes, guide children, and seal contracts. And where you&#39;re from, they are indeed performed by priestesses and others given the training and dispensation to do so. A common assertion from your brother-in-law is that, when magic was prohibited, the blessings were too valuable to outlaw. So to preserve the blessings, they had to be reframed as being granted entirely by the Winds rather than involving any human will as magic does. From there, the arguments generally devolve into a contemplation of what will even is and if it can truly be said that mortals have their own wills. There is no victor in those miserable, hours-long disagreements. Everyone in the vicinity loses.

Although you&#39;ve &lt;i&gt;renewed&lt;/i&gt; a corner blessing once before in a crisis, you&#39;ve never done more than observe the initial casting of one. Performing a corner blessing for the first time in a new building is a long, intricate process that you couldn&#39;t replicate. But you&#39;ve been present for enough arguments that you know your feelings on the matter. So you reply...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;It&#39;s true.\&quot;&quot;|11-17.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Unfortunately, yes.\&quot;&quot;|11-17.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;It&#39;s for the best.\&quot;&quot;|11-17.3]]&lt;/li&gt;
&lt;li&gt;[[Nod.|11-17.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="593" name="1-1a" tags="draft" position="825,250" size="100,100">&quot;Someone has made an offer.&quot; You don&#39;t phrase it as a question. Your sister-in-law mistakenly congratulated you on your engagement yesterday.

&quot;Yes.&quot; If your mother is surprised, it doesn&#39;t show. &quot;If you find the match objectionable, we will consider your opinion, but we have, on a preliminary basis, accepted it.&quot; She says &quot;we&quot; to lend herself the weight of your father’s authority as though he were not at war far from home. &quot;The wedding is to take place next month.&quot; It’s an alarmingly fast timeline, but perhaps her hope is to avert the crisis of your first and only previous engagement.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|1-1-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="594" name="1-1b" tags="draft" position="925,250" size="100,100">&lt;&lt;set $nvbook=1&gt;&gt;&quot;Someone has made an offer.&quot; You don&#39;t phrase it as a question. Your sister-in-law mistakenly congratulated you on your engagement yesterday.

&quot;Yes.&quot; If your mother is surprised, it doesn&#39;t show. &quot;If you find the match objectionable, we will consider your opinion, but we have, on a preliminary basis, accepted it.&quot; She says &quot;we&quot; to lend herself the weight of your father’s authority as though he were not at war far from home. &quot;The wedding is to take place next month.&quot; It’s an alarmingly fast timeline, but perhaps her hope is to avert the crisis of your first and only previous engagement.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|1-1-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="595" name="1-1c" tags="draft" position="1025,250" size="100,100">&lt;&lt;set $nvbook=2&gt;&gt;&quot;Someone has made an offer.&quot; When you write it in the small book you use to communicate, you use a period, not a question mark. Your sister-in-law mistakenly congratulated you on your engagement yesterday.

&quot;Yes.&quot; If your mother is surprised, it doesn&#39;t show. &quot;If you find the match objectionable, we will consider your opinion, but we have, on a preliminary basis, accepted it.&quot; She says &quot;we&quot; to lend herself the weight of your father’s authority as though he were not at war far from home. &quot;The wedding is to take place next month.&quot; It’s an alarmingly fast timeline, but perhaps her hope is to avert the crisis of your first and only previous engagement.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|1-1-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="596" name="11-17.1" tags="draft" position="8550,4475" size="100,100">&quot;It&#39;s true. The local priestesses perform all blessings.&quot;

&quot;That&#39;s a shame. It&#39;s such a special thing. I can&#39;t imagine not being able to participate.&quot;

&lt;&lt;include [[11-18]]&gt;&gt;</tw-passagedata><tw-passagedata pid="597" name="11-17.2" tags="draft" position="8650,4475" size="100,100">&lt;&lt;set $sh.check+=.2&gt;&gt;&lt;&lt;set $magicvibes+=1&gt;&gt;&quot;Unfortunately, yes. I&#39;ve renewed a blessing before but never cast one.&quot;

&quot;That&#39;s a shame. Maybe you&#39;ll be able to participate in one while you&#39;re here.&quot;

&lt;&lt;include [[11-18]]&gt;&gt;</tw-passagedata><tw-passagedata pid="598" name="11-17.3" tags="draft" position="8575,4575" size="100,100">&lt;&lt;set $magicvibes-=1&gt;&gt;&quot;It&#39;s for the best. Anything so close to magic shouldn&#39;t be in such common use.&quot;

Shea shrugs. &quot;It isn&#39;t dangerous magic. Most of us here have grown up doing it.&quot;

&lt;&lt;include [[11-18]]&gt;&gt;</tw-passagedata><tw-passagedata pid="599" name="11-17.4" tags="draft" position="8675,4575" size="100,100">You nod.

&quot;That&#39;s a shame. It&#39;s such a special thing. I can&#39;t imagine not being able to participate.&quot;

&lt;&lt;include [[11-18]]&gt;&gt;</tw-passagedata><tw-passagedata pid="600" name="11-18" tags="draft" position="8600,4700" size="100,100">Apparently not wanting to linger on the topic further, Shea leads you back toward the front of the store. &lt;&lt;if $sh.knowtrans&gt;&gt;&quot;Oh, before we go, let me get you something. Wait here.&quot; After a minute, $sh.they return&lt;&lt;ss&gt;&gt; and offer&lt;&lt;ss&gt;&gt; a small clay jar to you. &quot;This is illusion water. If you splash it on your face in the morning, you can alter your appearance slightly for most of the day. It takes a little practice, but using a mirror while you do it helps. You&#39;ll still be recognizable--it can&#39;t change your appearance that much. Don&#39;t drink it, though. It won&#39;t hurt you, but it won&#39;t do anything useful either. And it&#39;s hard to come by. You didn&#39;t mention being bothered by your appearance, but I know it&#39;s something that bothers me&lt;&lt;if $sh.soft&lt;1&amp;&amp;$sh.they!=&quot;they&quot;&gt;&gt;--I&#39;m not the gender I seemed to be at birth either&lt;&lt;/if&gt;&gt;. So I thought I&#39;d offer. No charge, of course!&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Accept the jar.|11-18.1]]&lt;/li&gt;
&lt;li&gt;[[Refuse the jar.|11-18.2]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;else&gt;&gt;&lt;&lt;include [[11-19]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="601" name="11-18.1" tags="draft" position="8450,4825" size="100,100">&lt;&lt;set $sjar=true&gt;&gt;You accept the jar from Shea. &quot;Thank you. This is very generous.&quot;

Shea waves your gratitude off. &quot;It&#39;s the least I can do--I have enough stockpiled for myself. It should last you quite a while, but just tell me if you need more. And I should mention, it won&#39;t physically change you--it&#39;s only a visual illusion.&quot;

&lt;&lt;if $magicvibes&gt;0&gt;&gt;It&#39;s almost painful how easy this is. Even if it&#39;s difficult to acquire, this could be life-changing. Even with all the terrible things magic can do, maybe it&#39;s worth it to have the bad to keep good things like this.&lt;&lt;elseif $magicvibes&lt;0&gt;&gt;You don&#39;t have the most favorable opinion on magic, but this could be life-changing. Maybe it&#39;s worth it to try this, at least.&lt;&lt;else&gt;&gt;You&#39;re not sure how to feel about magic yet, but this could be life-changing.&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[11-19]]&gt;&gt;</tw-passagedata><tw-passagedata pid="602" name="11-18.2" tags="draft" position="8550,4825" size="100,100">You shake your head. &quot;No thank you.&quot;

Shea nods. &quot;Let me know if you change your mind.&quot; $sh.They stash&lt;&lt;ses&gt;&gt; the jar in a small cabinet under the counter near the door. &lt;&lt;include [[11-19]]&gt;&gt;</tw-passagedata><tw-passagedata pid="603" name="11-19" tags="draft todo" position="8600,4950" size="100,100">&lt;&lt;set $subt.loc=&quot;Cheldwick&quot;&gt;&gt;&quot;Now, let&#39;s get going! I won&#39;t get to show you everything, but we can take the scenic route to lunch.&quot;

As $sh.they lead&lt;&lt;ss&gt;&gt; the way through town, Shea introduces every person, building, and stray animal you come across until the whole place starts to feel like a hopelessly tangled wad of names. Most people are friendly, though some seem a little wary of your presence. You get the sense that Shea&#39;s reputation insulates you from a broader suspicion you might have otherwise experienced had you needed to go around introducing yourself alone. Some people even offer you produce, fresh-baked bread, and the like, but Shea assures them you are &lt;i&gt;very&lt;/i&gt; well supplied with food. It&#39;s likely these same people who supplied it a week ago, but when asked, Shea describes only vaguely where you live--nothing identifiable as Hawk&#39;s tower.

You walk down narrow dirt roads past loosely packed houses and shops until the buildings begin to increase in density. &quot;Downtown&quot; is little more than a handful of brick buildings, but at least the clock tower rising from town hall makes it a easy to navigate there--even if the other buildings are less identifiable. It&#39;s a relief when Shea brings you into the post office. You finally have a few minutes&#39; reprieve from the barrage of information as you wait for Delilah--whose face and name will almost certainly be lost in the hoard you&#39;ve acquired today--to fetch your mail. She returns with two letters: one each from your sister and sister-in-law. You pocket them to read later once you&#39;re back at the tower and your mind stops whirring. After Shea&#39;s usual cheerful good-byes, you head across the street to a tiny storefront on the first floor of a narrow two-story brick building wedged between two much larger ones.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|11-20]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="604" name="11-20" tags="draft" position="8600,5050" size="100,100">&lt;&lt;set $subt.loc=&quot;Wynne&#39;s&quot;&gt;&gt;Inside, a mere four empty tables make the restaurant feel cozy but certainly at capacity. You&#39;ve rarely had any cause to dine out, but when you did, the chairs were upholstered with elegant fabric, and the tables were draped in clean white tablecloths. But here, both tables and chairs are bare wood, their finish old and scuffed. There&#39;s little to adorn the walls, but the few pieces of art dotted around are clearly amateur paintings hung in simple frames. Nevertheless, it has a simple charm to it. Though signs of wear and limited funds are everywhere, the room is clean and neat.

Then, a middle-aged woman, grinning from ear to ear, bursts through an open doorway at the back of the room. &quot;Shea! Late lunch today? And who&#39;s this?&quot;

Shea smiles at the round-faced woman. &quot;This is&lt;&lt;if $eleven.titlepub&gt;&gt; $mctitle&lt;&lt;/if&gt;&gt; $name. $name, this is Wynne. $name just moved in near town, so I&#39;m showing $mc.them around.&quot;

&quot;Welcome, welcome! Please take a seat, and I&#39;ll be with you in a moment.&quot; She returns to the back room, and you follow Shea to a table.

Though Shea has introduced you to dozens of people today, Hawk has not been mentioned once. &lt;&lt;if $skill==&quot;persuasion&quot;&gt;&gt;There&#39;s functionally no chance the omission could be accidental--&lt;&lt;else&gt;&gt;Though the omission could be accidental, &lt;&lt;/if&gt;&gt;it&#39;s the only reason you&#39;re here at all. The reactions to your presence have ranged from enthusiasm to vague suspicion. What might the consensus have been had Hawk been mentioned?

Wynne soon returns and effortlessly rattles off a list of what&#39;s available to order. Neither the menu nor Shea seem to share Hawk&#39;s aversion to meat. Once you&#39;ve placed your order, Wynne departs again, leaving you and Shea in relative quiet, even as the muffled sounds of the kitchen increase.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|11-21]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="605" name="11-21" tags="draft" position="8600,5150" size="100,100">&quot;So what do you think? Of town, I mean, not just Wynne&#39;s.&quot;

Although the area around your home is considered relatively rural, you&#39;ve never been this far from a city. From the comments of the people you&#39;ve met today, it&#39;s clear Shea grew up here and has never left for an extended period of time. This small community is the heart of $sh.their world. But you may as well have been pulled into an entirely new one where, for better or worse, you have a clean slate.&lt;&lt;if $eleven.titlepub&gt;&gt; Even the occasional contempt for your title isn&#39;t personal--merely a manifestation of generalized contempt for the gentry.&lt;&lt;/if&gt;&gt; No one here knows you or your family. You&#39;re without any of the true power of your name and title, but at the same time, you&#39;re suddenly free&lt;&lt;if $motiv==&quot;freedom&quot;&gt;&gt;--just a taste of the life you&#39;re working toward&lt;&lt;/if&gt;&gt;. Even if, by tomorrow, you almost certainly won&#39;t remember a majority of the people and places you&#39;ve seen today, they&#39;ve made a general impression.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Everyone seems nice.\&quot;&quot;|11-21.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;The valley is beautiful.\&quot;&quot;|11-21.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;ll need to get to know the people better before I decide.\&quot;&quot;|11-21.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;It&#39;s all a little overwhelming.\&quot;&quot;|11-21.4]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Some people didn&#39;t seem to like me much.\&quot;&quot;|11-21.5]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;It&#39;s not a place I&#39;d choose to live.\&quot;&quot;|11-21.6]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="606" name="11-21.1" tags="draft" position="8500,5275" size="100,100">&lt;&lt;set $optimistic+=1&gt;&gt;&lt;&lt;set $eleven.townvibe=1&gt;&gt;&quot;Everyone seems nice.&quot;

&quot;They are! Even most of the people who aren&#39;t very friendly to strangers are still good folks. &lt;&lt;include [[11-22]]&gt;&gt;</tw-passagedata><tw-passagedata pid="607" name="11-21.2" tags="draft" position="8600,5275" size="100,100">&lt;&lt;set $optimistic+=1&gt;&gt;&lt;&lt;set $eleven.townvibe=1&gt;&gt;&quot;The valley is beautiful.&quot;

&quot;Isn&#39;t it? I never get tired of the natural beauty here. &lt;&lt;include [[11-22]]&gt;&gt;</tw-passagedata><tw-passagedata pid="608" name="11-21.3" tags="draft" position="8700,5275" size="100,100">&quot;I&#39;ll need to get to know the people better before I decide.&quot;

&quot;That&#39;s understandable. First impressions can only tell you so much. &lt;&lt;include [[11-22]]&gt;&gt;</tw-passagedata><tw-passagedata pid="609" name="11-21.4" tags="draft" position="8525,5375" size="100,100">&quot;It&#39;s all a little overwhelming.&quot;

&quot;That&#39;s understandable. &lt;&lt;include [[11-22]]&gt;&gt;</tw-passagedata><tw-passagedata pid="610" name="11-21.5" tags="draft" position="8625,5375" size="100,100">&lt;&lt;set $optimistic-=1&gt;&gt;&lt;&lt;set $eleven.townvibe=-1&gt;&gt;&quot;Some people didn&#39;t seem to like me much.&quot;

Shea shakes $sh.their head. &quot;They just haven&#39;t gotten to know you yet. They&#39;ll warm up to you. &lt;&lt;include [[11-22]]&gt;&gt;</tw-passagedata><tw-passagedata pid="611" name="11-21.6" tags="draft" position="8725,5375" size="100,100">&lt;&lt;set $optimistic-=1&gt;&gt;&lt;&lt;set $eleven.townvibe=-1&gt;&gt;&lt;&lt;set $sh.fond-=1&gt;&gt;&lt;&lt;set $sh.soft+=1&gt;&gt;&quot;It&#39;s not a place I&#39;d choose to live.&quot;

Shea&#39;s face falls. &quot;I hope we&#39;ll change your mind eventually. &lt;&lt;include [[11-22]]&gt;&gt;&lt;&lt;set $optimistic-=1&gt;&gt;</tw-passagedata><tw-passagedata pid="612" name="11-22" tags="draft" position="8600,5500" size="100,100">I hope you&#39;ll &lt;&lt;if $eleven.townvibe&gt;=0&gt;&gt;be able to attend our autumn festival in a couple weeks&lt;&lt;else&gt;&gt;attend our autumn festival in a couple weeks before you fully make up your mind&lt;&lt;/if&gt;&gt;. We have food, games, all sorts of things. You can even get your fortune told if that&#39;s something you&#39;d like--just cards, nothing dangerous. Most people just do it for fun. Oh, there&#39;s dancing, too, if that&#39;s something you enjoy. You should bring Hawk, too, if $ha.they&#39;ll come. $ha.They can usually be persuaded, but it seems like $ha.they&#39;&lt;&lt;hve&gt;&gt; been busy lately.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;What is Hawk busy with?\&quot;&quot;|11-22.1]]&lt;/li&gt;&lt;/span&gt;
&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;Why doesn&#39;t Hawk like to attend?\&quot;&quot;|11-22.2]]&lt;/li&gt;&lt;/span&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;ll try.\&quot;&quot;|11-22.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;m not sure...\&quot;&quot;|11-22.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="613" name="11-22.1" tags="draft stuff" position="8525,5625" size="100,100">&lt;&lt;set $knowhaspring=true&gt;&gt;&quot;What is Hawk busy with?&quot;

&quot;I don&#39;t know. Some sort of project that needs to be done by spring.&quot;

Your heart knocks so hard against your ribs you wonder if Shea can hear it. There&#39;s no guarantee this &quot;project&quot; is the &quot;weapon&quot; you&#39;re looking for, but &lt;&lt;if $skill==&quot;strategy&quot;&gt;&gt;it&#39;s likely that it is given the timing and strangeness of your mission. Otherwise, why would the king call in a centuries-old favor now?&lt;&lt;else&gt;&gt;it&#39;s probably safest to assume that it is.&lt;&lt;/if&gt;&gt; And if the project will be done by spring, your time is dangerously limited. If there&#39;s a deadline, it&#39;s reasonable to assume Hawk has plans for it. In two seasons, you may have lost your chance. And what happens then? Will you still be able to get out of this marriage? Or will you be trapped here until you die, one way or another?

&quot;$name?&quot; Shea&#39;s voice pulls you up from where you were sinking into your thoughts, though your heartbeat hasn&#39;t quite recovered. Could you trust $sh.them with information about your mission? Maybe so. But probably not out in public.

&lt;ul&gt;&lt;&lt;if not hasVisited(&quot;11-22.2&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;Why doesn&#39;t Hawk like to attend the festival?\&quot;&quot;|11-22.2]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;&lt;li&gt;[[&quot;\&quot;I&#39;ll try to get &quot;+$ha.them+&quot; to attend.\&quot;&quot;|11-22.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;m not sure asking &quot;+$ha.them+&quot; to attend is a good idea.\&quot;&quot;|11-22.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="614" name="11-22.2" tags="draft" position="8675,5625" size="100,100">&quot;Why doesn&#39;t Hawk like to attend the festival?&quot;

Shea looks away, occupying $sh.their gaze with the faded wallpaper. &quot;$ha.They do&lt;&lt;hes&gt;&gt;n&#39;t have the best reputation here. That&#39;s why I didn&#39;t mention $ha.them when I introduced you either. Everyone will find out eventually, but better they have a little time to speak well of you on your own before learning you&#39;re connected to Hawk. And if they think I misrepresented the situation, I&#39;ll be the source, not you. My reputation can stand up to a little annoyance from anyone who grumbles.&quot;

It&#39;s difficult to tell what to make of this information. It isn&#39;t difficult to see how Hawk would acquire a poor reputation, especially if $ha.they&lt;&lt;hve&gt;&gt; been like this for centuries. But if $ha.they&lt;&lt;hre&gt;&gt; allowed at the festival at all, $ha.their reputation can&#39;t be &lt;i&gt;that&lt;/i&gt; bad. Though, then again, who would have the fortitude to tell &lt;i&gt;Hawk&lt;/i&gt; to leave.&lt;&lt;if $skill==&quot;persuasion&quot;&gt;&gt; And possibly just as pressing is the ease with which Shea just divulged $sh.their plan to you. On one hand, $sh.their strategy for introducing you was obviously calculated before it was executed. But on the other, $sh.they divulged $sh.their highly non-sinister plot of $sh.their own accord. But there&#39;s plainly more to $sh.them than enthusiastic friendliness.&lt;&lt;/if&gt;&gt;

&quot;I think the biggest reason $ha.they do&lt;&lt;hes&gt;&gt;n&#39;t always attend is that $ha.they&#39;&lt;&lt;hre&gt;&gt; very... focused. $ha.They do&lt;&lt;hes&gt;&gt;n&#39;t take kindly to $ha.their work being interrupted. But $ha.they usually seem&lt;&lt;hs&gt;&gt; to have... maybe not a good time, but not a bad one either.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;&lt;if not hasVisited(&quot;11-22.1&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;What is Hawk busy with?\&quot;&quot;|11-22.1]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;&lt;li&gt;[[&quot;\&quot;I&#39;ll try to get &quot;+$ha.them+&quot; to attend.\&quot;&quot;|11-22.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;m not sure asking &quot;+$ha.them+&quot; to attend is a good idea.\&quot;&quot;|11-22.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="615" name="11-22.3" tags="draft" position="8550,5750" size="100,100">&lt;&lt;set $eleven.hafestask=true&gt;&gt;&quot;I&#39;ll try to get $ha.them to attend.&quot;

Shea&#39;s smile illuminates $sh.their whole face. &quot;Wonderful! The more the merrier! $sh.They can take one day for leisure, I&#39;m sure.&quot;

&lt;&lt;include [[11-23]]&gt;&gt;</tw-passagedata><tw-passagedata pid="616" name="11-22.4" tags="draft" position="8650,5750" size="100,100">&quot;I&#39;m not sure asking $ha.them to attend is a good idea.&quot;

Shea looks down at the table. &quot;You could be right. It might be better to leave $ha.them to $ha.their work.&quot;

&lt;&lt;include [[11-23]]&gt;&gt;</tw-passagedata><tw-passagedata pid="617" name="11-23" tags="draft" position="8600,5875" size="100,100">A short while later, Wynne returns to take your order, and by the time she delivers your food, you and Shea have moved on to more ordinary topics. As you eat, you acquire an abbreviated picture of Shea&#39;s life: $sh.They did grow up in town and took over the store from $sh.their father a few years ago when his health took a turn. After $sh.their mother died when Shea was young, $sh.their paternal grandmother moved in to help raise $sh.them. They all used to live in the apartment above the store, but when the stairs became too much for $sh.their father and grandmother, they moved to a small house at the edge of town. Shea splits $sh.their time unevenly between the apartment above the store and $sh.their family&#39;s new home.

In essence, you learn the sorts of things you might have learned much sooner had the circumstances of your arrival in town been remotely normal. For better or worse, you had almost started to forget what ordinary human conversations were like. But unlike many conversations you&#39;ve experienced, Shea gives you space to contribute as much or as little as you like. Before you know it, you&#39;ve finished lunch, and Shea insists that the full cost of the meal be added to the end of $sh.their tab rather than the start of yours.

When you emerge from Wynne&#39;s, you&#39;re hit with a wall of humidity. In contrast to the bright sky this morning, a thin sheet of clouds shades the town. You follow Shea&#39;s gaze toward the west and see a mass of dark storm clouds looming in the distance.

&quot;Well, I suppose we should get a move on. It looks like that storm&#39;ll be here before dark.&quot; Shea says. &quot;I hate to cut our tour short, but I&#39;d hate to put either of us through a rainstorm more.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|11-24]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="618" name="11-24" tags="draft" position="8600,5975" size="100,100">&lt;&lt;set $subt.loc=&quot;Heliona Valley&quot;&gt;&gt;After making good time back to the general store, it isn&#39;t long before you&#39;re back in the cart on the path to Hawk&#39;s tower. Though Finn is traveling at the same calm pace as this morning, Shea is too focused now to start a conversation. But eventually, $sh.they finally seem&lt;&lt;ss&gt;&gt; to remember you&#39;re there and turn&lt;&lt;ss&gt;&gt; to give you a reassuring smile.

&quot;Don&#39;t worry, you&#39;ll be back at Talon&#39;s End before dark.&quot;

&quot;Talon&#39;s End?&quot;

&quot;Hawk didn&#39;t tell you? That&#39;s what $ha.their tower is called--or the area around $ha.their tower, really. Supposedly, the last dragon died there. Its name was Talon, and they say it cursed the land when it died so that it would always storm over its grave. That&#39;s why Hawk raised $ha.their tower here--for the storm&#39;s magic.&quot;

Though dragons died out a thousand years ago, they feature almost as prominently in folk tales as Elves. Some stories portray them as sapient creatures, while others paint them as mere beasts. But all the stories agree that they were huge, vicious predators with a particular hunger for human flesh. They lived and--quite literally--breathed magic. Some even laid waste to cities with storms of fire or ice before gorging themselves on the cities&#39; inhabitants. It took armies to bring down a dragon, and considering the storm cloud that perpetually hovers over Hawk&#39;s tower, even death doesn&#39;t seem to have ended their potential for destruction. Knowing the storm is the ancient memorial raised by a terrible beast somehow makes it--and the tower below it--even more ominous.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|11-25]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="619" name="11-25" tags="draft" position="8600,6075" size="100,100">&lt;&lt;set $subt.loc=&quot;The Pine Forest&quot;&gt;&gt;Finn picks up speed as he goes, the cart bumping along behind him. The smile you&#39;ve quickly become familiar with is gone from Shea&#39;s face as $sh.they scan&lt;&lt;ss&gt;&gt; the forest. It takes you a moment to notice that the sound of birds is gone. In their place, the wind makes eerie sounds as it blows through the trees. At the speed you&#39;re going, it&#39;s difficult to tell if the distant dark shapes you spot between the trees are shadows, animals, or something else entirely.

As the trees thunder by, you imagine this forest growing from the body of the huge, winged creature that died here, pine seedlings sprouting between scales until the dragon&#39;s remains were torn asunder. It would be a victorious image for the humans who survived a dragon&#39;s reign of terror. But the trees here are too colossal not to render any human triumph small. More likely, the forest was already here and took little notice of the event at all but for the new eternal rainfall inside it. Was Hawk the same? Ambivalent to human concerns but for the benefit they eventually drew?

Shea finally stirs again from $sh.their examination of the forest to give you a resigned smile. &quot;Well, $name, this isn&#39;t exactly how I thought your first visit to town would end, but I also hope it won&#39;t be your last. I come by Hawk&#39;s tower every week or two, so I can bring you into town again next time, if you&#39;d like. I can&#39;t always take a day away from the store, but I can always give you directions to new things to see or places you can get what you need--if I don&#39;t already have it. A little while in town now and then must be better than being alone in that tower.&quot; Shea spends a few moments mulling over $sh.their next words. &quot;I don&#39;t want to frighten you, but... be careful of Hawk. People in town have reason not to trust $ha.them. $ha.They&#39;&lt;&lt;hve&gt;&gt; never acted maliciously toward us, but... things are complicated.

&quot;Take Finn here.&quot; $sh.They gesture&lt;&lt;ss&gt;&gt; at the back of the horse&#39;s head as he hurries along. &quot;I&#39;ve known him since he was a foal--the gentlest horse I&#39;ve ever met. It isn&#39;t his fault that, in a moment of pure survival instinct, he could easily hurt me. But he isn&#39;t human. He doesn&#39;t know what it&#39;s like to be human. Hawk is the same. Given enough time, it&#39;s easy to like $ha.them. There&#39;s no bullshit, no pretense. If $ha.they like&lt;&lt;hs&gt;&gt; you, $ha.they like&lt;&lt;hs&gt;&gt; you. But $ha.they&#39;ll never be human. $ha.They do&lt;&lt;hes&gt;&gt;n&#39;t understand how fragile we are. $ha.They tried to human-proof $ha.their tower to keep you out of too much danger, but I&#39;m sure $ha.they missed something. And whatever project $ha.they&#39;&lt;&lt;hre&gt;&gt; working on is $ha.their priority--not you.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Are you saying I&#39;m in danger?\&quot;&quot;|11-25.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I trust Hawk.\&quot;&quot;|11-25.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I don&#39;t want to go back to the tower.\&quot;&quot;|11-25.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I can take care of myself\&quot;&quot;|11-25.4]]&lt;/li&gt;
&lt;li&gt;[[Let Shea continue.|11-25.5]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="620" name="11-25.1" tags="draft" position="8500,6200" size="100,100">&quot;Are you saying I&#39;m in danger?&quot;

&quot;I suppose I am. &lt;&lt;if $sh.havibes&lt;0&gt;&gt;I know your experiences with Hawk may not have been the best so far, but I don&#39;t think $ha.they mean&lt;&lt;hs&gt;&gt; you harm.&lt;&lt;elseif $sh.havibes&gt;0&gt;&gt;It sounds like Hawk&#39;s been kind to you so far, and there&#39;s no reason to think that will change.&lt;&lt;else&gt;&gt;Even though you don&#39;t know Hawk well yet, I doubt $ha.they mean&lt;&lt;hs&gt;&gt; you harm.&lt;&lt;/if&gt;&gt; &lt;&lt;include [[11-26]]&gt;&gt;</tw-passagedata><tw-passagedata pid="621" name="11-25.2" tags="draft" position="8600,6200" size="100,100">&lt;&lt;set $sh.havibes+=1&gt;&gt;&quot;I trust Hawk.&quot;

Shea sighs. &quot;And I trust Finn. But I always remember that there are things he doesn&#39;t understand. I know he&#39;d be upset if something happened to me, so by protecting myself, I&#39;m protecting him, too. &lt;&lt;include [[11-26]]&gt;&gt;</tw-passagedata><tw-passagedata pid="622" name="11-25.3" tags="draft" position="8700,6200" size="100,100">&lt;&lt;set $sh.havibes-=1&gt;&gt;&quot;I don&#39;t want to go back to the tower.&quot; Your heart is pounding, and though you don&#39;t know how far away you are, you can almost feel the tower drawing closer.

&quot;I&#39;m sorry, $name. I didn&#39;t mean to scare you. &lt;&lt;if $sh.havibes&lt;-1&gt;&gt;I know your experiences with Hawk may not have been the best so far, but I don&#39;t think $ha.they mean&lt;&lt;hs&gt;&gt; you harm.&lt;&lt;elseif $sh.havibes&gt;=0&gt;&gt;It sounds like Hawk&#39;s been kind to you so far, and there&#39;s no reason to think that will change.&lt;&lt;else&gt;&gt;Even though you don&#39;t know Hawk well yet, I doubt $ha.they mean&lt;&lt;hs&gt;&gt; you harm.&lt;&lt;/if&gt;&gt; &lt;&lt;include [[11-26]]&gt;&gt;</tw-passagedata><tw-passagedata pid="623" name="11-25.4" tags="draft" position="8550,6300" size="100,100">&lt;&lt;set $confidence+=1&gt;&gt;&quot;I can take care of myself.&quot;

&quot;I&#39;m sure you can, and you can disregard my advice if you want. &lt;&lt;if $sh.havibes&lt;0&gt;&gt;I know your experiences with Hawk may not have been the best so far, but I don&#39;t think $ha.they mean&lt;&lt;hs&gt;&gt; you harm.&lt;&lt;elseif $sh.havibes&gt;0&gt;&gt;It sounds like Hawk&#39;s been kind to you so far, and there&#39;s no reason to think that will change.&lt;&lt;else&gt;&gt;Even though you don&#39;t know Hawk well yet, I doubt $ha.they mean&lt;&lt;hs&gt;&gt; you harm.&lt;&lt;/if&gt;&gt; &lt;&lt;include [[11-26]]&gt;&gt;</tw-passagedata><tw-passagedata pid="624" name="11-25.5" tags="draft" position="8650,6300" size="100,100">&lt;&lt;set $sh.silent+=1&gt;&gt;&quot;&lt;&lt;if $sh.havibes&lt;0&gt;&gt;I know your experiences with Hawk may not have been the best so far, but I don&#39;t think $ha.they mean&lt;&lt;hs&gt;&gt; you harm.&lt;&lt;elseif $sh.havibes&gt;0&gt;&gt;It sounds like Hawk&#39;s been kind to you so far, and there&#39;s no reason to think that will change.&lt;&lt;else&gt;&gt;Even though you don&#39;t know Hawk well yet, I doubt $ha.they mean&lt;&lt;hs&gt;&gt; you harm.&lt;&lt;/if&gt;&gt; &lt;&lt;include [[11-26]]&gt;&gt;</tw-passagedata><tw-passagedata pid="625" name="11-26" tags="draft" position="8600,6425" size="100,100">You don&#39;t need to avoid $ha.them. On the contrary, it&#39;s better to spend time with $ha.them. Tell $ha.them if something seems dangerous. Make yourself $ha.their priority. Hawk isn&#39;t the easiest nut to crack, but I&#39;m sure $ha.they&#39;ll come to appreciate you.&lt;&lt;if hasVisited(&quot;11-25.3&quot;)&gt;&gt; The tower might be frightening now, but I shouldn&#39;t take you away from it for too long. I&#39;m sure it&#39;ll feel like home before you know it. And I&#39;ll be back soon--I promise.&lt;&lt;/if&gt;&gt;&quot;

The forest starts to thin out ahead of you, and before you know it, the tower looms over you. Back to Talon&#39;s End.&lt;&lt;if hasVisited(&quot;11-25.3&quot;)&gt;&gt; You don&#39;t want to go back, but you know you have to. Shea&#39;s warning has not settled your nerves in the slightest, but you fix your purpose here in your mind. You have to do this. For your $motiv.&lt;&lt;/if&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|11-27]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="626" name="11-27" tags="draft endscene" position="8600,6525" size="100,100">&lt;&lt;set $subt.loc=&quot;Talon&#39;s End&quot;&gt;&gt;When you emerge from the woods, the rocky spire blots out a slice of sky, the isolated storm cloud above it beginning to blend in with the creeping grey around it. Distant thunder rumbles in from the west, but the pace of the rain is the same as it was when you left this morning. The real storm has yet to arrive.

Finn slows to a stop just outside the tower door, and just as you wonder how you&#39;re going to get back inside, the huge doors swing slowly inward. Standing in the doorway is Hawk. $ha.Their golden eyes immediately meet yours, but $ha.their expression remains inscrutably neutral.

&quot;&#39;Evening, Hawk!&quot; Shea remains where $sh.they &lt;&lt;sare&gt;&gt;, seated beside you. Hawk makes no move to help you down from the cart. &quot;Sorry I didn&#39;t ask your permission to bring $mc.them into town for the day, but it sounded like you were busy.&quot;

&quot;I knew $name left with you. $mc.They &lt;&lt;are&gt;&gt;n&#39;t my prisoner.&quot;

You eventually make your way down from the cart and&lt;&lt;if hasVisited(&quot;11-25.3&quot;)&gt;&gt; reluctantly&lt;&lt;/if&gt;&gt; head into the tower.

&quot;Have a good night, $name, Hawk!&quot; Shea nods to you both in turn. &quot;I&#39;ll be back next week--let me know if you&#39;re coming to the festival! &lt;&lt;if $sh.spark&gt;0&gt;&gt;I&#39;d&lt;&lt;else&gt;&gt;We&#39;d&lt;&lt;/if&gt;&gt; love to have you there.&quot; Shea gives you another warm smile before signaling to Finn that it&#39;s time to go and heading back into the pines.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|12-0]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="627" name="12-0.1" tags="draft" position="9050,225" size="100,100">&quot;Is it alright if I go?&quot;

&quot;You don&#39;t need my permission. It would be good for you to go. Make friends. I&#39;m... not good company.&quot;

&lt;&lt;include [[12-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="628" name="12-0.2" tags="draft" position="9150,225" size="100,100">&quot;You should come, too.&quot;

Hawk makes a noncommittal noise. &quot;I&#39;m... not good company. But you should go. Make friends.&quot;

&lt;&lt;include [[12-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="629" name="12-0.3" tags="draft" position="9075,325" size="100,100">&quot;I&#39;m not sure if I want to go.&quot;

&quot;You don&#39;t have to. But I&#39;m... not good company. You should consider going. Make friends.&quot;

&lt;&lt;include [[12-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="630" name="12-0.4" tags="draft" position="9200,350" size="100,100">&quot;I should eat dinner before it gets dark.&quot;

&quot;Of course. Have a good evening.&quot; &lt;&lt;include [[12-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="631" name="12-0" tags="draft startscene autosave" position="9100,100" size="100,100">&lt;&lt;set $cursc=12&gt;&gt;&lt;&lt;set $subt.loc=&quot;Spire Entrance&quot;&gt;&gt;&lt;&lt;notify&gt;&gt;Autosave complete!&lt;&lt;/notify&gt;&gt;&quot;I assume you enjoyed yourself.&quot; Hawk waves the doors closed as soon as you&#39;re both inside and leads the way farther inside. &quot;And Shea&#39;s trying to get you to come to the festival. As ever.&quot;&lt;&lt;if $skill==&quot;persuasion&quot;&gt;&gt; It&#39;s difficult to tell, but it seems like Hawk is trying to make conversation. Not very well, but $ha.they&#39;&lt;&lt;hre&gt;&gt; trying.&lt;&lt;/if&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Is it alright if I go?\&quot;&quot;|12-0.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;You should come, too.\&quot;&quot;|12-0.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;m not sure if I want to go.\&quot;&quot;|12-0.3]]&lt;/li&gt;
&lt;li&gt;[[Excuse yourself to eat dinner. Alone.|12-0.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="632" name="12-1" tags="draft" position="9075,450" size="100,100">&lt;ul class=&quot;choice&quot;&gt;&lt;&lt;if $attraction==&quot;aa&quot;&gt;&gt;&lt;li&gt;[[&quot;\&quot;I&#39;d still like to spend more time with you.\&quot;&quot;|12-1.1]]&lt;/li&gt;&lt;&lt;else&gt;&gt;&lt;span class=&quot;heart&quot;&gt;&lt;li&gt;[[&quot;\&quot;I&#39;d still like to spend more time with you.\&quot;&quot;|12-1.1]]&lt;/li&gt;&lt;/span&gt;&lt;&lt;/if&gt;&gt;
&lt;li&gt;[[&quot;\&quot;Would you consider going to the festival if I do?\&quot;&quot;|12-1.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;ll think on it.\&quot;&quot;|12-1.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="633" name="12-1.1" tags="draft" position="8950,575" size="100,100">&lt;&lt;set $twelve.hatime=true&gt;&gt;&lt;&lt;if $attraction!=&quot;aa&quot;&gt;&gt;&lt;&lt;set $ha.spark+=1&gt;&gt;&lt;&lt;/if&gt;&gt;&quot;I&#39;d still like to spend more time with you&lt;&lt;if $humor&gt;0&gt;&gt;, even if you aren&#39;t good company&lt;&lt;/if&gt;&gt;.&quot;

Hawk turns to fix $ha.their unblinking stare on you. &quot;Why?&quot;

It&#39;s a more difficult question than it should be. Because you need to earn $ha.their trust. Because you need to fulfill your mission somehow. But maybe there&#39;s some sincerity there, too. Maybe you could be friends.&lt;&lt;if $attraction!=&quot;aa&quot;&gt;&gt; Or something beyond that.&lt;&lt;/if&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Because you&#39;re my &quot;+$ha.spouse+&quot;.\&quot;&quot;|12-1.1.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Because I&#39;d like to get to know you.\&quot;&quot;|12-1.1.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Because it&#39;s lonely here.\&quot;&quot;|12-1.1.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="634" name="12-1.2" tags="draft" position="9075,575" size="100,100">&quot;Would you consider going to the festival if I do?&quot;

&quot;I&#39;d consider it. But I won&#39;t promise it. Have a good evening, $name.&quot; &lt;&lt;include [[12-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="635" name="12-1.3" tags="draft" position="9175,575" size="100,100">&quot;I&#39;ll think on it.&quot;

Hawk nods. &quot;Have a good evening, $name.&quot; &lt;&lt;include [[12-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="636" name="12-1.1.1" tags="draft" position="8850,725" size="100,100">&quot;Because you&#39;re my $ha.spouse.&quot;

Hawk sighs. &quot;I already told you that you have no duty to me.&quot;

&quot;Does that mean we can&#39;t get to know each other?&quot;

&quot;No. But I&#39;m busy. C&lt;&lt;include [[12-1-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="637" name="12-1.1.2" tags="draft" position="8950,725" size="100,100">&quot;Because I&#39;d like to get to know you.&quot;

&quot;That&#39;s unnecessary. And right now, I&#39;m busy. But c&lt;&lt;include [[12-1-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="638" name="12-1.1.3" tags="draft" position="9050,725" size="100,100">&lt;&lt;set $ha.soft+=1&gt;&gt;&quot;Because it&#39;s lonely here.&quot;

&quot;Oh.&quot; Hawk looks away. &quot;Shea seems willing to take you into town whenever you want. But for me... I&#39;m busy right now. C&lt;&lt;include [[12-1-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="639" name="12-1-1" tags="draft" position="8950,850" size="100,100">ome spring, I&#39;ll have more time. We can talk then.&quot; &lt;&lt;if $knowhaspring&gt;&gt;Another mention of spring--definitely concerning and all the more reason you &lt;i&gt;can&#39;t&lt;/i&gt; wait until then.&lt;&lt;else&gt;&gt;&lt;&lt;set $knowhaspring=true&gt;&gt;

&quot;What happens in the spring?&quot;

&quot;My research works or doesn&#39;t. Nothing that concerns you.&quot;

That sounds like it very much may concern you. There&#39;s no guarantee this &quot;research&quot; is the &quot;weapon&quot; you&#39;re looking for, but &lt;&lt;if $skill==&quot;strategy&quot;&gt;&gt;it&#39;s likely that it is given the timing and strangeness of your mission. Otherwise, why would the king call in a centuries-old favor now?&lt;&lt;else&gt;&gt;it&#39;s probably safest to assume that it is.&lt;&lt;/if&gt;&gt; And if the project will be done by spring, your time is dangerously limited. In two seasons, you may have lost your chance. And what happens then? Will you still be able to get out of this marriage? Or will you be trapped here until you die, one way or another?&lt;&lt;/if&gt;&gt;

&quot;For now, have a good evening, $name.&quot; &lt;&lt;include [[12-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="640" name="12-2" tags="draft" position="9100,975" size="100,100">&lt;&lt;set $subt.loc=&quot;The Kitchen&quot;&gt;&gt;Without another word, Hawk disappears, leaving you to your own devices once again. &lt;&lt;if $knowhaspring&gt;&gt;It&#39;s difficult to shake the feeling of time slipping through your fingers. Hawk appears and disappears at $ha.their whim, but your time to find your way to $ha.their secrets is limited. Two seasons. Six months. Somewhere in the neighborhood of 24 weeks. You tell yourself that you have time. Your wedding was barely over a week ago. You can do this. You have to. So for now, y&lt;&lt;else&gt;&gt;Once again, you&#39;re all alone. Y&lt;&lt;/if&gt;&gt;ou take your supper in the kitchen and pry the wax off the letters you received today.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Read Sabine&#39;s letter first.|12-3][$twelve.sabine=true]]&lt;/li&gt;
&lt;li&gt;[[Read Isla&#39;s letter first.|12-3][$twelve.isla=true]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="641" name="12-5.sab" tags="draft" position="9025,1550" size="100,100">&lt;&lt;set $twelve.sabine=true&gt;&gt;&lt;i&gt;&lt;&lt;if not $nickchange&gt;&gt;Dear $nick,

&lt;&lt;/if&gt;&gt;I expect Isla has already written to ask you to visit, so I will compound it: Visit us. Now that things here are settled, Isla has nothing to distract her from Soren&#39;s absence and is in a permanent state of unease. Even Mother has been forced to show some compassion for her distress. Erich says it will improve with time, but I think a letter or visit from you would do her good.

Nothing else of note has happened in your absence. When you write, I hope you&#39;ll have plenty of strange stories to tell us. Then, we will finally be able to silence the more irritating &quot;well wishers&quot; who don&#39;t wish you well at all. Mother can&#39;t prevent me from telling lurid tales of dark sorcery if they&#39;re true.

But for now, I&#39;ll leave you in peace. Don&#39;t forget to write, and visit when you can. Bring your Elf with you.

--Sabine&lt;/i&gt;

It&#39;s a very &lt;i&gt;Sabine&lt;/i&gt; letter if you&#39;ve ever read one. She did include the keywords &quot;of note&quot; to inform you that, if she doesn&#39;t hear from you in the next few weeks, she&#39;s going to initiate some sort of rescue attempt. She&#39;ll almost certainly underestimate the difficulty of infiltrating Hawk&#39;s tower, so you&#39;ll need to call her off at some point.

&lt;&lt;if $twelve.sabine&amp;&amp;$twelve.isla&gt;&gt;&lt;&lt;include [[12-6]]&gt;&gt;&lt;&lt;else&gt;&gt;&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Read Isla&#39;s letter.|12-5.isl]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="642" name="12-5.isl" tags="draft" position="9175,1550" size="100,100">&lt;&lt;set $twelve.isla=true&gt;&gt;&lt;i&gt;&lt;&lt;if not $nickchange&gt;&gt;Dear $nick,

&lt;&lt;/if&gt;&gt;I hope that you are well and have found every comfort in your new home. You must surely be busy, so I will keep this letter brief. We have not yet had word from your brother, and though it troubles me, your mother has assured me this is not unexpected. Your mother has been most solicitous in your and Soren&#39;s absence, and Sabine is, as ever, a relentless companion in dark times. I must also renew the invitation to visit us at your earliest convenience. If your spouse accompanies you, you may wish to divulge that I believe your sister has plans to conduct an interrogation.

But I will keep you no longer. Please write when you can and visit if you are able. I wish you great happiness in your marriage and fruitfulness in all your pursuits.

Yours in sisterly affection,

Isla&lt;/i&gt;

You often go many months without a letter from your father, but given Soren&#39;s diligence and the time he and Isla have spent together, her anxiety is understandable. You should at least be able to find time to write her, and perhaps Hawk could be persuaded to let you visit her. And apparently, if you want to see $ha.them questioned by your sister, you could try persuading Hawk to come along.

&lt;&lt;if $twelve.sabine&amp;&amp;$twelve.isla&gt;&gt;&lt;&lt;include [[12-6]]&gt;&gt;&lt;&lt;else&gt;&gt;&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Read Sabine&#39;s letter.|12-5.sab]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="643" name="12-3" tags="draft" position="9100,1075" size="100,100">You unfold the letter to see your &lt;&lt;if $twelve.sabine&gt;&gt;sister&lt;&lt;else&gt;&gt;sister-in-law&lt;&lt;/if&gt;&gt;&#39;s familiar handwriting, starting with the salutation&lt;&lt;if $gendervibes==&quot;maybe&quot;&gt;&gt;.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[You&#39;ve decided to keep the name or nickname your family uses.|12-3.1]]&lt;/li&gt;
&lt;li&gt;[[You&#39;ll need to tell her the new name you prefer.|12-3.1][$nickchange=true]]&lt;/li&gt;&lt;/ul&gt;
&lt;&lt;else&gt;&gt;:

&lt;i&gt;Dear ...&lt;/i&gt;

&lt;&lt;include [[12-4]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="644" name="12-3.1" tags="draft" position="9025,1200" size="100,100">&lt;&lt;if $nickchange&gt;&gt;Her salutation doesn&#39;t match the name you&#39;ve decided to use. When you write back, you&#39;ll have to tell her you&#39;d prefer she call you...&lt;&lt;else&gt;&gt;You&#39;re content with the name she uses for you:

&lt;i&gt;Dear...&lt;/i&gt;&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[12-4]]&gt;&gt;</tw-passagedata><tw-passagedata pid="645" name="12-4" tags="draft" position="9100,1325" size="100,100">&lt;blockquote&gt;&lt;i&gt;If $name has a nickname $mc.they reserve&lt;&lt;s&gt;&gt; for friends and family, please type it below with the capitalization you would like to see throughout the story. If $mc.they do&lt;&lt;es&gt;&gt;n&#39;t use such a nickname, enter $mc.their name below or leave it blank.&lt;/i&gt;&lt;/blockquote&gt;

&lt;&lt;textbox &quot;$nick&quot; &quot;&quot; &quot;12-5&quot;&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|12-5]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="646" name="12-5" tags="draft" position="9100,1425" size="100,100">&lt;&lt;if $nick==&quot;&quot;&gt;&gt;&lt;&lt;set $nick=$name&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;if $nickchange&gt;&gt;Making a mental note to tell her you&#39;d prefer to be called $nick, you continue on to the rest of the letter.

&lt;&lt;/if&gt;&gt;&lt;&lt;if $twelve.sabine&gt;&gt;&lt;&lt;include [[12-5.sab]]&gt;&gt;&lt;&lt;else&gt;&gt;&lt;&lt;include [[12-5.isl]]&gt;&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="647" name="12-6" tags="draft" position="9100,1675" size="100,100">In the time it&#39;s taken you to read (and reread) your letters from home, the sky outside has grown darker than usual with a blanket of storm clouds, and it&#39;s difficult to see the forest through the curtain of pelting rain. It must be nearing sunset, so you fold up the letters and attend to your dishes as best you can before returning to your room.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|12-7]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="648" name="12-7" tags="draft" position="9100,1775" size="100,100">&lt;&lt;set $subt.loc=&quot;Your Room&quot;&gt;&gt;When you reach your door, you see not just one but half a dozen tiny lizards waiting outside your room. As you approach, they all turn, their lidless turquoise eyes fixed expectantly--and a little unnervingly--on you. You haven&#39;t been able to find much information about most of the strange creatures in the tower, but the lizards currently scurrying into your room with you are an exception. Glyph geckos, as they&#39;re called, used to be plentiful before magic fell out of favor. They were commonly considered pests for sneaking into houses to absorb magical energy from enchanted artifacts and corner blessing glyphs and to eat from winter food stores. But some people believed their rippling colors were a sign of their deep connection to the Winds and considered them (and their tendency to eat large numbers of pest insects) to be good luck.

They&#39;ve been your regular evening companions and have gradually increased in number since your first visitor. It&#39;s been a tiring day, but it would be best to take a bath to spare your sheets from the road dirt you&#39;ve accumulated. The geckos flock to the taps as you approach the tub, scrambling to curly their little bodies around them as you fill the tub. As usual, you have to pluck one out of the water when it falls from its precarious position on the tub&#39;s edge.

Once you and the geckos are situated, your mind wanders.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|12-8]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="649" name="12-8" tags="draft" position="9100,1875" size="100,100">Your mission. Your $motiv. Letters from home. Geckos on your magical bathtub. A beast that will soon be growling outside your door. The forest. Cheldwick. Shea. Hawk. Talon&#39;s End.&lt;&lt;if $knowhaspring&gt;&gt; Six months.&lt;&lt;/if&gt;&gt;

Where do you even start? You&#39;ve &lt;i&gt;tried&lt;/i&gt; to start, but it&#39;s gotten you nowhere. You&#39;re alone, but--a gecko scrambles to keep its balance on the very top of the hot water tap--you&#39;re not alone either. Shea&#39;s been kind, and Hawk hasn&#39;t been cruel. You&#39;re still in one piece--as safe as you could be. But if you want to fulfill your mission, you&#39;ll need a new strategy. Your time exploring and researching has provided you with plenty of interesting information, but you&#39;re no closer to your goal than the day you arrived. Maybe Shea&#39;s right, even if $sh.they do&lt;&lt;ses&gt;&gt;n&#39;t know what you&#39;re really after. Maybe you need to try befriending Hawk&lt;&lt;if $sh.havibes&lt;0&gt;&gt;, even if that seems like a terrifying idea.&lt;&lt;elseif $sh.havibes&gt;0&gt;&gt;. That wouldn&#39;t be a hardship, really.&lt;&lt;else&gt;&gt;.&lt;&lt;/if&gt;&gt;

The water drains from the tub, and you faintly hear the sounds of clawing and snarling outside your bedroom while you finish getting ready for bed.&lt;&lt;if $sjar&gt;&gt; You take the jar Shea gave you and set it on the counter near the wall mirror. Perhaps you&#39;ll try it in the morning.&lt;&lt;/if&gt;&gt; When the ruckus finally dies down outside, you leave the geckos sleeping on the tub to settle into slumber yourself. As soon as you&#39;re in bed, the weight of the day overcomes you.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Go to sleep.|12-8.1]]&lt;/li&gt;
&lt;li&gt;[[Try to read your letters one more time.|12-8.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="650" name="12-8.1" tags="draft" position="9050,2000" size="100,100">You leave the letters where they are on your bedside table and let sleep overcome you.

&lt;&lt;include [[12-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="651" name="12-8.2" tags="draft" position="9150,2000" size="100,100">You pull the letters off your beside table to read them once more before you fall asleep. It isn&#39;t long before you&#39;re hazily rereading the same sentence several times between very long blinks. The last thing you remember before the darkness of sleep is your hand falling onto the bed, crumpling the letters inside it.

&lt;&lt;include [[12-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="652" name="12-9" tags="draft endscene" position="9100,2125" size="100,100">&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Time passes...|13-0]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="653" name="13-0" tags="draft startscene autosave" position="9700,100" size="100,100">&lt;&lt;set $cursc=13&gt;&gt;&lt;&lt;set $subt.loc=&quot;The Kitchen&quot;&gt;&gt;&lt;&lt;notify&gt;&gt;Autosave complete!&lt;&lt;/notify&gt;&gt;It&#39;s nearly another week before you see Hawk again. You&#39;re eating lunch when $ha.they suddenly appear&lt;&lt;hs&gt;&gt; in the kitchen doorway.

&quot;$name. The leader of my Enclave is visiting today. They&#39;d like to meet you. They&#39;ll be here in an hour.&quot; With that $ha.they turn&lt;&lt;hs&gt;&gt; to leave--as if $ha.they already provided sufficient information for you to survive a meeting with what is, most likely, one of the most powerful entities in the kingdom. Do they, like Hawk, suspect ulterior motives behind the human side of this marriage they ultimately brokered centuries ago? Why meet you now and not before the wedding? What questions will they ask? What will you &lt;i&gt;wear&lt;/i&gt;?

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;What should I call them?\&quot;&quot;|13-0.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Why do they want to meet me?\&quot;&quot;|13-0.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Will you be there?\&quot;&quot;|13-0.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;What should I wear?\&quot;&quot;|13-0.4]]&lt;/li&gt;
&lt;li&gt;[[Let Hawk leave.|13-0.5]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="654" name="13-0.5" tags="draft" position="9750,325" size="100,100">&lt;&lt;include [[13-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="655" name="13-0.1" tags="draft" position="9600,225" size="100,100">&quot;What should I call them?&quot;

&quot;Ember.&quot;

&quot;Is that their name or their title?&quot;

&quot;Name. You don&#39;t need to use their title.&quot; Hawk folds $ha.their arms and turns away again. &lt;&lt;include [[13-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="656" name="13-0.2" tags="draft" position="9700,225" size="100,100">&quot;Why do they want to meet me?&quot;

&quot;Because you&#39;re my $mc.spouse.&quot; $ha.They look&lt;&lt;hs&gt;&gt; at you as if the answer were obvious--though that&#39;s a common expression for $ha.them anyway. Hawk folds $ha.their arms and turns away again. &lt;&lt;include [[13-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="657" name="13-0.3" tags="draft" position="9800,225" size="100,100">&quot;Will you be there?&quot;

&quot;Yes.&quot; Hawk folds $ha.their arms and turns away again. &lt;&lt;include [[13-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="658" name="13-0.4" tags="draft" position="9650,325" size="100,100">&quot;What should I wear?&quot;

Hawk raises an eyebrow at you. &quot;Whatever you want.&quot; Hawk folds $ha.their arms and turns away again. &lt;&lt;include [[13-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="659" name="13-1" tags="draft" position="9700,450" size="100,100">&quot;Library. One hour.&quot; And with that, $ha.they&#39;&lt;&lt;hre&gt;&gt; gone.

Well, that&#39;s the rest of your day carved out for a meeting with an entity so powerful even Hawk defers to them. Better yet, thanks to Hawk&#39;s usual terse nature, you have no idea how $ha.they feel&lt;&lt;hs&gt;&gt; about this Elf or what you should expect. You hurry back to your room to prepare yourself. Or attempt to, anyway.

Your clothing options are limited (you&#39;ll need to accost Hawk to find out what to do with your laundry)&lt;&lt;if $eight.breakclothes==0&gt;&gt;, and you probably shouldn&#39;t wear a robe to this particular introduction&lt;&lt;/if&gt;&gt;. But you eventually decide on...

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[...a formal suit.|13-2][$thirteen.clothes=1.1]]&lt;/li&gt;
&lt;li&gt;[[...a formal dress.|13-2][$thirteen.clothes=1.2]]&lt;/li&gt;
&lt;li&gt;[[...a casual shirt and trousers.|13-2][$thirteen.clothes=2.1]]&lt;/li&gt;
&lt;li&gt;[[...a casual dress.|13-2][$thirteen.clothes=2.2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="660" name="13-2" tags="draft genderstuff" position="9700,575" size="100,100">&lt;&lt;if $thirteen.clothes&lt;2&gt;&gt;It seems only right that you should dress formally for this to make the best impression you can.&lt;&lt;else&gt;&gt;You don&#39;t want to risk being overdressed, so you decide to wear something casual.&lt;&lt;/if&gt;&gt;&lt;&lt;if $genderstuff&gt;&gt;&lt;&lt;if $ax.they==&quot;he&quot;&amp;&amp;($thirteen.clothes==1.2||$thirteen.clothes==2.2)&gt;&gt; In the time you&#39;ve spent away from home, you&#39;ve grown more comfortable wearing skirts and dresses. From your general understanding of Elves, the one you&#39;re about to meet may not even realize that wearing a dress wouldn&#39;t be a commonly accepted thing for you to do.&lt;&lt;elseif $ax.they==&quot;she&quot;&amp;&amp;($thirteen.clothes==1.1||$thirteen.clothes==2.1)&gt;&gt;  In the time you&#39;ve spent away from home, you&#39;ve grown more comfortable wearing trousers. From your general understanding of Elves, the one you&#39;re about to meet may not even realize that wearing trousers wouldn&#39;t be a commonly accepted thing for you to do.&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt; It takes you the better part of your remaining hour to decide exactly what to wear and prepare yourself--externally and internally--for this encounter. You devise a plan in your head on what to do and what to say in response to your potential interrogation. What if they have some magic that can read your mind? What will happen if you&#39;re caught somehow? Perhaps Hawk&#39;s lack of presence in your life thus far and general laissez faire attitude toward your marriage lulled you into a false sense of... maybe not security, but not a state of imminent danger either. Perhaps this was the true fateful moment all along.

Nearly one hour. You&#39;re out of time.

&lt;ul class=&quot;choice&quot;&gt;&lt;&lt;if $sjar&gt;&gt;&lt;li&gt;[[Refresh your appearance from Shea&#39;s jar.|13-2.1]]&lt;/li&gt;
&lt;&lt;/if&gt;&gt;&lt;li&gt;[[Head to the library.|13-3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="661" name="13-2.1" tags="draft" position="9625,700" size="100,100">You&#39;ve spent some time experimenting with the enchanted water Shea gave you, and while it usually lasts all day, you might as well freshen up. Just in case. Its effects are subtle--little changes to your jawline, the shape of your cheeks, whatever you direct it to change. Your first attempts were a little clumsy, but you&#39;re getting the hang of it now. You still get a little rush of joy every time you look in the mirror and see &lt;i&gt;you&lt;/i&gt;, truer than ever before.

And now that you&#39;re satisfied with your appearance, it&#39;s time.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Head to the library.|13-3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="662" name="13-3" tags="draft todo" position="9700,825" size="100,100">You use your stone to bring you to the library, and before you can even survey the scene, your eyes are immediately drawn to the most beautiful being you&#39;ve ever encountered. With fluid grace, they turn in their chair to look at you, and your breath catches. A loose braid of long, white locs is draped over their shoulder, giving a sharp contrast to their dark brown skin. Their eyes, such a pale grey it nearly matches their hair, settle gently on you as a soft smile curves their full lips. Your nervousness drifts away effortlessly.

They rise elegantly and give you a small bow. &quot;$name of Eastthorn--well met.&quot; Their voice is rich and melodic, and though it isn&#39;t loud, it seems to reverberate through the library. &quot;I am Ember, leader of the Enclave of the Frostwood. I apologize that my presence was unexpected. It seems that Hawk did not warn you that I would be visiting.&quot; Ember directs a fondly teasing look at Hawk.

&quot;I was busy.&quot;

&quot;Did you not think that your $mc.spouse might also be busy and would benefit from being informed of my coming?&quot;

Hawk thinks for a moment, then shrugs.&lt;&lt;if $ha.ban&gt;2&gt;&gt; It takes some effort not to roll your eyes.&lt;&lt;/if&gt;&gt;

&quot;Then I apologize on $ha.their behalf and mine,&quot; Ember says, giving another polite bow. &quot;Please, take a seat.&quot; They settle back into their armchair on one end of a semicircle of three and gesture to the empty chair on the opposite end. Hawk sits poker-straight in the chair in the middle. Presumably, Hawk is supposed to act as a buffer, the common acquaintance between you and Ember. But given that Hawk is barely more than a stranger, there&#39;s little to the arrangement but formality.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Take your place beside Hawk.|13-4]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="663" name="13-4" tags="draft" position="9700,925" size="100,100">You take your place beside Hawk, close enough to be within the edges of $ha.their halo of magic. In a now familiar way, the hairs on your arm stand up, but you quickly return your attention to Ember. Unlike Hawk&#39;s loose garb, Ember&#39;s clothes are rugged and layered, and even in the comfortable temperature of the library, they wear an embroidered silk scarf wound around their neck. Their clothes are worn, but each piece has some understated embellishment whose designs are unfamiliar to you. Ember takes a breath to speak, and you feel a sudden chill in the air.

&quot;We Elves do not marry one another, and no member of our Enclave has ever before married a human. This union is without precedent, so it took us some time to reach a decision on how to address it.&quot; As they speak, you feel as though you&#39;re floating, drifting. You&#39;re fully conscious, but your thoughts become unmoored, led only by Ember&#39;s voice. &quot;The reason for my visit today is to announce to you both that you, $name, are granted the protection of and acceptance to our Enclave--though with a few limitations that may be reconsidered as time passes.&quot;

&quot;&#39;Limitations?&#39;&quot; Hawk asks, $ha.their eyes narrowed.

&quot;None that will cause any great difficulty. It was a necessary evil to reach a consensus.&quot;

&quot;Who opposed the request?&quot;

&quot;Holly did.&quot;

&quot;Of course.&quot;

&quot;You know why, Hawk. This was not unexpected, nor is it out of malice.&quot;

Hawk turns away from Ember, leaving $ha.their icy gaze to bore into the stone floor.

Ember returns their focus to you. &quot;Including the three of us here, our Enclave consists of eight members, and it is the largest and oldest in the lands south of the Empire. We are honored for you to join us and request that, if you are able, you and Hawk both join us for our convocation this winter.&quot; They hold up their hand as Hawk opens $ha.their mouth to protest. &quot;I know you have business to attend to, but if time allows, you are both very welcome.&quot;

Silence follows, and both Elves turn to look at you, waiting for a response. As the echoes of their voice fade out, your thoughts snap back into place. Hawk&#39;s usual cool stare isn&#39;t much of an invitation, but you can&#39;t help feeling at ease around Ember. They&#39;re so much more &lt;i&gt;human&lt;/i&gt; than you expected--though maybe most Elves are like Ember, and Hawk&#39;s abrasiveness is the exception.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I&#39;d like to go.\&quot;&quot;|13-4.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;d prefer not to go.\&quot;&quot;|13-4.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I&#39;ll think about it.\&quot;&quot;|13.4.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="664" name="13-4.1" tags="draft" position="9600,1050" size="100,100">&lt;&lt;set $thirteen.conv=1&gt;&gt;&quot;I&#39;d like to go.&quot;&lt;&lt;if $nvbook&gt;0&gt;&gt; Like Hawk, Ember doesn&#39;t even need to lean toward you to read what you&#39;ve written.&lt;&lt;/if&gt;&gt;

&quot;Then it&#39;s settled,&quot; Ember says, smiling at you kindly. &quot;But if you change your mind, we will not be offended. &lt;&lt;include [[13-5]]&gt;&gt;</tw-passagedata><tw-passagedata pid="665" name="13-4.2" tags="draft" position="9700,1050" size="100,100">&lt;&lt;set $thirteen.conv=-1&gt;&gt;&quot;I&#39;d prefer not to go.&quot;&lt;&lt;if $nvbook&gt;0&gt;&gt; Like Hawk, Ember doesn&#39;t even need to lean toward you to read what you&#39;ve written.&lt;&lt;/if&gt;&gt;

&quot;Then it&#39;s settled,&quot; Ember says, smiling at you kindly. &quot;If you change your mind, you will still be welcome. &lt;&lt;include [[13-5]]&gt;&gt;</tw-passagedata><tw-passagedata pid="666" name="13.4.3" tags="draft" position="9800,1050" size="100,100">&quot;I&#39;ll think about it.&quot;&lt;&lt;if $nvbook&gt;0&gt;&gt; Like Hawk, Ember doesn&#39;t even need to lean toward you to read what you&#39;ve written.&lt;&lt;/if&gt;&gt;

&quot;A wise course,&quot; Ember says, smiling at you kindly. &quot;If you decide to attend, you will be very welcome. &lt;&lt;include [[13-5]]&gt;&gt;</tw-passagedata><tw-passagedata pid="667" name="13-5" tags="draft" position="9700,1175" size="100,100">Now, that is all the official business concluded, and you are free to return to whatever you were doing before my arrival interrupted you. But if you would like to stay and talk with us, you are welcome. I will gladly answer what questions you may have.&quot;

Your own thoughts again resurface. You do have questions--perhaps you could finally get them answered. But the peaceful haze that wraps around you is disorienting. Should you stay?

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Stay in the library.|13-6]]&lt;/li&gt;
&lt;li&gt;[[Leave.|13-5.1]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="668" name="13-6" tags="draft" position="9700,1400" size="100,100">&lt;&lt;set $thirteen.lib=true&gt;&gt;&quot;I&#39;d like to stay.&quot;

Ember smiles at you. &quot;Then, please, ask your questions. You must have many.&quot;

You certainly do. But which ones will you ask?

&lt;&lt;include [[13-6q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="669" name="13-5.1" tags="draft" position="9825,1275" size="100,100">You rise and give Ember a polite &lt;&lt;if $thirteen.clothes==1.1||$thirteen.clothes==2.1&gt;&gt;bow&lt;&lt;else&gt;&gt;curtsey&lt;&lt;/if&gt;&gt;. &quot;I should take my leave.&quot;

Ember, in an elegantly fluid motion, stands to return the gesture. &quot;I am glad to have met you, $name of Eastthorn. Be well.&quot;

&quot;I will accompany you,&quot; Hawk says, gesturing to the stairs. $ha.They clearly want&lt;&lt;hs&gt;&gt; to talk.

But as you follow $ha.them toward your room, it takes several minutes for $ha.them to build up to saying anything. When $ha.they finally speak&lt;&lt;hs&gt;&gt;, the words rush out at once. &lt;&lt;include [[13-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="670" name="13-6q" tags="draft" position="9700,1525" size="100,100">&lt;ul class=&quot;choice&quot;&gt;&lt;&lt;if not hasVisited(&quot;13-6q.voice&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;Can you stop doing that with your voice?\&quot;&quot;|13-6q.voice]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;13-6q.encl&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;What is an Enclave, exactly?\&quot;&quot;|13-6q.encl]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;13-6q.expect&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;What&#39;s expected of me as an Enclave member?\&quot;&quot;|13-6q.expect]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;13-6q.enclold&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;How old is your Enclave?\&quot;&quot;|13-6q.enclold]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;13-6q.emold&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;How old are you?\&quot;&quot;|13-6q.emold]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;13-6q.where&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;Where do you live?\&quot;&quot;|13-6q.where]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;13-6q.conv&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;What happens at a convocation?\&quot;&quot;|13-6q.conv]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;13-6q.marr&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;Why don&#39;t Elves marry?\&quot;&quot;|13-6q.marr]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;13-6q.why&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;Why did you permit this marriage?\&quot;&quot;|13-6q.why]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;13-6q.busy&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;Why is Hawk busy this winter?\&quot;&quot;|13-6q.busy]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $thirteen.qcount&gt;0&gt;&gt;&lt;li&gt;[[&quot;\&quot;I have no more questions.\&quot;&quot;|13-6q.done]]&lt;/li&gt;&lt;&lt;/if&gt;&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="671" name="13-6q.encl" tags="draft" position="9450,1650" size="100,100">&lt;&lt;set $thirteen.qcount+=1&gt;&gt;&quot;What is an Enclave, exactly?&quot;

&quot;We Elves are not social the way humans are, but we are not truly solitary either. Enclaves are loose coalitions of Elves who live near one another and share certain principles. Ours is large because it contains those of us who are Vowed to the Frostwood. Only three of us are not Avowed--pardon, &lt;i&gt;four&lt;/i&gt; of us, including yourself.&quot; They give you a conspiratorial smile.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;What do you mean by &#39;Avowed?&#39;\&quot;&quot;|13-6q.av]]&lt;/li&gt;
&lt;li&gt;[[Ask another question.|13-6q]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="672" name="13-6q.enclold" tags="draft" position="9700,1650" size="100,100">&lt;&lt;set $thirteen.qcount+=1&gt;&gt;&quot;How old is your Enclave?&quot;

&quot;I founded it in, ah... something like 600.&quot; It&#39;s now 2946--the Enclave is around 2300 years old.

&lt;&lt;include [[13-6q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="673" name="13-6q.emold" tags="draft" position="9825,1650" size="100,100">&lt;&lt;set $thirteen.qcount+=1&gt;&gt;&lt;&lt;set $knowemfall=true&gt;&gt;&quot;How old are you?&quot;

Ember smiles mysteriously, but Hawk cuts them off before they can say anything. &quot;Don&#39;t make $mc.them guess.&quot;

&quot;Very well. My first memories, as you would understand them, are of the Fall. But I lived, in some sense, before then. I am at least three thousand years old.&quot;

&lt;&lt;if $impulsive&gt;0&gt;&gt;Your jaw drops in shock&lt;&lt;else&gt;&gt;You just manage to keep your composure&lt;&lt;/if&gt;&gt;. Even the idea of being in the same room as an Elf who was a celestial guardian appointed by the Winds and commanded by the Seraph is dizzying. There are so many questions you could ask, but if they have no memories before the Fall, perhaps they couldn&#39;t answer them anyhow.

&quot;Try not to seem so impressed,&quot; Hawk says dryly. &quot;They enjoy it too much.&quot;

&quot;I only get to do this every few centuries. Let me enjoy it.&quot; Ember smiles at Hawk, and Hawk, shockingly enough, returns it. $ha.Their golden eyes narrow in warm amusement as the corner of $ha.their mouth tilts up in a crooked smile. If $ha.they did that more often, $ha.they could easily pass as almost rakishly charming.&lt;&lt;if $ha.spark&gt;0&gt;&gt; You feel a little flutter of &lt;i&gt;something&lt;/i&gt; that dissolves the moment $ha.they turn&lt;&lt;hs&gt;&gt; back to look at you impassively.&lt;&lt;/if&gt;&gt;

&lt;&lt;include [[13-6q.emold-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="674" name="13-6q.marr" tags="draft" position="9325,1925" size="100,100">&lt;&lt;set $thirteen.qcount+=1&gt;&gt;&quot;Why don&#39;t Elves marry?&quot;

&quot;Our lives are very long, and most of us live independently. Even Elves who bond usually only see one another every few years. It is our nature to put our Purpose or Vow above all other things, so we do not let our relationships interfere with our pursuits. And over the centuries, we change. It is natural for our relationships to alter or fade with time. We also do not reproduce as you do. There is no need for us to protect our young communally as mortals do. I suppose all that is to say, while we may love one another deeply in a way and a duration that you would see as akin to marriage, but we see no need for it. Our commitments can last hundreds of years, but they are not formal.&quot;

&lt;&lt;include [[13-6q.marr-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="675" name="13-6q.where" tags="draft" position="9950,1650" size="100,100">&lt;&lt;set $thirteen.qcount+=1&gt;&gt;&quot;Where do you live?&quot;

&quot;In the Frostwood. We have a hunting lodge of sorts there. That&#39;s where we hold our convocation, so you may see it sooner rather than later if you attend.&quot;

&lt;&lt;include [[13-6q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="676" name="13-6q.why" tags="draft" position="9625,1925" size="100,100">&lt;&lt;set $thirteen.qcount+=1&gt;&gt;&quot;Why did you permit this marriage?&quot;

&quot;I requested it. Though it was many years ago, and I did not have Hawk in mind. I do understand the importance a formal commitment holds for mortals, and I hoped to bring the Kingdom of Maressea and the Enclave of the Frostwood together. But it was a different time then. I hoped, perhaps, that closer ties might allow us to share the knowledge we had of how to avoid arcane cataclysm before it was too late. It seems you did learn enough to stop in time, though the damage that was done was regrettable--as was the ban on magic that followed. But now that distrust of magic seems to be easing, it makes sense to revisit the union for the opposite reason: to restore knowledge of magic that was lost.&quot;

So there is a reason that Ember has shown no suspicion and that Hawk has shown relatively little. &lt;&lt;if $magicvibes&gt;0&gt;&gt;It would be exciting to learn magic, though&lt;&lt;elseif $magicvibes&lt;0&gt;&gt;The idea of learning magic is unsettling, and&lt;&lt;else&gt;&gt;Could you really learn magic?&lt;&lt;/if&gt;&gt; Hawk doesn&#39;t seem like $ha.they&#39;d have much patience for teaching.

&lt;&lt;include [[13-6q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="677" name="13-6q.done" tags="draft" position="9700,2300" size="100,100">&lt;&lt;if $ach.on&gt;&gt;&lt;&lt;if $thirteen.qcount&gt;=15&gt;&gt;&lt;&lt;set $ach.any=true&gt;&gt;&lt;&lt;set $ach.manyq13=true&gt;&gt;&lt;&lt;notify&gt;&gt;Achievement unlocked: An Open Book&lt;&lt;/notify&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;set $ha.fond+=2&gt;&gt;&quot;I have no more questions.&quot;

&lt;&lt;if $thirteen.qcount&lt;5&gt;&gt;&lt;&lt;set $curiosity+=1&gt;&gt;&quot;Already? Well, i&lt;&lt;else&gt;&gt;&lt;&lt;set $curiosity+=2&gt;&gt;Ember gives you a now familiar warm smile. &quot;I&lt;&lt;/if&gt;&gt;f you have more when next we meet, I would be happy to answer them for you. I have some personal business to discuss with Hawk, if you wouldn&#39;t mind excusing us. But before you go, I have one more thing to ask of you.&quot; They turn to Hawk. &quot;Will you leave us for a moment? $name will meet you on the third floor.&quot;

&lt;&lt;if $ha.soft&gt;2&amp;&amp;hasVisited(&quot;13-0.3&quot;)&gt;&gt;Hawk looks at you. &quot;You&#39;ll be alright. I&#39;ll see you shortly.&quot; And then, $ha.they disappear&lt;&lt;hs&gt;&gt;.&lt;&lt;else&gt;&gt;Hawk nods. &quot;I&#39;ll see you shortly,&quot; $ha.they say&lt;&lt;hs&gt;&gt; to you before disappearing.&lt;&lt;/if&gt;&gt;

Now that Hawk is gone, you can tell exactly how much of a buffer $ha.they &lt;&lt;hwere&gt;&gt;. Hawk&#39;s trust in Ember is clear, and their benevolent intentions seem entirely genuine. But unlike the faint buzz that surrounds Hawk, Ember&#39;s power crackles through the air. It makes sense, given &lt;&lt;if $knowemfall&gt;&gt;who they are&lt;&lt;else&gt;&gt;that they&#39;re the leader of an Enclave&lt;&lt;/if&gt;&gt;&lt;&lt;if $knowavowed&gt;&gt;--even more so with the knowledge that they hunt horrors from worlds beyond&lt;&lt;/if&gt;&gt;. Their magic gives the impression of a sharpened blade that, although sheathed, could be drawn in a moment. Yet, clearly recognizing your mortal sensitivity, they keep their power withdrawn enough for you to think clearly, though their voice remains calming and melodic.

&quot;Tell me, what do you think of Hawk after these few weeks? I won&#39;t tell them--I only wish to satisfy my own curiosity. $ha.They ha&lt;&lt;hve&gt;&gt;n&#39;t often been around mortals and do&lt;&lt;hes&gt;&gt;n&#39;t understand how brief your time together will be.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;I like &quot;+$ha.them+&quot;.\&quot;&quot;|13-6q.done.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I don&#39;t like &quot;+$ha.them+&quot;.\&quot;&quot;|13-6q.done.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I trust &quot;+$ha.them+&quot;.\&quot;&quot;|13-6q.done.3]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Hawk scares me.\&quot;&quot;|13-6q.done.4]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;I don&#39;t know yet.\&quot;&quot;|13-6q.done.5]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="678" name="13-6q.expect" tags="draft" position="9575,1650" size="100,100">&lt;&lt;set $thirteen.qcount+=1&gt;&gt;&quot;What&#39;s expected of me as an Enclave member?&quot;

&quot;Not much; we do not have many required principles. The only one that truly applies to you is that you do no harm to any member of our Enclave, but I doubt that will cause you trouble.&quot;

Ember looks entirely sincere in their belief that you intend no harm. But do you? What happens if you do break that principle? Better not to ask...

&lt;&lt;include [[13-6q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="679" name="13-6q.busy" tags="draft" position="10050,1925" size="100,100">&lt;&lt;set $thirteen.qcount+=1&gt;&gt;&lt;&lt;set $ha.sus+=1&gt;&gt;&quot;Why is Hawk busy this winter?&quot;

&quot;That isn&#39;t your concern,&quot; Hawk says sharply.

Ember smiles apologetically. &quot;That must be your answer, $name.&quot;

&lt;&lt;include [[13-6q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="680" name="13-6q.av" tags="draft" position="9450,1775" size="100,100">&lt;&lt;set $thirteen.qcount+=1&gt;&gt;&lt;&lt;set $knowavowed=true&gt;&gt;&quot;What do you mean by &#39;Avowed?&#39;&quot;

&quot;Some of us forswear our Purpose to serve another cause. In the case of our Enclave, we are Vowed to protect the Frostwood and the mortal lands that surround it. The Frostwood was once the heart of mortal magic in this part of the world until they opened a fissure to worlds beyond. I believe they meant to seek greater magical power, but they were overwhelmed by beings too powerful to control. That was when we Elves Fell--to stem the tide and close the fissures that we could. But some were too large to close and must be guarded instead until they someday wane enough to be shut. To become Avowed is a difficult road and not one a mortal could take. Most Elves do as Hawk did and follow their Purpose rather than taking a Vow. It is a complicated topic, even among us Elves.&quot;

&lt;&lt;if $knowpur&gt;&gt;&lt;&lt;include [[13-6q]]&gt;&gt;&lt;&lt;else&gt;&gt;&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;What is a Purpose, exactly?\&quot;&quot;|13-6q.pur1]]&lt;/li&gt;
&lt;li&gt;[[Ask another question.|13-6q]]&lt;/li&gt;&lt;/ul&gt;&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="681" name="13-6q.voice" tags="draft" position="9325,1650" size="100,100">&lt;&lt;set $thirteen.qcount+=1&gt;&gt;&lt;&lt;set $knowhaleak=true&gt;&gt;&quot;Can you stop doing that with your voice?&quot;

&quot;Stop...? Oh, yes. I do apologize.&quot; Your swaying thoughts suddenly right themselves, resuming their usual clarity. &quot;The older we get, the more our magic becomes unconstrained by our bodies. It projects itself around us unless we consciously pull it back in.&quot;

&lt;&lt;include [[13-6q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="682" name="13-6q.emold-2" tags="draft" position="9825,1750" size="100,100">&lt;ul class=&quot;choice&quot;&gt;&lt;&lt;if not hasVisited(&quot;13-6q.remem&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;You don&#39;t remember anything before the Fall?\&quot;&quot;|13-6q.remem]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;13-6q.haold&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[Turn to Hawk. &quot;How old are you?&quot;|13-6q.haold]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;li&gt;[[Ask another question.|13-6q]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="683" name="13-6q.remem" tags="draft" position="9775,1875" size="100,100">&lt;&lt;set $thirteen.qcount+=1&gt;&gt;&quot;You don&#39;t remember anything before the Fall?&quot;

&quot;It is difficult to explain. I remember things, but not as I remember this life. My thoughts were not my own then. I prefer not to speak of that time.&quot;

&lt;&lt;include [[13-6q.emold-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="684" name="13-6q.haold" tags="draft" position="9875,1875" size="100,100">&lt;&lt;set $thirteen.qcount+=1&gt;&gt;&lt;&lt;set $knowhaage=true&gt;&gt;You turn to Hawk. &quot;How old are you?&quot;

&quot;1200, maybe a bit less.&quot;

Older than the kingdom. Possibly older than your family name. Of course. Your life has truly taken a surreal turn.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Are you serious?\&quot;&quot;|13-6q.haold.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;You look good for your age.\&quot;&quot;|13-6q.haold.2]]&lt;/li&gt;
&lt;li&gt;[[Don&#39;t remark on it.|13-6q.emold-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="685" name="13-6q.haold.1" tags="draft" position="9825,2000" size="100,100">&quot;Are you serious?&quot;

&lt;&lt;if $ha.ban&gt;0&gt;&gt;&quot;When am I not?&quot; You squint at $ha.them, and $ha.their lips twitch in suppressed amusement. &quot;Yes, I am serious.&quot;&lt;&lt;else&gt;&gt;&quot;Yes.&quot;&lt;&lt;/if&gt;&gt;

&lt;ul class=&quot;choice&quot;&gt;&lt;&lt;if $nvbook&gt;0&gt;&gt;&lt;li&gt;[[&quot;Your jaw drops in shock.&quot;|13-6q.haold.1.1]]&lt;/li&gt;&lt;&lt;else&gt;&gt;&lt;li&gt;[[&quot;\&quot;Oof.\&quot;&quot;|13-6q.haold.1.1]]&lt;/li&gt;&lt;&lt;/if&gt;&gt;
&lt;li&gt;[[Say no more about it.|13-6q.emold-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="686" name="13-6q.haold.2" tags="draft" position="9925,2000" size="100,100">&lt;&lt;set $ha.ban+=1&gt;&gt;&lt;&lt;set $humor+=1&gt;&gt;&quot;You look good for your age.&quot;

&quot;I know.&quot; There&#39;s a long pause before $ha.they finally remember&lt;&lt;hs&gt;&gt; to add, &quot;Thank you.&quot;

&lt;&lt;include [[13-6q.emold-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="687" name="13-6q.haold.1.1" tags="draft" position="9850,2125" size="100,100">&lt;&lt;if $ach.on&gt;&gt;&lt;&lt;set $ach.any=true&gt;&gt;&lt;&lt;set $ach.halaugh=true&gt;&gt;&lt;&lt;notify&gt;&gt;Achievement unlocked: Doing the Impossible&lt;&lt;/notify&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;set $ha.ban+=1&gt;&gt;&lt;&lt;set $ha.fond+=1&gt;&gt;&lt;&lt;if $nvbook&gt;0&gt;&gt;Your jaw drops in shock as you stare at $ha.them.&lt;&lt;else&gt;&gt;You can&#39;t stop yourself from verbalizing your immediate reaction: &quot;Oof.&quot;&lt;&lt;/if&gt;&gt;

You almost don&#39;t recognize Hawk&#39;s laugh until it&#39;s over: a soft chuckle that resonates in $ha.their chest. &quot;It could be worse--I could be 3000.&quot;

Ember tsks, though their smile makes it clear they&#39;re entirely unoffended.

&lt;&lt;include [[13-6q.emold-2]]&gt;&gt;</tw-passagedata><tw-passagedata pid="688" name="13-6q.conv" tags="draft" position="10075,1650" size="100,100">&lt;&lt;set $thirteen.qcount+=1&gt;&gt;&quot;What happens at a convocation?&quot;

&quot;We discuss any important matters that have arisen since the last convocation and vote on anything that needs to be decided by us all. But it is also an excuse to see each other and socialize. We who live in the Frostwood live in community, but we don&#39;t often see Hawk and Holly.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Who is Holly?\&quot;&quot;|13-6q.hol]]&lt;/li&gt;
&lt;li&gt;[[Ask another question.|13-6q]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="689" name="13-6q.hol" tags="draft" position="10075,1775" size="100,100">&lt;&lt;set $thirteen.qcount+=1&gt;&gt;&quot;Who is Holly?&quot;

&quot;She should make her own introduction when you meet her in person, but she is one of our members who is not Avowed. She doesn&#39;t like to live in one place as Hawk does, so it is rare that any of us sees her outside of convocations.&quot;

&lt;&lt;include [[13-6q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="690" name="13-6q.pur" tags="draft" position="9500,2050" size="100,100">&lt;&lt;set $thirteen.qcount+=1&gt;&gt;&lt;&lt;set $knowpur=true&gt;&gt;&quot;What is a Purpose, exactly?&quot;

&quot;It is the essence of what we are. We must work toward our Purpose--or forsake it by taking a Vow--to survive. Although you may sympathize given your own drives for food, water, and the like, it is not a drive humans can understand from experience. I have seen humans put aside their own hunger and thirst to give what they need to others. That compassion is inspiring, and necessary for beings who survive only in community. But I do not believe we Elves have the power to make such a choice. A Purpose or Vow is everything we are and must become. If we turn from it, we suffer grievously. To do so is to fight against one&#39;s own soul. It isn&#39;t something I can truly explain.&quot;</tw-passagedata><tw-passagedata pid="691" name="13-6q.marr-1" tags="draft" position="9325,2050" size="100,100">&lt;ul class=&quot;choice&quot;&gt;&lt;&lt;if not $knowpur&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;What is a Purpose, exactly?\&quot;&quot;|13-6q.pur2]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if not hasVisited(&quot;13-6q.repr&quot;)&gt;&gt;&lt;span class=&quot;loop&quot;&gt;&lt;li&gt;[[&quot;\&quot;What do you mean you don&#39;t &#39;reproduce as we do?&#39;\&quot;&quot;|13-6q.repr]]&lt;/li&gt;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;\
&lt;li&gt;[[Ask another question.|13-6q]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="692" name="13-6q.pur2" tags="draft" position="9275,2175" size="100,100">&lt;&lt;include [[13-6q.pur]]&gt;&gt;

&lt;&lt;include [[13-6q.marr-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="693" name="13-6q.pur1" tags="draft" position="9475,1900" size="100,100">&lt;&lt;include [[13-6q.pur]]&gt;&gt;

&lt;&lt;include [[13-6q]]&gt;&gt;</tw-passagedata><tw-passagedata pid="694" name="13-6q.repr" tags="draft" position="9375,2175" size="100,100">&lt;&lt;set $thirteen.qcount+=1&gt;&gt;&lt;&lt;set $knowelfrepr=true&gt;&gt;&quot;What do you mean you don&#39;t &#39;reproduce as we do?&#39;&quot;

&quot;All the Elves who will live in this world already exist. We awaken, fully formed, from the feathers of our fallen Seraph&#39;s wings, scattered throughout the world. We are not born as humans are, nor can we contribute to the birth of mortal children. I understand this is part of the rationale for human marriage, but it is not something that we require. Most Elves awaken alone with a great deal of the knowledge they will need in life, though they often share some of the youth and innocence that young mortals experience.&quot;

&lt;&lt;include [[13-6q.marr-1]]&gt;&gt;</tw-passagedata><tw-passagedata pid="695" name="13-6q.done.1" tags="draft" position="9600,2425" size="100,100">&lt;&lt;set $thirteen.havibes=1&gt;&gt;&quot;I like $ha.them.&quot;&lt;&lt;if $sh.havibes&lt;0&gt;&gt; Perhaps it&#39;s a lie, or perhaps you just don&#39;t know how you feel about $ha.them yet. But it seems like the right thing to say.&lt;&lt;/if&gt;&gt;

Ember smiles. &quot;I am glad.&quot; &lt;&lt;include [[13-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="696" name="13-6q.done.2" tags="draft" position="9700,2425" size="100,100">&lt;&lt;set $thirteen.havibes=-1&gt;&gt;&quot;I don&#39;t like $ha.them.&quot;&lt;&lt;if $sh.havibes&gt;0&gt;&gt; Perhaps it&#39;s a lie, or perhaps you just don&#39;t know how you feel about $ha.them yet. But you say it nonetheless.&lt;&lt;/if&gt;&gt;

Ember smiles sadly. &quot;$ha.They ha&lt;&lt;hve&gt;&gt; never been good at portraying $ha.themself in the best light. But that is $ha.their fault, not yours.&quot; &lt;&lt;include [[13-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="697" name="13-6q.done.3" tags="draft" position="9800,2425" size="100,100">&lt;&lt;set $thirteen.havibes=2&gt;&gt;&quot;I trust $ha.them.&quot;&lt;&lt;if $sh.havibes&lt;0&gt;&gt; Perhaps it&#39;s a lie, or perhaps you just don&#39;t know how you feel about $ha.them yet. But it seems like the right thing to say.&lt;&lt;/if&gt;&gt;

Ember smiles. &quot;I am glad.&quot; &lt;&lt;include [[13-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="698" name="13-6q.done.4" tags="draft" position="9650,2525" size="100,100">&lt;&lt;set $thirteen.havibes=-2&gt;&gt;&quot;Hawk scares me.&quot;&lt;&lt;if $sh.havibes&gt;0&gt;&gt; Perhaps it&#39;s a lie, or perhaps you just don&#39;t know how you feel about $ha.them yet. But you say it nonetheless.&lt;&lt;/if&gt;&gt;

Ember smiles sadly. &quot;$ha.They ha&lt;&lt;hve&gt;&gt; never been good at portraying $ha.themself in the best light. But that is $ha.their fault, not yours.&quot; &lt;&lt;include [[13-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="699" name="13-6q.done.5" tags="draft" position="9750,2525" size="100,100">&quot;I don&#39;t know yet. $ha.They ha&lt;&lt;hve&gt;&gt;n&#39;t been around much.&quot;

Ember smiles sadly. &quot;$ha.They ha&lt;&lt;hve&gt;&gt; never been good at portraying $ha.themself in the best light. You will come to understand $ha.them in time, I&#39;m sure.&quot; &lt;&lt;include [[13-7]]&gt;&gt;</tw-passagedata><tw-passagedata pid="700" name="13-7" tags="draft" position="9700,2650" size="100,100">They settle back into their chair and let their gaze aimlessly roam the bookshelves around you. &quot;I cannot ask you to love Hawk, be it as a friend or a $ha.spouse. Love is not something that can be given easily, nor do we always find it where we go looking. It isn&#39;t my place to ask either of you to be open to being known--and indeed, that is perhaps one of the most difficult pieces of building love. All I will ask is that you be open to knowing $ha.them, if $ha.they will let you. If you do not like the Hawk who is revealed to you, then so be it; there is no need to continue with a disagreeable arrangement. I ask only that you consider what I have said, and I have asked Hawk to do the same. My hope is that you will both find happiness you did not have before, even if you do not find it with each other.

&quot;Now!&quot; Their grey eyes find yours again, and their smile widens. &quot;I will thank you for listening to me and bid you farewell until next we meet--you may save all the questions Hawk will not answer for me. I am glad to know that you are a person of curiosity and courage, and I look forward to knowing you better as the years pass.&quot; They incline their head to you--a clear, though polite, dismissal.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Farewell.\&quot;&quot;|13-7.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;It was good to meet you.\&quot;&quot;|13-7.2]]&lt;/li&gt;
&lt;li&gt;[[Incline your head to them as well.|13-7.3]]&lt;/li&gt;
&lt;li&gt;[[Just leave.|13-7.4]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="701" name="13-7.1" tags="draft" position="9550,2775" size="100,100">&quot;Farewell.&quot;

&quot;Farewell, $name.&quot;

And with that, you return &lt;&lt;include [[13-8]]&gt;&gt;</tw-passagedata><tw-passagedata pid="702" name="13-7.2" tags="draft" position="9650,2775" size="100,100">&quot;It was good to meet you.&quot;

&quot;Likewise, $name.&quot;

And with that, you return &lt;&lt;include [[13-8]]&gt;&gt;</tw-passagedata><tw-passagedata pid="703" name="13-7.3" tags="draft" position="9750,2775" size="100,100">You incline your head to them before returning &lt;&lt;include [[13-8]]&gt;&gt;</tw-passagedata><tw-passagedata pid="704" name="13-7.4" tags="draft" position="9850,2775" size="100,100">Without further ado, you return &lt;&lt;include [[13-8]]&gt;&gt;</tw-passagedata><tw-passagedata pid="705" name="13-8" tags="draft" position="9650,2900" size="100,100"> to the third floor.
 
The odd feeling of using the stone to move around the tower has abated somewhat with regular use, not unlike &lt;&lt;if $hobby==&quot;lute&quot;&gt;&gt;the calluses that built up when you first started playing the lute&lt;&lt;else&gt;&gt;the way one grows used to a new piece of furniture or a new shop in town&lt;&lt;/if&gt;&gt;. You have some limited ability to direct where you end up on a floor when you teleport, &lt;&lt;if $skill==&quot;persistence&quot;&gt;&gt;and you&#39;ve spent enough time practicing to become reasonably accurate now&lt;&lt;else&gt;&gt;but your accuracy still leaves something to be desired&lt;&lt;/if&gt;&gt;. So when you reach the third floor, you&lt;&lt;if $skill==&quot;persistence&quot;&gt;&gt;&#39;re only a few yards from your room&lt;&lt;else&gt;&gt; have a short trek before you reach your room&lt;&lt;/if&gt;&gt;.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Next|13-8-1]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="706" name="13-9" tags="draft" position="9700,3025" size="100,100">&quot;I&#39;ll go to the festival. If you want me to.&quot;

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[&quot;\&quot;Are you sure?\&quot;&quot;|13-9.1]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;Thank you!\&quot;&quot;|13-9.2]]&lt;/li&gt;
&lt;li&gt;[[&quot;\&quot;You don&#39;t have to.\&quot;&quot;|13-9.3]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="707" name="13-9.1" tags="draft" position="9600,3150" size="100,100">&quot;Are you sure?&quot;

Hawk nods. &lt;&lt;include [[13-10]]&gt;&gt;</tw-passagedata><tw-passagedata pid="708" name="13-9.2" tags="draft" position="9700,3150" size="100,100">&lt;&lt;set $ha.fond+=1&gt;&gt;&quot;Thank you!&quot;

Hawk fights off a smile with limited success. &lt;&lt;include [[13-10]]&gt;&gt;</tw-passagedata><tw-passagedata pid="709" name="13-9.3" tags="draft" position="9800,3150" size="100,100">&quot;You don&#39;t have to.&quot;

Hawk shrugs. &lt;&lt;include [[13-10]]&gt;&gt;</tw-passagedata><tw-passagedata pid="710" name="13-10" tags="draft" position="9700,3275" size="100,100">&quot;I can give up one day. And there&#39;s someone there I&#39;d like to see. But we need to be back before dark. I&#39;ll be busy this week, so... I&#39;ll see you the day of the festival. If you want.&quot; With a curt nod, Hawk disappears, leaving you alone outside your room.

&lt;&lt;if $eleven.hafestask&gt;&gt;Well, that&#39;s one task accomplished with minimal effort on your part. &lt;&lt;/if&gt;&gt;Now that you&#39;ve received not one but two invitations, you probably ought to go to the autumn festival. &lt;&lt;if $optimistic&gt;0&gt;&gt;It&#39;ll be a chance to see the town and try new things&lt;&lt;else&gt;&gt;Maybe it&#39;ll be an alright time&lt;&lt;/if&gt;&gt;.

The only question is: Whose invitation will you accept?

&lt;b&gt;&lt;div class=&quot;choice&quot;&gt;[[End of demo|13-demoend]]&lt;/div&gt;&lt;/b&gt;</tw-passagedata><tw-passagedata pid="711" name="13-demoend" tags="todo" position="9700,3400" size="100,100">Thank you for playing the demo version of &lt;i&gt;Talon&#39;s End&lt;/i&gt;! Future updates will be posted on the game&#39;s &lt;a href=&quot;https://asheepinthenight.itch.io/talons-end&quot; target=&quot;_blank&quot;&gt;itch.io&lt;/a&gt; and &lt;a href=&quot;https://github.com/asheepinthenight/talonsendIF&quot; target=&quot;_blank&quot;&gt;github&lt;/a&gt; pages. I also post monthly updates and (approximately) monthly extras on &lt;a href=&quot;https://asheepinthenight.tumblr.com/&quot; target=&quot;_blank&quot;&gt;tumblr&lt;/a&gt;.

I also have a little survey you can fill out for each of your MCs! This is just for my own curiosity, and no personal info will be collected. You can fill it out &lt;a href=&quot;https://forms.gle/U5bdFJESbVxqrumC8&quot; target=&quot;_blank&quot;&gt;HERE&lt;/a&gt;.</tw-passagedata><tw-passagedata pid="712" name="headappend" tags="nobr todo" position="100,100" size="100,100">&lt;meta name=&quot;robots&quot; content=&quot;noindex,nofollow,noai,noimageai&quot;&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0&quot; /&gt;</tw-passagedata><tw-passagedata pid="713" name="0-1-1" tags="draft" position="475,325" size="100,100">In the left top bar/lower mobile menu, there are links to the profile/stats page (for info on your MC and achievements), the codex/journal page (for lore and story progress, currently a WIP), the help pop up (contains a list of important buttons and icons for quick reference), and the credits page (for programs, scripts, and icons). The right top bar/upper mobile menu has save/load, settings, restart, and fullscreen links. If you&#39;re on mobile or another small screen, you may need to click the down arrow &lt;b&gt;⌄&lt;/b&gt; on the top bar to see the menu icons.

The back and forward buttons on the bottom bar will let you navigate back and forth through the story, so if a choice wasn&#39;t what you expected, just click the back button!

If you leave the story page, you can come back and resume at any time, but you may also want to use the save/load menu to keep your progress. (Saves do persist after clicking the restart button.) Please note that saves don&#39;t automatically transfer between devices/platforms/browsers and will be deleted if you clear your browser cache. You can download your saves for safe keeping or transferring by using the save to/load from disk options.

If you need to change the font, text size, or interface color, you can do that from the settings menu. If the game would be more accessible for you with more font/color options, please &lt;a href=&quot;http://asheepinthenight.tumblr.com/ask&quot; target=&quot;_blank&quot;&gt;let me know&lt;/a&gt;!

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;[[Continue to content warnings|0-2]]&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="714" name="codex2" tags="noreturn codex" position="0,750" size="100,100">&lt;&lt;liveblock&gt;&gt;&lt;&lt;if $cTheFall&gt;&gt;&lt;&lt;button &quot;The Fall&quot; &quot;cTheFall&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;&lt;else&gt;&gt;No codex entries discovered yet...&lt;&lt;/if&gt;&gt;&lt;&lt;/liveblock&gt;&gt;

&lt;span style=&quot;display: block; text-align: center;&quot;&gt;
&lt;&lt;link &quot;« Return to game&quot; $return&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;/span&gt;</tw-passagedata><tw-passagedata pid="715" name="journal" tags="nobr codex" position="100,750" size="100,100">&lt;&lt;liveblock&gt;&gt;&lt;&lt;if $cursc&gt;1&gt;&gt;&lt;&lt;button &quot;23 High Summer, 2946&quot; &quot;j1&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;&lt;/if&gt;&gt;&lt;&lt;/liveblock&gt;&gt;

&lt;span style=&quot;display: block; text-align: center;&quot;&gt;
&lt;&lt;link &quot;« Return to game&quot; $return&gt;&gt;&lt;&lt;/link&gt;&gt;
&lt;/span&gt;</tw-passagedata><tw-passagedata pid="716" name="13-8-1" tags="draft" position="9525,2975" size="100,100">When you arrive, Hawk is waiting outside your door, looking pensive. When $ha.their eyes lock onto you, $ha.they open&lt;&lt;hs&gt;&gt; $ha.their mouth to speak, though it takes a moment for the words to rush out. &lt;&lt;include [[13-9]]&gt;&gt;</tw-passagedata><tw-passagedata pid="717" name="8-3-2" tags="draft" position="6725,1125" size="100,100">&lt;&lt;if $attraction==&quot;bi&quot;||$attraction==&quot;aa&quot;&gt;&gt;&lt;&lt;include [[8-0SH_SET]]&gt;&gt;&lt;&lt;/if&gt;&gt;$sh.They ha&lt;&lt;sve&gt;&gt; places to be, so don&#39;t waste time. Please.&quot; The politeness is tacked on a moment before $ha.they vanish&lt;&lt;hes&gt;&gt;, presumably to a destination several floors down.

It&#39;s unclear who &quot;$sh.they&quot; &lt;&lt;sare&gt;&gt;, but you check again that you have the talisman from your mother with you. If you&#39;re lucky, you&#39;ll get breakfast. If you&#39;re unlucky, you&#39;ll have an escape route. After another moment of mental preparation, you take the stone Hawk gave you and hope you&#39;ll find yourself in the right place.

&lt;ul class=&quot;choice&quot;&gt;&lt;li&gt;&lt;b&gt;[[Go downstairs|8-4]]&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="718" name="9-0.3-2.1.7" tags="draft" position="7550,675" size="100,100">You let the moment pass quietly, and eventually, $ha.they release&lt;&lt;hs&gt;&gt; your hand and push&lt;&lt;hes&gt;&gt; the small jar toward you across the table. &lt;&lt;include [[9-0.3-3]]&gt;&gt;</tw-passagedata></tw-storydata>
	<script id="script-sugarcube" type="text/javascript">
	/*! SugarCube JS */
	if(document.documentElement.getAttribute("data-init")==="loading"){(function(window,document,jQuery,undefined){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var errorPrologRegExp=/^(?:(?:uncaught\s+(?:exception:\s+)?)?\w*(?:error|exception|_err):\s+)+/i,Alert=function(){function mesg(where,error,isFatal,isUncaught){var mesg="Error",nice="A".concat(isFatal?" fatal":"n"," error has occurred.");nice+=isFatal?" Aborting.":" You may be able to continue, but some parts may not work properly.";var isObject=null!==error&&"object"===_typeof(error),what=(isObject&&"message"in error?String(error.message).replace(errorPrologRegExp,""):String(error)).trim()||"unknown error";null!=where&&(mesg+=" [".concat(where,"]")),mesg+=": ".concat(what,"."),isObject&&"stack"in error&&(mesg+="\n\nStack Trace:\n".concat(error.stack)),mesg&&(nice+="\n\n".concat(mesg)),isUncaught||console[isFatal?"error":"warn"](mesg),window.alert(nice)}var origOnError;return origOnError=window.onerror,window.onerror=function(what,source,lineNum,colNum,error){"complete"===document.readyState?mesg(null,null!=error?error:what,!1,!0):(mesg(null,null!=error?error:what,!0,!0),window.onerror=origOnError,"function"==typeof window.onerror&&window.onerror.apply(this,arguments))},Object.freeze(Object.defineProperties({},{error:{value:function(where,error){mesg(where,error)}},fatal:{value:function(where,error){mesg(where,error,!0)}}}))}(),Patterns=(wsMap=new Map([[" ","\\u0020"],["\f","\\f"],["\n","\\n"],["\r","\\r"],["\t","\\t"],["\v","\\v"],[" ","\\u00a0"],[" ","\\u1680"],["᠎","\\u180e"],[" ","\\u2000"],[" ","\\u2001"],[" ","\\u2002"],[" ","\\u2003"],[" ","\\u2004"],[" ","\\u2005"],[" ","\\u2006"],[" ","\\u2007"],[" ","\\u2008"],[" ","\\u2009"],[" ","\\u200a"],["\u2028","\\u2028"],["\u2029","\\u2029"],[" ","\\u202f"],[" ","\\u205f"],["　","\\u3000"],["\ufeff","\\ufeff"]]),wsRe=/^\s$/,missing="",wsMap.forEach((function(pat,char){wsRe.test(char)||(missing+=pat)})),space=missing?"[\\s".concat(missing,"]"):"\\s",spaceNoTerminator="[\\u0020\\f\\t\\v\\u00a0\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]",notSpace="\\s"===space?"\\S":space.replace(/^\[/,"[^"),anyChar="(?:.|".concat("[\\n\\r\\u2028\\u2029]",")"),anyLetter="[0-9A-Z_a-z\\-\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0150\\u0170\\u0151\\u0171]",anyLetterStrict=anyLetter.replace("\\-",""),identifier="".concat("[$A-Z_a-z]").concat("[$0-9A-Z_a-z]","*"),variable="[$_]"+identifier,htmlTagName="[A-Za-z](?:".concat(cENChar="(?:[\\x2D.0-9A-Z_a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])","*-").concat(cENChar,"*|[0-9A-Za-z]*)"),twStyle="(".concat(anyLetter,"+)\\(([^\\)\\|\\n]+)\\):"),cssStyle="".concat(spaceNoTerminator,"*(").concat(anyLetter,"+)").concat(spaceNoTerminator,"*:([^;\\|\\n]+);"),idOrClass="".concat(spaceNoTerminator,"*((?:").concat("[#.]").concat(anyLetter,"+").concat(spaceNoTerminator,"*)+);"),inlineCss="".concat(twStyle,"|").concat(cssStyle,"|").concat(idOrClass),Object.freeze({space:space,spaceNoTerminator:spaceNoTerminator,lineTerminator:"[\\n\\r\\u2028\\u2029]",notSpace:notSpace,anyChar:anyChar,anyLetter:anyLetter,anyLetterStrict:anyLetterStrict,identifierFirstChar:"[$A-Z_a-z]",identifierNextChar:"[$0-9A-Z_a-z]",identifier:identifier,variableSigil:"[$_]",variable:variable,macroName:"[A-Za-z][\\w-]*|[=-]",templateName:"[A-Za-z][\\w-]*",htmlTagName:htmlTagName,cssIdOrClassSigil:"[#.]",cssImage:"\\[[<>]?[Ii][Mm][Gg]\\[(?:\\s|\\S)*?\\]\\]+",inlineCss:inlineCss,url:"(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+"})),wsMap,wsRe,missing,cENChar,twStyle,cssStyle,idOrClass,space,spaceNoTerminator,notSpace,anyChar,anyLetter,anyLetterStrict,identifier,variable,htmlTagName,inlineCss;!function(){var startWSRe,endWSRe,_trimString=(startWSRe=new RegExp("^".concat(Patterns.space).concat(Patterns.space,"*")),endWSRe=new RegExp("".concat(Patterns.space).concat(Patterns.space,"*$")),function(str,where){var val=String(str);if(!val)return val;switch(where){case"start":return startWSRe.test(val)?val.replace(startWSRe,""):val;case"end":return endWSRe.test(val)?val.replace(endWSRe,""):val;default:throw new Error('_trimString called with incorrect where parameter value: "'.concat(where,'"'))}});function _createPadString(length,padding){var targetLength=Number.parseInt(length,10)||0;if(targetLength<1)return"";var padString=void 0===padding?"":String(padding);for(""===padString&&(padString=" ");padString.length<targetLength;){var curPadLength=padString.length,remainingLength=targetLength-curPadLength;padString+=curPadLength>remainingLength?padString.slice(0,remainingLength):padString}return padString.length>targetLength&&(padString=padString.slice(0,targetLength)),padString}Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,writable:!0,value:function flat(){if(null==this)throw new TypeError("Array.prototype.flat called on null or undefined");var depth=0===arguments.length?1:Number(arguments[0])||0;return depth<1?Array.prototype.slice.call(this):Array.prototype.reduce.call(this,(function(acc,cur){return cur instanceof Array?acc.push.apply(acc,_toConsumableArray(flat.call(cur,depth-1))):acc.push(cur),acc}),[])}}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatMap called on null or undefined");return Array.prototype.map.apply(this,arguments).flat()}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");if(0===arguments.length)return!1;var length=this.length>>>0;if(0===length)return!1;var needle=arguments[0],i=Number(arguments[1])||0;for(i<0&&(i=Math.max(0,length+i));i<length;++i){var value=this[i];if(value===needle||value!=value&&needle!=needle)return!0}return!1}}),Object.entries||Object.defineProperty(Object,"entries",{configurable:!0,writable:!0,value:function(obj){if("object"!==_typeof(obj)||null===obj)throw new TypeError("Object.entries object parameter must be an object");return Object.keys(obj).map((function(key){return[key,obj[key]]}))}}),Object.fromEntries||Object.defineProperty(Object,"fromEntries",{configurable:!0,writable:!0,value:function(iter){return Array.from(iter).reduce((function(acc,pair){if(Object(pair)!==pair)throw new TypeError("Object.fromEntries iterable parameter must yield objects");return pair[0]in acc?Object.defineProperty(acc,pair[0],{configurable:!0,enumerable:!0,writable:!0,value:pair[1]}):acc[pair[0]]=pair[1],acc}),{})}}),Object.getOwnPropertyDescriptors||Object.defineProperty(Object,"getOwnPropertyDescriptors",{configurable:!0,writable:!0,value:function(obj){if(null==obj)throw new TypeError("Object.getOwnPropertyDescriptors object parameter is null or undefined");var O=Object(obj);return Reflect.ownKeys(O).reduce((function(acc,key){var desc=Object.getOwnPropertyDescriptor(O,key);return void 0!==desc&&(key in acc?Object.defineProperty(acc,key,{configurable:!0,enumerable:!0,writable:!0,value:desc}):acc[key]=desc),acc}),{})}}),Object.values||Object.defineProperty(Object,"values",{configurable:!0,writable:!0,value:function(obj){if("object"!==_typeof(obj)||null===obj)throw new TypeError("Object.values object parameter must be an object");return Object.keys(obj).map((function(key){return obj[key]}))}}),String.prototype.padStart||Object.defineProperty(String.prototype,"padStart",{configurable:!0,writable:!0,value:function(length,padding){if(null==this)throw new TypeError("String.prototype.padStart called on null or undefined");var baseString=String(this),baseLength=baseString.length,targetLength=Number.parseInt(length,10);return targetLength<=baseLength?baseString:_createPadString(targetLength-baseLength,padding)+baseString}}),String.prototype.padEnd||Object.defineProperty(String.prototype,"padEnd",{configurable:!0,writable:!0,value:function(length,padding){if(null==this)throw new TypeError("String.prototype.padEnd called on null or undefined");var baseString=String(this),baseLength=baseString.length,targetLength=Number.parseInt(length,10);return targetLength<=baseLength?baseString:baseString+_createPadString(targetLength-baseLength,padding)}}),String.prototype.trimStart||Object.defineProperty(String.prototype,"trimStart",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimStart called on null or undefined");return _trimString(this,"start")}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimLeft called on null or undefined");return _trimString(this,"start")}}),String.prototype.trimEnd||Object.defineProperty(String.prototype,"trimEnd",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimEnd called on null or undefined");return _trimString(this,"end")}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimRight called on null or undefined");return _trimString(this,"end")}})}(),function(){var _nativeMathRandom=Math.random,_regExpMetaCharsRe,_hasRegExpMetaCharsRe,_formatRegExp,_hasFormatRegExp;function _random(){var min,max;switch(arguments.length){case 0:throw new Error("_random called with insufficient parameters");case 1:min=0,max=arguments[0];break;default:min=arguments[0],max=arguments[1]}if(min>max){var _ref=[max,min];min=_ref[0],max=_ref[1]}return Math.floor(_nativeMathRandom()*(max-min+1))+min}function _randomIndex(length,boundsArgs){var min,max;switch(boundsArgs.length){case 1:min=0,max=length-1;break;case 2:min=0,max=Math.trunc(boundsArgs[1]);break;default:min=Math.trunc(boundsArgs[1]),max=Math.trunc(boundsArgs[2])}return Number.isNaN(min)?min=0:!Number.isFinite(min)||min>=length?min=length-1:min<0&&(min=length+min)<0&&(min=0),Number.isNaN(max)?max=0:(!Number.isFinite(max)||max>=length||max<0&&(max=length+max)<0)&&(max=length-1),_random(min,max)}function _getCodePointStartAndEnd(str,pos){var code=str.charCodeAt(pos);if(Number.isNaN(code))return{char:"",start:-1,end:-1};if(code<55296||code>57343)return{char:str.charAt(pos),start:pos,end:pos};if(code>=55296&&code<=56319){var nextPos=pos+1;if(nextPos>=str.length)throw new Error("high surrogate without trailing low surrogate");var nextCode=str.charCodeAt(nextPos);if(nextCode<56320||nextCode>57343)throw new Error("high surrogate without trailing low surrogate");return{char:str.charAt(pos)+str.charAt(nextPos),start:pos,end:nextPos}}if(0===pos)throw new Error("low surrogate without leading high surrogate");var prevPos=pos-1,prevCode=str.charCodeAt(prevPos);if(prevCode<55296||prevCode>56319)throw new Error("low surrogate without leading high surrogate");return{char:str.charAt(prevPos)+str.charAt(pos),start:prevPos,end:pos}}Object.defineProperty(Array,"random",{configurable:!0,writable:!0,value:function(array){if("object"!==_typeof(array)||null===array||!Object.prototype.hasOwnProperty.call(array,"length"))throw new TypeError("Array.random array parameter must be an array or array-lke object");var length=array.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments,1));return array[index]}}}),Object.defineProperty(Array.prototype,"concatUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.concatUnique called on null or undefined");var result=Array.from(this);if(0===arguments.length)return result;var items=Array.prototype.reduce.call(arguments,(function(prev,cur){return prev.concat(cur)}),[]),addSize=items.length;if(0===addSize)return result;for(var indexOf=Array.prototype.indexOf,push=Array.prototype.push,i=0;i<addSize;++i){var value=items[i];-1===indexOf.call(result,value)&&push.call(result,value)}return result}}),Object.defineProperty(Array.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.count called on null or undefined");for(var indexOf=Array.prototype.indexOf,needle=arguments[0],pos=Number(arguments[1])||0,count=0;-1!==(pos=indexOf.call(this,needle,pos));)++count,++pos;return count}}),Object.defineProperty(Array.prototype,"countWith",{configurable:!0,writable:!0,value:function(predicate,thisArg){if(null==this)throw new TypeError("Array.prototype.countWith called on null or undefined");if("function"!=typeof predicate)throw new Error("Array.prototype.countWith predicate parameter must be a function");var length=this.length>>>0;if(0===length)return 0;for(var count=0,i=0;i<length;++i)predicate.call(thisArg,this[i],i,this)&&++count;return count}}),Object.defineProperty(Array.prototype,"delete",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.delete called on null or undefined");if(0===arguments.length)return[];var length=this.length>>>0;if(0===length)return[];for(var needles=Array.prototype.concat.apply([],arguments),needlesLength=needles.length,indices=[],i=0;i<length;++i)for(var value=this[i],j=0;j<needlesLength;++j){var needle=needles[j];if(value===needle||value!=value&&needle!=needle){indices.push(i);break}}for(var result=[],_i=0,iend=indices.length;_i<iend;++_i)result[_i]=this[indices[_i]];for(var splice=Array.prototype.splice,_i2=indices.length-1;_i2>=0;--_i2)splice.call(this,indices[_i2],1);return result}}),Object.defineProperty(Array.prototype,"deleteAt",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAt called on null or undefined");if(0===arguments.length)return[];var length=this.length>>>0;if(0===length)return[];for(var splice=Array.prototype.splice,cpyIndices=_toConsumableArray(new Set(Array.prototype.concat.apply([],arguments).map((function(x){return x<0?Math.max(0,length+x):x}))).values()),delIndices=_toConsumableArray(cpyIndices).sort((function(a,b){return b-a})),result=[],i=0,iend=cpyIndices.length;i<iend;++i)result[i]=this[cpyIndices[i]];for(var _i3=0,_iend=delIndices.length;_i3<_iend;++_i3)splice.call(this,delIndices[_i3],1);return result}}),Object.defineProperty(Array.prototype,"deleteWith",{configurable:!0,writable:!0,value:function(predicate,thisArg){if(null==this)throw new TypeError("Array.prototype.deleteWith called on null or undefined");if("function"!=typeof predicate)throw new Error("Array.prototype.deleteWith predicate parameter must be a function");var length=this.length>>>0;if(0===length)return[];for(var splice=Array.prototype.splice,indices=[],result=[],i=0;i<length;++i)predicate.call(thisArg,this[i],i,this)&&(result.push(this[i]),indices.push(i));for(var _i4=indices.length-1;_i4>=0;--_i4)splice.call(this,indices[_i4],1);return result}}),Object.defineProperty(Array.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.first called on null or undefined");if(0!==this.length>>>0)return this[0]}}),Object.defineProperty(Array.prototype,"includesAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAll called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAll.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var i=0,iend=arguments.length;i<iend;++i)if(!Array.prototype.some.call(this,(function(val){return val===this.val||val!=val&&this.val!=this.val}),{val:arguments[i]}))return!1;return!0}}),Object.defineProperty(Array.prototype,"includesAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAny called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAny.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var i=0,iend=arguments.length;i<iend;++i)if(Array.prototype.some.call(this,(function(val){return val===this.val||val!=val&&this.val!=this.val}),{val:arguments[i]}))return!0;return!1}}),Object.defineProperty(Array.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.last called on null or undefined");var length=this.length>>>0;if(0!==length)return this[length-1]}}),Object.defineProperty(Array.prototype,"pluck",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pluck called on null or undefined");var length=this.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments));return Array.prototype.splice.call(this,index,1)[0]}}}),Object.defineProperty(Array.prototype,"pluckMany",{configurable:!0,writable:!0,value:function(wantSize){if(null==this)throw new TypeError("Array.prototype.pluckMany called on null or undefined");var length=this.length>>>0;if(0===length)return[];var want=Math.trunc(wantSize);if(!Number.isInteger(want))throw new Error("Array.prototype.pluckMany want parameter must be an integer");if(want<1)return[];want>length&&(want=length);var splice=Array.prototype.splice,result=[],max=length-1;do{result.push(splice.call(this,_random(0,max--),1)[0])}while(result.length<want);return result}}),Object.defineProperty(Array.prototype,"pushUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pushUnique called on null or undefined");var addSize=arguments.length;if(0===addSize)return this.length>>>0;for(var indexOf=Array.prototype.indexOf,push=Array.prototype.push,i=0;i<addSize;++i){var value=arguments[i];-1===indexOf.call(this,value)&&push.call(this,value)}return this.length>>>0}}),Object.defineProperty(Array.prototype,"random",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.random called on null or undefined");var length=this.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments));return this[index]}}}),Object.defineProperty(Array.prototype,"randomMany",{configurable:!0,writable:!0,value:function(wantSize){if(null==this)throw new TypeError("Array.prototype.randomMany called on null or undefined");var length=this.length>>>0;if(0===length)return[];var want=Math.trunc(wantSize);if(!Number.isInteger(want))throw new Error("Array.prototype.randomMany want parameter must be an integer");if(want<1)return[];want>length&&(want=length);var picked=new Map,result=[],max=length-1;do{var i=void 0;do{i=_random(0,max)}while(picked.has(i));picked.set(i,!0),result.push(this[i])}while(result.length<want);return result}}),Object.defineProperty(Array.prototype,"shuffle",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.shuffle called on null or undefined");var length=this.length>>>0;if(0===length)return this;for(var i=length-1;i>0;--i){var j=Math.floor(_nativeMathRandom()*(i+1));if(i!==j){var swap=this[i];this[i]=this[j],this[j]=swap}}return this}}),Object.defineProperty(Array.prototype,"unshiftUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.unshiftUnique called on null or undefined");var addSize=arguments.length;if(0===addSize)return this.length>>>0;for(var indexOf=Array.prototype.indexOf,unshift=Array.prototype.unshift,i=0;i<addSize;++i){var value=arguments[i];-1===indexOf.call(this,value)&&unshift.call(this,value)}return this.length>>>0}}),Object.defineProperty(Function.prototype,"partial",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Function.prototype.partial called on null or undefined");var slice=Array.prototype.slice,fn=this,bound=slice.call(arguments,0);return function(){for(var applied=[],argc=0,i=0;i<bound.length;++i)applied.push(bound[i]===undefined?arguments[argc++]:bound[i]);return fn.apply(this,applied.concat(slice.call(arguments,argc)))}}}),Object.defineProperty(Math,"clamp",{configurable:!0,writable:!0,value:function(num,min,max){var value=Number(num);return Number.isNaN(value)?NaN:value.clamp(min,max)}}),Object.defineProperty(Math,"easeInOut",{configurable:!0,writable:!0,value:function(num){return 1-(Math.cos(Number(num)*Math.PI)+1)/2}}),Object.defineProperty(Number.prototype,"clamp",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Number.prototype.clamp called on null or undefined");if(2!==arguments.length)throw new Error("Number.prototype.clamp called with an incorrect number of parameters");var min=Number(arguments[0]),max=Number(arguments[1]);if(min>max){var _ref2=[max,min];min=_ref2[0],max=_ref2[1]}return Math.min(Math.max(this,min),max)}}),RegExp.escape||(_regExpMetaCharsRe=/[\\^$*+?.()|[\]{}]/g,_hasRegExpMetaCharsRe=new RegExp(_regExpMetaCharsRe.source),Object.defineProperty(RegExp,"escape",{configurable:!0,writable:!0,value:function(str){var val=String(str);return val&&_hasRegExpMetaCharsRe.test(val)?val.replace(_regExpMetaCharsRe,"\\$&"):val}})),_formatRegExp=/{(\d+)(?:,([+-]?\d+))?}/g,_hasFormatRegExp=new RegExp(_formatRegExp.source),Object.defineProperty(String,"format",{configurable:!0,writable:!0,value:function(format){function padString(str,align,pad){if(!align)return str;var plen=Math.abs(align)-str.length;if(plen<1)return str;var padding=String(pad).repeat(plen);return align<0?str+padding:padding+str}if(arguments.length<2)return 0===arguments.length?"":format;var args=2===arguments.length&&Array.isArray(arguments[1])?_toConsumableArray(arguments[1]):Array.prototype.slice.call(arguments,1);return 0===args.length?format:_hasFormatRegExp.test(format)?(_formatRegExp.lastIndex=0,format.replace(_formatRegExp,(function(match,index,align){var retval=args[index];if(null==retval)return"";for(;"function"==typeof retval;)retval=retval();switch(_typeof(retval)){case"string":break;case"object":retval=JSON.stringify(retval);break;default:retval=String(retval)}return padString(retval,align?Number.parseInt(align,10):0," ")}))):format}}),Object.defineProperty(String.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.contains called on null or undefined");return-1!==String.prototype.indexOf.apply(this,arguments)}}),Object.defineProperty(String.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.count called on null or undefined");var needle=String(arguments[0]||"");if(""===needle)return 0;for(var indexOf=String.prototype.indexOf,step=needle.length,pos=Number(arguments[1])||0,count=0;-1!==(pos=indexOf.call(this,needle,pos));)++count,pos+=step;return count}}),Object.defineProperty(String.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.first called on null or undefined");return _getCodePointStartAndEnd(String(this),0).char}}),Object.defineProperty(String.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.last called on null or undefined");var str=String(this);return _getCodePointStartAndEnd(str,str.length-1).char}}),Object.defineProperty(String.prototype,"splice",{configurable:!0,writable:!0,value:function(startAt,delCount,replacement){if(null==this)throw new TypeError("String.prototype.splice called on null or undefined");var length=this.length>>>0;if(0===length)return"";var start=Number(startAt);Number.isSafeInteger(start)?start<0&&(start+=length)<0&&(start=0):start=0,start>length&&(start=length);var count=Number(delCount);(!Number.isSafeInteger(count)||count<0)&&(count=0);var res=this.slice(0,start);return void 0!==replacement&&(res+=replacement),start+count<length&&(res+=this.slice(start+count)),res}}),Object.defineProperty(String.prototype,"splitOrEmpty",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.splitOrEmpty called on null or undefined");return""===String(this)?[]:String.prototype.split.apply(this,arguments)}}),Object.defineProperty(String.prototype,"toLocaleUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toLocaleUpperFirst called on null or undefined");var str=String(this),_getCodePointStartAnd3=_getCodePointStartAndEnd(str,0),char=_getCodePointStartAnd3.char,end=_getCodePointStartAnd3.end;return-1===end?"":char.toLocaleUpperCase()+str.slice(end+1)}}),Object.defineProperty(String.prototype,"toUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toUpperFirst called on null or undefined");var str=String(this),_getCodePointStartAnd4=_getCodePointStartAndEnd(str,0),char=_getCodePointStartAnd4.char,end=_getCodePointStartAnd4.end;return-1===end?"":char.toUpperCase()+str.slice(end+1)}}),Object.defineProperty(Date.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:date)",this.toISOString()]}}),Object.defineProperty(Function.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)","(".concat(this.toString(),")")]}}),Object.defineProperty(Map.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:map)",_toConsumableArray(this)]}}),Object.defineProperty(RegExp.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)",this.toString()]}}),Object.defineProperty(Set.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:set)",_toConsumableArray(this)]}}),Object.defineProperty(JSON,"reviveWrapper",{configurable:!0,writable:!0,value:function(code,data){if("string"!=typeof code)throw new TypeError("JSON.reviveWrapper code parameter must be a string");return["(revive:eval)",[code,data]]}}),Object.defineProperty(JSON,"_real_stringify",{value:JSON.stringify}),Object.defineProperty(JSON,"stringify",{configurable:!0,writable:!0,value:function(_value,replacer,space){return JSON._real_stringify(_value,(function(key,val){var value=val;if("function"==typeof replacer)try{value=replacer(key,value)}catch(ex){}return void 0===value&&(value=["(revive:eval)","undefined"]),value}),space)}}),Object.defineProperty(JSON,"_real_parse",{value:JSON.parse}),Object.defineProperty(JSON,"parse",{configurable:!0,writable:!0,value:function value(text,reviver){return JSON._real_parse(text,(function(key,val){var value=val;if(Array.isArray(value)&&2===value.length)switch(value[0]){case"(revive:set)":value=new Set(value[1]);break;case"(revive:map)":value=new Map(value[1]);break;case"(revive:date)":value=new Date(value[1]);break;case"(revive:eval)":try{if(Array.isArray(value[1])){var $ReviveData$=value[1][1];value=eval(value[1][0])}else value=eval(value[1])}catch(ex){}}else if("string"==typeof value&&"@@revive@@"===value.slice(0,10))try{value=eval(value.slice(10))}catch(ex){}if("function"==typeof reviver)try{value=reviver(key,value)}catch(ex){}return value}))}}),Object.defineProperty(Array.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.contains called on null or undefined");return Array.prototype.includes.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAll called on null or undefined");return Array.prototype.includesAll.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAny called on null or undefined");return Array.prototype.includesAny.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"flatten",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatten called on null or undefined");return Array.prototype.flat.call(this,1/0)}}),Object.defineProperty(String.prototype,"readBracketedList",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.readBracketedList called on null or undefined");for(var match,re=new RegExp("(?:\\[\\[((?:\\s|\\S)*?)\\]\\])|([^\"'\\s]\\S*)","gm"),names=[];null!==(match=re.exec(this));)match[1]?names.push(match[1]):match[2]&&names.push(match[2]);return names}})}();var Browser=(userAgent=navigator.userAgent.toLowerCase(),winPhone=userAgent.includes("windows phone"),isMobile=Object.freeze({Android:!winPhone&&userAgent.includes("android"),BlackBerry:/blackberry|bb10/.test(userAgent),iOS:!winPhone&&/ip(?:hone|ad|od)/.test(userAgent),Opera:!winPhone&&("object"===_typeof(window.operamini)||userAgent.includes("opera mini")),Windows:winPhone||/iemobile|wpdesktop/.test(userAgent),any:function(){return isMobile.Android||isMobile.BlackBerry||isMobile.iOS||isMobile.Opera||isMobile.Windows}}),isGecko=!isMobile.Windows&&!/khtml|trident|edge/.test(userAgent)&&userAgent.includes("gecko"),isIE=!userAgent.includes("opera")&&/msie|trident/.test(userAgent),ieVersion=isIE?(ver=/(?:msie\s+|rv:)(\d+\.\d)/.exec(userAgent))?Number(ver[1]):0:null,isOpera=userAgent.includes("opera")||userAgent.includes(" opr/"),operaVersion=isOpera?function(){var ver=new RegExp("".concat(/khtml|chrome/.test(userAgent)?"opr":"version","\\/(\\d+\\.\\d+)")).exec(userAgent);return ver?Number(ver[1]):0}():null,isVivaldi=userAgent.includes("vivaldi"),Object.freeze({userAgent:userAgent,isMobile:isMobile,isGecko:isGecko,isIE:isIE,ieVersion:ieVersion,isOpera:isOpera,operaVersion:operaVersion,isVivaldi:isVivaldi})),ver,userAgent,winPhone,isMobile,isGecko,isIE,ieVersion,isOpera,operaVersion,isVivaldi,Has=(hasAudioElement=function(){try{return"function"==typeof document.createElement("audio").canPlayType}catch(ex){}return!1}(),hasFile=function(){try{return"Blob"in window&&"File"in window&&"FileList"in window&&"FileReader"in window&&(!Browser.isOpera||Browser.operaVersion>=15)}catch(ex){}return!1}(),hasGeolocation=function(){try{return"geolocation"in navigator&&"function"==typeof navigator.geolocation.getCurrentPosition&&"function"==typeof navigator.geolocation.watchPosition}catch(ex){}return!1}(),hasMutationObserver=function(){try{return"MutationObserver"in window&&"function"==typeof window.MutationObserver}catch(ex){}return!1}(),hasPerformance=function(){try{return"performance"in window&&"function"==typeof window.performance.now}catch(ex){}return!1}(),hasTouch=function(){try{return"ontouchstart"in window||!!window.DocumentTouch&&document instanceof window.DocumentTouch||!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints}catch(ex){}return!1}(),hasTransitionEndEvent=function(){try{for(var teMap=new Map([["transition","transitionend"],["MSTransition","msTransitionEnd"],["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"]]),teKeys=_toConsumableArray(teMap.keys()),el=document.createElement("div"),i=0;i<teKeys.length;++i)if(el.style[teKeys[i]]!==undefined)return teMap.get(teKeys[i])}catch(ex){}return!1}(),Object.freeze({audio:hasAudioElement,fileAPI:hasFile,geolocation:hasGeolocation,mutationObserver:hasMutationObserver,performance:hasPerformance,touch:hasTouch,transitionEndEvent:hasTransitionEndEvent})),hasAudioElement,hasFile,hasGeolocation,hasMutationObserver,hasPerformance,hasTouch,hasTransitionEndEvent,Visibility=(vendor=function(){try{return Object.freeze([{hiddenProperty:"hidden",stateProperty:"visibilityState",changeEvent:"visibilitychange"},{hiddenProperty:"webkitHidden",stateProperty:"webkitVisibilityState",changeEvent:"webkitvisibilitychange"},{hiddenProperty:"mozHidden",stateProperty:"mozVisibilityState",changeEvent:"mozvisibilitychange"},{hiddenProperty:"msHidden",stateProperty:"msVisibilityState",changeEvent:"msvisibilitychange"}].find((function(vnd){return vnd.hiddenProperty in document})))}catch(ex){}return undefined}(),Object.freeze(Object.defineProperties({},{vendor:{get:function(){return vendor}},state:{get:function(){return vendor&&document[vendor.stateProperty]||"visible"}},isEnabled:{value:function(){return Boolean(vendor)}},isHidden:{value:function(){return Boolean(vendor&&document[vendor.hiddenProperty])}},hiddenProperty:{value:vendor&&vendor.hiddenProperty},stateProperty:{value:vendor&&vendor.stateProperty},changeEvent:{value:vendor&&vendor.changeEvent}}))),vendor,Fullscreen=function(){var _hasPromise,vendor=function(){try{return Object.freeze([{isEnabled:"fullscreenEnabled",element:"fullscreenElement",requestFn:"requestFullscreen",exitFn:"exitFullscreen",changeEvent:"fullscreenchange",errorEvent:"fullscreenerror"},{isEnabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",requestFn:"webkitRequestFullscreen",exitFn:"webkitExitFullscreen",changeEvent:"webkitfullscreenchange",errorEvent:"webkitfullscreenerror"},{isEnabled:"mozFullScreenEnabled",element:"mozFullScreenElement",requestFn:"mozRequestFullScreen",exitFn:"mozCancelFullScreen",changeEvent:"mozfullscreenchange",errorEvent:"mozfullscreenerror"},{isEnabled:"msFullscreenEnabled",element:"msFullscreenElement",requestFn:"msRequestFullscreen",exitFn:"msExitFullscreen",changeEvent:"MSFullscreenChange",errorEvent:"MSFullscreenError"}].find((function(vnd){return vnd.isEnabled in document})))}catch(ex){}return undefined}(),_returnsPromise=(_hasPromise=null,function(){if(null!==_hasPromise)return _hasPromise;if(_hasPromise=!1,vendor)try{var value=document.exitFullscreen();value.catch((function(){})),_hasPromise=value instanceof Promise}catch(ex){}return _hasPromise});function _selectElement(requestedEl){var selectedEl=requestedEl||document.documentElement;return selectedEl===document.documentElement&&("msRequestFullscreen"===vendor.requestFn||Browser.isOpera&&Browser.operaVersion<15)&&(selectedEl=document.body),selectedEl}function isFullscreen(){return Boolean(vendor&&document[vendor.element])}function requestFullscreen(options,requestedEl){var _this=this;if(!vendor)return Promise.reject(new Error("fullscreen not supported"));var element=_selectElement(requestedEl);if("function"!=typeof element[vendor.requestFn])return Promise.reject(new Error("fullscreen not supported"));if(isFullscreen())return Promise.resolve();if(_returnsPromise())return element[vendor.requestFn](options);var namespace=".Fullscreen_requestFullscreen";return new Promise((function(resolve,reject){jQuery(element).off(namespace).one("".concat(vendor.errorEvent).concat(namespace," ").concat(vendor.changeEvent).concat(namespace),(function(ev){jQuery(_this).off(namespace),ev.type===vendor.errorEvent?reject(new Error("unknown fullscreen request error")):resolve()})),element[vendor.requestFn](options)}))}function exitFullscreen(){var _this2=this;if(!vendor||"function"!=typeof document[vendor.exitFn])return Promise.reject(new TypeError("fullscreen not supported"));if(!isFullscreen())return Promise.reject(new TypeError("fullscreen mode not active"));if(_returnsPromise())return document[vendor.exitFn]();var namespace=".Fullscreen_exitFullscreen";return new Promise((function(resolve,reject){jQuery(document).off(namespace).one("".concat(vendor.errorEvent).concat(namespace," ").concat(vendor.changeEvent).concat(namespace),(function(ev){jQuery(_this2).off(namespace),ev.type===vendor.errorEvent?reject(new Error("unknown fullscreen exit error")):resolve()})),document[vendor.exitFn]()}))}return Object.freeze(Object.defineProperties({},{vendor:{get:function(){return vendor}},element:{get:function(){return vendor?document[vendor.element]:null}},isEnabled:{value:function(){return Boolean(vendor&&document[vendor.isEnabled])}},isFullscreen:{value:isFullscreen},request:{value:requestFullscreen},exit:{value:exitFullscreen},toggle:{value:function(options,requestedEl){return isFullscreen()?exitFullscreen():requestFullscreen(options,requestedEl)}},onChange:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);$(element).on(vendor.changeEvent,handlerFn)}}},offChange:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);handlerFn?$(element).off(vendor.changeEvent,handlerFn):$(element).off(vendor.changeEvent)}}},onError:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);$(element).on(vendor.errorEvent,handlerFn)}}},offError:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);handlerFn?$(element).off(vendor.errorEvent,handlerFn):$(element).off(vendor.errorEvent)}}}}))}(),_ref3=Object.freeze(Object.defineProperties({},{clone:{value:function clone(orig){return"object"!==_typeof(orig)||null===orig?orig:orig instanceof String?String(orig):orig instanceof Number?Number(orig):orig instanceof Boolean?Boolean(orig):"function"==typeof orig.clone?orig.clone(!0):orig.nodeType&&"function"==typeof orig.cloneNode?orig.cloneNode(!0):(orig instanceof Array?copy=new Array(orig.length):orig instanceof Date?copy=new Date(orig.getTime()):orig instanceof Map?(copy=new Map,orig.forEach((function(val,key){return copy.set(key,clone(val))}))):orig instanceof RegExp?copy=new RegExp(orig):orig instanceof Set?(copy=new Set,orig.forEach((function(val){return copy.add(clone(val))}))):copy=Object.create(Object.getPrototypeOf(orig)),Object.keys(orig).forEach((function(name){return copy[name]=clone(orig[name])})),copy);var copy}},convertBreaks:{value:function(source){for(var node,output=document.createDocumentFragment(),para=document.createElement("p");null!==(node=source.firstChild);){if(node.nodeType===Node.ELEMENT_NODE)switch(node.nodeName.toUpperCase()){case"BR":if(null!==node.nextSibling&&node.nextSibling.nodeType===Node.ELEMENT_NODE&&"BR"===node.nextSibling.nodeName.toUpperCase()){source.removeChild(node.nextSibling),source.removeChild(node),output.appendChild(para),para=document.createElement("p");continue}if(!para.hasChildNodes()){source.removeChild(node);continue}break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":para.hasChildNodes()&&(output.appendChild(para),para=document.createElement("p")),output.appendChild(node);continue}para.appendChild(node)}para.hasChildNodes()&&output.appendChild(para),source.appendChild(output)}},safeActiveElement:{value:function(){try{return document.activeElement||null}catch(ex){return null}}},setDisplayTitle:{value:function(title){if("string"!=typeof title)throw new TypeError("story display title must be a string (received: ".concat(Util.getType(title),")"));var render=document.createDocumentFragment();new Wikifier(render,title);var text=function(source){for(var node,copy=source.cloneNode(!0),frag=document.createDocumentFragment();null!==(node=copy.firstChild);){if(node.nodeType===Node.ELEMENT_NODE)switch(node.nodeName.toUpperCase()){case"BR":case"DIV":case"P":frag.appendChild(document.createTextNode(" "))}frag.appendChild(node)}return frag.textContent}(render).trim();document.title=Config.passages.displayTitles&&""!==State.passage&&State.passage!==Config.passages.start?"".concat(State.passage," | ").concat(text):text;var storyTitle=document.getElementById("story-title");null!==storyTitle&&jQuery(storyTitle).empty().append(render)}},setPageElement:{value:function(idOrElement,titles,defaultText){var el="object"===_typeof(idOrElement)?idOrElement:document.getElementById(idOrElement);if(null==el)return null;var ids=Array.isArray(titles)?titles:[titles];jQuery(el).empty();for(var i=0,iend=ids.length;i<iend;++i)if(Story.has(ids[i]))return new Wikifier(el,Story.get(ids[i]).processText().trim()),el;if(null!=defaultText){var text=String(defaultText).trim();""!==text&&new Wikifier(el,text)}return el}},throwError:{value:function(place,message,source){var $wrapper=jQuery(document.createElement("div")),$toggle=jQuery(document.createElement("button")),$source=jQuery(document.createElement("pre")),mesg="".concat(L10n.get("errorTitle"),": ").concat(message||"unknown error");return $toggle.addClass("error-toggle").ariaClick({label:L10n.get("errorToggle")},(function(){$toggle.hasClass("enabled")?($toggle.removeClass("enabled"),$source.attr({"aria-hidden":!0,hidden:"hidden"})):($toggle.addClass("enabled"),$source.removeAttr("aria-hidden hidden"))})).appendTo($wrapper),jQuery(document.createElement("span")).addClass("error").text(mesg).appendTo($wrapper),jQuery(document.createElement("code")).text(source).appendTo($source),$source.addClass("error-source").attr({"aria-hidden":!0,hidden:"hidden"}).appendTo($wrapper),$wrapper.addClass("error-view").appendTo(place),console.warn("".concat(mesg,"\n\t").concat(source.replace(/\n/g,"\n\t"))),!1}},stringFrom:{value:function stringFrom(value){switch(_typeof(value)){case"function":return"[function]";case"number":if(Number.isNaN(value))return"[number NaN]";break;case"object":if(null===value)return"[null]";if(value instanceof Array)return value.map((function(val){return stringFrom(val)})).join(", ");if(value instanceof Set)return Array.from(value).map((function(val){return stringFrom(val)})).join(", ");if(value instanceof Map){var result=Array.from(value).map((function(_ref4){var _ref5=_slicedToArray(_ref4,2),key=_ref5[0],val=_ref5[1];return"".concat(stringFrom(key)," → ").concat(stringFrom(val))}));return"{ ".concat(result.join(", ")," }")}if(value instanceof Date)return value.toLocaleString();if(value instanceof Element){if(value===document.documentElement||value===document.head||value===document.body)throw new Error("illegal operation; attempting to convert the <html>, <head>, or <body> tags to string is not allowed");return value.outerHTML}return value instanceof Node?value.textContent:"function"==typeof value.toString?value.toString():Object.prototype.toString.call(value);case"symbol":var desc=void 0!==value.description?' "'.concat(value.description,'"'):"";return"[symbol".concat(desc,"]");case"undefined":return"[undefined]"}return String(value)}}})),clone=_ref3.clone,convertBreaks=_ref3.convertBreaks,safeActiveElement=_ref3.safeActiveElement,setDisplayTitle=_ref3.setDisplayTitle,setPageElement=_ref3.setPageElement,throwError=_ref3.throwError,stringFrom=_ref3.stringFrom;!function(){function onKeypressFn(ev){13!==ev.which&&32!==ev.which||(ev.preventDefault(),jQuery(safeActiveElement()||this).trigger("click"))}function onClickFnWrapper(fn){return function(){var $this=jQuery(this);$this.ariaIsDisabled()||($this.is("[aria-pressed]")&&$this.attr("aria-pressed","true"===$this.attr("aria-pressed")?"false":"true"),fn.apply(this,arguments))}}function oneClickFnWrapper(fn){return onClickFnWrapper((function(){jQuery(this).off(".aria-clickable").removeAttr("role tabindex aria-controls aria-pressed").filter("button").prop("disabled",!0),fn.apply(this,arguments)}))}jQuery.fn.extend({ariaClick:function(options,handler){if(0===this.length||0===arguments.length)return this;var opts=options,fn=handler;return null==fn&&(fn=opts,opts=undefined),"string"!=typeof(opts=jQuery.extend({namespace:undefined,one:!1,selector:undefined,data:undefined,role:undefined,controls:undefined,pressed:undefined,label:undefined},opts)).namespace?opts.namespace="":"."!==opts.namespace[0]&&(opts.namespace=".".concat(opts.namespace)),"boolean"==typeof opts.pressed&&(opts.pressed=opts.pressed?"true":"false"),this.filter("button").prop("type","button"),null!=opts.role?this.attr("role",opts.role):this.not("[role]").filter("a,[data-passage]").attr("role","link").end().not("a").not("[data-passage]").attr("role","button").end().end().end(),this.attr("tabindex",0),null!=opts.controls&&this.attr("aria-controls",opts.controls),null!=opts.pressed&&this.attr("aria-pressed",opts.pressed),null!=opts.label&&this.attr({"aria-label":opts.label,title:opts.label}),this.not("button").on("keypress.aria-clickable".concat(opts.namespace),opts.selector,onKeypressFn),this.on("click.aria-clickable".concat(opts.namespace),opts.selector,opts.data,opts.one?oneClickFnWrapper(fn):onClickFnWrapper(fn)),this},ariaDisabled:function(disable){if(0===this.length||0===arguments.length)return this;var $nonDisableable=this.not("button,fieldset,input,menuitem,optgroup,option,select,textarea"),$disableable=this.filter("button,fieldset,input,menuitem,optgroup,option,select,textarea");return disable?($nonDisableable.each((function(){this.setAttribute("disabled",""),this.setAttribute("aria-disabled","true")})),$disableable.each((function(){this.disabled=!0,this.setAttribute("aria-disabled","true")}))):($nonDisableable.each((function(){this.removeAttribute("disabled"),this.removeAttribute("aria-disabled")})),$disableable.each((function(){this.disabled=!1,this.removeAttribute("aria-disabled")}))),this},ariaIsDisabled:function(){return this.is("[disabled]")}})}(),jQuery.extend({wikiWithOptions:function(options){for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)sources[_key-1]=arguments[_key];if(0!==sources.length){var frag=document.createDocumentFragment();sources.forEach((function(content){return new Wikifier(frag,content,options)}));var errors=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent.replace(errorPrologRegExp,"")}));if(errors.length>0)throw new Error(errors.join("; "))}},wiki:function(){for(var _len2=arguments.length,sources=new Array(_len2),_key2=0;_key2<_len2;_key2++)sources[_key2]=arguments[_key2];this.wikiWithOptions.apply(this,[undefined].concat(sources))}}),jQuery.fn.extend({wikiWithOptions:function(options){for(var _len3=arguments.length,sources=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)sources[_key3-1]=arguments[_key3];if(0===this.length||0===sources.length)return this;var frag=document.createDocumentFragment();return sources.forEach((function(content){return new Wikifier(frag,content,options)})),this.append(frag),this},wiki:function(){for(var _len4=arguments.length,sources=new Array(_len4),_key4=0;_key4<_len4;_key4++)sources[_key4]=arguments[_key4];return this.wikiWithOptions.apply(this,[undefined].concat(sources))}});var Util=function(){var toString,utilGetType="[object Object]"===(toString=Object.prototype.toString).call(new Map)?function(O){if(null===O)return"null";if(O instanceof Map)return"Map";if(O instanceof Set)return"Set";var baseType=_typeof(O);return"object"===baseType?toString.call(O).slice(8,-1):baseType}:function(O){if(null===O)return"null";var baseType=_typeof(O);return"object"===baseType?toString.call(O).slice(8,-1):baseType};function utilToEnum(obj){var pEnum=Object.create(null);if(obj instanceof Array)obj.forEach((function(val,i){return pEnum[String(val)]=i}));else if(obj instanceof Set)Array.from(obj).forEach((function(val,i){return pEnum[String(val)]=i}));else if(obj instanceof Map)obj.forEach((function(val,key){return pEnum[String(key)]=val}));else{if("object"!==_typeof(obj)||null===obj||Object.getPrototypeOf(obj)!==Object.prototype)throw new TypeError("Util.toEnum obj parameter must be an Array, Map, Set, or generic object");Object.assign(pEnum,obj)}return Object.freeze(pEnum)}function utilToStringTag(obj){return Object.prototype.toString.call(obj).slice(8,-1)}var _illegalSlugCharsRe=/[\x00-\x20!-/:-@[-^`{-\x9f]+/g,_isInvalidSlugRe=/^-*$/;var _illegalFilenameCharsRE=/[\x00-\x1f"#$%&'*+,/:;<=>?\\^`|\x7f-\x9f]+/g;var _markupCharsRe=/[!"#$&'*\-/<=>?@[\\\]^_`{|}~]/g,_hasMarkupCharsRe=new RegExp(_markupCharsRe.source),_markupCharsMap=utilToEnum({"!":"&#33;",'"':"&quot;","#":"&#35;",$:"&#36;","&":"&amp;","'":"&#39;","*":"&#42;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","?":"&#63;","@":"&#64;","[":"&#91;","\\":"&#92;","]":"&#93;","^":"&#94;",_:"&#95;","`":"&#96;","{":"&#123;","|":"&#124;","}":"&#125;","~":"&#126;"});var _htmlCharsRe=/[&<>"'`]/g,_hasHtmlCharsRe=new RegExp(_htmlCharsRe.source),_htmlCharsMap=utilToEnum({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"});function utilEscape(str){if(null==str)return"";var val=String(str);return val&&_hasHtmlCharsRe.test(val)?val.replace(_htmlCharsRe,(function(ch){return _htmlCharsMap[ch]})):val}var _escapedHtmlRe=/&(?:amp|#38|#x26|lt|#60|#x3c|gt|#62|#x3e|quot|#34|#x22|apos|#39|#x27|#96|#x60);/gi,_hasEscapedHtmlRe=new RegExp(_escapedHtmlRe.source,"i"),_escapedHtmlMap=utilToEnum({"&amp;":"&","&#38;":"&","&#x26;":"&","&lt;":"<","&#60;":"<","&#x3c;":"<","&gt;":">","&#62;":">","&#x3e;":">","&quot;":'"',"&#34;":'"',"&#x22;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'","&#96;":"`","&#x60;":"`"});function utilUnescape(str){if(null==str)return"";var val=String(str);return val&&_hasEscapedHtmlRe.test(val)?val.replace(_escapedHtmlRe,(function(entity){return _escapedHtmlMap[entity.toLowerCase()]})):val}var _nowSource=Has.performance?performance:Date;var _cssTimeRe=/^([+-]?(?:\d*\.)?\d+)([Mm]?[Ss])$/;var utilScrubEventKey=function(){var separatorKey,decimalKey;if("undefined"!=typeof Intl&&"function"==typeof Intl.NumberFormat){var match=(new Intl.NumberFormat).format(111111.5).match(/(\D*)\d+(\D*)/);match&&(separatorKey=match[1],decimalKey=match[2])}return separatorKey||decimalKey||(separatorKey=",",decimalKey="."),function(key){switch(key){case"Scroll":return"ScrollLock";case"Spacebar":return" ";case"Left":return"ArrowLeft";case"Right":return"ArrowRight";case"Up":return"ArrowUp";case"Down":return"ArrowDown";case"Del":return"Delete";case"Crsel":return"CrSel";case"Exsel":return"ExSel";case"Esc":return"Escape";case"Apps":return"ContextMenu";case"Nonconvert":return"NonConvert";case"MediaNextTrack":return"MediaTrackNext";case"MediaPreviousTrack":return"MediaTrackPrevious";case"VolumeUp":return"AudioVolumeUp";case"VolumeDown":return"AudioVolumeDown";case"VolumeMute":return"AudioVolumeMute";case"Zoom":return"ZoomToggle";case"SelectMedia":case"MediaSelect":return"LaunchMediaPlayer";case"Add":return"+";case"Divide":return"/";case"Multiply":return"*";case"Subtract":return"-";case"Decimal":return decimalKey;case"Separator":return separatorKey}return key}}(),utilHasMediaQuery="function"!=typeof window.matchMedia?function(){return!1}:function(mediaQuery){return window.matchMedia(mediaQuery).matches};return Object.freeze(Object.defineProperties({},{getType:{value:utilGetType},isBoolean:{value:function(obj){return"boolean"==typeof obj||"string"==typeof obj&&("true"===obj||"false"===obj)}},isIterable:{value:function(obj){return null!=obj&&"function"==typeof obj[Symbol.iterator]}},isNumeric:{value:function(obj){var num;switch(_typeof(obj)){case"number":num=obj;break;case"string":num=Number(obj);break;default:return!1}return!Number.isNaN(num)&&Number.isFinite(num)}},sameValueZero:{value:function(a,b){return a===b||a!=a&&b!=b}},toEnum:{value:utilToEnum},toStringTag:{value:utilToStringTag},slugify:{value:function(str){var base=String(str).trim(),_legacy=base.replace(/[^\w\s\u2013\u2014-]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-").toLocaleLowerCase();return _isInvalidSlugRe.test(_legacy)?base.replace(_illegalSlugCharsRe,"").replace(/[_\s\u2013\u2014-]+/g,"-"):_legacy}},sanitizeFilename:{value:function(str){return String(str).trim().replace(_illegalFilenameCharsRE,"")}},escapeMarkup:{value:function(str){if(null==str)return"";var val=String(str);return val&&_hasMarkupCharsRe.test(val)?val.replace(_markupCharsRe,(function(ch){return _markupCharsMap[ch]})):val}},escape:{value:utilEscape},unescape:{value:utilUnescape},charAndPosAt:{value:function(text,position){var str=String(text),pos=Math.trunc(position),code=str.charCodeAt(pos);if(Number.isNaN(code))return{char:"",start:-1,end:-1};var retval={char:str.charAt(pos),start:pos,end:pos};if(code<55296||code>57343)return retval;if(code>=55296&&code<=56319){var nextPos=pos+1;if(nextPos>=str.length)return retval;var nextCode=str.charCodeAt(nextPos);return nextCode<56320||nextCode>57343||(retval.char=retval.char+str.charAt(nextPos),retval.end=nextPos),retval}if(0===pos)return retval;var prevPos=pos-1,prevCode=str.charCodeAt(prevPos);return prevCode<55296||prevCode>56319||(retval.char=str.charAt(prevPos)+retval.char,retval.start=prevPos),retval}},now:{value:function(){return _nowSource.now()}},fromCssTime:{value:function(cssTime){var match=_cssTimeRe.exec(String(cssTime));if(null===match)throw new SyntaxError('invalid time value syntax: "'.concat(cssTime,'"'));var msec=Number(match[1]);if(1===match[2].length&&(msec*=1e3),Number.isNaN(msec)||!Number.isFinite(msec))throw new RangeError('invalid time value: "'.concat(cssTime,'"'));return msec}},toCssTime:{value:function(msec){if("number"!=typeof msec||Number.isNaN(msec)||!Number.isFinite(msec)){var what;switch(_typeof(msec)){case"string":what='"'.concat(msec,'"');break;case"number":what=String(msec);break;default:what=utilToStringTag(msec)}throw new Error("invalid milliseconds: ".concat(what))}return"".concat(msec,"ms")}},fromCssProperty:{value:function(cssName){if(!cssName.includes("-"))switch(cssName){case"bgcolor":return"backgroundColor";case"float":return"cssFloat";default:return cssName}return("-ms-"===cssName.slice(0,4)?cssName.slice(1):cssName).split("-").map((function(part,i){return 0===i?part:part.toUpperFirst()})).join("")}},parseUrl:{value:function(url){var el=document.createElement("a"),queryObj=Object.create(null);el.href=url,el.search&&el.search.replace(/^\?/,"").splitOrEmpty(/(?:&(?:amp;)?|;)/).forEach((function(query){var _query$split2=_slicedToArray(query.split("="),2),key=_query$split2[0],value=_query$split2[1];queryObj[key]=value}));var pathname=el.host&&"/"!==el.pathname[0]?"/".concat(el.pathname):el.pathname;return{href:el.href,protocol:el.protocol,host:el.host,hostname:el.hostname,port:el.port,path:"".concat(pathname).concat(el.search),pathname:pathname,query:el.search,search:el.search,queries:queryObj,searches:queryObj,hash:el.hash}}},newExceptionFrom:{value:function(original,exceptionType,override){if("object"!==_typeof(original)||null===original)throw new Error("Util.newExceptionFrom original parameter must be an object");if("function"!=typeof exceptionType)throw new Error("Util.newExceptionFrom exceptionType parameter must be an error type constructor");var ex=new exceptionType(original.message);void 0!==original.name&&(ex.name=original.name),void 0!==original.code&&(ex.code=original.code),void 0!==original.columnNumber&&(ex.columnNumber=original.columnNumber),void 0!==original.description&&(ex.description=original.description),void 0!==original.fileName&&(ex.fileName=original.fileName),void 0!==original.lineNumber&&(ex.lineNumber=original.lineNumber),void 0!==original.number&&(ex.number=original.number),void 0!==original.stack&&(ex.stack=original.stack);var overrideType=_typeof(override);if("undefined"!==overrideType)if("object"===overrideType&&null!==override)Object.assign(ex,override);else{if("string"!==overrideType)throw new Error("Util.newExceptionFrom override parameter must be an object or string");ex.message=override}return ex}},scrubEventKey:{value:utilScrubEventKey},hasMediaQuery:{value:utilHasMediaQuery},random:{value:Math.random},entityEncode:{value:utilEscape},entityDecode:{value:utilUnescape},evalExpression:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),SimpleStore=(_adapters=[],_initialized=null,Object.freeze(Object.defineProperties({},{adapters:{value:_adapters},create:{value:function(storageId,persistent){if(_initialized)return _initialized.create(storageId,persistent);for(var i=0;i<_adapters.length;++i)if(_adapters[i].init(storageId,persistent))return(_initialized=_adapters[i]).create(storageId,persistent);throw new Error("no valid storage adapters found")}}}))),_adapters,_initialized,_ok,_WebStorageAdapter;SimpleStore.adapters.push((_ok=!1,_WebStorageAdapter=function(){function _WebStorageAdapter(storageId,persistent){_classCallCheck(this,_WebStorageAdapter);var prefix="".concat(storageId,"."),engine=null,name=null;persistent?(engine=window.localStorage,name="localStorage"):(engine=window.sessionStorage,name="sessionStorage"),Object.defineProperties(this,{_engine:{value:engine},_prefix:{value:prefix},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(prefix)))},name:{value:name},id:{value:storageId},persistent:{value:!!persistent}})}return _createClass(_WebStorageAdapter,[{key:"length",get:function(){return this.keys().length}},{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){for(var keys=[],i=0;i<this._engine.length;++i){var key=this._engine.key(i);this._prefixRe.test(key)&&keys.push(key.replace(this._prefixRe,""))}return keys}},{key:"has",value:function(key){return!("string"!=typeof key||!key)&&this._engine.hasOwnProperty(this._prefix+key)}},{key:"get",value:function(key){if("string"!=typeof key||!key)return null;var value=this._engine.getItem(this._prefix+key);return null==value?null:_WebStorageAdapter._deserialize(value)}},{key:"set",value:function(key,value){if("string"!=typeof key||!key)return!1;try{this._engine.setItem(this._prefix+key,_WebStorageAdapter._serialize(value))}catch(ex){if(/quota.?(?:exceeded|reached)/i.test(ex.name+ex.message))throw Util.newExceptionFrom(ex,Error,"".concat(this.name," quota exceeded"));throw ex}return!0}},{key:"delete",value:function(key){return!("string"!=typeof key||!key||(this._engine.removeItem(this._prefix+key),0))}},{key:"clear",value:function(){for(var keys=this.keys(),i=0,iend=keys.length;i<iend;++i)this.delete(keys[i]);return!0}}],[{key:"_serialize",value:function(obj){return LZString.compressToUTF16(JSON.stringify(obj))}},{key:"_deserialize",value:function(str){return JSON.parse(LZString.decompressFromUTF16(str))}}]),_WebStorageAdapter}(),Object.freeze(Object.defineProperties({},{init:{value:function(){function hasWebStorage(storeId){try{var store=window[storeId],tid="_sc_".concat(String(Date.now()));store.setItem(tid,tid);var result=store.getItem(tid)===tid;return store.removeItem(tid),result}catch(ex){}return!1}return _ok=hasWebStorage("localStorage")&&hasWebStorage("sessionStorage")}},create:{value:function(storageId,persistent){if(!_ok)throw new Error("adapter not initialized");return new _WebStorageAdapter(storageId,persistent)}}})))),SimpleStore.adapters.push(function(){var _MAX_EXPIRY="Tue, 19 Jan 2038 03:14:07 GMT",_MIN_EXPIRY="Thu, 01 Jan 1970 00:00:00 GMT",_ok=!1,_CookieAdapter=function(){function _CookieAdapter(storageId,persistent){_classCallCheck(this,_CookieAdapter);var prefix="".concat(storageId).concat(persistent?"!":"*",".");Object.defineProperties(this,{_prefix:{value:prefix},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(prefix)))},name:{value:"cookie"},id:{value:storageId},persistent:{value:!!persistent}})}return _createClass(_CookieAdapter,[{key:"length",get:function(){return this.keys().length}},{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){if(""===document.cookie)return[];for(var cookies=document.cookie.split(/;\s*/),keys=[],i=0;i<cookies.length;++i){var kvPair=cookies[i].split("="),key=decodeURIComponent(kvPair[0]);if(this._prefixRe.test(key))""!==decodeURIComponent(kvPair[1])&&keys.push(key.replace(this._prefixRe,""))}return keys}},{key:"has",value:function(key){return!("string"!=typeof key||!key)&&null!==_CookieAdapter._getCookie(this._prefix+key)}},{key:"get",value:function(key){if("string"!=typeof key||!key)return null;var value=_CookieAdapter._getCookie(this._prefix+key);return null===value?null:_CookieAdapter._deserialize(value)}},{key:"set",value:function(key,value){if("string"!=typeof key||!key)return!1;try{if(_CookieAdapter._setCookie(this._prefix+key,_CookieAdapter._serialize(value),this.persistent?"Tue, 19 Jan 2038 03:14:07 GMT":undefined),!this.has(key))throw new Error("unknown validation error during set")}catch(ex){throw Util.newExceptionFrom(ex,Error,"cookie error: ".concat(ex.message))}return!0}},{key:"delete",value:function(key){if("string"!=typeof key||!key||!this.has(key))return!1;try{if(_CookieAdapter._setCookie(this._prefix+key,undefined,_MIN_EXPIRY),this.has(key))throw new Error("unknown validation error during delete")}catch(ex){throw Util.newExceptionFrom(ex,Error,"cookie error: ".concat(ex.message))}return!0}},{key:"clear",value:function(){for(var keys=this.keys(),i=0,iend=keys.length;i<iend;++i)this.delete(keys[i]);return!0}}],[{key:"_getCookie",value:function(prefixedKey){if(!prefixedKey||""===document.cookie)return null;for(var cookies=document.cookie.split(/;\s*/),i=0;i<cookies.length;++i){var kvPair=cookies[i].split("=");if(prefixedKey===decodeURIComponent(kvPair[0]))return decodeURIComponent(kvPair[1])||null}return null}},{key:"_setCookie",value:function(prefixedKey,value,expiry){if(prefixedKey){var payload="".concat(encodeURIComponent(prefixedKey),"=");null!=value&&(payload+=encodeURIComponent(value)),null!=expiry&&(payload+="; expires=".concat(expiry)),payload+="; path=/",document.cookie=payload}}},{key:"_serialize",value:function(obj){return LZString.compressToBase64(JSON.stringify(obj))}},{key:"_deserialize",value:function(str){return JSON.parse(LZString.decompressFromBase64(str))}}]),_CookieAdapter}();return Object.freeze(Object.defineProperties({},{init:{value:function(storageId){try{var tid="_sc_".concat(String(Date.now()));_CookieAdapter._setCookie(tid,_CookieAdapter._serialize(tid),undefined),_ok=_CookieAdapter._deserialize(_CookieAdapter._getCookie(tid))===tid,_CookieAdapter._setCookie(tid,undefined,_MIN_EXPIRY)}catch(ex){_ok=!1}return _ok&&function(storageId){if(""===document.cookie)return;for(var oldPrefix="".concat(storageId,"."),oldPrefixRe=new RegExp("^".concat(RegExp.escape(oldPrefix))),persistPrefix="".concat(storageId,"!."),sessionPrefix="".concat(storageId,"*."),sessionTestRe=/\.(?:state|rcWarn)$/,cookies=document.cookie.split(/;\s*/),i=0;i<cookies.length;++i){var kvPair=cookies[i].split("="),key=decodeURIComponent(kvPair[0]);if(oldPrefixRe.test(key)){var value=decodeURIComponent(kvPair[1]);""!==value&&function(){var persist=!sessionTestRe.test(key);_CookieAdapter._setCookie(key,undefined,_MIN_EXPIRY),_CookieAdapter._setCookie(key.replace(oldPrefixRe,(function(){return persist?persistPrefix:sessionPrefix})),value,persist?_MAX_EXPIRY:undefined)}()}}}(storageId),_ok}},create:{value:function(storageId,persistent){if(!_ok)throw new Error("adapter not initialized");return new _CookieAdapter(storageId,persistent)}}}))}());var DebugView=function(){function DebugView(parent,type,name,title){_classCallCheck(this,DebugView),Object.defineProperties(this,{parent:{value:parent},view:{value:document.createElement("span")},break:{value:document.createElement("wbr")}}),jQuery(this.view).attr({title:title,"aria-label":title,"data-type":null!=type?type:"","data-name":null!=name?name:""}).addClass("debug"),jQuery(this.break).addClass("debug hidden"),this.parent.appendChild(this.view),this.parent.appendChild(this.break)}return _createClass(DebugView,[{key:"output",get:function(){return this.view}},{key:"type",get:function(){return this.view.getAttribute("data-type")},set:function(type){this.view.setAttribute("data-type",null!=type?type:"")}},{key:"name",get:function(){return this.view.getAttribute("data-name")},set:function(name){this.view.setAttribute("data-name",null!=name?name:"")}},{key:"title",get:function(){return this.view.title},set:function(title){this.view.title=title}},{key:"append",value:function(el){return jQuery(this.view).append(el),this}},{key:"modes",value:function(options){if(null==options){var current={};return this.view.className.splitOrEmpty(/\s+/).forEach((function(name){"debug"!==name&&(current[name]=!0)})),current}if("object"===_typeof(options))return Object.keys(options).forEach((function(name){this[options[name]?"addClass":"removeClass"](name)}),jQuery(this.view)),this;throw new Error("DebugView.prototype.modes options parameter must be an object or null/undefined")}},{key:"remove",value:function(){var $view=jQuery(this.view);this.view.hasChildNodes()&&$view.contents().appendTo(this.parent),$view.remove(),jQuery(this.break).remove()}}],[{key:"isEnabled",value:function(){return"enabled"===jQuery(document.documentElement).attr("data-debug-view")}},{key:"enable",value:function(){jQuery(document.documentElement).attr("data-debug-view","enabled"),jQuery.event.trigger(":debugviewupdate")}},{key:"disable",value:function(){jQuery(document.documentElement).removeAttr("data-debug-view"),jQuery.event.trigger(":debugviewupdate")}},{key:"toggle",value:function(){"enabled"===jQuery(document.documentElement).attr("data-debug-view")?DebugView.disable():DebugView.enable()}}]),DebugView}(),NodeTyper=function(){var NodeTyper=function(){function NodeTyper(config){if(_classCallCheck(this,NodeTyper),"object"!==_typeof(config)||null===config)throw new Error("config parameter must be an object (received: ".concat(Util.getType(config),")"));if(!(config.hasOwnProperty("targetNode")&&config.targetNode instanceof Node))throw new Error('config parameter object "targetNode" property must be a node');Object.defineProperties(this,{node:{value:config.targetNode},childNodes:{value:[]},nodeValue:{writable:!0,value:""},appendTo:{writable:!0,value:config.parentNode||null},classNames:{writable:!0,value:config.classNames||null},finished:{writable:!0,value:!1}});var childNode,node=this.node;for(node.nodeValue&&(this.nodeValue=node.nodeValue,node.nodeValue="");null!==(childNode=node.firstChild);)this.childNodes.push(new NodeTyper({targetNode:childNode,parentNode:node,classNames:this.classNames})),node.removeChild(childNode)}return _createClass(NodeTyper,[{key:"finish",value:function(){for(;this.type(!0););return!1}},{key:"type",value:function(flush){if(this.finished)return!1;if(this.appendTo){if(this.appendTo.appendChild(this.node),this.appendTo=null,this.node.nodeType!==Node.ELEMENT_NODE&&this.node.nodeType!==Node.TEXT_NODE||"none"===jQuery(this.node.parentNode).css("display"))return this.finish();this.node.parentNode&&this.classNames&&jQuery(this.node.parentNode).addClass(this.classNames)}if(this.nodeValue){if(flush)this.node.nodeValue+=this.nodeValue,this.nodeValue="";else{var _Util$charAndPosAt=Util.charAndPosAt(this.nodeValue,0),char=_Util$charAndPosAt.char,start=_Util$charAndPosAt.start,end=_Util$charAndPosAt.end;this.node.nodeValue+=char,this.nodeValue=this.nodeValue.slice(1+end-start)}return!0}this.classNames&&(jQuery(this.node.parentNode).removeClass(this.classNames),this.classNames=null);for(var childNodes=this.childNodes;childNodes.length>0;){if(childNodes[0].type())return!0;childNodes.shift()}return this.finished=!0,!1}}]),NodeTyper}();return NodeTyper}(),PRNGWrapper=function(){function PRNGWrapper(seed,useEntropy){_classCallCheck(this,PRNGWrapper),Object.defineProperties(this,new Math.seedrandom(seed,useEntropy,(function(prng,seed){return{_prng:{value:prng},seed:{writable:!0,value:seed},pull:{writable:!0,value:0},random:{value:function(){return++this.pull,this._prng()}}}})))}return _createClass(PRNGWrapper,null,[{key:"marshal",value:function(prng){if(!prng||!prng.hasOwnProperty("seed")||!prng.hasOwnProperty("pull"))throw new Error("PRNG is missing required data");return{seed:prng.seed,pull:prng.pull}}},{key:"unmarshal",value:function(prngObj){if(!prngObj||!prngObj.hasOwnProperty("seed")||!prngObj.hasOwnProperty("pull"))throw new Error("PRNG object is missing required data");for(var prng=new PRNGWrapper(prngObj.seed,!1),i=prngObj.pull;i>0;--i)prng.random();return prng}}]),PRNGWrapper}(),StyleWrapper=(_imageMarkupRe=new RegExp(Patterns.cssImage,"g"),_hasImageMarkupRe=new RegExp(Patterns.cssImage),function(){function StyleWrapper(style){if(_classCallCheck(this,StyleWrapper),null==style)throw new TypeError("StyleWrapper style parameter must be an HTMLStyleElement object");Object.defineProperties(this,{style:{value:style}})}return _createClass(StyleWrapper,[{key:"isEmpty",value:function(){return 0===this.style.cssRules.length}},{key:"set",value:function(rawCss){this.clear(),this.add(rawCss)}},{key:"add",value:function(rawCss){var css=rawCss;_hasImageMarkupRe.test(css)&&(_imageMarkupRe.lastIndex=0,css=css.replace(_imageMarkupRe,(function(wikiImage){var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:wikiImage,matchStart:0});if(markup.hasOwnProperty("error")||markup.pos<wikiImage.length)return wikiImage;var source=markup.source;if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(source=passage.text.trim())}return'url("'.concat(source.replace(/"/g,"%22"),'")')}))),this.style.styleSheet?this.style.styleSheet.cssText+=css:this.style.appendChild(document.createTextNode(css))}},{key:"clear",value:function(){this.style.styleSheet?this.style.styleSheet.cssText="":jQuery(this.style).empty()}}]),StyleWrapper}()),_imageMarkupRe,_hasImageMarkupRe,Diff=(Op=Util.toEnum({Delete:0,SpliceArray:1,Copy:2,CopyDate:3}),Object.freeze(Object.defineProperties({},{Op:{value:Op},diff:{value:function diff(orig,dest){for(var aOpRef,objToString=Object.prototype.toString,origIsArray=orig instanceof Array,keys=[].concat(Object.keys(orig),Object.keys(dest)).sort().filter((function(val,i,arr){return 0===i||arr[i-1]!==val})),diffed={},keyIsAOpRef=function(key){return key===aOpRef},i=0,klen=keys.length;i<klen;++i){var key=keys[i],origP=orig[key],destP=dest[key];if(orig.hasOwnProperty(key))if(dest.hasOwnProperty(key)){if(origP===destP)continue;if(_typeof(origP)===_typeof(destP))if("function"==typeof origP)origP.toString()!==destP.toString()&&(diffed[key]=[Op.Copy,destP]);else if("object"!==_typeof(origP)||null===origP)diffed[key]=[Op.Copy,destP];else{var origPType=objToString.call(origP);if(origPType===objToString.call(destP))if(origP instanceof Date)Number(origP)!==Number(destP)&&(diffed[key]=[Op.Copy,clone(destP)]);else if(origP instanceof Map)diffed[key]=[Op.Copy,clone(destP)];else if(origP instanceof RegExp)origP.toString()!==destP.toString()&&(diffed[key]=[Op.Copy,clone(destP)]);else if(origP instanceof Set)diffed[key]=[Op.Copy,clone(destP)];else if("[object Object]"!==origPType)diffed[key]=[Op.Copy,clone(destP)];else{var recurse=diff(origP,destP);null!==recurse&&(diffed[key]=recurse)}else diffed[key]=[Op.Copy,clone(destP)]}else diffed[key]=[Op.Copy,"object"!==_typeof(destP)||null===destP?destP:clone(destP)]}else if(origIsArray&&Util.isNumeric(key)){var nKey=Number(key);if(!aOpRef){aOpRef="";do{aOpRef+="~"}while(keys.some(keyIsAOpRef));diffed[aOpRef]=[Op.SpliceArray,nKey,nKey]}nKey<diffed[aOpRef][1]&&(diffed[aOpRef][1]=nKey),nKey>diffed[aOpRef][2]&&(diffed[aOpRef][2]=nKey)}else diffed[key]=Op.Delete;else diffed[key]=[Op.Copy,"object"!==_typeof(destP)||null===destP?destP:clone(destP)]}return Object.keys(diffed).length>0?diffed:null}},patch:{value:function patch(orig,diffed){for(var keys=Object.keys(diffed||{}),patched=clone(orig),i=0,klen=keys.length;i<klen;++i){var key=keys[i],diffedP=diffed[key];if(diffedP===Op.Delete)delete patched[key];else if(diffedP instanceof Array)switch(diffedP[0]){case Op.SpliceArray:patched.splice(diffedP[1],diffedP[2]-diffedP[1]+1);break;case Op.Copy:patched[key]=clone(diffedP[1]);break;case Op.CopyDate:patched[key]=new Date(diffedP[1])}else patched[key]=patch(patched[key],diffedP)}return patched}}}))),Op,L10n=(_patternRe=/\{\w+\}/g,_hasPatternRe=new RegExp(_patternRe.source),Object.freeze(Object.defineProperties({},{init:{value:function(){strings&&Object.keys(strings).length>0&&Object.keys(l10nStrings).forEach((function(id){try{var value;switch(id){case"identity":value=strings.identity;break;case"aborting":value=strings.aborting;break;case"cancel":value=strings.cancel;break;case"close":value=strings.close;break;case"ok":value=strings.ok;break;case"errorTitle":value=strings.errors.title;break;case"errorNonexistentPassage":value=strings.errors.nonexistentPassage;break;case"errorSaveMissingData":value=strings.errors.saveMissingData;break;case"errorSaveIdMismatch":value=strings.errors.saveIdMismatch;break;case"warningDegraded":value=strings.warnings.degraded;break;case"debugViewTitle":value=strings.debugView.title;break;case"debugViewToggle":value=strings.debugView.toggle;break;case"uiBarToggle":value=strings.uiBar.toggle;break;case"uiBarBackward":value=strings.uiBar.backward;break;case"uiBarForward":value=strings.uiBar.forward;break;case"uiBarJumpto":value=strings.uiBar.jumpto;break;case"jumptoTitle":value=strings.jumpto.title;break;case"jumptoTurn":value=strings.jumpto.turn;break;case"jumptoUnavailable":value=strings.jumpto.unavailable;break;case"savesTitle":value=strings.saves.title;break;case"savesDisallowed":value=strings.saves.disallowed;break;case"savesIncapable":value=strings.saves.incapable;break;case"savesLabelAuto":value=strings.saves.labelAuto;break;case"savesLabelDelete":value=strings.saves.labelDelete;break;case"savesLabelExport":value=strings.saves.labelExport;break;case"savesLabelImport":value=strings.saves.labelImport;break;case"savesLabelLoad":value=strings.saves.labelLoad;break;case"savesLabelClear":value=strings.saves.labelClear;break;case"savesLabelSave":value=strings.saves.labelSave;break;case"savesLabelSlot":value=strings.saves.labelSlot;break;case"savesUnavailable":value=strings.saves.unavailable;break;case"savesUnknownDate":value=strings.saves.unknownDate;break;case"settingsTitle":value=strings.settings.title;break;case"settingsOff":value=strings.settings.off;break;case"settingsOn":value=strings.settings.on;break;case"settingsReset":value=strings.settings.reset;break;case"restartTitle":value=strings.restart.title;break;case"restartPrompt":value=strings.restart.prompt;break;case"shareTitle":value=strings.share.title;break;case"alertTitle":break;case"autoloadTitle":value=strings.autoload.title;break;case"autoloadCancel":value=strings.autoload.cancel;break;case"autoloadOk":value=strings.autoload.ok;break;case"autoloadPrompt":value=strings.autoload.prompt;break;case"macroBackText":value=strings.macros.back.text;break;case"macroReturnText":value=strings.macros.return.text}value&&(l10nStrings[id]=value.replace(/%\w+%/g,(function(pat){return"{".concat(pat.slice(1,-1),"}")})))}catch(ex){}}))}},get:{value:function(ids,overrides){if(!ids)return"";var selectedId,id=((Array.isArray(ids)?ids:[ids]).some((function(id){return!!l10nStrings.hasOwnProperty(id)&&(selectedId=id,!0)})),selectedId);if(!id)return"";for(var processed=l10nStrings[id],iteration=0;_hasPatternRe.test(processed);){if(++iteration>50)throw new Error("L10n.get exceeded maximum replacement iterations, probable infinite loop");_patternRe.lastIndex=0,processed=processed.replace(_patternRe,(function(pat){var subId=pat.slice(1,-1);return overrides&&overrides.hasOwnProperty(subId)?overrides[subId]:l10nStrings.hasOwnProperty(subId)?l10nStrings[subId]:void 0}))}return processed}}}))),_patternRe,_hasPatternRe,strings={errors:{},warnings:{},debugView:{},uiBar:{},jumpto:{},saves:{},settings:{},restart:{},share:{},autoload:{},macros:{back:{},return:{}}},l10nStrings={identity:"game",aborting:"Aborting",cancel:"Cancel",close:"Close",ok:"OK",errorTitle:"Error",errorToggle:"Toggle the error view",errorNonexistentPassage:'the passage "{passage}" does not exist',errorSaveDiskLoadFailed:"failed to load save file from disk",errorSaveMissingData:"save is missing required data. Either the loaded file is not a save or the save has become corrupted",errorSaveIdMismatch:"save is from the wrong {identity}",_warningIntroLacking:"Your browser either lacks or has disabled",_warningOutroDegraded:", so this {identity} is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",warningNoWebStorage:"{_warningIntroLacking} the Web Storage API{_warningOutroDegraded}",warningDegraded:"{_warningIntroLacking} some of the capabilities required by this {identity}{_warningOutroDegraded}",debugBarToggle:"Toggle the debug bar",debugBarNoWatches:"— no watches set —",debugBarAddWatch:"Add watch",debugBarDeleteWatch:"Delete watch",debugBarWatchAll:"Watch all",debugBarWatchNone:"Delete all",debugBarLabelAdd:"Add",debugBarLabelWatch:"Watch",debugBarLabelTurn:"Turn",debugBarLabelViews:"Views",debugBarViewsToggle:"Toggle the debug views",debugBarWatchToggle:"Toggle the watch panel",uiBarToggle:"Toggle the UI bar",uiBarBackward:"Go backward within the {identity} history",uiBarForward:"Go forward within the {identity} history",uiBarJumpto:"Jump to a specific point within the {identity} history",jumptoTitle:"Jump To",jumptoTurn:"Turn",jumptoUnavailable:"No jump points currently available…",savesTitle:"Saves",savesDisallowed:"Saving has been disallowed on this passage.",savesIncapable:"{_warningIntroLacking} the capabilities required to support saves, so saves have been disabled for this session.",savesLabelAuto:"Autosave",savesLabelDelete:"Delete",savesLabelExport:"Save to Disk…",savesLabelImport:"Load from Disk…",savesLabelLoad:"Load",savesLabelClear:"Delete All",savesLabelSave:"Save",savesLabelSlot:"Slot",savesUnavailable:"No save slots found…",savesUnknownDate:"unknown",settingsTitle:"Settings",settingsOff:"Off",settingsOn:"On",settingsReset:"Reset to Defaults",restartTitle:"Restart",restartPrompt:"Are you sure that you want to restart? Unsaved progress will be lost.",shareTitle:"Share",alertTitle:"Alert",autoloadTitle:"Autoload",autoloadCancel:"Go to start",autoloadOk:"Load autosave",autoloadPrompt:"An autosave exists. Load it now or go to the start?",macroBackText:"Back",macroReturnText:"Return"},Config=(_debug=!1,_addVisitedLinkClass=!1,_cleanupWikifierOutput=!1,_loadDelay=0,_audioPauseOnFadeToZero=!0,_audioPreloadMetadata=!0,_historyControls=!0,_historyMaxStates=40,_macrosIfAssignmentError=!0,_macrosMaxLoopIterations=1e3,_macrosTypeSkipKey=" ",_macrosTypeVisitedPassages=!0,_passagesDisplayTitles=!1,_passagesNobr=!1,_savesId="untitled-story",_savesSlots=8,_savesTryDiskOnMobile=!0,_uiStowBarInitially=800,_uiUpdateStoryElements=!0,_errHistoryModeDeprecated="Config.history.mode has been deprecated and is no longer used by SugarCube, please remove it from your code",Object.freeze({get debug(){return _debug},set debug(value){_debug=Boolean(value)},get addVisitedLinkClass(){return _addVisitedLinkClass},set addVisitedLinkClass(value){_addVisitedLinkClass=Boolean(value)},get cleanupWikifierOutput(){return _cleanupWikifierOutput},set cleanupWikifierOutput(value){_cleanupWikifierOutput=Boolean(value)},get loadDelay(){return _loadDelay},set loadDelay(value){if(!Number.isSafeInteger(value)||value<0)throw new RangeError("Config.loadDelay must be a non-negative integer");_loadDelay=value},audio:Object.freeze({get pauseOnFadeToZero(){return _audioPauseOnFadeToZero},set pauseOnFadeToZero(value){_audioPauseOnFadeToZero=Boolean(value)},get preloadMetadata(){return _audioPreloadMetadata},set preloadMetadata(value){_audioPreloadMetadata=Boolean(value)}}),history:Object.freeze({get controls(){return _historyControls},set controls(value){var controls=Boolean(value);if(1===_historyMaxStates&&controls)throw new Error("Config.history.controls must be false when Config.history.maxStates is 1");_historyControls=controls},get maxStates(){return _historyMaxStates},set maxStates(value){if(!Number.isSafeInteger(value)||value<1)throw new RangeError("Config.history.maxStates must be a positive integer");_historyMaxStates=value,_historyControls&&1===value&&(_historyControls=!1)},get mode(){throw new Error(_errHistoryModeDeprecated)},set mode(_){throw new Error(_errHistoryModeDeprecated)},get tracking(){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")},set tracking(_){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")}}),macros:Object.freeze({get ifAssignmentError(){return _macrosIfAssignmentError},set ifAssignmentError(value){_macrosIfAssignmentError=Boolean(value)},get maxLoopIterations(){return _macrosMaxLoopIterations},set maxLoopIterations(value){if(!Number.isSafeInteger(value)||value<1)throw new RangeError("Config.macros.maxLoopIterations must be a positive integer");_macrosMaxLoopIterations=value},get typeSkipKey(){return _macrosTypeSkipKey},set typeSkipKey(value){_macrosTypeSkipKey=String(value)},get typeVisitedPassages(){return _macrosTypeVisitedPassages},set typeVisitedPassages(value){_macrosTypeVisitedPassages=Boolean(value)}}),navigation:Object.freeze({get override(){return _navigationOverride},set override(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.navigation.override must be a function or null/undefined (received: ".concat(Util.getType(value),")"));_navigationOverride=value}}),passages:Object.freeze({get descriptions(){return _passagesDescriptions},set descriptions(value){if(null!=value){var valueType=Util.getType(value);if("boolean"!==valueType&&"Object"!==valueType&&"function"!==valueType)throw new TypeError("Config.passages.descriptions must be a boolean, object, function, or null/undefined (received: ".concat(valueType,")"))}_passagesDescriptions=value},get displayTitles(){return _passagesDisplayTitles},set displayTitles(value){_passagesDisplayTitles=Boolean(value)},get nobr(){return _passagesNobr},set nobr(value){_passagesNobr=Boolean(value)},get onProcess(){return _passagesOnProcess},set onProcess(value){if(null!=value){var valueType=Util.getType(value);if("function"!==valueType)throw new TypeError("Config.passages.onProcess must be a function or null/undefined (received: ".concat(valueType,")"))}_passagesOnProcess=value},get start(){return _passagesStart},set start(value){if(null!=value){var valueType=Util.getType(value);if("string"!==valueType)throw new TypeError("Config.passages.start must be a string or null/undefined (received: ".concat(valueType,")"))}_passagesStart=value},get transitionOut(){return _passagesTransitionOut},set transitionOut(value){if(null!=value){var valueType=Util.getType(value);if("string"!==valueType&&("number"!==valueType||!Number.isSafeInteger(value)||value<0))throw new TypeError("Config.passages.transitionOut must be a string, non-negative integer, or null/undefined (received: ".concat(valueType,")"))}_passagesTransitionOut=value}}),saves:Object.freeze({get autoload(){return _savesAutoload},set autoload(value){if(null!=value){var valueType=Util.getType(value);if("boolean"!==valueType&&"string"!==valueType&&"function"!==valueType)throw new TypeError("Config.saves.autoload must be a boolean, string, function, or null/undefined (received: ".concat(valueType,")"))}_savesAutoload=value},get autosave(){return _savesAutosave},set autosave(value){if(null!=value){var valueType=Util.getType(value);if("string"===valueType)return void(_savesAutosave=[value]);if("boolean"!==valueType&&("Array"!==valueType||!value.every((function(item){return"string"==typeof item})))&&"function"!==valueType)throw new TypeError("Config.saves.autosave must be a boolean, Array<string>, function, or null/undefined (received: ".concat(valueType).concat("Array"===valueType?"<any>":"",")"))}_savesAutosave=value},get id(){return _savesId},set id(value){if("string"!=typeof value||""===value)throw new TypeError("Config.saves.id must be a non-empty string (received: ".concat(Util.getType(value),")"));_savesId=value},get isAllowed(){return _savesIsAllowed},set isAllowed(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.saves.isAllowed must be a function or null/undefined (received: ".concat(Util.getType(value),")"));_savesIsAllowed=value},get slots(){return _savesSlots},set slots(value){if(!Number.isSafeInteger(value)||value<0)throw new TypeError("Config.saves.slots must be a non-negative integer (received: ".concat(Util.getType(value),")"));_savesSlots=value},get tryDiskOnMobile(){return _savesTryDiskOnMobile},set tryDiskOnMobile(value){_savesTryDiskOnMobile=Boolean(value)},get version(){return _savesVersion},set version(value){_savesVersion=value},get onLoad(){throw new Error("Config.saves.onLoad has been deprecated, use the Save.onLoad API instead")},set onLoad(value){console.warn("Config.saves.onLoad has been deprecated, use the Save.onLoad API instead"),Save.onLoad.add(value)},get onSave(){throw new Error("Config.saves.onSave has been deprecated, use the Save.onSave API instead")},set onSave(value){console.warn("Config.saves.onSave has been deprecated, use the Save.onSave API instead"),Save.onSave.add(value)}}),ui:Object.freeze({get stowBarInitially(){return _uiStowBarInitially},set stowBarInitially(value){var valueType=Util.getType(value);if("boolean"!==valueType&&("number"!==valueType||!Number.isSafeInteger(value)||value<0))throw new TypeError("Config.ui.stowBarInitially must be a boolean or non-negative integer (received: ".concat(valueType,")"));_uiStowBarInitially=value},get updateStoryElements(){return _uiUpdateStoryElements},set updateStoryElements(value){_uiUpdateStoryElements=Boolean(value)}})})),_navigationOverride,_passagesDescriptions,_passagesStart,_passagesOnProcess,_passagesTransitionOut,_savesAutoload,_savesAutosave,_savesIsAllowed,_savesVersion,_debug,_addVisitedLinkClass,_cleanupWikifierOutput,_loadDelay,_audioPauseOnFadeToZero,_audioPreloadMetadata,_historyControls,_historyMaxStates,_macrosIfAssignmentError,_macrosMaxLoopIterations,_macrosTypeSkipKey,_macrosTypeVisitedPassages,_passagesDisplayTitles,_passagesNobr,_savesId,_savesSlots,_savesTryDiskOnMobile,_uiStowBarInitially,_uiUpdateStoryElements,_errHistoryModeDeprecated,SimpleAudio=function(){var _hasPromise,_gestureEventNames=Object.freeze(["click","contextmenu","dblclick","keyup","mouseup","pointerup","touchend"]),_specialIds=Object.freeze([":not",":all",":looped",":muted",":paused",":playing"]),_formatSpecRe=/^([\w-]+)\s*\|\s*(\S.*)$/,_badIdRe=/[:\s]/,_tracks=new Map,_groups=new Map,_lists=new Map,_subscribers=new Map,_masterRate=1,_masterVolume=1,_masterMute=!1,_masterMuteOnHidden=!1,_playReturnsPromise=(_hasPromise=null,function(){if(null!==_hasPromise)return _hasPromise;if(_hasPromise=!1,Has.audio)try{var audio=document.createElement("audio");audio.muted=!0;var value=audio.play();value.catch((function(){})),_hasPromise=value instanceof Promise}catch(ex){}return _hasPromise}),AudioTrack=function(){function AudioTrack(obj){if(_classCallCheck(this,AudioTrack),obj instanceof Array)this._create(obj);else{if(!(obj instanceof AudioTrack))throw new Error("sources parameter must be either an array, of URIs or source objects, or an AudioTrack instance");this._copy(obj)}}return _createClass(AudioTrack,[{key:"_create",value:function(sourceList){var dataUriRe=/^data:\s*audio\/(?:x-)?([^;,]+)\s*[;,]/i,extRe=/\.([^./\\]+)$/,formats=AudioTrack.formats,usedSources=[],audio=document.createElement("audio");audio.preload="none",sourceList.forEach((function(src){var srcUri=null;switch(_typeof(src)){case"string":var match;if("data:"===src.slice(0,5)){if(null===(match=dataUriRe.exec(src)))throw new Error("source data URI missing media type")}else if(null===(match=extRe.exec(Util.parseUrl(src).pathname)))throw new Error("source URL missing file extension");formats[match[1]]&&(srcUri=src);break;case"object":if(null===src)throw new Error("source object cannot be null");if(!src.hasOwnProperty("src"))throw new Error('source object missing required "src" property');if(!src.hasOwnProperty("format"))throw new Error('source object missing required "format" property');formats[src.format]&&(srcUri=src.src);break;default:throw new Error("invalid source value (type: ".concat(_typeof(src),")"))}if(null!==srcUri){var source=document.createElement("source");source.src=srcUri,audio.appendChild(source),usedSources.push(srcUri)}})),audio.hasChildNodes()&&Config.audio.preloadMetadata&&(audio.preload="metadata"),this._finalize(audio,usedSources,clone(sourceList))}},{key:"_copy",value:function(obj){this._finalize(obj.audio.cloneNode(!0),clone(obj.sources),clone(obj.originals))}},{key:"_finalize",value:function(audio,sources,originals){var _this3=this;Object.defineProperties(this,{audio:{configurable:!0,value:audio},sources:{value:Object.freeze(sources)},originals:{value:Object.freeze(originals)},_error:{writable:!0,value:!1},_faderId:{writable:!0,value:null},_mute:{writable:!0,value:!1},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1}}),jQuery(this.audio).on("loadstart.AudioTrack",(function(){return _this3._error=!1})).on("error.AudioTrack",(function(){return _this3._error=!0})).find("source:last-of-type").on("error.AudioTrack",(function(){return _this3._trigger("error")})),function(id,callback){if("function"!=typeof callback)throw new Error("callback parameter must be a function");_subscribers.set(id,callback)}(this,(function(mesg){if(_this3.audio)switch(mesg){case"loadwithscreen":if(_this3.hasSource()){var lockId=LoadScreen.lock();_this3.one("canplaythrough.AudioTrack_loadwithscreen error.AudioTrack_loadwithscreen",(function(){jQuery(this).off(".AudioTrack_loadwithscreen"),LoadScreen.unlock(lockId)})).load()}break;case"load":_this3.load();break;case"mute":_this3._updateAudioMute();break;case"rate":_this3._updateAudioRate();break;case"stop":_this3.stop();break;case"volume":_this3._updateAudioVolume();break;case"unload":_this3.unload()}else unsubscribe(_this3)})),this._updateAudioMute(),this._updateAudioRate(),this._updateAudioVolume()}},{key:"_trigger",value:function(eventName){jQuery(this.audio).triggerHandler(eventName)}},{key:"_destroy",value:function(){unsubscribe(this),this.audio&&(jQuery(this.audio).off(),this.unload(),this._error=!0,delete this.audio)}},{key:"clone",value:function(){return new AudioTrack(this)}},{key:"load",value:function(){var _this4=this;if(this.fadeStop(),this.audio.pause(),!this.audio.hasChildNodes()){if(0===this.sources.length)return;this.sources.forEach((function(srcUri){var source=document.createElement("source");source.src=srcUri,_this4.audio.appendChild(source)}))}"auto"!==this.audio.preload&&(this.audio.preload="auto"),this.isLoading()||this.audio.load()}},{key:"unload",value:function(){this.fadeStop(),this.stop();var audio=this.audio;for(audio.preload="none";audio.hasChildNodes();)audio.removeChild(audio.firstChild);audio.load()}},{key:"play",value:function(){var _this5=this;if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));"auto"!==this.audio.preload&&(this.audio.preload="auto");var namespace=".AudioTrack_play";return _playReturnsPromise()?this.audio.play():new Promise((function(resolve,reject){_this5.isPlaying()?resolve():(jQuery(_this5.audio).off(namespace).one("error".concat(namespace," playing").concat(namespace," timeupdate").concat(namespace),(function(ev){jQuery(_this5).off(namespace),"error"===ev.type?reject(new Error("unknown audio play error")):resolve()})),_this5.audio.play())}))}},{key:"playWhenAllowed",value:function(){var _this6=this;this.play().catch((function(){var gestures=_gestureEventNames.map((function(name){return"".concat(name,".AudioTrack_playWhenAllowed")})).join(" ");jQuery(document).one(gestures,(function(){jQuery(document).off(".AudioTrack_playWhenAllowed"),_this6.audio.play()}))}))}},{key:"pause",value:function(){this.audio.pause()}},{key:"stop",value:function(){this.audio.pause(),this.time(0),this._trigger(":stopped")}},{key:"fade",value:function(duration,toVol,fromVol){var _this7=this;if("number"!=typeof duration)throw new TypeError("duration parameter must be a number");if("number"!=typeof toVol)throw new TypeError("toVolume parameter must be a number");if(null!=fromVol&&"number"!=typeof fromVol)throw new TypeError("fromVolume parameter must be a number");if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));this.fadeStop();var from=Math.clamp(null==fromVol?this.volume():fromVol,0,1),to=Math.clamp(toVol,0,1);return from!==to?(this.volume(from),jQuery(this.audio).off("timeupdate.AudioTrack_fade").one("timeupdate.AudioTrack_fade",(function(){var min,max;from<to?(min=from,max=to):(min=to,max=from);var time=Math.max(duration,1),delta=(to-from)/(time/.025);_this7._trigger(":fading"),_this7._faderId=setInterval((function(){_this7.isPlaying()?(_this7.volume(Math.clamp(_this7.volume()+delta,min,max)),Config.audio.pauseOnFadeToZero&&0===_this7.volume()&&_this7.pause(),_this7.volume()===to&&(_this7.fadeStop(),_this7._trigger(":faded"))):_this7.fadeStop()}),25)})),this.play()):void 0}},{key:"fadeIn",value:function(duration,fromVol){return this.fade(duration,1,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){return this.fade(duration,0,fromVol)}},{key:"fadeStop",value:function(){null!==this._faderId&&(clearInterval(this._faderId),this._faderId=null)}},{key:"loop",value:function(_loop){return null==_loop?this.audio.loop:(this.audio.loop=!!_loop,this)}},{key:"mute",value:function(_mute){return null==_mute?this._mute:(this._mute=!!_mute,this._updateAudioMute(),this)}},{key:"_updateAudioMute",value:function(){this.audio.muted=this._mute||_masterMute}},{key:"rate",value:function(_rate){if(null==_rate)return this._rate;if("number"!=typeof _rate)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(_rate,.2,5),this._updateAudioRate(),this}},{key:"_updateAudioRate",value:function(){this.audio.playbackRate=Math.clamp(this._rate*_masterRate,.2,5)}},{key:"time",value:function(_time){var _this8=this;if(null==_time)return this.audio.currentTime;if("number"!=typeof _time)throw new TypeError("time parameter must be a number");return this.hasMetadata()?this.audio.currentTime=_time:jQuery(this.audio).off("loadedmetadata.AudioTrack_time").one("loadedmetadata.AudioTrack_time",(function(){return _this8.audio.currentTime=_time})),this}},{key:"volume",value:function(_volume){if(null==_volume)return this._volume;if("number"!=typeof _volume)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(_volume,0,1),this._updateAudioVolume(),this}},{key:"_updateAudioVolume",value:function(){this.audio.volume=Math.clamp(this._volume*_masterVolume,0,1)}},{key:"duration",value:function(){return this.audio.duration}},{key:"remaining",value:function(){return this.audio.duration-this.audio.currentTime}},{key:"isFailed",value:function(){return this._error}},{key:"isLoading",value:function(){return this.audio.networkState===HTMLMediaElement.NETWORK_LOADING}},{key:"isUnloaded",value:function(){return!this.audio.hasChildNodes()}},{key:"isUnavailable",value:function(){return!this.hasSource()||this.isUnloaded()||this.isFailed()}},{key:"isPlaying",value:function(){return!this.audio.paused&&this.hasSomeData()}},{key:"isPaused",value:function(){return this.audio.paused&&(this.audio.duration===1/0||this.audio.currentTime>0)&&!this.audio.ended}},{key:"isStopped",value:function(){return this.audio.paused&&0===this.audio.currentTime}},{key:"isEnded",value:function(){return this.audio.ended}},{key:"isFading",value:function(){return null!==this._faderId}},{key:"isSeeking",value:function(){return this.audio.seeking}},{key:"hasSource",value:function(){return this.sources.length>0}},{key:"hasNoData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_NOTHING}},{key:"hasMetadata",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_METADATA}},{key:"hasSomeData",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA}},{key:"hasData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA}},{key:"on",value:function(){for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++)args[_key5]=arguments[_key5];return jQuery.fn.on.apply(jQuery(this.audio),args),this}},{key:"one",value:function(){for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++)args[_key6]=arguments[_key6];return jQuery.fn.one.apply(jQuery(this.audio),args),this}},{key:"off",value:function(){for(var _len7=arguments.length,args=new Array(_len7),_key7=0;_key7<_len7;_key7++)args[_key7]=arguments[_key7];return jQuery.fn.off.apply(jQuery(this.audio),args),this}}]),AudioTrack}();Object.defineProperties(AudioTrack,{formats:{value:function(){var audio=document.createElement("audio"),types=new Map;function canPlay(mimeType){return types.has(mimeType)||types.set(mimeType,""!==audio.canPlayType(mimeType).replace(/^no$/i,"")),types.get(mimeType)}return Object.assign(Object.create(null),{aac:canPlay("audio/aac"),caf:canPlay("audio/x-caf")||canPlay("audio/caf"),flac:canPlay("audio/x-flac")||canPlay("audio/flac"),mp3:canPlay('audio/mpeg; codecs="mp3"')||canPlay("audio/mpeg")||canPlay("audio/mp3")||canPlay("audio/mpa"),mpeg:canPlay("audio/mpeg"),m4a:canPlay("audio/x-m4a")||canPlay("audio/m4a")||canPlay("audio/aac"),mp4:canPlay("audio/x-mp4")||canPlay("audio/mp4")||canPlay("audio/aac"),ogg:canPlay("audio/ogg"),oga:canPlay("audio/ogg"),opus:canPlay('audio/ogg; codecs="opus"')||canPlay("audio/opus"),wav:canPlay('audio/wave; codecs="1"')||canPlay('audio/wav; codecs="1"')||canPlay("audio/wave")||canPlay("audio/wav"),wave:canPlay('audio/wave; codecs="1"')||canPlay('audio/wav; codecs="1"')||canPlay("audio/wave")||canPlay("audio/wav"),weba:canPlay("audio/webm"),webm:canPlay("audio/webm")})}()}});var AudioList=function(){function AudioList(obj){if(_classCallCheck(this,AudioList),obj instanceof Array)this._create(obj);else{if(!(obj instanceof AudioList))throw new Error("tracks parameter must be either an array, of track objects, or an AudioTrack instance");this._copy(obj)}}return _createClass(AudioList,[{key:"_create",value:function(trackList){var _this9=this;this._finalize(trackList.map((function(trackObj){if("object"!==_typeof(trackObj))throw new Error("tracks parameter array members must be objects");var own,rate,track,volume;if(trackObj instanceof AudioTrack)own=!0,rate=trackObj.rate(),track=trackObj.clone(),volume=trackObj.volume();else{if(!trackObj.hasOwnProperty("track"))throw new Error('track object missing required "track" property');if(!(trackObj.track instanceof AudioTrack))throw new Error('track object\'s "track" property must be an AudioTrack object');own=trackObj.hasOwnProperty("own")&&trackObj.own,rate=trackObj.hasOwnProperty("rate")?trackObj.rate:trackObj.track.rate(),track=trackObj.track,volume=trackObj.hasOwnProperty("volume")?trackObj.volume:trackObj.track.volume()}return track.stop(),track.loop(!1),track.mute(!1),track.rate(rate),track.volume(volume),track.on("ended.AudioList",(function(){return _this9._onEnd()})),{own:own,track:track,volume:volume,rate:rate}})))}},{key:"_copy",value:function(obj){this._finalize(clone(obj.tracks))}},{key:"_finalize",value:function(tracks){Object.defineProperties(this,{tracks:{configurable:!0,value:Object.freeze(tracks)},queue:{configurable:!0,value:[]},current:{writable:!0,value:null},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1},_mute:{writable:!0,value:!1},_loop:{writable:!0,value:!1},_shuffle:{writable:!0,value:!1}})}},{key:"_destroy",value:function(){this.stop(),this.tracks.filter((function(trackObj){return trackObj.own})).forEach((function(trackObj){return trackObj.track._destroy()})),delete this.tracks,delete this.queue}},{key:"load",value:function(){this.tracks.forEach((function(trackObj){return trackObj.track.load()}))}},{key:"unload",value:function(){this.stop(),this.tracks.forEach((function(trackObj){return trackObj.track.unload()}))}},{key:"play",value:function(){return null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||(0===this.queue.length&&this._fillQueue(),this._next())?this.current.track.play():Promise.reject(new Error("no tracks were available"))}},{key:"playWhenAllowed",value:function(){var _this10=this;this.play().catch((function(){var gestures=_gestureEventNames.map((function(name){return"".concat(name,".AudioList_playWhenAllowed")})).join(" ");jQuery(document).one(gestures,(function(){jQuery(document).off(".AudioList_playWhenAllowed"),_this10.play()}))}))}},{key:"pause",value:function(){null!==this.current&&this.current.track.pause()}},{key:"stop",value:function(){null!==this.current&&(this.current.track.stop(),this.current=null),this._drainQueue()}},{key:"skip",value:function(){this._next()?this.current.track.play():this._loop&&this.play()}},{key:"fade",value:function(duration,toVol,fromVol){if("number"!=typeof duration)throw new TypeError("duration parameter must be a number");if("number"!=typeof toVol)throw new TypeError("toVolume parameter must be a number");if(null!=fromVol&&"number"!=typeof fromVol)throw new TypeError("fromVolume parameter must be a number");if(0===this.queue.length&&this._fillQueue(),null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||this._next()){var adjFromVol,adjToVol=Math.clamp(toVol,0,1)*this.current.volume;return null!=fromVol&&(adjFromVol=Math.clamp(fromVol,0,1)*this.current.volume),this._volume=toVol,this.current.track.fade(duration,adjToVol,adjFromVol)}}},{key:"fadeIn",value:function(duration,fromVol){return this.fade(duration,1,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){return this.fade(duration,0,fromVol)}},{key:"fadeStop",value:function(){null!==this.current&&this.current.track.fadeStop()}},{key:"loop",value:function(_loop2){return null==_loop2?this._loop:(this._loop=!!_loop2,this)}},{key:"mute",value:function(_mute2){return null==_mute2?this._mute:(this._mute=!!_mute2,null!==this.current&&this.current.track.mute(this._mute),this)}},{key:"rate",value:function(_rate2){if(null==_rate2)return this._rate;if("number"!=typeof _rate2)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(_rate2,.2,5),null!==this.current&&this.current.track.rate(this._rate*this.current.rate),this}},{key:"shuffle",value:function(_shuffle){var _this11=this;if(null==_shuffle)return this._shuffle;if(this._shuffle=!!_shuffle,this.queue.length>0&&(this._fillQueue(),!this._shuffle&&null!==this.current&&this.queue.length>1)){var _this$queue,firstIdx=this.queue.findIndex((function(trackObj){return trackObj===_this11.current}));if(-1!==firstIdx)(_this$queue=this.queue).push.apply(_this$queue,_toConsumableArray(this.queue.splice(0,firstIdx+1)))}return this}},{key:"volume",value:function(_volume2){if(null==_volume2)return this._volume;if("number"!=typeof _volume2)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(_volume2,0,1),null!==this.current&&this.current.track.volume(this._volume*this.current.volume),this}},{key:"duration",value:function(){if(arguments.length>0)throw new Error("duration takes no parameters");return this.tracks.map((function(trackObj){return trackObj.track.duration()})).reduce((function(prev,cur){return prev+cur}),0)}},{key:"remaining",value:function(){if(arguments.length>0)throw new Error("remaining takes no parameters");var remainingTime=this.queue.map((function(trackObj){return trackObj.track.duration()})).reduce((function(prev,cur){return prev+cur}),0);return null!==this.current&&(remainingTime+=this.current.track.remaining()),remainingTime}},{key:"time",value:function(){if(arguments.length>0)throw new Error("time takes no parameters");return this.duration()-this.remaining()}},{key:"isPlaying",value:function(){return null!==this.current&&this.current.track.isPlaying()}},{key:"isPaused",value:function(){return null===this.current||this.current.track.isPaused()}},{key:"isStopped",value:function(){return 0===this.queue.length&&null===this.current}},{key:"isEnded",value:function(){return 0===this.queue.length&&(null===this.current||this.current.track.isEnded())}},{key:"isFading",value:function(){return null!==this.current&&this.current.track.isFading()}},{key:"_next",value:function(){var nextTrack;for(null!==this.current&&(this.current.track.stop(),this.current=null);nextTrack=this.queue.shift();)if(!nextTrack.track.isUnavailable()){this.current=nextTrack;break}return null!==this.current&&(this.current.track.mute(this._mute),this.current.track.rate(this._rate*this.current.rate),this.current.track.volume(this._volume*this.current.volume),this.current.track.loop(!1),!0)}},{key:"_onEnd",value:function(){if(0===this.queue.length){if(!this._loop)return;this._fillQueue()}this._next()&&this.current.track.play()}},{key:"_drainQueue",value:function(){this.queue.splice(0)}},{key:"_fillQueue",value:function(){var _this$queue2;this._drainQueue(),(_this$queue2=this.queue).push.apply(_this$queue2,_toConsumableArray(this.tracks.filter((function(trackObj){return!trackObj.track.isUnavailable()})))),0!==this.queue.length&&this._shuffle&&(this.queue.shuffle(),this.queue.length>1&&this.queue[0]===this.current&&this.queue.push(this.queue.shift()))}}]),AudioList}(),AudioRunner=function(){function AudioRunner(list){if(_classCallCheck(this,AudioRunner),!(list instanceof Set||list instanceof AudioRunner))throw new TypeError("list parameter must be a Set or a AudioRunner instance");Object.defineProperties(this,{trackIds:{value:new Set(list instanceof AudioRunner?list.trackIds:list)}})}return _createClass(AudioRunner,[{key:"load",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.load)}},{key:"unload",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.unload)}},{key:"play",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.play)}},{key:"playWhenAllowed",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.playWhenAllowed)}},{key:"pause",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.pause)}},{key:"stop",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.stop)}},{key:"fade",value:function(duration,toVol,fromVol){if(null==duration||null==toVol)throw new Error("fade requires parameters");AudioRunner._run(this.trackIds,AudioTrack.prototype.fade,duration,toVol,fromVol)}},{key:"fadeIn",value:function(duration,fromVol){if(null==duration)throw new Error("fadeIn requires a parameter");AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeIn,duration,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){if(null==duration)throw new Error("fadeOut requires a parameter");AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeOut,duration,fromVol)}},{key:"fadeStop",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeStop)}},{key:"loop",value:function(_loop3){if(null==_loop3)throw new Error("loop requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.loop,_loop3),this}},{key:"mute",value:function(_mute3){if(null==_mute3)throw new Error("mute requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.mute,_mute3),this}},{key:"rate",value:function(_rate3){if(null==_rate3)throw new Error("rate requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.rate,_rate3),this}},{key:"time",value:function(_time2){if(null==_time2)throw new Error("time requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.time,_time2),this}},{key:"volume",value:function(_volume3){if(null==_volume3)throw new Error("volume requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.volume,_volume3),this}},{key:"on",value:function(){for(var _len8=arguments.length,args=new Array(_len8),_key8=0;_key8<_len8;_key8++)args[_key8]=arguments[_key8];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.on].concat(args)),this}},{key:"one",value:function(){for(var _len9=arguments.length,args=new Array(_len9),_key9=0;_key9<_len9;_key9++)args[_key9]=arguments[_key9];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.one].concat(args)),this}},{key:"off",value:function(){for(var _len10=arguments.length,args=new Array(_len10),_key10=0;_key10<_len10;_key10++)args[_key10]=arguments[_key10];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.off].concat(args)),this}}],[{key:"_run",value:function(ids,fn){for(var _len11=arguments.length,args=new Array(_len11>2?_len11-2:0),_key11=2;_key11<_len11;_key11++)args[_key11-2]=arguments[_key11];ids.forEach((function(id){var track=_tracks.get(id);track&&fn.apply(track,args)}))}}]),AudioRunner}();var _runnerParseSelector=function(){var notWsRe=/\S/g,parenRe=/[()]/g;function processNegation(str,startPos){var match;if(notWsRe.lastIndex=startPos,null===(match=notWsRe.exec(str))||"("!==match[0])throw new Error('invalid ":not()" syntax: missing parentheticals');parenRe.lastIndex=notWsRe.lastIndex;for(var start=notWsRe.lastIndex,result={str:"",nextMatch:-1},depth=1;null!==(match=parenRe.exec(str));)if("("===match[0]?++depth:--depth,depth<1){result.nextMatch=parenRe.lastIndex,result.str=str.slice(start,result.nextMatch-1);break}return result}return function parseSelector(idArg){for(var match,ids=[],idRe=/:?[^\s:()]+/g;null!==(match=idRe.exec(idArg));){var id=match[0];if(":not"===id){if(0===ids.length)throw new Error('invalid negation: no group ID preceded ":not()"');var parent=ids[ids.length-1];if(":"!==parent.id[0])throw new Error('invalid negation of track "'.concat(parent.id,'": only groups may be negated with ":not()"'));var negation=processNegation(idArg,idRe.lastIndex);if(-1===negation.nextMatch)throw new Error('unknown error parsing ":not()"');idRe.lastIndex=negation.nextMatch,parent.not=parseSelector(negation.str)}else ids.push({id:id})}return ids}}();function masterMute(mute){if(null==mute)return _masterMute;publish("mute",_masterMute=!!mute)}function unsubscribe(id){_subscribers.delete(id)}function publish(mesg,data){_subscribers.forEach((function(fn){return fn(mesg,data)}))}function _newTrack(sources){return new AudioTrack(sources.map((function(source){if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);if(passage.tags.includes("Twine.audio"))return passage.text.trim()}var match=_formatSpecRe.exec(source);return null===match?source:{format:match[1],src:match[2]}})))}return Object.freeze(Object.defineProperties({},{tracks:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("track ID"),arguments.length<2&&errors.push("sources"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='track ID "'.concat(id,'"');if(_badIdRe.test(id))throw new Error("invalid ".concat(what,": track IDs must not contain colons or whitespace"));var track,sources=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{track=_newTrack(sources)}catch(ex){throw new Error("".concat(what,": error during track initialization: ").concat(ex.message))}if(Config.debug&&!track.hasSource())throw new Error("".concat(what,": no supported audio sources found"));_tracks.has(id)&&_tracks.get(id)._destroy(),_tracks.set(id,track)}},delete:{value:function(id){return _tracks.has(id)&&_tracks.get(id)._destroy(),_tracks.delete(id)}},clear:{value:function(){_tracks.forEach((function(track){return track._destroy()})),_tracks.clear()}},has:{value:function(id){return _tracks.has(id)}},get:{value:function(id){return _tracks.get(id)||null}}}))},groups:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("group ID"),arguments.length<2&&errors.push("track IDs"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='group ID "'.concat(id,'"');if(":"!==id[0]||_badIdRe.test(id.slice(1)))throw new Error("invalid ".concat(what,": group IDs must start with a colon and must not contain colons or whitespace"));if(_specialIds.includes(id))throw new Error("cannot clobber special ".concat(what));var group,trackIds=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{group=new Set(trackIds.map((function(trackId){if(!_tracks.has(trackId))throw new Error('track "'.concat(trackId,'" does not exist'));return trackId})))}catch(ex){throw new Error("".concat(what,": error during group initialization: ").concat(ex.message))}_groups.set(id,Object.freeze(Array.from(group)))}},delete:{value:function(id){return _groups.delete(id)}},clear:{value:function(){_groups.clear()}},has:{value:function(id){return _groups.has(id)}},get:{value:function(id){return _groups.get(id)||null}}}))},lists:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("list ID"),arguments.length<2&&errors.push("track IDs"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='list ID "'.concat(id,'"');if(_badIdRe.test(id))return this.error("invalid ".concat(what,": list IDs must not contain colons or whitespace"));var list,descriptors=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{list=new AudioList(descriptors.map((function(desc){if(null===desc)throw new Error("track descriptor must be a string or object (type: null)");switch(_typeof(desc)){case"string":desc={id:desc};break;case"object":if(!desc.hasOwnProperty("id")&&!desc.hasOwnProperty("sources"))throw new Error('track descriptor must contain one of either an "id" or a "sources" property');if(desc.hasOwnProperty("id")&&desc.hasOwnProperty("sources"))throw new Error('track descriptor must contain either an "id" or a "sources" property, not both');break;default:throw new Error("track descriptor must be a string or object (type: ".concat(_typeof(desc),")"))}var own,track,volume;if(desc.hasOwnProperty("id")){if("string"!=typeof desc.id)throw new Error('"id" property must be a string');if(!_tracks.has(desc.id))throw new Error('track "'.concat(desc.id,'" does not exist'));track=_tracks.get(desc.id)}else if(desc.hasOwnProperty("sources")){if(!Array.isArray(desc.sources)||0===desc.sources.length)throw new Error('"sources" property must be a non-empty array');if(desc.hasOwnProperty("own"))throw new Error('"own" property is not allowed with the "sources" property');try{track=_newTrack(desc.sources),own=!0}catch(ex){throw new Error("error during track initialization: ".concat(ex.message))}if(Config.debug&&!track.hasSource())throw new Error("no supported audio sources found")}if(desc.hasOwnProperty("own")){if("boolean"!=typeof desc.own)throw new Error('"own" property must be a boolean');(own=desc.own)&&(track=track.clone())}if(desc.hasOwnProperty("volume")){if("number"!=typeof desc.volume||Number.isNaN(desc.volume)||!Number.isFinite(desc.volume)||desc.volume<0)throw new Error('"volume" property must be a non-negative finite number');volume=desc.volume}return{own:null!=own&&own,track:track,volume:null!=volume?volume:track.volume()}})))}catch(ex){throw new Error("".concat(what,": error during playlist initialization: ").concat(ex.message))}_lists.has(id)&&_lists.get(id)._destroy(),_lists.set(id,list)}},delete:{value:function(id){return _lists.has(id)&&_lists.get(id)._destroy(),_lists.delete(id)}},clear:{value:function(){_lists.forEach((function(list){return list._destroy()})),_lists.clear()}},has:{value:function(id){return _lists.has(id)}},get:{value:function(id){return _lists.get(id)||null}}}))},select:{value:function(){if(0===arguments.length)throw new Error("no track selector specified");var selector=String(arguments[0]).trim(),trackIds=new Set;try{var renderIds=function renderIds(idObj){var ids,id=idObj.id;switch(id){case":all":ids=allIds;break;case":looped":ids=allIds.filter((function(id){return _tracks.get(id).loop()}));break;case":muted":ids=allIds.filter((function(id){return _tracks.get(id).mute()}));break;case":paused":ids=allIds.filter((function(id){return _tracks.get(id).isPaused()}));break;case":playing":ids=allIds.filter((function(id){return _tracks.get(id).isPlaying()}));break;default:ids=":"===id[0]?_groups.get(id):[id]}if(idObj.hasOwnProperty("not")){var negated=idObj.not.map((function(idObj){return renderIds(idObj)})).flat(1/0);ids=ids.filter((function(id){return!negated.includes(id)}))}return ids},allIds=Array.from(_tracks.keys());_runnerParseSelector(selector).forEach((function(idObj){return renderIds(idObj).forEach((function(id){if(!_tracks.has(id))throw new Error('track "'.concat(id,'" does not exist'));trackIds.add(id)}))}))}catch(ex){throw new Error("error during runner initialization: ".concat(ex.message))}return new AudioRunner(trackIds)}},load:{value:function(){publish("load")}},loadWithScreen:{value:function(){publish("loadwithscreen")}},mute:{value:masterMute},muteOnHidden:{value:function(mute){if(!Visibility.isEnabled())return!1;if(null==mute)return _masterMuteOnHidden;var namespace=".SimpleAudio_masterMuteOnHidden";if(_masterMuteOnHidden=!!mute){var visibilityChange="".concat(Visibility.changeEvent).concat(namespace);jQuery(document).off(namespace).on(visibilityChange,(function(){return masterMute(Visibility.isHidden())})),Visibility.isHidden()&&masterMute(!0)}else jQuery(document).off(namespace)}},rate:{value:function(rate){if(null==rate)return _masterRate;if("number"!=typeof rate||Number.isNaN(rate)||!Number.isFinite(rate))throw new Error("rate must be a finite number");publish("rate",_masterRate=Math.clamp(rate,.2,5))}},stop:{value:function(){publish("stop")}},unload:{value:function(){publish("unload")}},volume:{value:function(volume){if(null==volume)return _masterVolume;if("number"!=typeof volume||Number.isNaN(volume)||!Number.isFinite(volume))throw new Error("volume must be a finite number");publish("volume",_masterVolume=Math.clamp(volume,0,1))}}}))}(),State=function(){var _history=[],_active=momentCreate(),_activeIndex=-1,_expired=[],_prng=null,_tempVariables={};function stateMarshal(noDelta){var stateObj={index:_activeIndex};return noDelta?stateObj.history=clone(_history):stateObj.delta=historyDeltaEncode(_history),_expired.length>0&&(stateObj.expired=_toConsumableArray(_expired)),null!==_prng&&(stateObj.seed=_prng.seed),stateObj}function stateUnmarshal(stateObj,noDelta){if(null==stateObj)throw new Error("state object is null or undefined");if(!stateObj.hasOwnProperty(noDelta?"history":"delta")||0===stateObj[noDelta?"history":"delta"].length)throw new Error("state object has no history or history is empty");if(!stateObj.hasOwnProperty("index"))throw new Error("state object has no index");if(null!==_prng&&!stateObj.hasOwnProperty("seed"))throw new Error("state object has no seed, but PRNG is enabled");if(null===_prng&&stateObj.hasOwnProperty("seed"))throw new Error("state object has seed, but PRNG is disabled");_history=noDelta?clone(stateObj.history):historyDeltaDecode(stateObj.delta),_activeIndex=stateObj.index,_expired=stateObj.hasOwnProperty("expired")?_toConsumableArray(stateObj.expired):[],stateObj.hasOwnProperty("seed")&&(_prng.seed=stateObj.seed),momentActivate(_activeIndex)}function momentCreate(title,variables){return{title:null==title?"":String(title),variables:null==variables?{}:clone(variables)}}function momentActivate(moment){if(null==moment)throw new Error("moment activation attempted with null or undefined");switch(_typeof(moment)){case"object":_active=clone(moment);break;case"number":if(historyIsEmpty())throw new Error("moment activation attempted with index on empty history");if(moment<0||moment>=historySize())throw new RangeError("moment activation attempted with out-of-bounds index; need [0, ".concat(historySize()-1,"], got ").concat(moment));_active=clone(_history[moment]);break;default:throw new TypeError('moment activation attempted with a "'.concat(_typeof(moment),'"; must be an object or valid history stack index'))}return null!==_prng&&(_prng=PRNGWrapper.unmarshal({seed:_prng.seed,pull:_active.pull})),session.set("state",stateMarshal()),jQuery.event.trigger(":historyupdate"),_active}function historyLength(){return _activeIndex+1}function historySize(){return _history.length}function historyIsEmpty(){return 0===_history.length}function historyTop(){return _history.length>0?_history[_history.length-1]:null}function historyGoTo(index){return!(null==index||index<0||index>=historySize()||index===_activeIndex)&&(momentActivate(_activeIndex=index),!0)}function historyDeltaEncode(historyArr){if(!Array.isArray(historyArr))return null;if(0===historyArr.length)return[];for(var delta=[historyArr[0]],i=1,iend=historyArr.length;i<iend;++i)delta.push(Diff.diff(historyArr[i-1],historyArr[i]));return delta}function historyDeltaDecode(delta){if(!Array.isArray(delta))return null;if(0===delta.length)return[];for(var historyArr=[clone(delta[0])],i=1,iend=delta.length;i<iend;++i)historyArr.push(Diff.patch(historyArr[i-1],delta[i]));return historyArr}function prngInit(seed,useEntropy){var scriptSection;if(!historyIsEmpty())throw scriptSection="the Story JavaScript",new Error("State.prng.init must be called during initialization, within either ".concat(scriptSection," or the StoryInit special passage"));_prng=new PRNGWrapper(seed,useEntropy),_active.pull=_prng.pull}function metadataDelete(key){if("string"!=typeof key)throw new TypeError("State.metadata.delete key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");store&&store.hasOwnProperty(key)&&(1===Object.keys(store).length?storage.delete("metadata"):(delete store[key],storage.set("metadata",store)))}return Object.freeze(Object.defineProperties({},{reset:{value:function(){session.delete("state"),_history=[],_active=momentCreate(),_activeIndex=-1,_expired=[],_prng=null===_prng?null:new PRNGWrapper(_prng.seed,!1)}},restore:{value:function(){if(session.has("state")){var stateObj=session.get("state");return null!=stateObj&&(stateUnmarshal(stateObj),!0)}return!1}},marshalForSave:{value:function(){return stateMarshal(!0)}},unmarshalForSave:{value:function(stateObj){return stateUnmarshal(stateObj,!0)}},expired:{get:function(){return _expired}},turns:{get:function(){return _expired.length+historyLength()}},passages:{get:function(){return _expired.concat(_history.slice(0,historyLength()).map((function(moment){return moment.title})))}},hasPlayed:{value:function(title){return null!=title&&""!==title&&(!!_expired.includes(title)||!!_history.slice(0,historyLength()).some((function(moment){return moment.title===title})))}},active:{get:function(){return _active}},activeIndex:{get:function(){return _activeIndex}},passage:{get:function(){return _active.title}},variables:{get:function(){return _active.variables}},history:{get:function(){return _history}},length:{get:historyLength},size:{get:historySize},isEmpty:{value:historyIsEmpty},current:{get:function(){return _history.length>0?_history[_activeIndex]:null}},top:{get:historyTop},bottom:{get:function(){return _history.length>0?_history[0]:null}},index:{value:function(index){return historyIsEmpty()||index<0||index>_activeIndex?null:_history[index]}},peek:{value:function(offset){if(historyIsEmpty())return null;var lengthOffset=1+(offset?Math.abs(offset):0);return lengthOffset>historyLength()?null:_history[historyLength()-lengthOffset]}},has:{value:function(title){if(historyIsEmpty()||null==title||""===title)return!1;for(var i=_activeIndex;i>=0;--i)if(_history[i].title===title)return!0;return!1}},create:{value:function(title){for(0,historyLength()<historySize()&&_history.splice(historyLength(),historySize()-historyLength()),_history.push(momentCreate(title,_active.variables)),_prng&&(historyTop().pull=_prng.pull);historySize()>Config.history.maxStates;)_expired.push(_history.shift().title);return momentActivate(_activeIndex=historySize()-1),historyLength()}},goTo:{value:historyGoTo},go:{value:function(offset){return null!=offset&&0!==offset&&historyGoTo(_activeIndex+offset)}},deltaEncode:{value:historyDeltaEncode},deltaDecode:{value:historyDeltaDecode},prng:{value:Object.freeze(Object.defineProperties({},{init:{value:prngInit},isEnabled:{value:function(){return null!==_prng}},pull:{get:function(){return _prng?_prng.pull:NaN}},seed:{get:function(){return _prng?_prng.seed:null}}}))},random:{value:function(){return _prng?_prng.random():Math.random()}},clearTemporary:{value:function(){TempVariables=_tempVariables={}}},temporary:{get:function(){return _tempVariables}},getVar:{value:function(varExpression){try{return Scripting.evalTwineScript(varExpression)}catch(ex){}}},setVar:{value:function(varExpression,value){try{return Scripting.evalTwineScript("".concat(varExpression," = evalTwineScript$Data$"),null,value),!0}catch(ex){}return!1}},metadata:{value:Object.freeze(Object.defineProperties({},{clear:{value:function(){storage.delete("metadata")}},delete:{value:metadataDelete},entries:{value:function(){var store=storage.get("metadata");return store&&Object.entries(store)}},get:{value:function(key){if("string"!=typeof key)throw new TypeError("State.metadata.get key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");return store&&store.hasOwnProperty(key)?store[key]:undefined}},has:{value:function(key){if("string"!=typeof key)throw new TypeError("State.metadata.has key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");return store&&store.hasOwnProperty(key)}},keys:{value:function(){var store=storage.get("metadata");return store&&Object.keys(store)}},set:{value:function(key,value){if("string"!=typeof key)throw new TypeError("State.metadata.set key parameter must be a string (received: ".concat(_typeof(key),")"));if(void 0===value)metadataDelete(key);else{var store=storage.get("metadata")||{};store[key]=value,storage.set("metadata",store)}}},size:{get:function(){var store=storage.get("metadata");return store?Object.keys(store).length:0}}}))},initPRNG:{value:prngInit},restart:{value:function(){return Engine.restart()}},backward:{value:function(){return Engine.backward()}},forward:{value:function(){return Engine.forward()}},display:{value:function(){return Engine.display.apply(Engine,arguments)}},show:{value:function(){return Engine.show.apply(Engine,arguments)}},play:{value:function(){return Engine.play.apply(Engine,arguments)}}}))}(),Scripting=function(){function addAccessibleClickHandler(targets,selector,handler,one,namespace){if(arguments.length<2)throw new Error("addAccessibleClickHandler insufficient number of parameters");var fn,opts;if("function"==typeof selector?(fn=selector,opts={namespace:one,one:!!handler}):(fn=handler,opts={namespace:namespace,one:!!one,selector:selector}),"function"!=typeof fn)throw new TypeError("addAccessibleClickHandler handler parameter must be a function");return jQuery(targets).ariaClick(opts,fn)}function insertElement(place,type,id,classNames,text,title){var $el=jQuery(document.createElement(type));return id&&$el.attr("id",id),classNames&&$el.addClass(classNames),title&&$el.attr("title",title),text&&$el.text(text),place&&$el.appendTo(place),$el[0]}function insertText(place,text){jQuery(place).append(document.createTextNode(text))}function removeChildren(node){jQuery(node).empty()}function removeElement(node){jQuery(node).remove()}function fade(el,options){var current,intervalId,direction="in"===options.fade?1:-1,proxy=el.cloneNode(!0);function setOpacity(el,opacity){el.style.zoom=1,el.style.filter="alpha(opacity=".concat(Math.floor(100*opacity),")"),el.style.opacity=opacity}el.parentNode.replaceChild(proxy,el),"in"===options.fade?(current=0,proxy.style.visibility="visible"):current=1,setOpacity(proxy,current),intervalId=window.setInterval((function(){current+=.05*direction,setOpacity(proxy,Math.easeInOut(current)),(1===direction&&current>=1||-1===direction&&current<=0)&&(el.style.visibility="in"===options.fade?"visible":"hidden",proxy.parentNode.replaceChild(el,proxy),proxy=null,window.clearInterval(intervalId),options.onComplete&&options.onComplete())}),25)}function scrollWindowTo(el,incrementBy){var increment=null!=incrementBy?Number(incrementBy):.1;Number.isNaN(increment)||!Number.isFinite(increment)||increment<0?increment=.1:increment>1&&(increment=1);var intervalId,start=window.scrollY?window.scrollY:document.body.scrollTop,end=function(el){var posTop=function(el){var curtop=0;for(;el.offsetParent;)curtop+=el.offsetTop,el=el.offsetParent;return curtop}(el),posBottom=posTop+el.offsetHeight,winTop=window.scrollY?window.scrollY:document.body.scrollTop,winHeight=window.innerHeight?window.innerHeight:document.body.clientHeight,winBottom=winTop+winHeight;return posTop>=winTop&&posBottom>winBottom&&el.offsetHeight<winHeight?posTop-(winHeight-el.offsetHeight)+20:posTop}(el),distance=Math.abs(start-end),direction=start>end?-1:1,progress=0;intervalId=window.setInterval((function(){progress+=increment,window.scroll(0,start+direction*(distance*Math.easeInOut(progress))),progress>=1&&window.clearInterval(intervalId)}),25)}function toStringOrDefault(value){return stringFrom(value)}function either(){if(0!==arguments.length)return Array.prototype.concat.apply([],arguments).random()}function forget(key){if("string"!=typeof key)throw new TypeError("forget key parameter must be a string (received: ".concat(Util.getType(key),")"));State.metadata.delete(key)}function hasVisited(){if(0===arguments.length)throw new Error("hasVisited called with insufficient parameters");if(State.isEmpty())return!1;for(var needles=Array.prototype.concat.apply([],arguments),played=State.passages,i=0,iend=needles.length;i<iend;++i)if(!played.includes(needles[i]))return!1;return!0}function lastVisited(){if(0===arguments.length)throw new Error("lastVisited called with insufficient parameters");if(State.isEmpty())return-1;for(var needles=Array.prototype.concat.apply([],arguments),played=State.passages,uBound=played.length-1,turns=State.turns,i=0,iend=needles.length;i<iend&&turns>-1;++i){var lastIndex=played.lastIndexOf(needles[i]);turns=Math.min(turns,-1===lastIndex?-1:uBound-lastIndex)}return turns}function memorize(key,value){if("string"!=typeof key)throw new TypeError("memorize key parameter must be a string (received: ".concat(Util.getType(key),")"));State.metadata.set(key,value)}function passage(){return State.passage}function previous(){var passages=State.passages;if(arguments.length>0){var offset=Number(arguments[0]);if(!Number.isSafeInteger(offset)||offset<1)throw new RangeError("previous offset parameter must be a positive integer greater than zero");return passages.length>offset?passages[passages.length-1-offset]:""}for(var i=passages.length-2;i>=0;--i)if(passages[i]!==State.passage)return passages[i];return""}function random(){var min,max;switch(arguments.length){case 0:throw new Error("random called with insufficient parameters");case 1:min=0,max=Math.trunc(arguments[0]);break;default:min=Math.trunc(arguments[0]),max=Math.trunc(arguments[1])}if(!Number.isInteger(min))throw new Error("random min parameter must be an integer");if(!Number.isInteger(max))throw new Error("random max parameter must be an integer");if(min>max){var _ref6=[max,min];min=_ref6[0],max=_ref6[1]}return Math.floor(State.random()*(max-min+1))+min}function randomFloat(){var min,max;switch(arguments.length){case 0:throw new Error("randomFloat called with insufficient parameters");case 1:min=0,max=Number(arguments[0]);break;default:min=Number(arguments[0]),max=Number(arguments[1])}if(Number.isNaN(min)||!Number.isFinite(min))throw new Error("randomFloat min parameter must be a number");if(Number.isNaN(max)||!Number.isFinite(max))throw new Error("randomFloat max parameter must be a number");if(min>max){var _ref7=[max,min];min=_ref7[0],max=_ref7[1]}return State.random()*(max-min)+min}function recall(key,defaultValue){if("string"!=typeof key)throw new TypeError("recall key parameter must be a string (received: ".concat(Util.getType(key),")"));return State.metadata.has(key)?State.metadata.get(key):defaultValue}function tags(){if(0===arguments.length)return Story.get(State.passage).tags.slice(0);for(var passages=Array.prototype.concat.apply([],arguments),tags=[],i=0,iend=passages.length;i<iend;++i)tags=tags.concat(Story.get(passages[i]).tags);return tags}function temporary(){return State.temporary}function time(){return null===Engine.lastPlay?0:Util.now()-Engine.lastPlay}function turns(){return State.turns}function variables(){return State.variables}function visited(){if(State.isEmpty())return 0;for(var needles=Array.prototype.concat.apply([],0===arguments.length?[State.passage]:arguments),played=State.passages,count=State.turns,i=0,iend=needles.length;i<iend&&count>0;++i)count=Math.min(count,played.count(needles[i]));return count}function visitedTags(){if(0===arguments.length)throw new Error("visitedTags called with insufficient parameters");if(State.isEmpty())return 0;for(var needles=Array.prototype.concat.apply([],arguments),nLength=needles.length,played=State.passages,seen=new Map,count=0,i=0,iend=played.length;i<iend;++i){var title=played[i];if(seen.has(title))seen.get(title)&&++count;else{var _tags2=Story.get(title).tags;if(_tags2.length>0){for(var found=0,j=0;j<nLength;++j)_tags2.includes(needles[j])&&++found;found===nLength?(++count,seen.set(title,!0)):seen.set(title,!1)}}}return count}var _ref8=function(){function slugifyUrl(url){return Util.parseUrl(url).path.replace(/^[^\w]+|[^\w]+$/g,"").replace(/[^\w]+/g,"-").toLocaleLowerCase()}function addScript(url){return new Promise((function(resolve,reject){jQuery(document.createElement("script")).one("load abort error",(function(ev){jQuery(ev.target).off(),"load"===ev.type?resolve(ev.target):reject(new Error('importScripts failed to load the script "'.concat(url,'".')))})).appendTo(document.head).attr({id:"script-imported-".concat(slugifyUrl(url)),type:"text/javascript",src:url})}))}function addStyle(url){return new Promise((function(resolve,reject){jQuery(document.createElement("link")).one("load abort error",(function(ev){jQuery(ev.target).off(),"load"===ev.type?resolve(ev.target):reject(new Error('importStyles failed to load the stylesheet "'.concat(url,'".')))})).appendTo(document.head).attr({id:"style-imported-".concat(slugifyUrl(url)),rel:"stylesheet",href:url})}))}function sequence(callbacks){return callbacks.reduce((function(seq,fn){return seq.then(fn)}),Promise.resolve())}return{importScripts:function(){for(var _len12=arguments.length,urls=new Array(_len12),_key12=0;_key12<_len12;_key12++)urls[_key12]=arguments[_key12];return Promise.all(urls.map((function(oneOrSeries){return Array.isArray(oneOrSeries)?sequence(oneOrSeries.map((function(url){return function(){return addScript(url)}}))):addScript(oneOrSeries)})))},importStyles:function(){for(var _len13=arguments.length,urls=new Array(_len13),_key13=0;_key13<_len13;_key13++)urls[_key13]=arguments[_key13];return Promise.all(urls.map((function(oneOrSeries){return Array.isArray(oneOrSeries)?sequence(oneOrSeries.map((function(url){return function(){return addStyle(url)}}))):addStyle(oneOrSeries)})))}}}(),importScripts=_ref8.importScripts,importStyles=_ref8.importStyles,parse=function(){var tokenTable=Util.toEnum({$:"State.variables.",_:"State.temporary.",to:"=",eq:"==",neq:"!=",is:"===",isnot:"!==",gt:">",gte:">=",lt:"<",lte:"<=",and:"&&",or:"||",not:"!",def:'"undefined" !== typeof',ndef:'"undefined" === typeof'}),parseRe=new RegExp(["(?:\"\"|''|``)",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(`(?:\\\\.|[^`\\\\])+`)","(?:[=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)","([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+)"].join("|"),"g"),notSpaceRe=/\S/,varTest=new RegExp("^".concat(Patterns.variable)),withColonTestRe=/^\s*:/,withNotTestRe=/^\s+not\b/;function parse(rawCodeString){if(0!==parseRe.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start");for(var match,code=rawCodeString;null!==(match=parseRe.exec(code));)if(match[1]){var rawTemplate=match[1],parsedTemplate=parseTemplate(rawTemplate);parsedTemplate!==rawTemplate&&(code=code.splice(match.index,rawTemplate.length,parsedTemplate),parseRe.lastIndex+=parsedTemplate.length-rawTemplate.length)}else if(match[2]){var token=match[2];if("$"===token||"_"===token)continue;if(varTest.test(token))token=token[0];else if("is"===token){var start=parseRe.lastIndex,ahead=code.slice(start);withNotTestRe.test(ahead)&&(code=code.splice(start,ahead.search(notSpaceRe)),token="isnot")}else{var _ahead=code.slice(parseRe.lastIndex);if(withColonTestRe.test(_ahead))continue}tokenTable[token]&&(code=code.splice(match.index,token.length,tokenTable[token]),parseRe.lastIndex+=tokenTable[token].length-token.length)}return code}var templateGroupStartRe=/\$\{/g,templateGroupParseRe=new RegExp(["(?:\"\"|'')",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(\\{)","(\\})"].join("|"),"g");function parseTemplate(rawTemplateLiteral){if(0!==templateGroupStartRe.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start of template literal");for(var startMatch,template=rawTemplateLiteral;null!==(startMatch=templateGroupStartRe.exec(template));){var startIdx=startMatch.index+2,endIdx=startIdx,depth=1,endMatch=void 0;for(templateGroupParseRe.lastIndex=startIdx;null!==(endMatch=templateGroupParseRe.exec(template));)if(endMatch[1]?++depth:endMatch[2]&&--depth,0===depth){endIdx=endMatch.index;break}if(endIdx>startIdx){var parseIndex=parseRe.lastIndex,rawGroup=template.slice(startIdx,endIdx);parseRe.lastIndex=0;var parsedGroup=parse(rawGroup);parseRe.lastIndex=parseIndex,template=template.splice(startIdx,rawGroup.length,parsedGroup),templateGroupStartRe.lastIndex+=parsedGroup.length-rawGroup.length}}return template}return parse}();function evalJavaScript(code,output,data){return function(code,output,evalJavaScript$Data$){return eval(code)}.call(output?{output:output}:null,String(code),output,data)}function evalTwineScript(code,output,data){return function(code,output,evalTwineScript$Data$){return eval(code)}.call(output?{output:output}:null,parse(String(code)),output,data)}return Object.freeze(Object.defineProperties({},{parse:{value:parse},evalJavaScript:{value:evalJavaScript},evalTwineScript:{value:evalTwineScript}}))}(),_ref9=function(){var Lexer=function(){function Lexer(source,initialState){if(_classCallCheck(this,Lexer),arguments.length<2)throw new Error("Lexer constructor called with too few parameters (source:string , initialState:function)");Object.defineProperties(this,{source:{value:source},initial:{value:initialState},state:{writable:!0,value:initialState},start:{writable:!0,value:0},pos:{writable:!0,value:0},depth:{writable:!0,value:0},items:{writable:!0,value:[]},data:{writable:!0,value:{}}})}return _createClass(Lexer,[{key:"reset",value:function(){this.state=this.initial,this.start=0,this.pos=0,this.depth=0,this.items=[],this.data={}}},{key:"run",value:function(){for(;null!==this.state;)this.state=this.state(this);return this.items}},{key:"nextItem",value:function(){for(;0===this.items.length&&null!==this.state;)this.state=this.state(this);return this.items.shift()}},{key:"next",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos++]}},{key:"peek",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos]}},{key:"backup",value:function(num){this.pos-=num||1}},{key:"forward",value:function(num){this.pos+=num||1}},{key:"ignore",value:function(){this.start=this.pos}},{key:"accept",value:function(valid){var ch=this.next();return-1!==ch&&(!!valid.includes(ch)||(this.backup(),!1))}},{key:"acceptRe",value:function(validRe){var ch=this.next();return-1!==ch&&(!!validRe.test(ch)||(this.backup(),!1))}},{key:"acceptRun",value:function(valid){for(;;){var ch=this.next();if(-1===ch)return;if(!valid.includes(ch))break}this.backup()}},{key:"acceptRunRe",value:function(validRe){for(;;){var ch=this.next();if(-1===ch)return;if(!validRe.test(ch))break}this.backup()}},{key:"emit",value:function(type){this.items.push({type:type,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),this.start=this.pos}},{key:"error",value:function(type,message){if(arguments.length<2)throw new Error("Lexer.prototype.error called with too few parameters (type:number , message:string)");return this.items.push({type:type,message:message,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),null}}],[{key:"enumFromNames",value:function(names){var obj=names.reduce((function(obj,name,i){return obj[name]=i,obj}),{});return Object.freeze(Object.assign(Object.create(null),obj))}}]),Lexer}();return{EOF:-1,Lexer:Lexer}}(),EOF=_ref9.EOF,Lexer=_ref9.Lexer,Wikifier=function(){var _optionsStack,lookaheadRe,idOrClassRe,_callDepth=0,Wikifier=function(){function Wikifier(destination,source,options){_classCallCheck(this,Wikifier),Wikifier.Parser.Profile.isEmpty()&&Wikifier.Parser.Profile.compile(),Object.defineProperties(this,{source:{value:String(source)},options:{writable:!0,value:Object.assign({profile:"all"},options)},nextMatch:{writable:!0,value:0},output:{writable:!0,value:null},_rawArgs:{writable:!0,value:""}}),null==destination?this.output=document.createDocumentFragment():destination.jquery?this.output=destination[0]:this.output=destination;try{++_callDepth,this.subWikify(this.output),1===_callDepth&&Config.cleanupWikifierOutput&&convertBreaks(this.output)}finally{--_callDepth}}return _createClass(Wikifier,[{key:"subWikify",value:function(output,terminator,options){var newOptions,oldOptions,oldOutput=this.output;this.output=output,Wikifier.Option.length>0&&(newOptions=Object.assign(newOptions||{},Wikifier.Option.options)),null!==options&&"object"===_typeof(options)&&(newOptions=Object.assign(newOptions||{},options)),newOptions&&(oldOptions=this.options,this.options=Object.assign({},this.options,newOptions));var terminatorMatch,parserMatch,parsersProfile=Wikifier.Parser.Profile.get(this.options.profile),terminatorRegExp=terminator?new RegExp("(?:".concat(terminator,")"),this.options.ignoreTerminatorCase?"gim":"gm"):null;do{if(parsersProfile.parserRegExp.lastIndex=this.nextMatch,terminatorRegExp&&(terminatorRegExp.lastIndex=this.nextMatch),parserMatch=parsersProfile.parserRegExp.exec(this.source),(terminatorMatch=terminatorRegExp?terminatorRegExp.exec(this.source):null)&&(!parserMatch||terminatorMatch.index<=parserMatch.index))return terminatorMatch.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,terminatorMatch.index),this.matchStart=terminatorMatch.index,this.matchLength=terminatorMatch[0].length,this.matchText=terminatorMatch[0],this.nextMatch=terminatorRegExp.lastIndex,this.output=oldOutput,void(oldOptions&&(this.options=oldOptions));if(parserMatch){parserMatch.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,parserMatch.index),this.matchStart=parserMatch.index,this.matchLength=parserMatch[0].length,this.matchText=parserMatch[0],this.nextMatch=parsersProfile.parserRegExp.lastIndex;for(var matchingParser=void 0,i=1,iend=parserMatch.length;i<iend;++i)if(parserMatch[i]){matchingParser=i-1;break}if(parsersProfile.parsers[matchingParser].handler(this),null!=TempState.break)break}}while(terminatorMatch||parserMatch);null==TempState.break?this.nextMatch<this.source.length&&(this.outputText(this.output,this.nextMatch,this.source.length),this.nextMatch=this.source.length):this.output.lastChild&&this.output.lastChild.nodeType===Node.ELEMENT_NODE&&"BR"===this.output.lastChild.nodeName.toUpperCase()&&jQuery(this.output.lastChild).remove(),this.output=oldOutput,oldOptions&&(this.options=oldOptions)}},{key:"outputText",value:function(destination,startPos,endPos){jQuery(destination).append(document.createTextNode(this.source.substring(startPos,endPos)))}},{key:"rawArgs",value:function(){return this._rawArgs}},{key:"fullArgs",value:function(){return Scripting.parse(this._rawArgs)}}],[{key:"wikifyEval",value:function(text){var output=document.createDocumentFragment();new Wikifier(output,text);var errors=output.querySelector(".error");if(null!==errors)throw new Error(errors.textContent.replace(errorPrologRegExp,""));return output}},{key:"createInternalLink",value:function(destination,passage,text,callback){var $link=jQuery(document.createElement("a"));return null!=passage&&($link.attr("data-passage",passage),Story.has(passage)?($link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&$link.addClass("link-visited")):$link.addClass("link-broken"),$link.ariaClick({one:!0},(function(){"function"==typeof callback&&callback(),Engine.play(passage)}))),text&&$link.append(document.createTextNode(text)),destination&&$link.appendTo(destination),$link[0]}},{key:"createExternalLink",value:function(destination,url,text){var $link=jQuery(document.createElement("a")).attr("target","_blank").addClass("link-external").text(text).appendTo(destination);return null!=url&&$link.attr({href:url,tabindex:0}),$link[0]}},{key:"isExternalLink",value:function(link){return!Story.has(link)&&(new RegExp("^".concat(Patterns.url),"gim").test(link)||/[/.?#]/.test(link))}}]),Wikifier}();return Object.defineProperty(Wikifier,"Option",{value:(_optionsStack=[],Object.freeze(Object.defineProperties({},{length:{get:function(){return _optionsStack.length}},options:{get:function(){return Object.assign.apply(Object,[{}].concat(_toConsumableArray(_optionsStack)))}},clear:{value:function(){_optionsStack=[]}},get:{value:function(idx){return _optionsStack[idx]}},pop:{value:function(){return _optionsStack.pop()}},push:{value:function(options){if("object"!==_typeof(options)||null===options)throw new TypeError("Wikifier.Option.push options parameter must be an object (received: ".concat(Util.getType(options),")"));return _optionsStack.push(options)}}})))}),Object.defineProperty(Wikifier,"Parser",{value:function(){var _profiles,_parsers=[];function parsersHas(name){return!!_parsers.find((function(parser){return parser.name===name}))}return Object.freeze(Object.defineProperties({},{parsers:{get:function(){return _parsers}},add:{value:function(parser){if("object"!==_typeof(parser))throw new Error("Wikifier.Parser.add parser parameter must be an object");if(!parser.hasOwnProperty("name"))throw new Error('parser object missing required "name" property');if("string"!=typeof parser.name)throw new Error('parser object "name" property must be a string');if(!parser.hasOwnProperty("match"))throw new Error('parser object missing required "match" property');if("string"!=typeof parser.match)throw new Error('parser object "match" property must be a string');if(!parser.hasOwnProperty("handler"))throw new Error('parser object missing required "handler" property');if("function"!=typeof parser.handler)throw new Error('parser object "handler" property must be a function');if(parser.hasOwnProperty("profiles")&&!Array.isArray(parser.profiles))throw new Error('parser object "profiles" property must be an array');if(parsersHas(parser.name))throw new Error('cannot clobber existing parser "'.concat(parser.name,'"'));_parsers.push(parser)}},delete:{value:function(name){var parser=_parsers.find((function(parser){return parser.name===name}));parser&&_parsers.delete(parser)}},isEmpty:{value:function(){return 0===_parsers.length}},has:{value:parsersHas},get:{value:function(name){return _parsers.find((function(parser){return parser.name===name}))||null}},Profile:{value:Object.freeze(Object.defineProperties({},{profiles:{get:function(){return _profiles}},compile:{value:function(){var all=_parsers,core=all.filter((function(parser){return!Array.isArray(parser.profiles)||parser.profiles.includes("core")}));return _profiles=Object.freeze({all:{parsers:all,parserRegExp:new RegExp(all.map((function(parser){return"(".concat(parser.match,")")})).join("|"),"gm")},core:{parsers:core,parserRegExp:new RegExp(core.map((function(parser){return"(".concat(parser.match,")")})).join("|"),"gm")}})}},isEmpty:{value:function(){return"object"!==_typeof(_profiles)||0===Object.keys(_profiles).length}},has:{value:function(profile){return"object"===_typeof(_profiles)&&_profiles.hasOwnProperty(profile)}},get:{value:function(profile){if("object"!==_typeof(_profiles)||!_profiles.hasOwnProperty(profile))throw new Error('nonexistent parser profile "'.concat(profile,'"'));return _profiles[profile]}}}))}}))}()}),Object.defineProperties(Wikifier,{helpers:{value:{}},getValue:{value:State.getVar},setValue:{value:State.setVar},parse:{value:Scripting.parse},evalExpression:{value:Scripting.evalTwineScript},evalStatements:{value:Scripting.evalTwineScript},textPrimitives:{value:Patterns}}),Object.defineProperties(Wikifier.helpers,{inlineCss:{value:(lookaheadRe=new RegExp(Patterns.inlineCss,"gm"),idOrClassRe=new RegExp("(".concat(Patterns.cssIdOrClassSigil,")(").concat(Patterns.anyLetter,"+)"),"g"),function(w){var matched,css={classes:[],id:"",styles:{}};do{lookaheadRe.lastIndex=w.nextMatch;var match=lookaheadRe.exec(w.source);if(matched=match&&match.index===w.nextMatch){if(match[1])css.styles[Util.fromCssProperty(match[1])]=match[2].trim();else if(match[3])css.styles[Util.fromCssProperty(match[3])]=match[4].trim();else if(match[5]){var subMatch=void 0;for(idOrClassRe.lastIndex=0;null!==(subMatch=idOrClassRe.exec(match[5]));)"."===subMatch[1]?css.classes.push(subMatch[2]):css.id=subMatch[2]}w.nextMatch=lookaheadRe.lastIndex}}while(matched);return css})},evalText:{value:function(text){var result;try{switch(_typeof(result=Scripting.evalTwineScript(text))){case"string":""===result.trim()&&(result=text);break;case"number":result=String(result);break;default:result=text}}catch(ex){result=text}return result}},evalPassageId:{value:function(passage){return null==passage||Story.has(passage)?passage:Wikifier.helpers.evalText(passage)}},hasBlockContext:{value:function(nodes){for(var hasGCS="function"==typeof window.getComputedStyle,i=nodes.length-1;i>=0;--i){var node=nodes[i];switch(node.nodeType){case Node.ELEMENT_NODE:var tagName=node.nodeName.toUpperCase();if("BR"===tagName)return!0;var styles=hasGCS?window.getComputedStyle(node,null):node.currentStyle;if(styles&&styles.display){if("none"===styles.display)continue;return"block"===styles.display}switch(tagName){case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":return!0}return!1;case Node.COMMENT_NODE:continue;default:return!1}}return!0}},createShadowSetterCallback:{value:function(){var macroParser=null;function getMacroContextShadowView(){for(var macro=macroParser||function(){if(!macroParser&&!(macroParser=Wikifier.Parser.get("macro")))throw new Error('cannot find "macro" parser');return macroParser}(),view=new Set,context=macro.context;null!==context;context=context.parent)context._shadows&&context._shadows.forEach((function(name){return view.add(name)}));return _toConsumableArray(view)}return function(code){var shadowStore={};return getMacroContextShadowView().forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey]})),function(){var shadowNames=Object.keys(shadowStore),valueCache=shadowNames.length>0?{}:null;try{return shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),store[varKey]=shadowStore[varName]})),Scripting.evalJavaScript(code)}finally{shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey],valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}}}()},parseSquareBracketedMarkup:{value:function(){var Item=Lexer.enumFromNames(["Error","DelimLTR","DelimRTL","InnerMeta","ImageMeta","LinkMeta","Link","RightMeta","Setter","Source","Text"]),Delim=Lexer.enumFromNames(["None","LTR","RTL"]);function slurpQuote(lexer,endQuote){loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return EOF;case endQuote:break loop}return lexer.pos}function lexLeftMeta(lexer){if(!lexer.accept("["))return lexer.error(Item.Error,"malformed square-bracketed markup");if(lexer.accept("["))lexer.data.isLink=!0,lexer.emit(Item.LinkMeta);else{if(lexer.accept("<>"),!(lexer.accept("Ii")&&lexer.accept("Mm")&&lexer.accept("Gg")&&lexer.accept("[")))return lexer.error(Item.Error,"malformed square-bracketed markup");lexer.data.isLink=!1,lexer.emit(Item.ImageMeta)}return lexer.depth=2,lexCoreComponents}function lexCoreComponents(lexer){for(var what=lexer.data.isLink?"link":"image",delim=Delim.None;;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup"));break;case"|":delim===Delim.None&&(delim=Delim.LTR,lexer.backup(),lexer.emit(Item.Text),lexer.forward(),lexer.emit(Item.DelimLTR));break;case"-":delim===Delim.None&&">"===lexer.peek()&&(delim=Delim.LTR,lexer.backup(),lexer.emit(Item.Text),lexer.forward(2),lexer.emit(Item.DelimLTR));break;case"<":delim===Delim.None&&"-"===lexer.peek()&&(delim=Delim.RTL,lexer.backup(),lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.DelimRTL));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)switch(lexer.peek()){case"[":return++lexer.depth,lexer.backup(),delim===Delim.RTL?lexer.emit(Item.Text):lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.InnerMeta),lexer.data.isLink?lexSetter:lexImageLink;case"]":return--lexer.depth,lexer.backup(),delim===Delim.RTL?lexer.emit(Item.Text):lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.RightMeta),null;default:return lexer.error(Item.Error,"malformed ".concat(what," markup"))}}}function lexImageLink(lexer){for(var what=lexer.data.isLink?"link":"image";;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup link component"));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)switch(lexer.peek()){case"[":return++lexer.depth,lexer.backup(),lexer.emit(Item.Link),lexer.forward(2),lexer.emit(Item.InnerMeta),lexSetter;case"]":return--lexer.depth,lexer.backup(),lexer.emit(Item.Link),lexer.forward(2),lexer.emit(Item.RightMeta),null;default:return lexer.error(Item.Error,"malformed ".concat(what," markup"))}}}function lexSetter(lexer){for(var what=lexer.data.isLink?"link":"image";;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup setter component"));break;case"'":if(slurpQuote(lexer,"'")===EOF)return lexer.error(Item.Error,"unterminated single quoted string in ".concat(what," markup setter component"));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)return"]"!==lexer.peek()?lexer.error(Item.Error,"malformed ".concat(what," markup")):(--lexer.depth,lexer.backup(),lexer.emit(Item.Setter),lexer.forward(2),lexer.emit(Item.RightMeta),null)}}return function(w){var lexer=new Lexer(w.source,lexLeftMeta);lexer.start=lexer.pos=w.matchStart;var markup={},items=lexer.run(),last=items.last();return last&&last.type===Item.Error?markup.error=last.message:items.forEach((function(item){var text=item.text.trim();switch(item.type){case Item.ImageMeta:markup.isImage=!0,"<"===text[1]?markup.align="left":">"===text[1]&&(markup.align="right");break;case Item.LinkMeta:markup.isLink=!0;break;case Item.Link:"~"===text[0]?(markup.forceInternal=!0,markup.link=text.slice(1)):markup.link=text;break;case Item.Setter:markup.setter=text;break;case Item.Source:markup.source=text;break;case Item.Text:markup.text=text}})),markup.pos=lexer.pos,markup}}()}}),Wikifier}();!function(){function _verbatimTagHandler(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex,jQuery(document.createDocumentFragment()).append(match[1]).appendTo(w.output))}Wikifier.Parser.add({name:"quoteByBlock",profiles:["block"],match:"^<<<\\n",terminator:"^<<<\\n",handler:function(w){Wikifier.helpers.hasBlockContext(w.output.childNodes)?w.subWikify(jQuery(document.createElement("blockquote")).appendTo(w.output).get(0),this.terminator):jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"quoteByLine",profiles:["block"],match:"^>+",lookahead:/^>+/gm,terminator:"\\n",handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){var matched,i,destStack=[w.output],curLevel=0,newLevel=w.matchLength;do{if(newLevel>curLevel)for(i=curLevel;i<newLevel;++i)destStack.push(jQuery(document.createElement("blockquote")).appendTo(destStack[destStack.length-1]).get(0));else if(newLevel<curLevel)for(i=curLevel;i>newLevel;--i)destStack.pop();curLevel=newLevel,w.subWikify(destStack[destStack.length-1],this.terminator),jQuery(document.createElement("br")).appendTo(destStack[destStack.length-1]),this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);(matched=match&&match.index===w.nextMatch)&&(newLevel=match[0].length,w.nextMatch+=match[0].length)}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"macro",profiles:["core"],match:"<<",lookahead:new RegExp("<<(/?".concat(Patterns.macroName,")(?:\\s*)((?:(?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/)|(?://.*\\n)|(?:`(?:\\\\.|[^`\\\\])*`)|(?:\"(?:\\\\.|[^\"\\\\])*\")|(?:'(?:\\\\.|[^'\\\\])*')|(?:\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)|[^>]|(?:>(?!>)))*)>>"),"gm"),working:{source:"",name:"",arguments:"",index:0},context:null,handler:function(w){var matchStart=this.lookahead.lastIndex=w.matchStart;if(this.parseTag(w)){var macro,nextMatch=w.nextMatch,name=this.working.name,rawArgs=this.working.arguments;try{if(!(macro=Macro.get(name))){if(Macro.tags.has(name)){var tags=Macro.tags.get(name);return throwError(w.output,"child tag <<".concat(name,">> was found outside of a call to its parent macro").concat(1===tags.length?"":"s"," <<").concat(tags.join(">>, <<"),">>"),w.source.slice(matchStart,w.nextMatch))}return throwError(w.output,"macro <<".concat(name,">> does not exist"),w.source.slice(matchStart,w.nextMatch))}var payload=null;if(void 0!==macro.tags&&!(payload=this.parseBody(w,macro)))return w.nextMatch=nextMatch,throwError(w.output,"cannot find a closing tag for macro <<".concat(name,">>"),"".concat(w.source.slice(matchStart,w.nextMatch),"…"));if("function"!=typeof macro.handler)return throwError(w.output,"macro <<".concat(name,">> handler function ").concat(void 0===macro.handler?"does not exist":"is not a function"),w.source.slice(matchStart,w.nextMatch));var args=payload?payload[0].args:this.createArgs(rawArgs,this.skipArgs(macro,macro.name));if(void 0!==macro._MACRO_API){this.context=new MacroContext({macro:macro,name:name,args:args,payload:payload,source:w.source.slice(matchStart,w.nextMatch),parent:this.context,parser:w});try{macro.handler.call(this.context)}finally{this.context=this.context.parent}}else{var prevRawArgs=w._rawArgs;w._rawArgs=rawArgs;try{macro.handler(w.output,name,args,w,payload)}finally{w._rawArgs=prevRawArgs}}}catch(ex){return throwError(w.output,"cannot execute ".concat(macro&&macro.isWidget?"widget":"macro"," <<").concat(name,">>: ").concat(ex.message),w.source.slice(matchStart,w.nextMatch))}finally{this.working.source="",this.working.name="",this.working.arguments="",this.working.index=0}}else w.outputText(w.output,w.matchStart,w.nextMatch)},parseTag:function(w){var match=this.lookahead.exec(w.source);return!(!match||match.index!==w.matchStart||!match[1])&&(w.nextMatch=this.lookahead.lastIndex,this.working.source=w.source.slice(match.index,this.lookahead.lastIndex),this.working.name=match[1],this.working.arguments=match[2],this.working.index=match.index,!0)},parseBody:function(w,macro){for(var openTag=this.working.name,closeTag="/".concat(openTag),closeAlt="end".concat(openTag),bodyTags=!!Array.isArray(macro.tags)&&macro.tags,payload=[],end=-1,opened=1,curSource=this.working.source,curTag=this.working.name,curArgument=this.working.arguments,contentStart=w.nextMatch;-1!==(w.matchStart=w.source.indexOf(this.match,w.nextMatch));)if(this.parseTag(w)){var tagSource=this.working.source,tagName=this.working.name,tagArgs=this.working.arguments,tagBegin=this.working.index,tagEnd=w.nextMatch,hasArgs=""!==tagArgs.trim();switch(tagName){case openTag:++opened;break;case closeAlt:case closeTag:if(hasArgs)throw w.nextMatch=tagBegin+2+tagName.length,new Error('malformed closing tag: "'.concat(tagSource,'"'));--opened;break;default:if(hasArgs&&(tagName.startsWith("/")||tagName.startsWith("end"))){this.lookahead.lastIndex=w.nextMatch=tagBegin+2+tagName.length;continue}if(1===opened&&bodyTags)for(var i=0,iend=bodyTags.length;i<iend;++i)tagName===bodyTags[i]&&(payload.push({source:curSource,name:curTag,arguments:curArgument,args:this.createArgs(curArgument,this.skipArgs(macro,curTag)),contents:w.source.slice(contentStart,tagBegin)}),curSource=tagSource,curTag=tagName,curArgument=tagArgs,contentStart=tagEnd)}if(0===opened){payload.push({source:curSource,name:curTag,arguments:curArgument,args:this.createArgs(curArgument,this.skipArgs(macro,curTag)),contents:w.source.slice(contentStart,tagBegin)}),end=tagEnd;break}}else this.lookahead.lastIndex=w.nextMatch=w.matchStart+this.match.length;return-1!==end?(w.nextMatch=end,payload):null},createArgs:function(rawArgsString,skipArgs){var args=skipArgs?[]:this.parseArgs(rawArgsString);return Object.defineProperties(args,{raw:{value:rawArgsString},full:{value:Scripting.parse(rawArgsString)}}),args},skipArgs:function(macro,tagName){if(void 0!==macro.skipArgs){var sa=macro.skipArgs;return"boolean"==typeof sa&&sa||Array.isArray(sa)&&sa.includes(tagName)}return void 0!==macro.skipArg0&&(macro.skipArg0&&macro.name===tagName)},parseArgs:function(){var Item=Lexer.enumFromNames(["Error","Bareword","Expression","String","SquareBracket"]),spaceRe=new RegExp(Patterns.space),notSpaceRe=new RegExp(Patterns.notSpace),varTest=new RegExp("^".concat(Patterns.variable));function slurpQuote(lexer,endQuote){loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return EOF;case endQuote:break loop}return lexer.pos}function lexSpace(lexer){var offset=lexer.source.slice(lexer.pos).search(notSpaceRe);if(offset===EOF)return null;switch(0!==offset&&(lexer.pos+=offset,lexer.ignore()),lexer.next()){case"`":return lexExpression;case'"':return lexDoubleQuote;case"'":return lexSingleQuote;case"[":return lexSquareBracket;default:return lexBareword}}function lexExpression(lexer){return slurpQuote(lexer,"`")===EOF?lexer.error(Item.Error,"unterminated backquote expression"):(lexer.emit(Item.Expression),lexSpace)}function lexDoubleQuote(lexer){return slurpQuote(lexer,'"')===EOF?lexer.error(Item.Error,"unterminated double quoted string"):(lexer.emit(Item.String),lexSpace)}function lexSingleQuote(lexer){return slurpQuote(lexer,"'")===EOF?lexer.error(Item.Error,"unterminated single quoted string"):(lexer.emit(Item.String),lexSpace)}function lexSquareBracket(lexer){var what;if(lexer.accept("<>IiMmGg")?(what="image",lexer.acceptRun("<>IiMmGg")):what="link",!lexer.accept("["))return lexer.error(Item.Error,"malformed ".concat(what," markup"));lexer.depth=2;loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case"[":++lexer.depth;break;case"]":if(--lexer.depth,lexer.depth<0)return lexer.error(Item.Error,"unexpected right square bracket ']'");if(1===lexer.depth){if("]"===lexer.next()){--lexer.depth;break loop}lexer.backup()}}return lexer.emit(Item.SquareBracket),lexSpace}function lexBareword(lexer){var offset=lexer.source.slice(lexer.pos).search(spaceRe);return lexer.pos=offset===EOF?lexer.source.length:lexer.pos+offset,lexer.emit(Item.Bareword),offset===EOF?null:lexSpace}return function(rawArgsString){var lexer=new Lexer(rawArgsString,lexSpace),args=[];return lexer.run().forEach((function(item){var arg=item.text;switch(item.type){case Item.Error:throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(item.message));case Item.Bareword:if(varTest.test(arg))arg=State.getVar(arg);else if(/^(?:settings|setup)[.[]/.test(arg))try{arg=Scripting.evalTwineScript(arg)}catch(ex){throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(ex.message))}else if("null"===arg)arg=null;else if("undefined"===arg)arg=undefined;else if("true"===arg)arg=!0;else if("false"===arg)arg=!1;else if("NaN"===arg)arg=NaN;else{var argAsNum=Number(arg);Number.isNaN(argAsNum)||(arg=argAsNum)}break;case Item.Expression:if(""===(arg=arg.slice(1,-1).trim()))arg=undefined;else try{arg=Scripting.evalTwineScript("(".concat(arg,")"))}catch(ex){throw new Error('unable to parse macro argument expression "'.concat(arg,'": ').concat(ex.message))}break;case Item.String:try{arg=Scripting.evalJavaScript(arg)}catch(ex){throw new Error('unable to parse macro argument string "'.concat(arg,'": ').concat(ex.message))}break;case Item.SquareBracket:var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:arg,matchStart:0});if(markup.hasOwnProperty("error"))throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(markup.error));if(markup.pos<arg.length)throw new Error('unable to parse macro argument "'.concat(arg,'": unexpected character(s) "').concat(arg.slice(markup.pos),'" (pos: ').concat(markup.pos,")"));markup.isLink?((arg={isLink:!0}).count=markup.hasOwnProperty("text")?2:1,arg.link=Wikifier.helpers.evalPassageId(markup.link),arg.text=markup.hasOwnProperty("text")?Wikifier.helpers.evalText(markup.text):arg.link,arg.external=!markup.forceInternal&&Wikifier.isExternalLink(arg.link),arg.setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null):markup.isImage&&(arg=function(source){var imgObj={source:source,isImage:!0};if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(imgObj.source=passage.text,imgObj.passage=passage.title)}return imgObj}(Wikifier.helpers.evalPassageId(markup.source)),markup.hasOwnProperty("align")&&(arg.align=markup.align),markup.hasOwnProperty("text")&&(arg.title=Wikifier.helpers.evalText(markup.text)),markup.hasOwnProperty("link")&&(arg.link=Wikifier.helpers.evalPassageId(markup.link),arg.external=!markup.forceInternal&&Wikifier.isExternalLink(arg.link)),arg.setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null)}args.push(arg)})),args}}()}),Wikifier.Parser.add({name:"link",profiles:["core"],match:"\\[\\[[^[]",handler:function(w){var markup=Wikifier.helpers.parseSquareBracketedMarkup(w);if(markup.hasOwnProperty("error"))w.outputText(w.output,w.matchStart,w.nextMatch);else{w.nextMatch=markup.pos;var link=Wikifier.helpers.evalPassageId(markup.link),text=markup.hasOwnProperty("text")?Wikifier.helpers.evalText(markup.text):link,setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null,output=(Config.debug?new DebugView(w.output,"link-markup","[[link]]",w.source.slice(w.matchStart,w.nextMatch)):w).output;markup.forceInternal||!Wikifier.isExternalLink(link)?Wikifier.createInternalLink(output,link,text,setFn):Wikifier.createExternalLink(output,link,text)}}}),Wikifier.Parser.add({name:"urlLink",profiles:["core"],match:Patterns.url,handler:function(w){w.outputText(Wikifier.createExternalLink(w.output,w.matchText),w.matchStart,w.nextMatch)}}),Wikifier.Parser.add({name:"image",profiles:["core"],match:"\\[[<>]?[Ii][Mm][Gg]\\[",handler:function(w){var markup=Wikifier.helpers.parseSquareBracketedMarkup(w);if(markup.hasOwnProperty("error"))w.outputText(w.output,w.matchStart,w.nextMatch);else{var debugView;w.nextMatch=markup.pos,Config.debug&&(debugView=new DebugView(w.output,"image-markup",markup.hasOwnProperty("link")?"[img[][link]]":"[img[]]",w.source.slice(w.matchStart,w.nextMatch))).modes({block:!0});var source,setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null,el=(Config.debug?debugView:w).output;if(markup.hasOwnProperty("link")){var link=Wikifier.helpers.evalPassageId(markup.link);(el=markup.forceInternal||!Wikifier.isExternalLink(link)?Wikifier.createInternalLink(el,link,null,setFn):Wikifier.createExternalLink(el,link)).classList.add("link-image")}if(el=jQuery(document.createElement("img")).appendTo(el).get(0),"data:"!==(source=Wikifier.helpers.evalPassageId(markup.source)).slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(el.setAttribute("data-passage",passage.title),source=passage.text.trim())}el.src=source,markup.hasOwnProperty("text")&&(el.title=Wikifier.helpers.evalText(markup.text)),markup.hasOwnProperty("align")&&(el.align=markup.align)}}}),Wikifier.Parser.add({name:"monospacedByBlock",profiles:["block"],match:"^\\{\\{\\{\\n",lookahead:/^\{\{\{\n((?:^[^\n]*\n)+?)(^\}\}\}$\n?)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);if(match&&match.index===w.matchStart){var pre=jQuery(document.createElement("pre"));jQuery(document.createElement("code")).text(match[1]).appendTo(pre),pre.appendTo(w.output),w.nextMatch=this.lookahead.lastIndex}}}),Wikifier.Parser.add({name:"formatByChar",profiles:["core"],match:"''|//|__|\\^\\^|~~|==|\\{\\{\\{",handler:function(w){switch(w.matchText){case"''":w.subWikify(jQuery(document.createElement("strong")).appendTo(w.output).get(0),"''");break;case"//":w.subWikify(jQuery(document.createElement("em")).appendTo(w.output).get(0),"//");break;case"__":w.subWikify(jQuery(document.createElement("u")).appendTo(w.output).get(0),"__");break;case"^^":w.subWikify(jQuery(document.createElement("sup")).appendTo(w.output).get(0),"\\^\\^");break;case"~~":w.subWikify(jQuery(document.createElement("sub")).appendTo(w.output).get(0),"~~");break;case"==":w.subWikify(jQuery(document.createElement("s")).appendTo(w.output).get(0),"==");break;case"{{{":var lookahead=/\{\{\{((?:.|\n)*?)\}\}\}/gm;lookahead.lastIndex=w.matchStart;var match=lookahead.exec(w.source);match&&match.index===w.matchStart&&(jQuery(document.createElement("code")).text(match[1]).appendTo(w.output),w.nextMatch=lookahead.lastIndex)}}}),Wikifier.Parser.add({name:"customStyle",profiles:["core"],match:"@@",terminator:"@@",blockRe:/\s*\n/gm,handler:function(w){var css=Wikifier.helpers.inlineCss(w);this.blockRe.lastIndex=w.nextMatch;var blockMatch=this.blockRe.exec(w.source),blockLevel=blockMatch&&blockMatch.index===w.nextMatch,$el=jQuery(document.createElement(blockLevel?"div":"span")).appendTo(w.output);0===css.classes.length&&""===css.id&&0===Object.keys(css.styles).length?$el.addClass("marked"):(css.classes.forEach((function(className){return $el.addClass(className)})),""!==css.id&&$el.attr("id",css.id),$el.css(css.styles)),blockLevel?(w.nextMatch+=blockMatch[0].length,w.subWikify($el[0],"\\n?".concat(this.terminator))):w.subWikify($el[0],this.terminator)}}),Wikifier.Parser.add({name:"verbatimText",profiles:["core"],match:'"{3}|<[Nn][Oo][Ww][Ii][Kk][Ii]>',lookahead:/(?:"{3}((?:.|\n)*?)"{3})|(?:<[Nn][Oo][Ww][Ii][Kk][Ii]>((?:.|\n)*?)<\/[Nn][Oo][Ww][Ii][Kk][Ii]>)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex,jQuery(document.createElement("span")).addClass("verbatim").text(match[1]||match[2]).appendTo(w.output))}}),Wikifier.Parser.add({name:"horizontalRule",profiles:["core"],match:"^----+$\\n?|<[Hh][Rr]\\s*/?>\\n?",handler:function(w){jQuery(document.createElement("hr")).appendTo(w.output)}}),Wikifier.Parser.add({name:"emdash",profiles:["core"],match:"--",handler:function(w){jQuery(document.createTextNode("—")).appendTo(w.output)}}),Wikifier.Parser.add({name:"doubleDollarSign",profiles:["core"],match:"\\${2}",handler:function(w){jQuery(document.createTextNode("$")).appendTo(w.output)}}),Wikifier.Parser.add({name:"nakedVariable",profiles:["core"],match:"".concat(Patterns.variable,"(?:(?:\\.").concat(Patterns.identifier,")|(?:\\[\\d+\\])|(?:\\[\"(?:\\\\.|[^\"\\\\])+\"\\])|(?:\\['(?:\\\\.|[^'\\\\])+'\\])|(?:\\[").concat(Patterns.variable,"\\]))*"),handler:function(w){var result=State.getVar(w.matchText);null==result?jQuery(document.createTextNode(w.matchText)).appendTo(w.output):new Wikifier((Config.debug?new DebugView(w.output,"variable",w.matchText,w.matchText):w).output,stringFrom(result))}}),Wikifier.Parser.add({name:"template",profiles:["core"],match:"\\?".concat(Patterns.templateName),handler:function(w){var name=w.matchText.slice(1),template=Template.get(name),result=null;switch(template instanceof Array&&(template=template.random()),_typeof(template)){case"function":try{result=stringFrom(template.call({name:name}))}catch(ex){return throwError(w.output,"cannot execute function template ?".concat(name,": ").concat(ex.message),w.source.slice(w.matchStart,w.nextMatch))}break;case"string":result=template}null===result?jQuery(document.createTextNode(w.matchText)).appendTo(w.output):new Wikifier((Config.debug?new DebugView(w.output,"template",w.matchText,w.matchText):w).output,result)}}),Wikifier.Parser.add({name:"heading",profiles:["block"],match:"^!{1,6}",terminator:"\\n",handler:function(w){Wikifier.helpers.hasBlockContext(w.output.childNodes)?w.subWikify(jQuery(document.createElement("h".concat(w.matchLength))).appendTo(w.output).get(0),this.terminator):jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"table",profiles:["block"],match:"^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",lookahead:/^\|([^\n]*)\|([fhck]?)$/gm,rowTerminator:"\\|(?:[cfhk]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[cfhk]?$\\n?)",cellTerminator:"(?:\\u0020*)\\|",rowTypes:{c:"caption",f:"tfoot",h:"thead","":"tbody"},handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){var matched,table=jQuery(document.createElement("table")).appendTo(w.output).get(0),prevColumns=[],curRowType=null,$rowContainer=null,rowCount=0;w.nextMatch=w.matchStart;do{this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);if(matched=match&&match.index===w.nextMatch){var nextRowType=match[2];"k"===nextRowType?(table.className=match[1],w.nextMatch+=match[0].length+1):(nextRowType!==curRowType&&(curRowType=nextRowType,$rowContainer=jQuery(document.createElement(this.rowTypes[nextRowType])).appendTo(table)),"c"===curRowType?($rowContainer.css("caption-side",0===rowCount?"top":"bottom"),w.nextMatch+=1,w.subWikify($rowContainer[0],this.rowTerminator)):this.rowHandler(w,jQuery(document.createElement("tr")).appendTo($rowContainer).get(0),prevColumns),++rowCount)}}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))},rowHandler:function(w,rowEl,prevColumns){var matched,_this12=this,cellRe=new RegExp(this.cellPattern,"gm"),col=0,curColCount=1;do{cellRe.lastIndex=w.nextMatch;var cellMatch=cellRe.exec(w.source);if(matched=cellMatch&&cellMatch.index===w.nextMatch){if("~"===cellMatch[1]){var last=prevColumns[col];last&&(++last.rowCount,last.$element.attr("rowspan",last.rowCount).css("vertical-align","middle")),w.nextMatch=cellMatch.index+cellMatch[0].length-1}else if(">"===cellMatch[1])++curColCount,w.nextMatch=cellMatch.index+cellMatch[0].length-1;else{if(cellMatch[2]){w.nextMatch=cellMatch.index+cellMatch[0].length;break}!function(){++w.nextMatch;for(var css=Wikifier.helpers.inlineCss(w),spaceLeft=!1,spaceRight=!1,$cell=void 0;" "===w.source.substr(w.nextMatch,1);)spaceLeft=!0,++w.nextMatch;"!"===w.source.substr(w.nextMatch,1)?($cell=jQuery(document.createElement("th")).appendTo(rowEl),++w.nextMatch):$cell=jQuery(document.createElement("td")).appendTo(rowEl),prevColumns[col]={rowCount:1,$element:$cell},curColCount>1&&($cell.attr("colspan",curColCount),curColCount=1),w.subWikify($cell[0],_this12.cellTerminator)," "===w.matchText.substr(w.matchText.length-2,1)&&(spaceRight=!0),css.classes.forEach((function(className){return $cell.addClass(className)})),""!==css.id&&$cell.attr("id",css.id),spaceLeft&&spaceRight?css.styles["text-align"]="center":spaceLeft?css.styles["text-align"]="right":spaceRight&&(css.styles["text-align"]="left"),$cell.css(css.styles),w.nextMatch=w.nextMatch-1}()}++col}}while(matched)}}),Wikifier.Parser.add({name:"list",profiles:["block"],match:"^(?:(?:\\*+)|(?:#+))",lookahead:/^(?:(\*+)|(#+))/gm,terminator:"\\n",handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){w.nextMatch=w.matchStart;var matched,i,destStack=[w.output],curType=null,curLevel=0;do{this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);if(matched=match&&match.index===w.nextMatch){var newType=match[2]?"ol":"ul",newLevel=match[0].length;if(w.nextMatch+=match[0].length,newLevel>curLevel)for(i=curLevel;i<newLevel;++i)destStack.push(jQuery(document.createElement(newType)).appendTo(destStack[destStack.length-1]).get(0));else if(newLevel<curLevel)for(i=curLevel;i>newLevel;--i)destStack.pop();else newLevel===curLevel&&newType!==curType&&(destStack.pop(),destStack.push(jQuery(document.createElement(newType)).appendTo(destStack[destStack.length-1]).get(0)));curLevel=newLevel,curType=newType,w.subWikify(jQuery(document.createElement("li")).appendTo(destStack[destStack.length-1]).get(0),this.terminator)}}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"commentByBlock",profiles:["core"],match:"(?:/(?:%|\\*))|(?:\x3c!--)",lookahead:/(?:\/(%|\*)(?:(?:.|\n)*?)\1\/)|(?:<!--(?:(?:.|\n)*?)-->)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex)}}),Wikifier.Parser.add({name:"lineContinuation",profiles:["core"],match:"\\\\".concat(Patterns.spaceNoTerminator,"*\\n|\\n").concat(Patterns.spaceNoTerminator,"*\\\\|\\n?\\\\").concat(Patterns.spaceNoTerminator,"*$|^").concat(Patterns.spaceNoTerminator,"*\\\\\\n?"),handler:function(w){w.nextMatch=w.matchStart+w.matchLength}}),Wikifier.Parser.add({name:"lineBreak",profiles:["core"],match:"\\n|<[Bb][Rr]\\s*/?>",handler:function(w){w.options.nobr||jQuery(document.createElement("br")).appendTo(w.output)}}),Wikifier.Parser.add({name:"htmlCharacterReference",profiles:["core"],match:"(?:(?:&#?[0-9A-Za-z]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9A-Fa-f]|1D[C-Fc-f][0-9A-Fa-f]|20[D-Fd-f][0-9A-Fa-f]|FE2[0-9A-Fa-f])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[0-9A-Za-z]{2,8};)",handler:function(w){jQuery(document.createDocumentFragment()).append(w.matchText).appendTo(w.output)}}),Wikifier.Parser.add({name:"xmlProlog",profiles:["core"],match:"<\\?[Xx][Mm][Ll][^>]*\\?>",handler:function(w){w.nextMatch=w.matchStart+w.matchLength}}),Wikifier.Parser.add({name:"verbatimHtml",profiles:["core"],match:"<[Hh][Tt][Mm][Ll]>",lookahead:/<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,handler:_verbatimTagHandler}),Wikifier.Parser.add({name:"verbatimScriptTag",profiles:["core"],match:"<[Ss][Cc][Rr][Ii][Pp][Tt][^>]*>",lookahead:/(<[Ss][Cc][Rr][Ii][Pp][Tt]*>(?:.|\n)*?<\/[Ss][Cc][Rr][Ii][Pp][Tt]>)/gm,handler:_verbatimTagHandler}),Wikifier.Parser.add({name:"styleTag",profiles:["core"],match:"<[Ss][Tt][Yy][Ll][Ee][^>]*>",lookahead:/(<[Ss][Tt][Yy][Ll][Ee]*>)((?:.|\n)*?)(<\/[Ss][Tt][Yy][Ll][Ee]>)/gm,imageMarkup:new RegExp(Patterns.cssImage,"g"),hasImageMarkup:new RegExp(Patterns.cssImage),handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);if(match&&match.index===w.matchStart){w.nextMatch=this.lookahead.lastIndex;var css=match[2];this.hasImageMarkup.test(css)&&(this.imageMarkup.lastIndex=0,css=css.replace(this.imageMarkup,(function(wikiImage){var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:wikiImage,matchStart:0});if(markup.hasOwnProperty("error")||markup.pos<wikiImage.length)return wikiImage;var source=markup.source;if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(source=passage.text)}return'url("'.concat(source.replace(/"/g,"%22"),'")')}))),jQuery(document.createDocumentFragment()).append(match[1]+css+match[3]).appendTo(w.output)}}}),Wikifier.Parser.add({name:"svgTag",profiles:["core"],match:"<[Ss][Vv][Gg][^>]*>",lookahead:/<(\/?)[Ss][Vv][Gg][^>]*>/gm,namespace:"http://www.w3.org/2000/svg",handler:function(w){var _this13=this;this.lookahead.lastIndex=w.nextMatch;for(var match,depth=1;depth>0&&null!==(match=this.lookahead.exec(w.source));)depth+="/"===match[1]?-1:1;if(0===depth){w.nextMatch=this.lookahead.lastIndex;var svgTag=w.source.slice(w.matchStart,this.lookahead.lastIndex),$frag=jQuery(document.createDocumentFragment()).append(svgTag);$frag.find("a[data-passage],image[data-passage]").each((function(_,el){var tagName=el.tagName.toLowerCase();try{_this13.processAttributeDirectives(el)}catch(ex){return throwError(w.output,"svg|<".concat(tagName,">: ").concat(ex.message),"".concat(w.matchText,"…"))}el.hasAttribute("data-passage")&&_this13.processDataAttributes(el,tagName)})),$frag.appendTo(w.output)}},processAttributeDirectives:function(el){_toConsumableArray(el.attributes).forEach((function(_ref10){var name=_ref10.name,value=_ref10.value,evalShorthand="@"===name[0];if(evalShorthand||name.startsWith("sc-eval:")){var result,newName=name.slice(evalShorthand?1:8);if("data-setter"===newName)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name,'"'));try{result=Scripting.evalTwineScript(value)}catch(ex){throw new Error('bad evaluation from attribute directive "'.concat(name,'": ').concat(ex.message))}try{el.setAttribute(newName,result),el.removeAttribute(name)}catch(ex){throw new Error('cannot transform attribute directive "'.concat(name,'" into attribute "').concat(newName,'"'))}}}))},processDataAttributes:function(el,tagName){var passage=el.getAttribute("data-passage");if(null!=passage){var evaluated=Wikifier.helpers.evalPassageId(passage);if(evaluated!==passage&&(passage=evaluated,el.setAttribute("data-passage",evaluated)),""!==passage)if("image"===tagName)"data:"!==passage.slice(0,5)&&Story.has(passage)&&(passage=Story.get(passage)).tags.includes("Twine.image")&&el.setAttribute("href",passage.text.trim());else{var setFn,setter=el.getAttribute("data-setter");null!=setter&&""!==(setter=String(setter).trim())&&(setFn=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(setter))),Story.has(passage)?(el.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&el.classList.add("link-visited")):el.classList.add("link-broken"),jQuery(el).ariaClick({one:!0},(function(){"function"==typeof setFn&&setFn.call(this),Engine.play(passage)}))}}}}),Wikifier.Parser.add({name:"htmlTag",profiles:["core"],match:"<".concat(Patterns.htmlTagName,"(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*?\"|'[^']*?'|[^\\s\"'=<>`]+))?)*\\s*\\/?>"),tagRe:new RegExp("^<(".concat(Patterns.htmlTagName,")")),mediaTags:["audio","img","source","track","video"],nobrTags:["audio","colgroup","datalist","dl","figure","meter","ol","optgroup","picture","progress","ruby","select","table","tbody","tfoot","thead","tr","ul","video"],voidTags:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],handler:function(w){var tagMatch=this.tagRe.exec(w.matchText),tag=tagMatch&&tagMatch[1],tagName=tag&&tag.toLowerCase();if(tagName){var terminator,terminatorMatch,isVoid=this.voidTags.includes(tagName)||w.matchText.endsWith("/>"),isNobr=this.nobrTags.includes(tagName);if(!isVoid){terminator="<\\/".concat(tagName,"\\s*>");var terminatorRe=new RegExp(terminator,"gim");terminatorRe.lastIndex=w.matchStart,terminatorMatch=terminatorRe.exec(w.source)}if(!isVoid&&!terminatorMatch)return throwError(w.output,"cannot find a closing tag for HTML <".concat(tag,">"),"".concat(w.matchText,"…"));var debugView,output=w.output,el=document.createElement(w.output.tagName);for(el.innerHTML=w.matchText;el.firstChild;)el=el.firstChild;try{this.processAttributeDirectives(el)}catch(ex){return throwError(w.output,"<".concat(tagName,">: ").concat(ex.message),"".concat(w.matchText,"…"))}if(el.hasAttribute("data-passage")&&(this.processDataAttributes(el,tagName),Config.debug&&((debugView=new DebugView(w.output,"html-".concat(tagName),tagName,w.matchText)).modes({block:"img"===tagName,nonvoid:terminatorMatch}),output=debugView.output)),terminatorMatch){try{Wikifier.Option.push({nobr:isNobr}),w.subWikify(el,terminator,{ignoreTerminatorCase:!0})}finally{Wikifier.Option.pop()}debugView&&jQuery(el).find(".debug.block").length>0&&debugView.modes({block:!0})}output.appendChild("track"===tagName?el.cloneNode(!0):el)}},processAttributeDirectives:function(el){_toConsumableArray(el.attributes).forEach((function(_ref11){var name=_ref11.name,value=_ref11.value,evalShorthand="@"===name[0];if(evalShorthand||name.startsWith("sc-eval:")){var result,newName=name.slice(evalShorthand?1:8);if("data-setter"===newName)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name,'"'));try{result=Scripting.evalTwineScript(value)}catch(ex){throw new Error('bad evaluation from attribute directive "'.concat(name,'": ').concat(ex.message))}try{el.setAttribute(newName,result),el.removeAttribute(name)}catch(ex){throw new Error('cannot transform attribute directive "'.concat(name,'" into attribute "').concat(newName,'"'))}}}))},processDataAttributes:function(el,tagName){var passage=el.getAttribute("data-passage");if(null!=passage){var evaluated=Wikifier.helpers.evalPassageId(passage);if(evaluated!==passage&&(passage=evaluated,el.setAttribute("data-passage",evaluated)),""!==passage)if(this.mediaTags.includes(tagName)){if("data:"!==passage.slice(0,5)&&Story.has(passage)){var parentName,twineTag;switch(passage=Story.get(passage),tagName){case"audio":case"video":twineTag="Twine.".concat(tagName);break;case"img":twineTag="Twine.image";break;case"track":twineTag="Twine.vtt";break;case"source":var $parent=$(el).closest("audio,picture,video");$parent.length&&(parentName=$parent.get(0).tagName.toLowerCase(),twineTag="Twine.".concat("picture"===parentName?"image":parentName))}passage.tags.includes(twineTag)&&(el["picture"===parentName?"srcset":"src"]=passage.text.trim())}}else{var setFn,setter=el.getAttribute("data-setter");null!=setter&&""!==(setter=String(setter).trim())&&(setFn=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(setter))),Story.has(passage)?(el.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&el.classList.add("link-visited")):el.classList.add("link-broken"),jQuery(el).ariaClick({one:!0},(function(){"function"==typeof setFn&&setFn.call(this),Engine.play(passage)}))}}}})}();var Template=(_templates=new Map,_validNameRe=new RegExp("^(?:".concat(Patterns.templateName,")$")),_validType=function(template){var templateType=_typeof(template);return"function"===templateType||"string"===templateType},Object.freeze(Object.defineProperties({},{add:{value:function(name,template){if(!(_validType(template)||template instanceof Array&&template.length>0&&template.every(_validType)))throw new TypeError("invalid template type (".concat(name,"); templates must be: functions, strings, or an array of either"));(name instanceof Array?name:[name]).forEach((function(name){if(!_validNameRe.test(name))throw new Error('invalid template name "'.concat(name,'"'));if(_templates.has(name))throw new Error("cannot clobber existing template ?".concat(name));_templates.set(name,template)}))}},delete:{value:function(name){(name instanceof Array?name:[name]).forEach((function(name){return _templates.delete(name)}))}},get:{value:function(name){return _templates.has(name)?_templates.get(name):null}},has:{value:function(name){return _templates.has(name)}},size:{get:function(){return _templates.size}}}))),_templates,_validNameRe,_validType,Macro=function(){var _macros={},_tags={},_validNameRe=new RegExp("^(?:".concat(Patterns.macroName,")$"));function macrosHas(name){return _macros.hasOwnProperty(name)}function tagsRegister(parent,bodyTags){if(!parent)throw new Error("no parent specified");for(var endTags=["/".concat(parent),"end".concat(parent)],allTags=[].concat(endTags,Array.isArray(bodyTags)?bodyTags:[]),i=0;i<allTags.length;++i){var tag=allTags[i];if(macrosHas(tag))throw new Error("cannot register tag for an existing macro");tagsHas(tag)?_tags[tag].includes(parent)||(_tags[tag].push(parent),_tags[tag].sort()):_tags[tag]=[parent]}}function tagsUnregister(parent){if(!parent)throw new Error("no parent specified");Object.keys(_tags).forEach((function(tag){var i=_tags[tag].indexOf(parent);-1!==i&&(1===_tags[tag].length?delete _tags[tag]:_tags[tag].splice(i,1))}))}function tagsHas(name){return _tags.hasOwnProperty(name)}return Object.freeze(Object.defineProperties({},{add:{value:function macrosAdd(name,def){if(Array.isArray(name))name.forEach((function(name){return macrosAdd(name,def)}));else{if(!_validNameRe.test(name))throw new Error('invalid macro name "'.concat(name,'"'));if(macrosHas(name))throw new Error("cannot clobber existing macro <<".concat(name,">>"));if(tagsHas(name))throw new Error("cannot clobber child tag <<".concat(name,">> of parent macro").concat(1===_tags[name].length?"":"s"," <<").concat(_tags[name].join(">>, <<"),">>"));try{if("object"===_typeof(def))_macros[name]=Object.assign(Object.create(null),def,{_MACRO_API:!0});else{if(!macrosHas(def))throw new Error("cannot create alias of nonexistent macro <<".concat(def,">>"));_macros[name]=Object.create(_macros[def],{_ALIAS_OF:{enumerable:!0,value:def}})}Object.defineProperty(_macros,name,{writable:!1})}catch(ex){throw"TypeError"===ex.name?new Error("cannot clobber protected macro <<".concat(name,">>")):new Error("unknown error when attempting to add macro <<".concat(name,">>: [").concat(ex.name,"] ").concat(ex.message))}if(void 0!==_macros[name].tags)if(null==_macros[name].tags)tagsRegister(name);else{if(!Array.isArray(_macros[name].tags))throw new Error('bad value for "tags" property of macro <<'.concat(name,">>"));tagsRegister(name,_macros[name].tags)}}}},delete:{value:function macrosDelete(name){if(Array.isArray(name))name.forEach((function(name){return macrosDelete(name)}));else if(macrosHas(name)){void 0!==_macros[name].tags&&tagsUnregister(name);try{Object.defineProperty(_macros,name,{writable:!0}),delete _macros[name]}catch(ex){throw new Error("unknown error removing macro <<".concat(name,">>: ").concat(ex.message))}}else if(tagsHas(name))throw new Error("cannot remove child tag <<".concat(name,">> of parent macro <<").concat(_tags[name],">>"))}},isEmpty:{value:function(){return 0===Object.keys(_macros).length}},has:{value:macrosHas},get:{value:function(name){var macro=null;return macrosHas(name)&&"function"==typeof _macros[name].handler?macro=_macros[name]:macros.hasOwnProperty(name)&&"function"==typeof macros[name].handler&&(macro=macros[name]),macro}},init:{value:function(){var handler=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"init";Object.keys(_macros).forEach((function(name){"function"==typeof _macros[name][handler]&&_macros[name][handler](name)})),Object.keys(macros).forEach((function(name){"function"==typeof macros[name][handler]&&macros[name][handler](name)}))}},tags:{value:Object.freeze(Object.defineProperties({},{register:{value:tagsRegister},unregister:{value:tagsUnregister},has:{value:tagsHas},get:{value:function(name){return tagsHas(name)?_tags[name]:null}}}))},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),MacroContext=function(){var MacroContext=function(){function MacroContext(contextData){_classCallCheck(this,MacroContext);var context=Object.assign({parent:null,macro:null,name:"",displayName:"",args:null,payload:null,parser:null,source:""},contextData);if(null===context.macro||""===context.name||null===context.parser)throw new TypeError("context object missing required properties");Object.defineProperties(this,{self:{value:context.macro},name:{value:void 0===context.macro._ALIAS_OF?context.name:context.macro._ALIAS_OF},displayName:{value:context.name},args:{value:context.args},payload:{value:context.payload},source:{value:context.source},parent:{value:context.parent},parser:{value:context.parser},_output:{value:context.parser.output},_shadows:{writable:!0,value:null},_debugView:{writable:!0,value:null},_debugViewEnabled:{writable:!0,value:Config.debug}})}return _createClass(MacroContext,[{key:"output",get:function(){return this._debugViewEnabled?this.debugView.output:this._output}},{key:"shadows",get:function(){return _toConsumableArray(this._shadows)}},{key:"shadowView",get:function(){var view=new Set;return this.contextSelectAll((function(ctx){return ctx._shadows})).forEach((function(ctx){return ctx._shadows.forEach((function(name){return view.add(name)}))})),_toConsumableArray(view)}},{key:"debugView",get:function(){return this._debugViewEnabled?null!==this._debugView?this._debugView:this.createDebugView():null}},{key:"contextHas",value:function(filter){for(var context=this;null!==(context=context.parent);)if(filter(context))return!0;return!1}},{key:"contextSelect",value:function(filter){for(var context=this;null!==(context=context.parent);)if(filter(context))return context;return null}},{key:"contextSelectAll",value:function(filter){for(var result=[],context=this;null!==(context=context.parent);)filter(context)&&result.push(context);return result}},{key:"addShadow",value:function(){var _this14=this;this._shadows||(this._shadows=new Set);for(var varRe=new RegExp("^".concat(Patterns.variable,"$")),_len14=arguments.length,names=new Array(_len14),_key14=0;_key14<_len14;_key14++)names[_key14]=arguments[_key14];names.flat(1/0).forEach((function(name){if("string"!=typeof name)throw new TypeError("variable name must be a string; type: ".concat(_typeof(name)));if(!varRe.test(name))throw new Error('invalid variable name "'.concat(name,'"'));_this14._shadows.add(name)}))}},{key:"createShadowWrapper",value:function(callback,doneCallback,startCallback){var shadowStore,shadowContext=this;return"function"==typeof callback&&(shadowStore={},this.shadowView.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey]}))),function(){for(var _len15=arguments.length,args=new Array(_len15),_key15=0;_key15<_len15;_key15++)args[_key15]=arguments[_key15];if("function"==typeof startCallback&&startCallback.apply(this,args),"function"==typeof callback){var contextCache,shadowNames=Object.keys(shadowStore),valueCache=shadowNames.length>0?{}:null,macroParser=Wikifier.Parser.get("macro");try{shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),store[varKey]=shadowStore[varName]})),contextCache=macroParser.context,macroParser.context=shadowContext,callback.apply(this,args)}finally{contextCache!==undefined&&(macroParser.context=contextCache),shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey],valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}"function"==typeof doneCallback&&doneCallback.apply(this,args)}}},{key:"createDebugView",value:function(name,title){return this._debugView=new DebugView(this._output,"macro",name||this.displayName,title||this.source),null!==this.payload&&this.payload.length>0&&this._debugView.modes({nonvoid:!0}),this._debugViewEnabled=!0,this._debugView}},{key:"removeDebugView",value:function(){null!==this._debugView&&(this._debugView.remove(),this._debugView=null),this._debugViewEnabled=!1}},{key:"error",value:function(message,source){return throwError(this._output,"<<".concat(this.displayName,">>: ").concat(message),source||this.source)}}]),MacroContext}();return MacroContext}();!function(){if(Macro.add("capture",{skipArgs:!0,tags:null,tsVarRe:new RegExp("(".concat(Patterns.variable,")"),"g"),handler:function(){if(0===this.args.raw.length)return this.error("no story/temporary variable list specified");var valueCache={};try{for(var match,tsVarRe=this.self.tsVarRe;null!==(match=tsVarRe.exec(this.args.raw));){var varName=match[1],varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),this.addShadow(varName)}new Wikifier(this.output,this.payload[0].contents)}finally{this.shadows.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}}),Macro.add("set",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("unset",{skipArgs:!0,jsVarRe:new RegExp("State\\.(variables|temporary)\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no story/temporary variable list specified");for(var match,jsVarRe=this.self.jsVarRe;null!==(match=jsVarRe.exec(this.args.full));){var store=State[match[1]],name=match[2];store.hasOwnProperty(name)&&delete store[name]}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remember",{skipArgs:!0,jsVarRe:new RegExp("State\\.variables\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}for(var match,remember=storage.get("remember")||{},jsVarRe=this.self.jsVarRe;null!==(match=jsVarRe.exec(this.args.full));){var name=match[1];remember[name]=State.variables[name]}if(!storage.set("remember",remember))return this.error("unknown error, cannot remember: ".concat(this.args.raw));Config.debug&&this.debugView.modes({hidden:!0})},init:function(){var remember=storage.get("remember");remember&&Object.keys(remember).forEach((function(name){return State.variables[name]=remember[name]}))}}),Macro.add("forget",{skipArgs:!0,jsVarRe:new RegExp("State\\.variables\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no story variable list specified");for(var match,remember=storage.get("remember"),jsVarRe=this.self.jsVarRe,needStore=!1;null!==(match=jsVarRe.exec(this.args.full));){var name=match[1];State.variables.hasOwnProperty(name)&&delete State.variables[name],remember&&remember.hasOwnProperty(name)&&(needStore=!0,delete remember[name])}if(needStore)if(0===Object.keys(remember).length){if(!storage.delete("remember"))return this.error("unknown error, cannot update remember store")}else if(!storage.set("remember",remember))return this.error("unknown error, cannot update remember store");Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("run","set"),Macro.add("script",{skipArgs:!0,tags:null,handler:function(){var output=document.createDocumentFragment();try{Scripting.evalJavaScript(this.payload[0].contents,output)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}Config.debug&&this.createDebugView(),output.hasChildNodes()&&this.output.appendChild(output)}}),Macro.add("include",{handler:function(){return 0===this.args.length?this.error("no passage specified"):(passage="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(passage)?(Config.debug&&this.debugView.modes({block:!0}),passage=Story.get(passage),void(this.args[1]?jQuery(document.createElement(this.args[1])).addClass("".concat(passage.domId," macro-").concat(this.name)).attr("data-passage",passage.title).appendTo(this.output):jQuery(this.output)).wiki(passage.processText())):this.error('passage "'.concat(passage,'" does not exist')));var passage}}),Macro.add("nobr",{skipArgs:!0,tags:null,handler:function(){new Wikifier(this.output,this.payload[0].contents.replace(/^\n+|\n+$/g,"").replace(/\n+/g," "))}}),Macro.add(["print","=","-"],{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{var result=stringFrom(Scripting.evalJavaScript(this.args.full));null!==result&&new Wikifier(this.output,"-"===this.name?Util.escape(result):result)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}}}),Macro.add("silently",{skipArgs:!0,tags:null,handler:function(){var frag=document.createDocumentFragment();if(new Wikifier(frag,this.payload[0].contents.trim()),Config.debug)this.debugView.modes({block:!0,hidden:!0}),this.output.appendChild(frag);else{var errList=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent}));if(errList.length>0)return this.error("error".concat(1===errList.length?"":"s"," within contents (").concat(errList.join("; "),")"))}}}),Macro.add("type",{isAsync:!0,tags:null,typeId:0,handler:function(){if(0===this.args.length)return this.error("no speed specified");var cursor,speed=Util.fromCssTime(this.args[0]);if(speed<0)return this.error("speed time value must be non-negative (received: ".concat(this.args[0],")"));for(var elClass="",elId="",elTag="div",skipKey=Config.macros.typeSkipKey,start=400,options=this.args.slice(1);options.length>0;){var option=options.shift();switch(option){case"class":if(0===options.length)return this.error("class option missing required class name(s)");if(""===(elClass=options.shift()))throw new Error('class option class name(s) must be non-empty (received: "")');break;case"element":if(0===options.length)return this.error("element option missing required element tag name");if(""===(elTag=options.shift()))throw new Error('element option tag name must be non-empty (received: "")');break;case"id":if(0===options.length)return this.error("id option missing required ID");if(""===(elId=options.shift()))throw new Error('id option ID must be non-empty (received: "")');break;case"keep":cursor="keep";break;case"none":cursor="none";break;case"skipkey":if(0===options.length)return this.error("skipkey option missing required key value");if(""===(skipKey=options.shift()))throw new Error('skipkey option key value must be non-empty (received: "")');break;case"start":if(0===options.length)return this.error("start option missing required time value");var value=options.shift();if((start=Util.fromCssTime(value))<0)throw new Error("start option time value must be non-negative (received: ".concat(value,")"));break;default:return this.error("unknown option: ".concat(option))}}var contents=this.payload[0].contents;if(""!==contents.trim()){Config.debug&&this.debugView.modes({block:!0});var className="macro-".concat(this.name),namespace=".".concat(className),$target=jQuery(document.createElement(elTag)).addClass("".concat(className," ").concat(className,"-target")).appendTo(this.output);TempState.macroTypeQueue||(TempState.macroTypeQueue=[],$(document).off(namespace).one(":passageinit".concat(namespace),(function(){return $(document).off(namespace)})));var startTyping=0===TempState.macroTypeQueue.length,selfId=++this.self.typeId;TempState.macroTypeQueue.push({id:selfId,handler:function(){var $wrapper=jQuery(document.createElement(elTag)).addClass(className);elId&&$wrapper.attr("id",elId),elClass&&$wrapper.addClass(elClass),new Wikifier($wrapper,contents);var passage=State.passage,turn=State.turns;if(!Config.macros.typeVisitedPassages&&State.passages.slice(0,-1).some((function(title){return title===passage}))||$wrapper.find(".error").length>0)return $target.replaceWith($wrapper),TempState.macroTypeQueue.shift(),void(TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().handler());var typer=new NodeTyper({targetNode:$wrapper.get(0),classNames:"none"===cursor?null:"".concat(className,"-cursor")});$target.replaceWith($wrapper);var keydownAndNS="keydown".concat(namespace),typingStopAndNS="".concat(":typingstop").concat(namespace);$(document).off(keydownAndNS).on(keydownAndNS,(function(ev){Util.scrubEventKey(ev.key)!==skipKey||ev.target!==document.body&&ev.target!==document.documentElement||(ev.preventDefault(),$(document).off(keydownAndNS),typer.finish())})).one(typingStopAndNS,(function(){TempState.macroTypeQueue&&(0===TempState.macroTypeQueue.length?jQuery.event.trigger(":typingcomplete"):TempState.macroTypeQueue.first().handler())}));var typeNode=function(){var typeNodeMember=function(typeIntervalId){State.passage===passage&&State.turns===turn&&typer.type()||(typeIntervalId&&clearInterval(typeIntervalId),TempState.macroTypeQueue&&TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().id===selfId&&TempState.macroTypeQueue.shift(),$wrapper.trigger(":typingstop"),$wrapper.addClass("".concat(className,"-done")),"keep"===cursor&&$wrapper.addClass("".concat(className,"-cursor")))};$wrapper.trigger(":typingstart"),typeNodeMember();var typeNodeMemberId=setInterval((function(){return typeNodeMember(typeNodeMemberId)}),speed)};start?setTimeout(typeNode,start):typeNode()}}),startTyping&&(Engine.isPlaying()?$(document).one(":passageend".concat(namespace),(function(){return TempState.macroTypeQueue.first().handler()})):TempState.macroTypeQueue.first().handler())}}}),Macro.add("display","include"),Macro.add("if",{skipArgs:!0,tags:["elseif","else"],elseifWsRe:/^\s*if\b/i,ifAssignRe:/[^!=&^|<>*/%+-]=[^=>]/,handler:function(){var i;try{var len=this.payload.length,elseifWsRe=this.self.elseifWsRe,ifAssignRe=this.self.ifAssignRe;for(i=0;i<len;++i)if("else"===this.payload[i].name){if(this.payload[i].args.raw.length>0)return elseifWsRe.test(this.payload[i].args.raw)?this.error('whitespace is not allowed between the "else" and "if" in <<elseif>> clause'.concat(i>0?" (#"+i+")":"")):this.error("<<else>> does not accept a conditional expression (perhaps you meant to use <<elseif>>), invalid: ".concat(this.payload[i].args.raw));if(i+1!==len)return this.error("<<else>> must be the final clause")}else{if(0===this.payload[i].args.full.length)return this.error("no conditional expression specified for <<".concat(this.payload[i].name,">> clause").concat(i>0?" (#"+i+")":""));if(Config.macros.ifAssignmentError&&ifAssignRe.test(this.payload[i].args.full))return this.error("assignment operator found within <<".concat(this.payload[i].name,">> clause").concat(i>0?" (#"+i+")":""," (perhaps you meant to use an equality operator: ==, ===, eq, is), invalid: ").concat(this.payload[i].args.raw))}var evalJavaScript=Scripting.evalJavaScript,success=!1;for(i=0;i<len;++i){if(Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1}),"else"===this.payload[i].name||evalJavaScript(this.payload[i].args.full)){success=!0,new Wikifier(this.output,this.payload[i].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++i;i<len;++i)this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0,invalid:!0});this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!success,invalid:!success})}}catch(ex){return this.error("bad conditional expression in <<".concat(0===i?"if":"elseif",">> clause").concat(i>0?" (#"+i+")":"",": ").concat("object"===_typeof(ex)?ex.message:ex))}}}),Macro.add("switch",{skipArgs:["switch"],tags:["case","default"],handler:function(){if(0===this.args.full.length)return this.error("no expression specified");var i,result,len=this.payload.length;if(1===len)return this.error("no cases specified");for(i=1;i<len;++i)if("default"===this.payload[i].name){if(this.payload[i].args.length>0)return this.error("<<default>> does not accept values, invalid: ".concat(this.payload[i].args.raw));if(i+1!==len)return this.error("<<default>> must be the final case")}else if(0===this.payload[i].args.length)return this.error("no value(s) specified for <<".concat(this.payload[i].name,">> (#").concat(i,")"));try{result=Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}var debugView=this.debugView,success=!1;for(Config.debug&&debugView.modes({nonvoid:!1,hidden:!0}),i=1;i<len;++i){if(Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1}),"default"===this.payload[i].name||this.payload[i].args.some((function(val){return val===result}))){success=!0,new Wikifier(this.output,this.payload[i].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++i;i<len;++i)this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0,invalid:!0});debugView.modes({nonvoid:!1,hidden:!0,invalid:!success}),this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0,invalid:!success})}}}),Macro.add("for",{skipArgs:!0,tags:null,hasRangeRe:new RegExp("^\\S".concat(Patterns.anyChar,"*?\\s+range\\s+\\S").concat(Patterns.anyChar,"*?$")),rangeRe:new RegExp("^(?:State\\.(variables|temporary)\\.(".concat(Patterns.identifier,")\\s*,\\s*)?State\\.(variables|temporary)\\.(").concat(Patterns.identifier,")\\s+range\\s+(\\S").concat(Patterns.anyChar,"*?)$")),threePartRe:/^([^;]*?)\s*;\s*([^;]*?)\s*;\s*([^;]*?)$/,forInRe:/^\S+\s+in\s+\S+/i,forOfRe:/^\S+\s+of\s+\S+/i,handler:function(){var argsStr=this.args.full.trim(),payload=this.payload[0].contents.replace(/\n$/,"");if(0===argsStr.length)this.self.handleFor.call(this,payload,null,!0,null);else if(this.self.hasRangeRe.test(argsStr)){var parts=argsStr.match(this.self.rangeRe);if(null===parts)return this.error("invalid range form syntax, format: [index ,] value range collection");this.self.handleForRange.call(this,payload,{type:parts[1],name:parts[2]},{type:parts[3],name:parts[4]},parts[5])}else{var init,condition,post;if(-1===argsStr.indexOf(";")){if(this.self.forInRe.test(argsStr))return this.error("invalid syntax, for…in is not supported; see: for…range");if(this.self.forOfRe.test(argsStr))return this.error("invalid syntax, for…of is not supported; see: for…range");condition=argsStr}else{var _parts=argsStr.match(this.self.threePartRe);if(null===_parts)return this.error("invalid 3-part conditional form syntax, format: [init] ; [condition] ; [post]");init=_parts[1],condition=_parts[2].trim(),post=_parts[3],0===condition.length&&(condition=!0)}this.self.handleFor.call(this,payload,init,condition,post)}},handleFor:function(payload,init,condition,post){var evalJavaScript=Scripting.evalJavaScript,first=!0,safety=Config.macros.maxLoopIterations;Config.debug&&this.debugView.modes({block:!0});try{if(TempState.break=null,init)try{evalJavaScript(init)}catch(ex){return this.error("bad init expression: ".concat("object"===_typeof(ex)?ex.message:ex))}for(;evalJavaScript(condition);){if(--safety<0)return this.error("exceeded configured maximum loop iterations (".concat(Config.macros.maxLoopIterations,")"));if(new Wikifier(this.output,first?payload.replace(/^\n/,""):payload),first&&(first=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}if(post)try{evalJavaScript(post)}catch(ex){return this.error("bad post expression: ".concat("object"===_typeof(ex)?ex.message:ex))}}}catch(ex){return this.error("bad conditional expression: ".concat("object"===_typeof(ex)?ex.message:ex))}finally{TempState.break=null}},handleForRange:function(payload,indexVar,valueVar,rangeExp){var rangeList,first=!0;try{rangeList=this.self.toRangeList(rangeExp)}catch(ex){return this.error(ex.message)}Config.debug&&this.debugView.modes({block:!0});try{TempState.break=null;for(var i=0;i<rangeList.length;++i)if(indexVar.name&&(State[indexVar.type][indexVar.name]=rangeList[i][0]),State[valueVar.type][valueVar.name]=rangeList[i][1],new Wikifier(this.output,first?payload.replace(/^\n/,""):payload),first&&(first=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}}catch(ex){return this.error("object"===_typeof(ex)?ex.message:ex)}finally{TempState.break=null}},toRangeList:function(rangeExp){var value,list,evalJavaScript=Scripting.evalJavaScript;try{value=evalJavaScript("{"===rangeExp[0]?"(".concat(rangeExp,")"):rangeExp)}catch(ex){if("object"!==_typeof(ex))throw new Error("bad range expression: ".concat(ex));throw ex.message="bad range expression: ".concat(ex.message),ex}switch(_typeof(value)){case"string":list=[];for(var i=0;i<value.length;){var obj=Util.charAndPosAt(value,i);list.push([i,obj.char]),i=1+obj.end}break;case"object":if(Array.isArray(value))list=value.map((function(val,i){return[i,val]}));else if(value instanceof Set)list=_toConsumableArray(value).map((function(val,i){return[i,val]}));else if(value instanceof Map)list=_toConsumableArray(value.entries());else{if("Object"!==Util.toStringTag(value))throw new Error("unsupported range expression type: ".concat(Util.toStringTag(value)));list=Object.keys(value).map((function(key){return[key,value[key]]}))}break;default:throw new Error("unsupported range expression type: ".concat(_typeof(value)))}return list}}),Macro.add(["break","continue"],{skipArgs:!0,handler:function(){if(!this.contextHas((function(ctx){return"for"===ctx.name})))return this.error("must only be used in conjunction with its parent macro <<for>>");TempState.break="continue"===this.name?1:2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["button","link"],{isAsync:!0,tags:null,handler:function(){var _this15=this;if(0===this.args.length)return this.error("no ".concat("button"===this.name?"button":"link"," text specified"));var passage,$link=jQuery(document.createElement("button"===this.name?"button":"a"));if("object"===_typeof(this.args[0]))if(this.args[0].isImage){var $image=jQuery(document.createElement("img")).attr("src",this.args[0].source).appendTo($link);$link.addClass("link-image"),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),passage=this.args[0].link}else $link.append(document.createTextNode(this.args[0].text)),passage=this.args[0].link;else $link.wikiWithOptions({profile:"core"},this.args[0]),passage=this.args.length>1?this.args[1]:undefined;null!=passage?($link.attr("data-passage",passage),Story.has(passage)?($link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&$link.addClass("link-visited")):$link.addClass("link-broken")):$link.addClass("link-internal"),$link.addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:null!=passage?"link":"button",one:null!=passage},this.createShadowWrapper(""!==this.payload[0].contents?function(){return Wikifier.wikifyEval(_this15.payload[0].contents.trim())}:null,null!=passage?function(){return Engine.play(passage)}:null)).appendTo(this.output)}}),Macro.add("checkbox",{isAsync:!0,handler:function(){if(this.args.length<3){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("unchecked value"),this.args.length<3&&errors.push("checked value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),uncheckValue=this.args[1],checkValue=this.args[2],el=document.createElement("input");switch(jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),type:"checkbox",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,this.checked?checkValue:uncheckValue)}))).appendTo(this.output),this.args[3]){case"autocheck":State.getVar(varName)===checkValue?el.checked=!0:State.setVar(varName,uncheckValue);break;case"checked":el.checked=!0,State.setVar(varName,checkValue);break;default:State.setVar(varName,uncheckValue)}}}),Macro.add(["cycle","listbox"],{isAsync:!0,skipArgs:["optionsfrom"],tags:["option","optionsfrom"],handler:function(){var _this16=this;if(0===this.args.length)return this.error("no variable name specified");if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),len=this.payload.length;if(1===len)return this.error("no options specified");for(var config={autoselect:!1,once:!1},i=1;i<this.args.length;++i){var arg=this.args[i];switch(arg){case"once":config.once=!0;break;case"autoselect":config.autoselect=!0;break;default:return this.error("unknown argument: ".concat(arg))}}for(var options=[],tagCount={option:0,optionsfrom:0},selectedIdx=-1,_i5=1;_i5<len;++_i5){var payload=this.payload[_i5];if("option"===payload.name){if(++tagCount.option,0===payload.args.length)return this.error("no arguments specified for <<".concat(payload.name,">> (#").concat(tagCount.option,")"));var option={label:String(payload.args[0])},isSelected=!1;switch(payload.args.length){case 1:option.value=payload.args[0];break;case 2:"selected"===payload.args[1]?(option.value=payload.args[0],isSelected=!0):option.value=payload.args[1];break;default:option.value=payload.args[1],"selected"===payload.args[2]&&(isSelected=!0)}if(options.push(option),isSelected){if(config.autoselect)return this.error("cannot specify both the autoselect and selected keywords");if(-1!==selectedIdx)return this.error("multiple selected keywords specified for <<".concat(payload.name,">> (#").concat(selectedIdx+1," & #").concat(tagCount.option,")"));selectedIdx=options.length-1}}else{var _ret=function(){if(++tagCount.optionsfrom,0===payload.args.full.length)return{v:_this16.error("no expression specified for <<".concat(payload.name,">> (#").concat(tagCount.optionsfrom,")"))};var result=void 0;try{var exp=payload.args.full;result=Scripting.evalJavaScript("{"===exp[0]?"(".concat(exp,")"):exp)}catch(ex){return{v:_this16.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}}if("object"!==_typeof(result)||null===result)return{v:_this16.error("expression must yield a supported collection or generic object (type: ".concat(null===result?"null":_typeof(result),")"))};if(result instanceof Array||result instanceof Set)result.forEach((function(val){return options.push({label:String(val),value:val})}));else if(result instanceof Map)result.forEach((function(val,key){return options.push({label:String(key),value:val})}));else{var oType=Util.toStringTag(result);if("Object"!==oType)return{v:_this16.error("expression must yield a supported collection or generic object (object type: ".concat(oType,")"))};Object.keys(result).forEach((function(key){return options.push({label:key,value:result[key]})}))}}();if("object"===_typeof(_ret))return _ret.v}}if(-1===selectedIdx)if(config.autoselect){var sameValueZero=Util.sameValueZero,curValue=State.getVar(varName),curValueIdx=options.findIndex((function(opt){return sameValueZero(opt.value,curValue)}));selectedIdx=-1===curValueIdx?0:curValueIdx}else selectedIdx=0;if("cycle"===this.name){var lastIdx=options.length-1;if(config.once&&selectedIdx===lastIdx)jQuery(this.output).wikiWithOptions({profile:"core"},options[selectedIdx].label);else{var cycleIdx=selectedIdx;jQuery(document.createElement("a")).wikiWithOptions({profile:"core"},options[selectedIdx].label).attr("id","".concat(this.name,"-").concat(varId)).addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:"button"},this.createShadowWrapper((function(){var $this=$(this);cycleIdx=(cycleIdx+1)%options.length,State.setVar(varName,options[cycleIdx].value),$this.empty().wikiWithOptions({profile:"core"},options[cycleIdx].label),config.once&&cycleIdx===lastIdx&&$this.off().contents().unwrap()}))).appendTo(this.output)}}else{var $select=jQuery(document.createElement("select"));options.forEach((function(opt,i){jQuery(document.createElement("option")).val(i).text(opt.label).appendTo($select)})),$select.attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),tabindex:0}).addClass("macro-".concat(this.name)).val(selectedIdx).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,options[Number(this.value)].value)}))).appendTo(this.output)}State.setVar(varName,options[selectedIdx].value)}}),Macro.add(["linkappend","linkprepend","linkreplace"],{isAsync:!0,tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var _this17=this;if(0===this.args.length)return this.error("no link text specified");var $link=jQuery(document.createElement("a")),$insert=jQuery(document.createElement("span")),transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]);$link.wikiWithOptions({profile:"core"},this.args[0]).addClass("link-internal macro-".concat(this.name)).ariaClick({namespace:".macros",one:!0},this.createShadowWrapper((function(){if("linkreplace"===_this17.name?$link.remove():$link.wrap('<span class="macro-'.concat(_this17.name,'"></span>')).replaceWith((function(){return $link.html()})),""!==_this17.payload[0].contents){var frag=document.createDocumentFragment();new Wikifier(frag,_this17.payload[0].contents),$insert.append(frag)}transition&&setTimeout((function(){return $insert.removeClass("macro-".concat(_this17.name,"-in"))}),Engine.minDomActionDelay)}))).appendTo(this.output),$insert.addClass("macro-".concat(this.name,"-insert")),transition&&$insert.addClass("macro-".concat(this.name,"-in")),"linkprepend"===this.name?$insert.insertBefore($link):$insert.insertAfter($link)}}),Macro.add(["numberbox","textbox"],{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("default value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var asNumber="numberbox"===this.name,defaultValue=asNumber?Number(this.args[1]):this.args[1];if(asNumber&&Number.isNaN(defaultValue))return this.error('default value "'.concat(this.args[1],'" is neither a number nor can it be parsed into a number'));var passage,varId=Util.slugify(varName),el=document.createElement("input"),autofocus=!1;this.args.length>3?(passage=this.args[2],autofocus="autofocus"===this.args[3]):this.args.length>2&&("autofocus"===this.args[2]?autofocus=!0:passage=this.args[2]),"object"===_typeof(passage)&&(passage=passage.link),jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),type:asNumber?"number":"text",inputmode:asNumber?"decimal":"text",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,asNumber?Number(this.value):this.value)}))).on("keypress.macros",this.createShadowWrapper((function(ev){13===ev.which&&(ev.preventDefault(),State.setVar(varName,asNumber?Number(this.value):this.value),null!=passage&&Engine.play(passage))}))).appendTo(this.output),asNumber&&(el.step="any"),State.setVar(varName,defaultValue),el.value=defaultValue,autofocus&&(el.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:".concat(el.id)]=function(task){delete postdisplay[task],setTimeout((function(){return el.focus()}),Engine.minDomActionDelay)})}}),Macro.add("radiobutton",{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("checked value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),checkValue=this.args[1],el=document.createElement("input");switch(TempState.hasOwnProperty(this.name)||(TempState[this.name]={}),TempState[this.name].hasOwnProperty(varId)||(TempState[this.name][varId]=0),jQuery(el).attr({id:"".concat(this.name,"-").concat(varId,"-").concat(TempState[this.name][varId]++),name:"".concat(this.name,"-").concat(varId),type:"radio",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){this.checked&&State.setVar(varName,checkValue)}))).appendTo(this.output),this.args[2]){case"autocheck":State.getVar(varName)===checkValue&&(el.checked=!0);break;case"checked":el.checked=!0,State.setVar(varName,checkValue)}}}),Macro.add("textarea",{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("default value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var varId=Util.slugify(varName),defaultValue=this.args[1],autofocus="autofocus"===this.args[2],el=document.createElement("textarea");jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),rows:4,tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,this.value)}))).appendTo(this.output),State.setVar(varName,defaultValue),el.textContent=defaultValue,autofocus&&(el.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:".concat(el.id)]=function(task){delete postdisplay[task],setTimeout((function(){return el.focus()}),Engine.minDomActionDelay)})}}),Macro.add("click","link"),Macro.add("actions",{handler:function(){for(var $list=jQuery(document.createElement("ul")).addClass(this.name).appendTo(this.output),i=0;i<this.args.length;++i){var passage=void 0,text=void 0,$image=void 0,setFn=void 0;if("object"===_typeof(this.args[i])?this.args[i].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[i].source),this.args[i].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[i].passage),this.args[i].hasOwnProperty("title")&&$image.attr("title",this.args[i].title),this.args[i].hasOwnProperty("align")&&$image.attr("align",this.args[i].align),passage=this.args[i].link,setFn=this.args[i].setFn):(text=this.args[i].text,passage=this.args[i].link,setFn=this.args[i].setFn):text=passage=this.args[i],!(State.variables.hasOwnProperty("#actions")&&State.variables["#actions"].hasOwnProperty(passage)&&State.variables["#actions"][passage])){var $link=jQuery(Wikifier.createInternalLink(jQuery(document.createElement("li")).appendTo($list),passage,null,function(passage,fn){return function(){State.variables.hasOwnProperty("#actions")||(State.variables["#actions"]={}),State.variables["#actions"][passage]=!0,"function"==typeof fn&&fn()}}(passage,setFn))).addClass("macro-".concat(this.name)).append($image||document.createTextNode(text));$image&&$link.addClass("link-image")}}}}),Macro.add(["back","return"],{handler:function(){if(this.args.length>1)return this.error("too many arguments specified, check the documentation for details");var passage,text,$image,$link,momentIndex=-1;if(1===this.args.length&&("object"===_typeof(this.args[0])?this.args[0].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),this.args[0].hasOwnProperty("link")&&(passage=this.args[0].link)):(1===this.args[0].count||(text=this.args[0].text),passage=this.args[0].link):1===this.args.length&&(text=this.args[0])),null==passage){for(var i=State.length-2;i>=0;--i)if(State.history[i].title!==State.passage){momentIndex=i,passage=State.history[i].title;break}if(null==passage&&"return"===this.name)for(var _i6=State.expired.length-1;_i6>=0;--_i6)if(State.expired[_i6]!==State.passage){passage=State.expired[_i6];break}}else{if(!Story.has(passage))return this.error('passage "'.concat(passage,'" does not exist'));if("back"===this.name){for(var _i7=State.length-2;_i7>=0;--_i7)if(State.history[_i7].title===passage){momentIndex=_i7;break}if(-1===momentIndex)return this.error('cannot find passage "'.concat(passage,'" in the current story history'))}}if(null==passage)return this.error("cannot find passage");"back"!==this.name||-1!==momentIndex?($link=jQuery(document.createElement("a")).addClass("link-internal").ariaClick({one:!0},"return"===this.name?function(){return Engine.play(passage)}:function(){return Engine.goTo(momentIndex)}),$image&&$link.addClass("link-image")):$link=jQuery(document.createElement("span")).addClass("link-disabled"),$link.addClass("macro-".concat(this.name)).append($image||document.createTextNode(text||L10n.get("macro".concat(this.name.toUpperFirst(),"Text")))).appendTo(this.output)}}),Macro.add("choice",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var passage,text,$image,setFn,$link,choiceId=State.passage;if(1===this.args.length?"object"===_typeof(this.args[0])?this.args[0].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),passage=this.args[0].link,setFn=this.args[0].setFn):(text=this.args[0].text,passage=this.args[0].link,setFn=this.args[0].setFn):text=passage=this.args[0]:(passage=this.args[0],text=this.args[1]),State.variables.hasOwnProperty("#choice")&&State.variables["#choice"].hasOwnProperty(choiceId)&&State.variables["#choice"][choiceId])return $link=jQuery(document.createElement("span")).addClass("link-disabled macro-".concat(this.name)).attr("tabindex",-1).append($image||document.createTextNode(text)).appendTo(this.output),void($image&&$link.addClass("link-image"));$link=jQuery(Wikifier.createInternalLink(this.output,passage,null,(function(){State.variables.hasOwnProperty("#choice")||(State.variables["#choice"]={}),State.variables["#choice"][choiceId]=!0,"function"==typeof setFn&&setFn()}))).addClass("macro-".concat(this.name)).append($image||document.createTextNode(text)),$image&&$link.addClass("link-image")}}),Macro.add(["addclass","toggleclass"],{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("selector"),this.args.length<2&&errors.push("class names"),this.error("no ".concat(errors.join(" or ")," specified"))}var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));switch(this.name){case"addclass":$targets.addClass(this.args[1].trim());break;case"toggleclass":$targets.toggleClass(this.args[1].trim())}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeclass",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));this.args.length>1?$targets.removeClass(this.args[1].trim()):$targets.removeClass(),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("copy",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));jQuery(this.output).append($targets.html()),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["append","prepend","replace"],{tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var _this18=this;if(0===this.args.length)return this.error("no selector specified");var $insert,$targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));if(""!==this.payload[0].contents)switch(this.args.length>1&&this.self.t8nRe.test(this.args[1])?(($insert=jQuery(document.createElement("span"))).addClass("macro-".concat(this.name,"-insert macro-").concat(this.name,"-in")),setTimeout((function(){return $insert.removeClass("macro-".concat(_this18.name,"-in"))}),Engine.minDomActionDelay)):$insert=jQuery(document.createDocumentFragment()),$insert.wiki(this.payload[0].contents),this.name){case"replace":$targets.empty();case"append":$targets.append($insert);break;case"prepend":$targets.prepend($insert)}else"replace"===this.name&&$targets.empty();Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remove",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));$targets.remove(),Config.debug&&this.debugView.modes({hidden:!0})}}),Has.audio){var errorOnePlaybackAction=function(cur,prev){return'only one playback action allowed per invocation, "'.concat(cur,'" cannot be combined with "').concat(prev,'"')};Macro.add("audio",{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("track and/or group IDs"),this.args.length<2&&errors.push("actions"),this.error("no ".concat(errors.join(" or ")," specified"))}var selected;try{selected=SimpleAudio.select(this.args[0])}catch(ex){return this.error(ex.message)}for(var action,fadeTo,loop,mute,passage,time,volume,args=this.args.slice(1),fadeOver=5;args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"pause":case"play":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"fadein":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=1;break;case"fadeout":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=0;break;case"fadeto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(0===args.length)return this.error("fadeto missing required level value");if(action="fade",raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeto: ".concat(raw));break;case"fadeoverto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(args.length<2){var _errors=[];return args.length<1&&_errors.push("seconds"),args.length<2&&_errors.push("level"),this.error("fadeoverto missing required ".concat(_errors.join(" and ")," value").concat(_errors.length>1?"s":""))}if(action="fade",raw=args.shift(),fadeOver=Number.parseFloat(raw),Number.isNaN(fadeOver)||!Number.isFinite(fadeOver))return this.error("cannot parse fadeoverto: ".concat(raw));if(raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeoverto: ".concat(raw));break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;case"mute":case"unmute":mute="mute"===arg;break;case"time":if(0===args.length)return this.error("time missing required seconds value");if(raw=args.shift(),time=Number.parseFloat(raw),Number.isNaN(time)||!Number.isFinite(time))return this.error("cannot parse time: ".concat(raw));break;case"loop":case"unloop":loop="loop"===arg;break;case"goto":if(0===args.length)return this.error("goto missing required passage title");if(raw=args.shift(),passage="object"===_typeof(raw)?raw.link:raw,!Story.has(passage))return this.error('passage "'.concat(passage,'" does not exist'));break;default:return this.error("unknown action: ".concat(arg))}}try{if(null!=volume&&selected.volume(volume),null!=time&&selected.time(time),null!=mute&&selected.mute(mute),null!=loop&&selected.loop(loop),null!=passage){var nsEnded="ended.macros.macro-".concat(this.name,"_goto");selected.off(nsEnded).one(nsEnded,(function(){selected.off(nsEnded),Engine.play(passage)}))}switch(action){case"fade":selected.fade(fadeOver,fadeTo);break;case"load":selected.load();break;case"pause":selected.pause();break;case"play":selected.playWhenAllowed();break;case"stop":selected.stop();break;case"unload":selected.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("cacheaudio",{handler:function(){var _this19=this;if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("track ID"),this.args.length<2&&errors.push("sources"),this.error("no ".concat(errors.join(" or ")," specified"))}var id=String(this.args[0]).trim(),oldFmtRe=/^format:\s*([\w-]+)\s*;\s*/i;try{SimpleAudio.tracks.add(id,this.args.slice(1).map((function(source){if(oldFmtRe.test(source)){if(Config.debug)return _this19.error('track ID "'.concat(id,'": format specifier migration required, "format:formatId;" → "formatId|"'));source=source.replace(oldFmtRe,"$1|")}return source})))}catch(ex){return this.error(ex.message)}if(Config.debug&&!SimpleAudio.tracks.get(id).hasSource())return this.error('track ID "'.concat(id,'": no supported audio sources found'));Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("createaudiogroup",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no group ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var groupId=String(this.args[0]).trim(),trackIds=[],i=1,len=this.payload.length;i<len;++i){if(this.payload[i].args.length<1)return this.error("no track ID specified");trackIds.push(String(this.payload[i].args[0]).trim()),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.groups.add(groupId,trackIds)}catch(ex){return this.error(ex.message)}Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("createplaylist",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no list ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");var playlist=Macro.get("playlist");if(null!==playlist.from&&"createplaylist"!==playlist.from)return this.error("a playlist has already been defined with <<setplaylist>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var listId=String(this.args[0]).trim(),trackObjs=[],i=1,len=this.payload.length;i<len;++i){if(0===this.payload[i].args.length)return this.error("no track ID specified");for(var trackObj={id:String(this.payload[i].args[0]).trim()},args=this.payload[i].args.slice(1);args.length>0;){var arg=args.shift(),raw=void 0,parsed=void 0;switch(arg){case"copy":case"own":trackObj.own=!0;break;case"rate":args.length>0&&args.shift();break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),parsed=Number.parseFloat(raw),Number.isNaN(parsed)||!Number.isFinite(parsed))return this.error("cannot parse volume: ".concat(raw));trackObj.volume=parsed;break;default:return this.error("unknown action: ".concat(arg))}}trackObjs.push(trackObj),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.lists.add(listId,trackObjs)}catch(ex){return this.error(ex.message)}null===playlist.from&&(playlist.from="createplaylist"),Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("masteraudio",{handler:function(){if(0===this.args.length)return this.error("no actions specified");for(var action,mute,muteOnHide,volume,args=this.args.slice(0);args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"mute":case"unmute":mute="mute"===arg;break;case"muteonhide":case"nomuteonhide":muteOnHide="muteonhide"===arg;break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;default:return this.error("unknown action: ".concat(arg))}}try{switch(null!=mute&&SimpleAudio.mute(mute),null!=muteOnHide&&SimpleAudio.muteOnHidden(muteOnHide),null!=volume&&SimpleAudio.volume(volume),action){case"load":SimpleAudio.load();break;case"stop":SimpleAudio.stop();break;case"unload":SimpleAudio.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("playlist",{from:null,handler:function(){var list,args,action,from=this.self.from;if(null===from)return this.error("no playlists have been created");if("createplaylist"===from){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("list ID"),this.args.length<2&&errors.push("actions"),this.error("no ".concat(errors.join(" or ")," specified"))}var id=String(this.args[0]).trim();if(!SimpleAudio.lists.has(id))return this.error('playlist "'.concat(id,'" does not exist'));list=SimpleAudio.lists.get(id),args=this.args.slice(1)}else{if(0===this.args.length)return this.error("no actions specified");list=SimpleAudio.lists.get("setplaylist"),args=this.args.slice(0)}for(var fadeTo,loop,mute,shuffle,volume,fadeOver=5;args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"pause":case"play":case"skip":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"fadein":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=1;break;case"fadeout":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=0;break;case"fadeto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(0===args.length)return this.error("fadeto missing required level value");if(action="fade",raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeto: ".concat(raw));break;case"fadeoverto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(args.length<2){var _errors2=[];return args.length<1&&_errors2.push("seconds"),args.length<2&&_errors2.push("level"),this.error("fadeoverto missing required ".concat(_errors2.join(" and ")," value").concat(_errors2.length>1?"s":""))}if(action="fade",raw=args.shift(),fadeOver=Number.parseFloat(raw),Number.isNaN(fadeOver)||!Number.isFinite(fadeOver))return this.error("cannot parse fadeoverto: ".concat(raw));if(raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeoverto: ".concat(raw));break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;case"mute":case"unmute":mute="mute"===arg;break;case"loop":case"unloop":loop="loop"===arg;break;case"shuffle":case"unshuffle":shuffle="shuffle"===arg;break;default:return this.error("unknown action: ".concat(arg))}}try{switch(null!=volume&&list.volume(volume),null!=mute&&list.mute(mute),null!=loop&&list.loop(loop),null!=shuffle&&list.shuffle(shuffle),action){case"fade":list.fade(fadeOver,fadeTo);break;case"load":list.load();break;case"pause":list.pause();break;case"play":list.playWhenAllowed();break;case"skip":list.skip();break;case"stop":list.stop();break;case"unload":list.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("removeaudiogroup",{handler:function(){if(0===this.args.length)return this.error("no group ID specified");var id=String(this.args[0]).trim();if(!SimpleAudio.groups.has(id))return this.error('group "'.concat(id,'" does not exist'));SimpleAudio.groups.delete(id),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeplaylist",{handler:function(){if(0===this.args.length)return this.error("no list ID specified");var id=String(this.args[0]).trim();if(!SimpleAudio.lists.has(id))return this.error('playlist "'.concat(id,'" does not exist'));SimpleAudio.lists.delete(id),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("waitforaudio",{skipArgs:!0,handler:function(){SimpleAudio.loadWithScreen()}}),Macro.add("setplaylist",{handler:function(){if(0===this.args.length)return this.error("no track ID(s) specified");var playlist=Macro.get("playlist");if(null!==playlist.from&&"setplaylist"!==playlist.from)return this.error("playlists have already been defined with <<createplaylist>>");try{SimpleAudio.lists.add("setplaylist",this.args.slice(0))}catch(ex){return this.error(ex.message)}null===playlist.from&&(playlist.from="setplaylist"),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("stopallaudio",{skipArgs:!0,handler:function(){SimpleAudio.select(":all").stop(),Config.debug&&this.debugView.modes({hidden:!0})}})}else Macro.add(["audio","cacheaudio","createaudiogroup","createplaylist","masteraudio","playlist","removeaudiogroup","removeplaylist","waitforaudio","setplaylist","stopallaudio"],{skipArgs:!0,handler:function(){Config.debug&&this.debugView.modes({hidden:!0})}});Macro.add("done",{skipArgs:!0,tags:null,handler:function(){var contents=this.payload[0].contents.trim();""!==contents&&setTimeout(this.createShadowWrapper((function(){return $.wiki(contents)})),Engine.minDomActionDelay)}}),Macro.add("goto",{handler:function(){return 0===this.args.length?this.error("no passage specified"):(passage="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(passage)?void setTimeout((function(){return Engine.play(passage)}),Engine.minDomActionDelay):this.error('passage "'.concat(passage,'" does not exist')));var passage}}),Macro.add("repeat",{isAsync:!0,tags:null,timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){var delay,_this20=this;if(0===this.args.length)return this.error("no time value specified");try{delay=Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0]))}catch(ex){return this.error(ex.message)}Config.debug&&this.debugView.modes({block:!0});var transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]),$wrapper=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerInterval(this.createShadowWrapper((function(){var frag=document.createDocumentFragment();new Wikifier(frag,_this20.payload[0].contents);var $output=$wrapper;transition&&($output=jQuery(document.createElement("span")).addClass("macro-repeat-insert macro-repeat-in").appendTo($output)),$output.append(frag),transition&&setTimeout((function(){return $output.removeClass("macro-repeat-in")}),Engine.minDomActionDelay)})),delay)},registerInterval:function(callback,delay){var _this21=this;if("function"!=typeof callback)throw new TypeError("callback parameter must be a function");var passage=State.passage,turn=State.turns,timers=this.timers,timerId=null;timerId=setInterval((function(){if(State.passage!==passage||State.turns!==turn)return clearInterval(timerId),void timers.delete(timerId);var timerIdCache;try{TempState.break=null,TempState.hasOwnProperty("repeatTimerId")&&(timerIdCache=TempState.repeatTimerId),TempState.repeatTimerId=timerId,callback.call(_this21)}finally{void 0!==timerIdCache?TempState.repeatTimerId=timerIdCache:delete TempState.repeatTimerId,TempState.break=null}}),delay),timers.add(timerId),prehistory.hasOwnProperty("#repeat-timers-cleanup")||(prehistory["#repeat-timers-cleanup"]=function(task){delete prehistory[task],timers.forEach((function(timerId){return clearInterval(timerId)})),timers.clear()})}}),Macro.add("stop",{skipArgs:!0,handler:function(){if(!TempState.hasOwnProperty("repeatTimerId"))return this.error("must only be used in conjunction with its parent macro <<repeat>>");var timers=Macro.get("repeat").timers,timerId=TempState.repeatTimerId;clearInterval(timerId),timers.delete(timerId),TempState.break=2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("timed",{isAsync:!0,tags:["next"],timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){if(0===this.args.length)return this.error("no time value specified in <<timed>>");var i,items=[];try{items.push({name:this.name,source:this.source,delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0])),content:this.payload[0].contents})}catch(ex){return this.error("".concat(ex.message," in <<timed>>"))}if(this.payload.length>1)try{var len;for(i=1,len=this.payload.length;i<len;++i)items.push({name:this.payload[i].name,source:this.payload[i].source,delay:0===this.payload[i].args.length?items[items.length-1].delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.payload[i].args[0])),content:this.payload[i].contents})}catch(ex){return this.error("".concat(ex.message," in <<next>> (#").concat(i,")"))}Config.debug&&this.debugView.modes({block:!0});var transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]),$wrapper=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerTimeout(this.createShadowWrapper((function(item){var frag=document.createDocumentFragment();new Wikifier(frag,item.content);var $output=$wrapper;Config.debug&&"next"===item.name&&($output=jQuery(new DebugView($output[0],"macro",item.name,item.source).output)),transition&&($output=jQuery(document.createElement("span")).addClass("macro-timed-insert macro-timed-in").appendTo($output)),$output.append(frag),transition&&setTimeout((function(){return $output.removeClass("macro-timed-in")}),Engine.minDomActionDelay)})),items)},registerTimeout:function(callback,items){if("function"!=typeof callback)throw new TypeError("callback parameter must be a function");var passage=State.passage,turn=State.turns,timers=this.timers,timerId=null,nextItem=items.shift();timerId=setTimeout((function worker(){if(timers.delete(timerId),State.passage===passage&&State.turns===turn){var curItem=nextItem;null!=(nextItem=items.shift())&&(timerId=setTimeout(worker,nextItem.delay),timers.add(timerId)),callback.call(this,curItem)}}),nextItem.delay),timers.add(timerId),prehistory.hasOwnProperty("#timed-timers-cleanup")||(prehistory["#timed-timers-cleanup"]=function(task){delete prehistory[task],timers.forEach((function(timerId){return clearTimeout(timerId)})),timers.clear()})}}),Macro.add("widget",{tags:null,handler:function(){if(0===this.args.length)return this.error("no widget name specified");var widgetCode,widgetName=this.args[0],isNonVoid=this.args.length>1&&"container"===this.args[1];if(Macro.has(widgetName)){if(!Macro.get(widgetName).isWidget)return this.error('cannot clobber existing macro "'.concat(widgetName,'"'));Macro.delete(widgetName)}try{var widgetDef={isWidget:!0,handler:(widgetCode=this.payload[0].contents,function(){var shadowStore={};State.temporary.hasOwnProperty("args")&&(shadowStore._args=State.temporary.args),State.temporary.args=_toConsumableArray(this.args),State.temporary.args.raw=this.args.raw,State.temporary.args.full=this.args.full,this.addShadow("_args"),isNonVoid&&(State.temporary.hasOwnProperty("contents")&&(shadowStore._contents=State.temporary.contents),State.temporary.contents=this.payload[0].contents,this.addShadow("_contents")),State.variables.hasOwnProperty("args")&&(shadowStore.$args=State.variables.args),State.variables.args=State.temporary.args,this.addShadow("$args");try{var resFrag=document.createDocumentFragment(),errList=[];if(new Wikifier(resFrag,widgetCode),Array.from(resFrag.querySelectorAll(".error")).forEach((function(errEl){errList.push(errEl.textContent)})),0!==errList.length)return this.error("error".concat(errList.length>1?"s":""," within widget code (").concat(errList.join("; "),")"));this.output.appendChild(resFrag)}catch(ex){return this.error("cannot execute widget: ".concat(ex.message))}finally{shadowStore.hasOwnProperty("_args")?State.temporary.args=shadowStore._args:delete State.temporary.args,isNonVoid&&(shadowStore.hasOwnProperty("_contents")?State.temporary.contents=shadowStore._contents:delete State.temporary.contents),shadowStore.hasOwnProperty("$args")?State.variables.args=shadowStore.$args:delete State.variables.args}})};isNonVoid&&(widgetDef.tags=[]),Macro.add(widgetName,widgetDef),Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error('cannot create widget macro "'.concat(widgetName,'": ').concat(ex.message))}}})}();var Dialog=function(){var _$overlay=null,_$dialog=null,_$dialogTitle=null,_$dialogBody=null,_lastActive=null,_scrollbarWidth=0,_dialogObserver=null;function dialogClose(ev){return _$dialogBody.trigger(":dialogclosing"),jQuery(document).off(".dialog-close"),_dialogObserver?(_dialogObserver.disconnect(),_dialogObserver=null):_$dialogBody.off(".dialog-resize"),jQuery(window).off(".dialog-resize"),_$dialog.removeClass("open").css({left:"",right:"",top:"",bottom:""}),jQuery("#ui-bar,#story").find("[tabindex=-2]").removeAttr("aria-hidden").attr("tabindex",0),jQuery("body>[tabindex=-3]").removeAttr("aria-hidden").removeAttr("tabindex"),_$overlay.removeClass("open"),jQuery(document.documentElement).removeAttr("data-dialog"),_$dialogTitle.empty(),_$dialogBody.empty().removeClass(),null!==_lastActive&&(jQuery(_lastActive).focus(),_lastActive=null),ev&&ev.data&&"function"==typeof ev.data.closeFn&&ev.data.closeFn(ev),_$dialogBody.trigger(":dialogclose"),_$dialogBody.trigger(":dialogclosed"),Dialog}function dialogIsOpen(classNames){return _$dialog.hasClass("open")&&(!classNames||classNames.splitOrEmpty(/\s+/).every((function(cn){return _$dialogBody.hasClass(cn)})))}function dialogOpen(options,closeFn){_$dialogBody.trigger(":dialogopening");var top=jQuery.extend({top:50},options).top;return dialogIsOpen()||(_lastActive=safeActiveElement()),jQuery(document.documentElement).attr("data-dialog","open"),_$overlay.addClass("open"),null!==_$dialogBody[0].querySelector("img")&&_$dialogBody.imagesLoaded().always((function(){return _resizeHandler({data:{top:top}})})),jQuery("body>:not(script,#store-area,tw-storydata,#ui-bar,#ui-overlay,#ui-dialog)").attr("tabindex",-3).attr("aria-hidden",!0),jQuery("#ui-bar,#story").find("[tabindex]:not([tabindex^=-])").attr("tabindex",-2).attr("aria-hidden",!0),_$dialog.css(_calcPosition(top)).addClass("open").focus(),jQuery(window).on("resize.dialog-resize",null,{top:top},jQuery.throttle(40,_resizeHandler)),Has.mutationObserver?(_dialogObserver=new MutationObserver((function(mutations){for(var i=0;i<mutations.length;++i)if("childList"===mutations[i].type){_resizeHandler({data:{top:top}});break}}))).observe(_$dialogBody[0],{childList:!0,subtree:!0}):_$dialogBody.on("DOMNodeInserted.dialog-resize DOMNodeRemoved.dialog-resize",null,{top:top},jQuery.throttle(40,_resizeHandler)),jQuery(document).one("click.dialog-close",".ui-close",{closeFn:closeFn},(function(ev){dialogClose(ev)})).one("keypress.dialog-close",".ui-close",(function(ev){13!==ev.which&&32!==ev.which||jQuery(this).trigger("click")})),_$dialogBody.trigger(":dialogopen"),_$dialogBody.trigger(":dialogopened"),Dialog}function _calcPosition(topPos){var top=null!=topPos?topPos:50,$parent=jQuery(window),dialogPos={left:"",right:"",top:"",bottom:""};_$dialog.css(dialogPos);var horzSpace=$parent.width()-_$dialog.outerWidth(!0)-1,vertSpace=$parent.height()-_$dialog.outerHeight(!0)-1;return horzSpace<=32+_scrollbarWidth&&(vertSpace-=_scrollbarWidth),vertSpace<=32+_scrollbarWidth&&(horzSpace-=_scrollbarWidth),dialogPos.left=dialogPos.right=horzSpace<=32?16:horzSpace/2>>0,dialogPos.top=vertSpace<=32?dialogPos.bottom=16:vertSpace/2>top?top:dialogPos.bottom=vertSpace/2>>0,Object.keys(dialogPos).forEach((function(key){""!==dialogPos[key]&&(dialogPos[key]+="px")})),dialogPos}function _resizeHandler(ev){var top=ev&&ev.data&&void 0!==ev.data.top?ev.data.top:50;"block"===_$dialog.css("display")&&(_$dialog.css({display:"none"}),_$dialog.css(jQuery.extend({display:""},_calcPosition(top))))}return Object.freeze(Object.defineProperties({},{append:{value:function(){var _$dialogBody2;return(_$dialogBody2=_$dialogBody).append.apply(_$dialogBody2,arguments),Dialog}},body:{value:function(){return _$dialogBody.get(0)}},close:{value:dialogClose},init:{value:function(){if(!document.getElementById("ui-dialog")){_scrollbarWidth=function(){var scrollbarWidth;try{var inner=document.createElement("p"),outer=document.createElement("div");inner.style.width="100%",inner.style.height="200px",outer.style.position="absolute",outer.style.left="0px",outer.style.top="0px",outer.style.width="100px",outer.style.height="100px",outer.style.visibility="hidden",outer.style.overflow="hidden",outer.appendChild(inner),document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="auto";var w2=inner.offsetWidth;w1===w2&&(w2=outer.clientWidth),document.body.removeChild(outer),scrollbarWidth=w1-w2}catch(ex){}return scrollbarWidth||17}();var $elems=jQuery(document.createDocumentFragment()).append('<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1>'+'<button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="'.concat(L10n.get("close"),'"></button>')+'</div><div id="ui-dialog-body"></div></div>');_$overlay=jQuery($elems.find("#ui-overlay").get(0)),_$dialog=jQuery($elems.find("#ui-dialog").get(0)),_$dialogTitle=jQuery($elems.find("#ui-dialog-title").get(0)),_$dialogBody=jQuery($elems.find("#ui-dialog-body").get(0)),$elems.insertBefore("body>script#script-sugarcube")}}},isOpen:{value:dialogIsOpen},open:{value:dialogOpen},resize:{value:function(data){return _resizeHandler("object"===_typeof(data)?{data:data}:undefined)}},setup:{value:function(title,classNames){return _$dialogBody.empty().removeClass(),null!=classNames&&_$dialogBody.addClass(classNames),_$dialogTitle.empty().append((null!=title?String(title):"")||" "),_$dialogBody.get(0)}},wiki:{value:function(){var _$dialogBody3;return(_$dialogBody3=_$dialogBody).wiki.apply(_$dialogBody3,arguments),Dialog}},addClickHandler:{value:function(targets,options,startFn,doneFn,closeFn){return jQuery(targets).ariaClick((function(ev){ev.preventDefault(),"function"==typeof startFn&&startFn(ev),dialogOpen(options,closeFn),"function"==typeof doneFn&&doneFn(ev)}))}}}))}(),Engine=function(){var States=Util.toEnum({Idle:"idle",Playing:"playing",Rendering:"rendering"}),_initDebugViews=[],_state=States.Idle,_lastPlay=null,_outlinePatch=null,_updating=null;function engineGo(offset){var succeded=State.go(offset);return succeded&&engineShow(),succeded}function engineShow(){return enginePlay(State.passage,!0)}function enginePlay(title,noHistory){var passageReadyOutput,passageDoneOutput,passageTitle=title;if(_state=States.Playing,TempState={},State.clearTemporary(),"function"==typeof Config.navigation.override)try{var overrideTitle=Config.navigation.override(passageTitle);overrideTitle&&(passageTitle=overrideTitle)}catch(ex){}var passage=Story.get(passageTitle);if(jQuery.event.trigger({type:":passageinit",passage:passage}),Object.keys(prehistory).forEach((function(task){"function"==typeof prehistory[task]&&prehistory[task].call(passage,task)})),noHistory||State.create(passage.title),document.body.className&&(document.body.className=""),_lastPlay=Util.now(),Object.keys(predisplay).forEach((function(task){"function"==typeof predisplay[task]&&predisplay[task].call(passage,task)})),Story.has("PassageReady"))try{passageReadyOutput=Wikifier.wikifyEval(Story.get("PassageReady").text)}catch(ex){console.error(ex),Alert.error("PassageReady",ex.message)}_state=States.Rendering;var dataTags=passage.tags.length>0?passage.tags.join(" "):null,passageEl=document.createElement("div");jQuery(passageEl).attr({id:passage.domId,"data-passage":passage.title,"data-tags":dataTags}).addClass("passage ".concat(passage.className)),jQuery(document.body).attr("data-tags",dataTags).addClass(passage.className),jQuery(document.documentElement).attr("data-tags",dataTags),jQuery.event.trigger({type:":passagestart",content:passageEl,passage:passage}),Object.keys(prerender).forEach((function(task){"function"==typeof prerender[task]&&prerender[task].call(passage,passageEl,task)})),Story.has("PassageHeader")&&new Wikifier(passageEl,Story.get("PassageHeader").processText()),passageEl.appendChild(passage.render()),Story.has("PassageFooter")&&new Wikifier(passageEl,Story.get("PassageFooter").processText()),jQuery.event.trigger({type:":passagerender",content:passageEl,passage:passage}),Object.keys(postrender).forEach((function(task){"function"==typeof postrender[task]&&postrender[task].call(passage,passageEl,task)}));var debugView,containerEl=document.getElementById("passages");if(containerEl.hasChildNodes()&&("number"==typeof Config.passages.transitionOut||"string"==typeof Config.passages.transitionOut&&""!==Config.passages.transitionOut&&Has.transitionEndEvent?_toConsumableArray(containerEl.childNodes).forEach((function(outgoing){var $outgoing=jQuery(outgoing);if(outgoing.nodeType===Node.ELEMENT_NODE&&$outgoing.hasClass("passage")){if($outgoing.hasClass("passage-out"))return;$outgoing.attr({id:"out-".concat($outgoing.attr("id")),"aria-live":"off"}).addClass("passage-out"),"string"==typeof Config.passages.transitionOut?$outgoing.on(Has.transitionEndEvent,(function(ev){ev.propertyName===Config.passages.transitionOut&&$outgoing.remove()})):setTimeout((function(){return $outgoing.remove()}),Math.max(40,Config.passages.transitionOut))}else $outgoing.remove()})):jQuery(containerEl).empty()),jQuery(passageEl).addClass("passage-in").appendTo(containerEl),setTimeout((function(){return jQuery(passageEl).removeClass("passage-in")}),40),Story.has("StoryDisplayTitle")?null===_updating&&Config.ui.updateStoryElements||setDisplayTitle(Story.get("StoryDisplayTitle").processText()):Config.passages.displayTitles&&passage.title!==Config.passages.start&&(document.title="".concat(passage.title," | ").concat(Story.title)),window.scroll(0,0),_state=States.Playing,Story.has("PassageDone"))try{passageDoneOutput=Wikifier.wikifyEval(Story.get("PassageDone").text)}catch(ex){console.error(ex),Alert.error("PassageDone",ex.message)}(jQuery.event.trigger({type:":passagedisplay",content:passageEl,passage:passage}),Object.keys(postdisplay).forEach((function(task){"function"==typeof postdisplay[task]&&postdisplay[task].call(passage,task)})),null!==_updating?_updating.forEach((function(pair){jQuery(pair.element).empty(),new Wikifier(pair.element,Story.get(pair.passage).processText().trim())})):Config.ui.updateStoryElements&&UIBar.update(),Config.debug)&&(null!=passageReadyOutput&&((debugView=new DebugView(document.createDocumentFragment(),"special","PassageReady","PassageReady")).modes({hidden:!0}),debugView.append(passageReadyOutput),jQuery(passageEl).prepend(debugView.output)),null!=passageDoneOutput&&((debugView=new DebugView(document.createDocumentFragment(),"special","PassageDone","PassageDone")).modes({hidden:!0}),debugView.append(passageDoneOutput),jQuery(passageEl).append(debugView.output)),1===State.turns&&_initDebugViews.length>0&&jQuery(passageEl).prepend(_initDebugViews));switch(jQuery("#story").find("a[href]:not(.link-external)").addClass("link-external").end().find("a,link,button,input,select,textarea").not("[tabindex]").attr("tabindex",0),_typeof(Config.saves.autosave)){case"boolean":Config.saves.autosave&&Save.autosave.save();break;case"object":passage.tags.some((function(tag){return Config.saves.autosave.includes(tag)}))&&Save.autosave.save();break;case"function":Config.saves.autosave()&&Save.autosave.save()}return jQuery.event.trigger({type:":passageend",content:passageEl,passage:passage}),_state=States.Idle,_lastPlay=Util.now(),passageEl}function _hideOutlines(){_outlinePatch.set("*:focus{outline:none;}")}return Object.freeze(Object.defineProperties({},{States:{value:States},minDomActionDelay:{value:40},init:{value:function(){var _lastOutlineEvent;jQuery("#init-no-js,#init-lacking").remove(),function(){var $elems=jQuery(document.createDocumentFragment()),markup=Story.has("StoryInterface")&&Story.get("StoryInterface").text.trim();if(markup){UIBar.destroy(),jQuery(document.head).find("#style-core-display").remove(),$elems.append(markup);var $passages=$elems.find("#passages");if(0===$passages.length)throw new Error('no element with ID "passages" found within "StoryInterface" special passage');$passages.empty().not("[aria-live]").attr("aria-live","polite").end(),$elems.find("[data-init-passage]").each((function(i,el){if("passages"===el.id)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' id="passages"> must not contain a "data-init-passage" content attribute'));var passage=el.getAttribute("data-init-passage").trim();if(el.hasAttribute("data-passage"))throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-init-passage="').concat(passage,'"> must not contain a "data-passage" content attribute'));if(null!==el.firstElementChild)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-init-passage="').concat(passage,'"> contains child elements'));Story.has(passage)&&jQuery(el).empty().wiki(Story.get(passage).processText().trim())}));var updating=[];$elems.find("[data-passage]").each((function(i,el){if("passages"===el.id)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' id="passages"> must not contain a "data-passage" content attribute'));var passage=el.getAttribute("data-passage").trim();if(null!==el.firstElementChild)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-passage="').concat(passage,'"> contains child elements'));Story.has(passage)&&updating.push({passage:passage,element:el})})),updating.length>0&&(_updating=updating),Config.ui.updateStoryElements=!1}else $elems.append('<div id="story" role="main"><div id="passages" aria-live="polite"></div></div>');$elems.insertBefore("body>script#script-sugarcube")}(),_outlinePatch=new StyleWrapper(jQuery(document.createElement("style")).attr({id:"style-aria-outlines",type:"text/css"}).appendTo(document.head).get(0)),_hideOutlines(),jQuery(document).on("mousedown.aria-outlines keydown.aria-outlines",(function(ev){ev.type!==_lastOutlineEvent&&(_lastOutlineEvent=ev.type,"keydown"===ev.type?_outlinePatch.clear():_hideOutlines())}))}},start:{value:function(){if(Story.getAllInit().forEach((function(passage){try{var debugBuffer=Wikifier.wikifyEval(passage.text);if(Config.debug){var debugView=new DebugView(document.createDocumentFragment(),"special","".concat(passage.title," [init-tagged]"),"".concat(passage.title," [init-tagged]"));debugView.modes({hidden:!0}),debugView.append(debugBuffer),_initDebugViews.push(debugView.output)}}catch(ex){console.error(ex),Alert.error("".concat(passage.title," [init-tagged]"),"object"===_typeof(ex)?ex.message:ex)}})),Story.has("StoryInit"))try{var debugBuffer=Wikifier.wikifyEval(Story.get("StoryInit").text);if(Config.debug){var debugView=new DebugView(document.createDocumentFragment(),"special","StoryInit","StoryInit");debugView.modes({hidden:!0}),debugView.append(debugBuffer),_initDebugViews.push(debugView.output)}}catch(ex){console.error(ex),Alert.error("StoryInit","object"===_typeof(ex)?ex.message:ex)}if(null==Config.passages.start)throw new Error("starting passage not selected");if(!Story.has(Config.passages.start))throw new Error('starting passage ("'.concat(Config.passages.start,'") not found'));if(jQuery(document.documentElement).focus(),State.restore())engineShow();else{var loadStart=!0;switch(_typeof(Config.saves.autoload)){case"boolean":Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(loadStart=!Save.autosave.load());break;case"string":"prompt"===Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(loadStart=!1,UI.buildAutoload(),Dialog.open());break;case"function":Save.autosave.ok()&&Save.autosave.has()&&Config.saves.autoload()&&(loadStart=!Save.autosave.load())}loadStart&&enginePlay(Config.passages.start)}}},restart:{value:function(){LoadScreen.show(),window.scroll(0,0),State.reset(),jQuery.event.trigger(":enginerestart"),window.location.reload()}},state:{get:function(){return _state}},isIdle:{value:function(){return _state===States.Idle}},isPlaying:{value:function(){return _state!==States.Idle}},isRendering:{value:function(){return _state===States.Rendering}},lastPlay:{get:function(){return _lastPlay}},goTo:{value:function(idx){var succeded=State.goTo(idx);return succeded&&engineShow(),succeded}},go:{value:engineGo},backward:{value:function(){return engineGo(-1)}},forward:{value:function(){return engineGo(1)}},show:{value:engineShow},play:{value:enginePlay},display:{value:function(title,link,option){var noHistory=!1;switch(option){case undefined:break;case"replace":case"back":noHistory=!0;break;default:throw new Error('Engine.display option parameter called with obsolete value "'.concat(option,'"; please notify the developer'))}enginePlay(title,noHistory)}}}))}(),Passage=(_tagsToSkip=/^(?:debug|nobr|passage|widget|twine\..*)$/i,function(){function Passage(title,el){var _this22=this;_classCallCheck(this,Passage),Object.defineProperties(this,{title:{value:Util.unescape(title)},element:{value:el||null},tags:{value:Object.freeze(el&&el.hasAttribute("tags")?Array.from(new Set(el.getAttribute("tags").trim().splitOrEmpty(/\s+/))):[])},_excerpt:{writable:!0,value:null}}),Object.defineProperties(this,{domId:{value:"passage-".concat(Util.slugify(this.title))},classes:{value:Object.freeze(0===this.tags.length?[]:_this22.tags.filter((function(tag){return!_tagsToSkip.test(tag)})).map((function(tag){return Util.slugify(tag)})))}})}return _createClass(Passage,[{key:"className",get:function(){return this.classes.join(" ")}},{key:"text",get:function(){if(null==this.element){var passage=Util.escapeMarkup(this.title),mesg="".concat(L10n.get("errorTitle"),": ").concat(L10n.get("errorNonexistentPassage",{passage:passage}));return'<div class="error-view"><span class="error">'.concat(mesg,"</span></div>")}return this.element.textContent.replace(/\r/g,"")}},{key:"description",value:function(){var descriptions=Config.passages.descriptions;switch(_typeof(descriptions)){case"boolean":if(descriptions)return this.title;break;case"object":if(descriptions.hasOwnProperty(this.title))return descriptions[this.title];break;case"function":var result=descriptions.call(this);if(result)return result}return null===this._excerpt&&(this._excerpt=Passage.getExcerptFromText(this.text)),this._excerpt}},{key:"processText",value:function(){if(null==this.element)return this.text;if(this.tags.includes("Twine.image"))return"[img[".concat(this.text,"]]");var processed=this.text;return Config.passages.onProcess&&(processed=Config.passages.onProcess.call(null,{title:this.title,tags:this.tags,text:processed})),(Config.passages.nobr||this.tags.includes("nobr"))&&(processed=processed.replace(/^\n+|\n+$/g,"").replace(/\n+/g," ")),processed}},{key:"render",value:function(options){var frag=document.createDocumentFragment();return new Wikifier(frag,this.processText(),options),this._excerpt=Passage.getExcerptFromNode(frag),frag}}],[{key:"getExcerptFromNode",value:function(node,count){if(!node.hasChildNodes())return"";var excerpt=node.textContent.trim();if(""!==excerpt){var excerptRe=new RegExp("(\\S+(?:\\s+\\S+){0,".concat(count>0?count-1:7,"})"));excerpt=excerpt.replace(/\s+/g," ").match(excerptRe)}return excerpt?"".concat(excerpt[1],"…"):"…"}},{key:"getExcerptFromText",value:function(text,count){if(""===text)return"";var excerptRe=new RegExp("(\\S+(?:\\s+\\S+){0,".concat(count>0?count-1:7,"})")),excerpt=text.replace(/<<.*?>>/g," ").replace(/<.*?>/g," ").trim().replace(/^\s*\|.*\|.*?$/gm,"").replace(/\[[<>]?img\[[^\]]*\]\]/g,"").replace(/\[\[([^|\]]*?)(?:(?:\||->|<-)[^\]]*)?\]\]/g,"$1").replace(/^\s*!+(.*?)$/gm,"$1").replace(/'{2}|\/{2}|_{2}|@{2}/g,"").trim().replace(/\s+/g," ").match(excerptRe);return excerpt?"".concat(excerpt[1],"…"):"…"}}]),Passage}()),_tagsToSkip,Save=function(){var Type=Util.toEnum({Autosave:"autosave",Disk:"disk",Serialize:"serialize",Slot:"slot"}),_slotsUBound=-1,_onLoadHandlers=new Set,_onSaveHandlers=new Set;function savesObjGet(){var saves=storage.get("saves");return null===saves?{autosave:null,slots:_appendSlots([],Config.saves.slots)}:saves}function savesObjClear(){return storage.delete("saves"),!0}function autosaveOk(){return"cookie"!==storage.name&&void 0!==Config.saves.autosave}function slotsOk(){return"cookie"!==storage.name&&-1!==_slotsUBound}function slotsCount(){if(!slotsOk())return 0;for(var saves=savesObjGet(),count=0,i=0,iend=saves.slots.length;i<iend;++i)null!==saves.slots[i]&&++count;return count}function _appendSlots(array,num){for(var i=0;i<num;++i)array.push(null);return array}function _savesObjIsEmpty(saves){for(var slots=saves.slots,isSlotsEmpty=!0,i=0,iend=slots.length;i<iend;++i)if(null!==slots[i]){isSlotsEmpty=!1;break}return null===saves.autosave&&isSlotsEmpty}function _savesObjSave(saves){return _savesObjIsEmpty(saves)?(storage.delete("saves"),!0):storage.set("saves",saves)}function _savesObjUpdate(saveObj){if(null==saveObj||"object"!==_typeof(saveObj))return!1;var updated=!1;return saveObj.hasOwnProperty("state")&&saveObj.state.hasOwnProperty("delta")&&saveObj.state.hasOwnProperty("index")||(saveObj.hasOwnProperty("data")?(delete saveObj.mode,saveObj.state={delta:State.deltaEncode(saveObj.data)},delete saveObj.data):saveObj.state.hasOwnProperty("delta")?saveObj.state.hasOwnProperty("index")||delete saveObj.state.mode:(delete saveObj.state.mode,saveObj.state.delta=State.deltaEncode(saveObj.state.history),delete saveObj.state.history),saveObj.state.index=saveObj.state.delta.length-1,updated=!0),saveObj.state.hasOwnProperty("rseed")&&(saveObj.state.seed=saveObj.state.rseed,delete saveObj.state.rseed,saveObj.state.delta.forEach((function(_,i,delta){delta[i].hasOwnProperty("rcount")&&(delta[i].pull=delta[i].rcount,delete delta[i].rcount)})),updated=!0),(saveObj.state.hasOwnProperty("expired")&&"number"==typeof saveObj.state.expired||saveObj.state.hasOwnProperty("unique")||saveObj.state.hasOwnProperty("last"))&&(saveObj.state.hasOwnProperty("expired")&&"number"==typeof saveObj.state.expired&&delete saveObj.state.expired,(saveObj.state.hasOwnProperty("unique")||saveObj.state.hasOwnProperty("last"))&&(saveObj.state.expired=[],saveObj.state.hasOwnProperty("unique")&&(saveObj.state.expired.push(saveObj.state.unique),delete saveObj.state.unique),saveObj.state.hasOwnProperty("last")&&(saveObj.state.expired.push(saveObj.state.last),delete saveObj.state.last)),updated=!0),updated}function _marshal(supplemental,details){if(null!=supplemental&&"object"!==_typeof(supplemental))throw new Error("supplemental parameter must be an object");var saveObj=Object.assign({},supplemental,{id:Config.saves.id,state:State.marshalForSave()});return Config.saves.version&&(saveObj.version=Config.saves.version),_onSaveHandlers.forEach((function(fn){return fn(saveObj,details)})),saveObj.state.delta=State.deltaEncode(saveObj.state.history),delete saveObj.state.history,saveObj}function _unmarshal(saveObj){try{if(_savesObjUpdate(saveObj),!saveObj||!saveObj.hasOwnProperty("id")||!saveObj.hasOwnProperty("state"))throw new Error(L10n.get("errorSaveMissingData"));if(saveObj.state.history=State.deltaDecode(saveObj.state.delta),delete saveObj.state.delta,_onLoadHandlers.forEach((function(fn){return fn(saveObj)})),saveObj.id!==Config.saves.id)throw new Error(L10n.get("errorSaveIdMismatch"));State.unmarshalForSave(saveObj.state),Engine.show()}catch(ex){return UI.alert("".concat(ex.message.toUpperFirst(),".</p><p>").concat(L10n.get("aborting"),".")),!1}return!0}return Object.freeze(Object.defineProperties({},{init:{value:function(){if("cookie"===storage.name)return savesObjClear(),Config.saves.autoload=undefined,Config.saves.autosave=undefined,Config.saves.slots=0,!1;var saves=savesObjGet(),updated=!1;Array.isArray(saves)&&(saves={autosave:null,slots:saves},updated=!0),Config.saves.slots!==saves.slots.length&&(Config.saves.slots<saves.slots.length?(saves.slots.reverse(),saves.slots=saves.slots.filter((function(val){return!(null===val&&this.count>0)||(--this.count,!1)}),{count:saves.slots.length-Config.saves.slots}),saves.slots.reverse()):Config.saves.slots>saves.slots.length&&_appendSlots(saves.slots,Config.saves.slots-saves.slots.length),updated=!0),_savesObjUpdate(saves.autosave)&&(updated=!0);for(var i=0;i<saves.slots.length;++i)_savesObjUpdate(saves.slots[i])&&(updated=!0);return _savesObjIsEmpty(saves)&&(storage.delete("saves"),updated=!1),updated&&_savesObjSave(saves),_slotsUBound=saves.slots.length-1,!0}},get:{value:savesObjGet},clear:{value:savesObjClear},ok:{value:function(){return autosaveOk()||slotsOk()}},autosave:{value:Object.freeze(Object.defineProperties({},{ok:{value:autosaveOk},has:{value:function(){return null!==savesObjGet().autosave}},get:{value:function(){return savesObjGet().autosave}},load:{value:function(){var saves=savesObjGet();return null!==saves.autosave&&_unmarshal(saves.autosave)}},save:{value:function(title,metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return!1;var saves=savesObjGet(),supplemental={title:title||Story.get(State.passage).description(),date:Date.now()};return null!=metadata&&(supplemental.metadata=metadata),saves.autosave=_marshal(supplemental,{type:Type.Autosave}),_savesObjSave(saves)}},delete:{value:function(){var saves=savesObjGet();return saves.autosave=null,_savesObjSave(saves)}}}))},slots:{value:Object.freeze(Object.defineProperties({},{ok:{value:slotsOk},length:{get:function(){return _slotsUBound+1}},isEmpty:{value:function(){return 0===slotsCount()}},count:{value:slotsCount},has:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length||null===saves.slots[slot])}},get:{value:function(slot){if(slot<0||slot>_slotsUBound)return null;var saves=savesObjGet();return slot>=saves.slots.length?null:saves.slots[slot]}},load:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length||null===saves.slots[slot])&&_unmarshal(saves.slots[slot])}},save:{value:function(slot,title,metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed")),!1;if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();if(slot>=saves.slots.length)return!1;var supplemental={title:title||Story.get(State.passage).description(),date:Date.now()};return null!=metadata&&(supplemental.metadata=metadata),saves.slots[slot]=_marshal(supplemental,{type:Type.Slot}),_savesObjSave(saves)}},delete:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length)&&(saves.slots[slot]=null,_savesObjSave(saves))}}}))},export:{value:function(filename,metadata){if("function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed()){var str,now,MM,DD,hh,mm,ss,baseName=null==filename?Story.domId:(str=filename,Util.sanitizeFilename(str).replace(/[_\s\u2013\u2014-]+/g,"-")),saveName="".concat(baseName,"-").concat((now=new Date,MM=now.getMonth()+1,DD=now.getDate(),hh=now.getHours(),mm=now.getMinutes(),ss=now.getSeconds(),MM<10&&(MM="0".concat(MM)),DD<10&&(DD="0".concat(DD)),hh<10&&(hh="0".concat(hh)),mm<10&&(mm="0".concat(mm)),ss<10&&(ss="0".concat(ss)),"".concat(now.getFullYear()).concat(MM).concat(DD,"-").concat(hh).concat(mm).concat(ss)),".save"),supplemental=null==metadata?{}:{metadata:metadata},saveObj=LZString.compressToBase64(JSON.stringify(_marshal(supplemental,{type:Type.Disk})));saveAs(new Blob([saveObj],{type:"text/plain;charset=UTF-8"}),saveName)}else Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed"))}},import:{value:function(event){var file=event.target.files[0],reader=new FileReader;jQuery(reader).one("loadend",(function(){if(reader.error){var ex=reader.error;UI.alert("".concat(L10n.get("errorSaveDiskLoadFailed").toUpperFirst()," (").concat(ex.name,": ").concat(ex.message,").</p><p>").concat(L10n.get("aborting"),"."))}else{var saveObj;try{saveObj=JSON.parse(/\.json$/i.test(file.name)||/^\{/.test(reader.result)?reader.result:LZString.decompressFromBase64(reader.result))}catch(ex){}_unmarshal(saveObj)}})),reader.readAsText(file)}},serialize:{value:function(metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed")),null;var supplemental=null==metadata?{}:{metadata:metadata};return LZString.compressToBase64(JSON.stringify(_marshal(supplemental,{type:Type.Serialize})))}},deserialize:{value:function(base64Str){var saveObj;try{saveObj=JSON.parse(LZString.decompressFromBase64(base64Str))}catch(ex){}return _unmarshal(saveObj)?saveObj.metadata:null}},onLoad:{value:Object.freeze(Object.defineProperties({},{add:{value:function(handler){var valueType=Util.getType(handler);if("function"!==valueType)throw new TypeError("Save.onLoad.add handler parameter must be a function (received: ".concat(valueType,")"));_onLoadHandlers.add(handler)}},clear:{value:function(){_onLoadHandlers.clear()}},delete:{value:function(handler){return _onLoadHandlers.delete(handler)}},size:{get:function(){return _onLoadHandlers.size}}}))},onSave:{value:Object.freeze(Object.defineProperties({},{add:{value:function(handler){var valueType=Util.getType(handler);if("function"!==valueType)throw new TypeError("Save.onSave.add handler parameter must be a function (received: ".concat(valueType,")"));_onSaveHandlers.add(handler)}},clear:{value:function(){_onSaveHandlers.clear()}},delete:{value:function(handler){return _onSaveHandlers.delete(handler)}},size:{get:function(){return _onSaveHandlers.size}}}))}}))}(),Setting=function(){var Types=Util.toEnum({Header:0,Toggle:1,List:2,Range:3}),_definitions=[];function settingsCreate(){return Object.create(null)}function settingsSave(){var savedSettings=settingsCreate();return Object.keys(settings).length>0&&_definitions.filter((function(def){return def.type!==Types.Header&&settings[def.name]!==def.default})).forEach((function(def){return savedSettings[def.name]=settings[def.name]})),0===Object.keys(savedSettings).length?(storage.delete("settings"),!0):storage.set("settings",savedSettings)}function settingsLoad(){var defaultSettings=settingsCreate(),loadedSettings=storage.get("settings")||settingsCreate();_definitions.filter((function(def){return def.type!==Types.Header})).forEach((function(def){return defaultSettings[def.name]=def.default})),window.SugarCube.settings=settings=Object.assign(defaultSettings,loadedSettings)}function settingsClear(){return window.SugarCube.settings=settings=settingsCreate(),storage.delete("settings"),!0}function definitionsAdd(type,name,def){if(arguments.length<3){var errors=[];throw arguments.length<1&&errors.push("type"),arguments.length<2&&errors.push("name"),arguments.length<3&&errors.push("definition"),new Error("missing parameters, no ".concat(errors.join(" or ")," specified"))}if("object"!==_typeof(def))throw new TypeError("definition parameter must be an object");if(definitionsHas(name))throw new Error('cannot clobber existing setting "'.concat(name,'"'));var str,pos,definition={type:type,name:name,label:"string"==typeof def.label?def.label.trim():""};if("string"==typeof def.desc){var desc=def.desc.trim();""!==desc&&(definition.desc=desc)}switch(type){case Types.Header:break;case Types.Toggle:definition.default=!!def.default;break;case Types.List:if(!def.hasOwnProperty("list"))throw new Error("no list specified");if(!Array.isArray(def.list))throw new TypeError("list must be an array");if(0===def.list.length)throw new Error("list must not be empty");if(definition.list=Object.freeze(def.list),null==def.default)definition.default=def.list[0];else{var defaultIndex=def.list.indexOf(def.default);if(-1===defaultIndex)throw new Error("list does not contain default");definition.default=def.list[defaultIndex]}break;case Types.Range:if(!def.hasOwnProperty("min"))throw new Error("no min specified");if("number"!=typeof def.min||Number.isNaN(def.min)||!Number.isFinite(def.min))throw new TypeError("min must be a finite number");if(!def.hasOwnProperty("max"))throw new Error("no max specified");if("number"!=typeof def.max||Number.isNaN(def.max)||!Number.isFinite(def.max))throw new TypeError("max must be a finite number");if(!def.hasOwnProperty("step"))throw new Error("no step specified");if("number"!=typeof def.step||Number.isNaN(def.step)||!Number.isFinite(def.step)||def.step<=0)throw new TypeError("step must be a finite number greater than zero");var stepValidate=function(value){if(fracDigits>0){var ma=Number("".concat(def.min,"e").concat(fracDigits)),sa=Number("".concat(def.step,"e").concat(fracDigits)),_va=Number("".concat(value,"e").concat(fracDigits))-ma;return Number("".concat(_va-_va%sa+ma,"e-").concat(fracDigits))}var va=value-def.min;return va-va%def.step+def.min},fracDigits=(str=String(def.step),-1===(pos=str.lastIndexOf("."))?0:str.length-pos-1);if(stepValidate(def.max)!==def.max)throw new RangeError("max (".concat(def.max,") is not a multiple of the step (").concat(def.step,") plus the min (").concat(def.min,")"));if(definition.max=def.max,definition.min=def.min,definition.step=def.step,null==def.default)definition.default=def.max;else{if("number"!=typeof def.default||Number.isNaN(def.default)||!Number.isFinite(def.default))throw new TypeError("default must be a finite number");if(def.default<def.min)throw new RangeError("default (".concat(def.default,") is less than min (").concat(def.min,")"));if(def.default>def.max)throw new RangeError("default (".concat(def.default,") is greater than max (").concat(def.max,")"));definition.default=def.default}break;default:throw new Error("unknown Setting type: ".concat(type))}"function"==typeof def.onInit&&(definition.onInit=Object.freeze(def.onInit)),"function"==typeof def.onChange&&(definition.onChange=Object.freeze(def.onChange)),_definitions.push(Object.freeze(definition))}function definitionsHas(name){return _definitions.some((function(definition){return definition.name===name}))}function definitionsGet(name){return _definitions.find((function(definition){return definition.name===name}))}return Object.freeze(Object.defineProperties({},{Types:{value:Types},init:{value:function(){if(storage.has("options")){var old=storage.get("options");null!==old&&(window.SugarCube.settings=settings=Object.assign(settingsCreate(),old)),settingsSave(),storage.delete("options")}settingsLoad(),_definitions.forEach((function(def){if(def.hasOwnProperty("onInit")){var thisArg={name:def.name,value:settings[def.name],default:def.default};def.hasOwnProperty("list")&&(thisArg.list=def.list),def.onInit.call(thisArg)}}))}},create:{value:settingsCreate},save:{value:settingsSave},load:{value:settingsLoad},clear:{value:settingsClear},reset:{value:function(name){if(0===arguments.length)settingsClear(),settingsLoad();else{if(null==name||!definitionsHas(name))throw new Error('nonexistent setting "'.concat(name,'"'));var def=definitionsGet(name);def.type!==Types.Header&&(settings[name]=def.default)}return settingsSave()}},forEach:{value:function(callback,thisArg){_definitions.forEach(callback,thisArg)}},add:{value:definitionsAdd},addHeader:{value:function(name,desc){definitionsAdd(Types.Header,name,{desc:desc})}},addToggle:{value:function(){for(var _len16=arguments.length,args=new Array(_len16),_key16=0;_key16<_len16;_key16++)args[_key16]=arguments[_key16];definitionsAdd.apply(void 0,[Types.Toggle].concat(args))}},addList:{value:function(){for(var _len17=arguments.length,args=new Array(_len17),_key17=0;_key17<_len17;_key17++)args[_key17]=arguments[_key17];definitionsAdd.apply(void 0,[Types.List].concat(args))}},addRange:{value:function(){for(var _len18=arguments.length,args=new Array(_len18),_key18=0;_key18<_len18;_key18++)args[_key18]=arguments[_key18];definitionsAdd.apply(void 0,[Types.Range].concat(args))}},isEmpty:{value:function(){return 0===_definitions.length}},has:{value:definitionsHas},get:{value:definitionsGet},delete:{value:function definitionsDelete(name){definitionsHas(name)&&delete settings[name];for(var i=0;i<_definitions.length;++i)if(_definitions[i].name===name){_definitions.splice(i,1),definitionsDelete(name);break}}}}))}(),Story=function(){var _passages={},_inits=[],_scripts=[],_styles=[],_widgets=[],_title="",_ifId="",_domId="";function _storySetTitle(rawTitle){if(null==rawTitle)throw new Error("story title must not be null or undefined");var title=Util.unescape(String(rawTitle)).trim();if(""===title)throw new Error("story title must not be empty or consist solely of whitespace");if(document.title=_title=title,""===(_domId=Util.slugify(_title)))if(""!==_ifId)_domId=_ifId;else for(var i=0,len=_title.length;i<len;++i){var _Util$charAndPosAt2=Util.charAndPosAt(_title,i),char=_Util$charAndPosAt2.char,start=_Util$charAndPosAt2.start,end=_Util$charAndPosAt2.end;_domId+=char.codePointAt(0).toString(16),i+=end-start}}return Object.freeze(Object.defineProperties({},{load:{value:function(){var validationCodeTags=["init","widget"],validationNoCodeTagPassages=["PassageDone","PassageFooter","PassageHeader","PassageReady","StoryAuthor","StoryBanner","StoryCaption","StoryInit","StoryMenu","StoryShare","StorySubtitle"];function validateStartingPassage(passage){if(passage.tags.includesAny(validationCodeTags))throw new Error('starting passage "'.concat(passage.title,'" contains special tags; invalid: "').concat(passage.tags.filter((function(tag){return validationCodeTags.includes(tag)})).sort().join('", "'),'"'))}function validateSpecialPassages(passage){if(validationNoCodeTagPassages.includes(passage.title)){for(var _len19=arguments.length,tags=new Array(_len19>1?_len19-1:0),_key19=1;_key19<_len19;_key19++)tags[_key19-1]=arguments[_key19];throw new Error('special passage "'.concat(passage.title,'" contains special tags; invalid: "').concat(tags.sort().join('", "'),'"'))}var codeTags=[].concat(validationCodeTags),foundTags=[];if(passage.tags.forEach((function(tag){codeTags.includes(tag)&&foundTags.push.apply(foundTags,_toConsumableArray(codeTags.delete(tag)))})),foundTags.length>1)throw new Error('passage "'.concat(passage.title,'" contains multiple special tags; invalid: "').concat(foundTags.sort().join('", "'),'"'))}var $storydata=jQuery("tw-storydata"),startNode=$storydata.attr("startnode")||"";Config.passages.start=null,Config.debug=/\bdebug\b/.test($storydata.attr("options")),$storydata.children("style").each((function(i){_styles.push(new Passage("tw-user-style-".concat(i),this))})),$storydata.children("script").each((function(i){_scripts.push(new Passage("tw-user-script-".concat(i),this))})),$storydata.children('tw-passagedata:not([tags~="Twine.private"],[tags~="annotation"])').each((function(){var $this=jQuery(this),pid=$this.attr("pid")||"",passage=new Passage($this.attr("name"),this);pid===startNode&&""!==startNode?(Config.passages.start=passage.title,validateStartingPassage(passage),_passages[passage.title]=passage):passage.tags.includes("init")?(validateSpecialPassages(passage,"init"),_inits.push(passage)):passage.tags.includes("widget")?(validateSpecialPassages(passage,"widget"),_widgets.push(passage)):_passages[passage.title]=passage})),_ifId=$storydata.attr("ifid"),_storySetTitle("Talon&#39;s End"),Config.saves.id=Story.domId}},init:{value:function(){var storyStyle;storyStyle=document.createElement("style"),new StyleWrapper(storyStyle).add(_styles.map((function(style){return style.text.trim()})).join("\n")),jQuery(storyStyle).appendTo(document.head).attr({id:"style-story",type:"text/css"});for(var i=0;i<_scripts.length;++i)try{Scripting.evalJavaScript(_scripts[i].text)}catch(ex){console.error(ex),Alert.error(_scripts[i].title,"object"===_typeof(ex)?ex.message:ex)}for(var _i8=0;_i8<_widgets.length;++_i8)try{Wikifier.wikifyEval(_widgets[_i8].processText())}catch(ex){console.error(ex),Alert.error(_widgets[_i8].title,"object"===_typeof(ex)?ex.message:ex)}}},title:{get:function(){return _title}},domId:{get:function(){return _domId}},ifId:{get:function(){return _ifId}},add:{value:function(passage){if(!(passage instanceof Passage))throw new TypeError("Story.add passage parameter must be an instance of Passage");var title=passage.title;return!_passages.hasOwnProperty(title)&&(_passages[title]=passage,!0)}},has:{value:function(title){var type=_typeof(title);switch(type){case"number":case"string":return _passages.hasOwnProperty(String(title));case"undefined":break;case"object":type=null===title?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.has title parameter cannot be ".concat(type))}},get:{value:function(title){var type=_typeof(title);switch(type){case"number":case"string":var id=String(title);return _passages.hasOwnProperty(id)?_passages[id]:new Passage(id||"(unknown)");case"undefined":break;case"object":type=null===title?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.get title parameter cannot be ".concat(type))}},getAllInit:{value:function(){return Object.freeze(Array.from(_inits))}},getAllRegular:{value:function(){return Object.freeze(Object.assign({},_passages))}},getAllScript:{value:function(){return Object.freeze(Array.from(_scripts))}},getAllStylesheet:{value:function(){return Object.freeze(Array.from(_styles))}},getAllWidget:{value:function(){return Object.freeze(Array.from(_widgets))}},lookup:{value:function(key,value){var sortKey=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"title",results=[];return Object.keys(_passages).forEach((function(name){var passage=_passages[name];"object"===_typeof(passage[key])&&null!==passage[key]?passage[key]instanceof Array&&passage[key].some((function(m){return Util.sameValueZero(m,value)}))&&results.push(passage):Util.sameValueZero(passage[key],value)&&results.push(passage)})),results.sort((function(a,b){return a[sortKey]==b[sortKey]?0:a[sortKey]<b[sortKey]?-1:1})),results}},lookupWith:{value:function(predicate){var sortKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"title";if("function"!=typeof predicate)throw new TypeError("Story.lookupWith predicate parameter must be a function");var results=[];return Object.keys(_passages).forEach((function(name){var passage=_passages[name];predicate(passage)&&results.push(passage)})),results.sort((function(a,b){return a[sortKey]==b[sortKey]?0:a[sortKey]<b[sortKey]?-1:1})),results}}}))}(),UI=function(){function uiAssembleLinkList(passage,listEl){var list=listEl,debugState=Config.debug,cleanState=Config.cleanupWikifierOutput;Config.debug=!1,Config.cleanupWikifierOutput=!1;try{null==list&&(list=document.createElement("ul"));var frag=document.createDocumentFragment();new Wikifier(frag,Story.get(passage).processText().trim());var errors=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent.replace(errorPrologRegExp,"")}));if(errors.length>0)throw new Error(errors.join("; "));for(;frag.hasChildNodes();){var node=frag.firstChild;if(node.nodeType===Node.ELEMENT_NODE&&"A"===node.nodeName.toUpperCase()){var li=document.createElement("li");list.appendChild(li),li.appendChild(node)}else frag.removeChild(node)}}finally{Config.cleanupWikifierOutput=cleanState,Config.debug=debugState}return list}function uiOpenAlert(message){jQuery(Dialog.setup(L10n.get("alertTitle"),"alert")).append("<p>".concat(message,'</p><ul class="buttons">')+'<li><button id="alert-ok" class="ui-close">'.concat(L10n.get(["alertOk","ok"]),"</button></li>")+"</ul>");for(var _len20=arguments.length,args=new Array(_len20>1?_len20-1:0),_key20=1;_key20<_len20;_key20++)args[_key20-1]=arguments[_key20];Dialog.open.apply(Dialog,args)}function uiBuildAutoload(){return jQuery(Dialog.setup(L10n.get("autoloadTitle"),"autoload")).append("<p>".concat(L10n.get("autoloadPrompt"),'</p><ul class="buttons">')+'<li><button id="autoload-ok" class="ui-close">'.concat(L10n.get(["autoloadOk","ok"]),"</button></li>")+'<li><button id="autoload-cancel" class="ui-close">'.concat(L10n.get(["autoloadCancel","cancel"]),"</button></li>")+"</ul>"),jQuery(document).one("click.autoload",".ui-close",(function(ev){var isAutoloadOk="autoload-ok"===ev.target.id;jQuery(document).one(":dialogclosed",(function(){isAutoloadOk&&Save.autosave.load()||Engine.play(Config.passages.start)}))})),!0}function uiBuildJumpto(){var list=document.createElement("ul");jQuery(Dialog.setup(L10n.get("jumptoTitle"),"jumpto list")).append(list);for(var expired=State.expired.length,i=State.size-1;i>=0;--i)if(i!==State.activeIndex){var passage=Story.get(State.history[i].title);passage&&passage.tags.includes("bookmark")&&jQuery(document.createElement("li")).append(jQuery(document.createElement("a")).ariaClick({one:!0},function(idx){return function(){return jQuery(document).one(":dialogclosed",(function(){return Engine.goTo(idx)}))}}(i)).addClass("ui-close").text("".concat(L10n.get("jumptoTurn")," ").concat(expired+i+1,": ").concat(passage.description()))).appendTo(list)}list.hasChildNodes()||jQuery(list).append("<li><a><em>".concat(L10n.get("jumptoUnavailable"),"</em></a></li>"))}function uiBuildRestart(){return jQuery(Dialog.setup(L10n.get("restartTitle"),"restart")).append("<p>".concat(L10n.get("restartPrompt"),'</p><ul class="buttons">')+'<li><button id="restart-ok">'.concat(L10n.get(["restartOk","ok"]),"</button></li>")+'<li><button id="restart-cancel" class="ui-close">'.concat(L10n.get(["restartCancel","cancel"]),"</button></li>")+"</ul>").find("#restart-ok").ariaClick({one:!0},(function(){jQuery(document).one(":dialogclosed",(function(){return Engine.restart()})),Dialog.close()})),!0}function uiBuildSaves(){var savesAllowed="function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed();function createActionItem(bId,bClass,bText,bAction){var $btn=jQuery(document.createElement("button")).attr("id","saves-".concat(bId)).html(bText);return bClass&&$btn.addClass(bClass),bAction?$btn.ariaClick(bAction):$btn.ariaDisabled(!0),jQuery(document.createElement("li")).append($btn)}var $dialogBody=jQuery(Dialog.setup(L10n.get("savesTitle"),"saves")),savesOk=Save.ok(),fileOk=Has.fileAPI&&(Config.saves.tryDiskOnMobile||!Browser.isMobile.any());if(savesOk&&$dialogBody.append(function(){function createButton(bId,bClass,bText,bSlot,bAction){var $btn=jQuery(document.createElement("button")).attr("id","saves-".concat(bId,"-").concat(bSlot)).addClass(bId).html(bText);return bClass&&$btn.addClass(bClass),bAction?"auto"===bSlot?$btn.ariaClick({label:"".concat(bText," ").concat(L10n.get("savesLabelAuto"))},(function(){return bAction()})):$btn.ariaClick({label:"".concat(bText," ").concat(L10n.get("savesLabelSlot")," ").concat(bSlot+1)},(function(){return bAction(bSlot)})):$btn.ariaDisabled(!0),$btn}var saves=Save.get(),$tbody=jQuery(document.createElement("tbody"));if(Save.autosave.ok()){var $tdSlot=jQuery(document.createElement("td")),$tdLoad=jQuery(document.createElement("td")),$tdDesc=jQuery(document.createElement("td")),$tdDele=jQuery(document.createElement("td"));jQuery(document.createElement("b")).attr({title:L10n.get("savesLabelAuto"),"aria-label":L10n.get("savesLabelAuto")}).text("A").appendTo($tdSlot),saves.autosave?($tdLoad.append(createButton("load","ui-close",L10n.get("savesLabelLoad"),"auto",(function(){jQuery(document).one(":dialogclosed",(function(){return Save.autosave.load()}))}))),jQuery(document.createElement("div")).text(saves.autosave.title).appendTo($tdDesc),jQuery(document.createElement("div")).addClass("datestamp").html(saves.autosave.date?"".concat(new Date(saves.autosave.date).toLocaleString()):"<em>".concat(L10n.get("savesUnknownDate"),"</em>")).appendTo($tdDesc),$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),"auto",(function(){Save.autosave.delete(),uiBuildSaves()})))):($tdLoad.append(createButton("load",null,L10n.get("savesLabelLoad"),"auto")),$tdDesc.addClass("empty").text("•  •  •"),$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),"auto"))),jQuery(document.createElement("tr")).append($tdSlot).append($tdLoad).append($tdDesc).append($tdDele).appendTo($tbody)}for(var i=0,iend=saves.slots.length;i<iend;++i){var _$tdSlot=jQuery(document.createElement("td")),_$tdLoad=jQuery(document.createElement("td")),_$tdDesc=jQuery(document.createElement("td")),_$tdDele=jQuery(document.createElement("td"));_$tdSlot.append(document.createTextNode(i+1)),saves.slots[i]?(_$tdLoad.append(createButton("load","ui-close",L10n.get("savesLabelLoad"),i,(function(slot){jQuery(document).one(":dialogclosed",(function(){return Save.slots.load(slot)}))}))),jQuery(document.createElement("div")).text(saves.slots[i].title).appendTo(_$tdDesc),jQuery(document.createElement("div")).addClass("datestamp").html(saves.slots[i].date?"".concat(new Date(saves.slots[i].date).toLocaleString()):"<em>".concat(L10n.get("savesUnknownDate"),"</em>")).appendTo(_$tdDesc),_$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),i,(function(slot){Save.slots.delete(slot),uiBuildSaves()})))):(_$tdLoad.append(createButton("save","ui-close",L10n.get("savesLabelSave"),i,savesAllowed?Save.slots.save:null)),_$tdDesc.addClass("empty").text("•  •  •"),_$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),i))),jQuery(document.createElement("tr")).append(_$tdSlot).append(_$tdLoad).append(_$tdDesc).append(_$tdDele).appendTo($tbody)}return jQuery(document.createElement("table")).attr("id","saves-list").append($tbody)}()),savesOk||fileOk){var $btnBar=jQuery(document.createElement("ul")).addClass("buttons").appendTo($dialogBody);return fileOk&&($btnBar.append(createActionItem("export","ui-close",L10n.get("savesLabelExport"),savesAllowed?function(){return Save.export()}:null)),$btnBar.append(createActionItem("import",null,L10n.get("savesLabelImport"),(function(){return $dialogBody.find("#saves-import-file").trigger("click")}))),jQuery(document.createElement("input")).css({display:"block",visibility:"hidden",position:"fixed",left:"-9999px",top:"-9999px",width:"1px",height:"1px"}).attr({type:"file",id:"saves-import-file",tabindex:-1,"aria-hidden":!0}).on("change",(function(ev){jQuery(document).one(":dialogclosed",(function(){return Save.import(ev)})),Dialog.close()})).appendTo($dialogBody)),savesOk&&$btnBar.append(createActionItem("clear",null,L10n.get("savesLabelClear"),Save.autosave.has()||!Save.slots.isEmpty()?function(){Save.clear(),uiBuildSaves()}:null)),!0}return uiOpenAlert(L10n.get("savesIncapable")),!1}function uiBuildSettings(){var $dialogBody=jQuery(Dialog.setup(L10n.get("settingsTitle"),"settings"));return Setting.forEach((function(control){if(control.type===Setting.Types.Header){var _name=control.name,_id=Util.slugify(_name),$header=jQuery(document.createElement("div")),$heading=jQuery(document.createElement("h2"));return $header.attr("id","header-body-".concat(_id)).append($heading).appendTo($dialogBody),$heading.attr("id","header-heading-".concat(_id)).wiki(_name),void(control.desc&&jQuery(document.createElement("p")).attr("id","header-desc-".concat(_id)).wiki(control.desc).appendTo($header))}var $control,name=control.name,id=Util.slugify(name),$setting=jQuery(document.createElement("div")),$label=jQuery(document.createElement("label")),$controlBox=jQuery(document.createElement("div"));switch(jQuery(document.createElement("div")).append($label).append($controlBox).appendTo($setting),control.desc&&jQuery(document.createElement("p")).attr("id","setting-desc-".concat(id)).wiki(control.desc).appendTo($setting),$label.attr({id:"setting-label-".concat(id),for:"setting-control-".concat(id)}).wiki(control.label),null==settings[name]&&(settings[name]=control.default),control.type){case Setting.Types.Toggle:$control=jQuery(document.createElement("button")),settings[name]?$control.addClass("enabled").text(L10n.get("settingsOn")):$control.text(L10n.get("settingsOff")),$control.ariaClick((function(){settings[name]?(jQuery(this).removeClass("enabled").text(L10n.get("settingsOff")),settings[name]=!1):(jQuery(this).addClass("enabled").text(L10n.get("settingsOn")),settings[name]=!0),Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default})}));break;case Setting.Types.List:$control=jQuery(document.createElement("select"));for(var i=0,iend=control.list.length;i<iend;++i)jQuery(document.createElement("option")).val(i).text(control.list[i]).appendTo($control);$control.val(control.list.indexOf(settings[name])).attr("tabindex",0).on("change",(function(){settings[name]=control.list[Number(this.value)],Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default,list:control.list})}));break;case Setting.Types.Range:($control=jQuery(document.createElement("input"))).attr({type:"range",min:control.min,max:control.max,step:control.step,value:settings[name],tabindex:0}).on("change input",(function(){settings[name]=Number(this.value),Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default,min:control.min,max:control.max,step:control.step})})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),$control.trigger("change"))}))}$control.attr("id","setting-control-".concat(id)).appendTo($controlBox),$setting.attr("id","setting-body-".concat(id)).appendTo($dialogBody)})),$dialogBody.append('<ul class="buttons">'+'<li><button id="settings-ok" class="ui-close">'.concat(L10n.get(["settingsOk","ok"]),"</button></li>")+'<li><button id="settings-reset">'.concat(L10n.get("settingsReset"),"</button></li>")+"</ul>").find("#settings-reset").ariaClick({one:!0},(function(){jQuery(document).one(":dialogclosed",(function(){Setting.reset(),window.location.reload()})),Dialog.close()})),!0}function uiBuildShare(){try{jQuery(Dialog.setup(L10n.get("shareTitle"),"share list")).append(uiAssembleLinkList("StoryShare"))}catch(ex){return console.error(ex),Alert.error("StoryShare",ex.message),!1}return!0}return Object.freeze(Object.defineProperties({},{assembleLinkList:{value:uiAssembleLinkList},alert:{value:uiOpenAlert},jumpto:{value:function(){uiBuildJumpto(),Dialog.open.apply(Dialog,arguments)}},restart:{value:function(){uiBuildRestart(),Dialog.open.apply(Dialog,arguments)}},saves:{value:function(){uiBuildSaves(),Dialog.open.apply(Dialog,arguments)}},settings:{value:function(){uiBuildSettings(),Dialog.open.apply(Dialog,arguments)}},share:{value:function(){uiBuildShare(),Dialog.open.apply(Dialog,arguments)}},buildAutoload:{value:uiBuildAutoload},buildJumpto:{value:uiBuildJumpto},buildRestart:{value:uiBuildRestart},buildSaves:{value:uiBuildSaves},buildSettings:{value:uiBuildSettings},buildShare:{value:uiBuildShare},stow:{value:function(){return UIBar.stow()}},unstow:{value:function(){return UIBar.unstow()}},setStoryElements:{value:function(){return UIBar.update()}},isOpen:{value:function(){return Dialog.isOpen.apply(Dialog,arguments)}},body:{value:function(){return Dialog.body()}},setup:{value:function(){return Dialog.setup.apply(Dialog,arguments)}},addClickHandler:{value:function(){return Dialog.addClickHandler.apply(Dialog,arguments)}},open:{value:function(){return Dialog.open.apply(Dialog,arguments)}},close:{value:function(){return Dialog.close.apply(Dialog,arguments)}},resize:{value:function(){return Dialog.resize()}},buildDialogAutoload:{value:uiBuildAutoload},buildDialogJumpto:{value:uiBuildJumpto},buildDialogRestart:{value:uiBuildRestart},buildDialogSaves:{value:uiBuildSaves},buildDialogSettings:{value:uiBuildSettings},buildDialogShare:{value:uiBuildShare},buildLinkListFromPassage:{value:uiAssembleLinkList}}))}(),UIBar=function(){var _$uiBar=null;function uiBarStow(noAnimation){var $story;_$uiBar&&!_$uiBar.hasClass("stowed")&&(noAnimation&&(($story=jQuery("#story")).addClass("no-transition"),_$uiBar.addClass("no-transition")),_$uiBar.addClass("stowed"),noAnimation&&setTimeout((function(){$story.removeClass("no-transition"),_$uiBar.removeClass("no-transition")}),Engine.minDomActionDelay));return this}function uiBarUpdate(){if(Story.has("StoryDisplayTitle")&&setDisplayTitle(Story.get("StoryDisplayTitle").processText()),_$uiBar){setPageElement("story-banner","StoryBanner"),setPageElement("story-subtitle","StorySubtitle"),setPageElement("story-author","StoryAuthor"),setPageElement("story-caption","StoryCaption");var menuStory=document.getElementById("menu-story");if(null!==menuStory&&(jQuery(menuStory).empty(),Story.has("StoryMenu")))try{UI.assembleLinkList("StoryMenu",menuStory)}catch(ex){console.error(ex),Alert.error("StoryMenu",ex.message)}}}return Object.freeze(Object.defineProperties({},{destroy:{value:function(){_$uiBar&&(_$uiBar.hide(),jQuery(document).off(".ui-bar"),jQuery(document.head).find("#style-ui-bar").remove(),_$uiBar.remove(),_$uiBar=null)}},hide:{value:function(){return _$uiBar&&_$uiBar.hide(),this}},init:{value:function(){if(!document.getElementById("ui-bar")){var toggleLabel,backwardLabel,jumptoLabel,forwardLabel,$backward,$forward,$elems=(toggleLabel=L10n.get("uiBarToggle"),backwardLabel=L10n.get("uiBarBackward"),jumptoLabel=L10n.get("uiBarJumpto"),forwardLabel=L10n.get("uiBarForward"),jQuery(document.createDocumentFragment()).append('<div id="ui-bar" aria-live="polite"><div id="ui-bar-tray">'+'<button id="ui-bar-toggle" tabindex="0" title="'.concat(toggleLabel,'" aria-label="').concat(toggleLabel,'"></button>')+'<div id="ui-bar-history">'+'<button id="history-backward" tabindex="0" title="'.concat(backwardLabel,'" aria-label="').concat(backwardLabel,'"></button>')+'<button id="history-jumpto" tabindex="0" title="'.concat(jumptoLabel,'" aria-label="').concat(jumptoLabel,'"></button>')+'<button id="history-forward" tabindex="0" title="'.concat(forwardLabel,'" aria-label="').concat(forwardLabel,'"></button>')+'</div></div><div id="ui-bar-body"><header id="title" role="banner"><div id="story-banner"></div><h1 id="story-title"></h1><div id="story-subtitle"></div><div id="story-title-separator"></div><p id="story-author"></p></header><div id="story-caption"></div><nav id="menu" role="navigation"><ul id="menu-story"></ul><ul id="menu-core">'+'<li id="menu-item-saves"><a tabindex="0">'.concat(L10n.get("savesTitle"),"</a></li>")+'<li id="menu-item-settings"><a tabindex="0">'.concat(L10n.get("settingsTitle"),"</a></li>")+'<li id="menu-item-restart"><a tabindex="0">'.concat(L10n.get("restartTitle"),"</a></li>")+'<li id="menu-item-share"><a tabindex="0">'.concat(L10n.get("shareTitle"),"</a></li>")+"</ul></nav></div></div>"));_$uiBar=jQuery($elems.find("#ui-bar").get(0)),$elems.insertBefore("body>script#script-sugarcube"),jQuery(document).on(":historyupdate.ui-bar",($backward=jQuery("#history-backward"),$forward=jQuery("#history-forward"),function(){$backward.ariaDisabled(State.length<2),$forward.ariaDisabled(State.length===State.size)}))}}},isHidden:{value:function(){return _$uiBar&&"none"===_$uiBar.css("display")}},isStowed:{value:function(){return _$uiBar&&_$uiBar.hasClass("stowed")}},show:{value:function(){return _$uiBar&&_$uiBar.show(),this}},start:{value:function(){_$uiBar&&(("boolean"==typeof Config.ui.stowBarInitially?Config.ui.stowBarInitially:jQuery(window).width()<=Config.ui.stowBarInitially)&&uiBarStow(!0),jQuery("#ui-bar-toggle").ariaClick({label:L10n.get("uiBarToggle")},(function(){return _$uiBar.toggleClass("stowed")})),Config.history.controls?(jQuery("#history-backward").ariaDisabled(State.length<2).ariaClick({label:L10n.get("uiBarBackward")},(function(){return Engine.backward()})),Story.lookup("tags","bookmark").length>0?jQuery("#history-jumpto").ariaClick({label:L10n.get("uiBarJumpto")},(function(){return UI.jumpto()})):jQuery("#history-jumpto").remove(),jQuery("#history-forward").ariaDisabled(State.length===State.size).ariaClick({label:L10n.get("uiBarForward")},(function(){return Engine.forward()}))):jQuery("#ui-bar-history").remove(),Story.has("StoryDisplayTitle")?setDisplayTitle(Story.get("StoryDisplayTitle").processText()):jQuery("#story-title").text(Story.title),Story.has("StoryCaption")||jQuery("#story-caption").remove(),Story.has("StoryMenu")||jQuery("#menu-story").remove(),Config.ui.updateStoryElements||uiBarUpdate(),jQuery("#menu-item-saves a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildSaves(),Dialog.open()})).text(L10n.get("savesTitle")),Setting.isEmpty()?jQuery("#menu-item-settings").remove():jQuery("#menu-item-settings a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildSettings(),Dialog.open()})).text(L10n.get("settingsTitle")),jQuery("#menu-item-restart a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildRestart(),Dialog.open()})).text(L10n.get("restartTitle")),Story.has("StoryShare")?jQuery("#menu-item-share a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildShare(),Dialog.open()})).text(L10n.get("shareTitle")):jQuery("#menu-item-share").remove())}},stow:{value:uiBarStow},unstow:{value:function(noAnimation){var $story;return _$uiBar&&_$uiBar.hasClass("stowed")&&(noAnimation&&(($story=jQuery("#story")).addClass("no-transition"),_$uiBar.addClass("no-transition")),_$uiBar.removeClass("stowed"),noAnimation&&setTimeout((function(){$story.removeClass("no-transition"),_$uiBar.removeClass("no-transition")}),Engine.minDomActionDelay)),this}},update:{value:uiBarUpdate},setStoryElements:{value:uiBarUpdate}}))}(),DebugBar=function(){var _variableRe=new RegExp("^".concat(Patterns.variable,"$")),_numericKeyRe=/^\d+$/,_watchList=[],_$debugBar=null,_$watchBody=null,_$watchList=null,_$turnSelect=null,_stowed=!0;function debugBarStow(){_$debugBar.css("right","-".concat(_$debugBar.outerWidth(),"px")),_stowed=!0,_updateSession()}function debugBarUnstow(){_$debugBar.css("right",0),_stowed=!1,_updateSession()}function debugBarToggle(){_stowed?debugBarUnstow():debugBarStow()}function debugBarWatchAdd(varName){_variableRe.test(varName)&&(_watchList.pushUnique(varName),_watchList.sort(),_updateWatchBody(),_updateWatchList(),_updateSession())}function debugBarWatchAddAll(){Object.keys(State.variables).map((function(name){return _watchList.pushUnique("$".concat(name))})),Object.keys(State.temporary).map((function(name){return _watchList.pushUnique("_".concat(name))})),_watchList.sort(),_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchClear(){for(var i=_watchList.length-1;i>=0;--i)_watchList.pop();_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchDelete(varName){_watchList.delete(varName),_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchDisable(){_debugBarWatchDisableNoUpdate(),_updateSession()}function debugBarWatchEnable(){_debugBarWatchEnableNoUpdate(),_updateSession()}function debugBarWatchIsEnabled(){return!_$watchBody.attr("hidden")}function debugBarWatchToggle(){_$watchBody.attr("hidden")?debugBarWatchEnable():debugBarWatchDisable()}function _debugBarWatchDisableNoUpdate(){_$watchBody.attr({"aria-hidden":!0,hidden:"hidden"})}function _debugBarWatchEnableNoUpdate(){_$watchBody.removeAttr("aria-hidden hidden")}function _clearSession(){session.delete("debugState")}function _hasSession(){return session.has("debugState")}function _updateSession(){session.set("debugState",{stowed:_stowed,watchList:_watchList,watchEnabled:debugBarWatchIsEnabled(),viewsEnabled:DebugView.isEnabled()})}function _updateWatchBody(){if(0!==_watchList.length){for(var delLabel=L10n.get("debugBarDeleteWatch"),$table=jQuery(document.createElement("table")),$tbody=jQuery(document.createElement("tbody")),_loop4=function(i,len){var varName=_watchList[i],varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary,$row=jQuery(document.createElement("tr")),$delBtn=jQuery(document.createElement("button")),$code=jQuery(document.createElement("code"));$delBtn.addClass("watch-delete").attr("data-name",varName).ariaClick({one:!0,label:delLabel},(function(){return debugBarWatchDelete(varName)})),$code.text(_toWatchString(store[varKey])),jQuery(document.createElement("td")).append($delBtn).appendTo($row),jQuery(document.createElement("td")).text(varName).appendTo($row),jQuery(document.createElement("td")).append($code).appendTo($row),$row.appendTo($tbody)},i=0,len=_watchList.length;i<len;++i)_loop4(i);$table.append($tbody),_$watchBody.empty().append($table)}else _$watchBody.empty().append("<div>".concat(L10n.get("debugBarNoWatches"),"</div>"))}function _updateWatchList(){var svn=Object.keys(State.variables),tvn=Object.keys(State.temporary);if(0!==svn.length||0!==tvn.length){var names=[].concat(_toConsumableArray(svn.map((function(name){return"$".concat(name)}))),_toConsumableArray(tvn.map((function(name){return"_".concat(name)})))).sort(),options=document.createDocumentFragment();names.delete(_watchList);for(var i=0,len=names.length;i<len;++i)jQuery(document.createElement("option")).val(names[i]).appendTo(options);_$watchList.empty().append(options)}else _$watchList.empty()}function _updateTurnSelect(){for(var histLen=State.size,expLen=State.expired.length,options=document.createDocumentFragment(),i=0;i<histLen;++i)jQuery(document.createElement("option")).val(i).text("".concat(expLen+i+1,". ").concat(Util.escape(State.history[i].title))).appendTo(options);_$turnSelect.empty().ariaDisabled(histLen<2).append(options).val(State.activeIndex)}function _toWatchString(value){if(null===value)return"null";switch(_typeof(value)){case"number":if(Number.isNaN(value))return"NaN";if(!Number.isFinite(value))return"Infinity";case"boolean":case"symbol":case"undefined":return String(value);case"string":return JSON.stringify(value);case"function":return"Function"}var objType=Util.toStringTag(value);if("Date"===objType)return"Date {".concat(value.toLocaleString(),"}");if("RegExp"===objType)return"RegExp ".concat(value.toString());var result=[];if(value instanceof Array||value instanceof Set){for(var list=value instanceof Array?value:Array.from(value),i=0,len=list.length;i<len;++i)result.push(list.hasOwnProperty(i)?_toWatchString(list[i]):"<empty>");return Object.keys(list).filter((function(key){return!_numericKeyRe.test(key)})).forEach((function(key){return result.push("".concat(_toWatchString(key),": ").concat(_toWatchString(list[key])))})),"".concat(objType,"(").concat(list.length,") [").concat(result.join(", "),"]")}return value instanceof Map?(value.forEach((function(val,key){return result.push("".concat(_toWatchString(key)," → ").concat(_toWatchString(val)))})),"".concat(objType,"(").concat(value.size,") {").concat(result.join(", "),"}")):(Object.keys(value).forEach((function(key){return result.push("".concat(_toWatchString(key),": ").concat(_toWatchString(value[key])))})),"".concat(objType," {").concat(result.join(", "),"}"))}return Object.freeze(Object.defineProperties({},{init:{value:function(){var barToggleLabel=L10n.get("debugBarToggle"),watchAddLabel=L10n.get("debugBarAddWatch"),watchAllLabel=L10n.get("debugBarWatchAll"),watchNoneLabel=L10n.get("debugBarWatchNone"),watchToggleLabel=L10n.get("debugBarWatchToggle"),viewsToggleLabel=L10n.get("debugBarViewsToggle");jQuery(document.createDocumentFragment()).append('<div id="debug-bar"><div id="debug-bar-watch">'+"<div>".concat(L10n.get("debugBarNoWatches"),"</div>>")+"</div><div>"+'<button id="debug-bar-watch-toggle" tabindex="0" title="'.concat(watchToggleLabel,'" aria-label="').concat(watchToggleLabel,'">').concat(L10n.get("debugBarLabelWatch"),"</button>")+'<label id="debug-bar-watch-label" for="debug-bar-watch-input">'.concat(L10n.get("debugBarLabelAdd"),"</label>")+'<input id="debug-bar-watch-input" name="debug-bar-watch-input" type="text" list="debug-bar-watch-list" tabindex="0"><datalist id="debug-bar-watch-list" aria-hidden="true" hidden="hidden"></datalist>'+'<button id="debug-bar-watch-add" tabindex="0" title="'.concat(watchAddLabel,'" aria-label="').concat(watchAddLabel,'"></button>')+'<button id="debug-bar-watch-all" tabindex="0" title="'.concat(watchAllLabel,'" aria-label="').concat(watchAllLabel,'"></button>')+'<button id="debug-bar-watch-none" tabindex="0" title="'.concat(watchNoneLabel,'" aria-label="').concat(watchNoneLabel,'"></button>')+"</div><div>"+'<button id="debug-bar-views-toggle" tabindex="0" title="'.concat(viewsToggleLabel,'" aria-label="').concat(viewsToggleLabel,'">').concat(L10n.get("debugBarLabelViews"),"</button>")+'<label id="debug-bar-turn-label" for="debug-bar-turn-select">'.concat(L10n.get("debugBarLabelTurn"),"</label>")+'<select id="debug-bar-turn-select" tabindex="0"></select></div>'+'<button id="debug-bar-toggle" tabindex="0" title="'.concat(barToggleLabel,'" aria-label="').concat(barToggleLabel,'"></button>')+'</div><div id="debug-bar-hint"></div>').appendTo("body"),_$debugBar=jQuery("#debug-bar"),_$watchBody=jQuery(_$debugBar.find("#debug-bar-watch").get(0)),_$watchList=jQuery(_$debugBar.find("#debug-bar-watch-list").get(0)),_$turnSelect=jQuery(_$debugBar.find("#debug-bar-turn-select").get(0));var $barToggle=jQuery(_$debugBar.find("#debug-bar-toggle").get(0)),$watchToggle=jQuery(_$debugBar.find("#debug-bar-watch-toggle").get(0)),$watchInput=jQuery(_$debugBar.find("#debug-bar-watch-input").get(0)),$watchAdd=jQuery(_$debugBar.find("#debug-bar-watch-add").get(0)),$watchAll=jQuery(_$debugBar.find("#debug-bar-watch-all").get(0)),$watchNone=jQuery(_$debugBar.find("#debug-bar-watch-none").get(0)),$viewsToggle=jQuery(_$debugBar.find("#debug-bar-views-toggle").get(0));$barToggle.ariaClick(debugBarToggle),$watchToggle.ariaClick(debugBarWatchToggle),$watchInput.on(":addwatch",(function(){debugBarWatchAdd(this.value.trim()),this.value=""})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),$watchInput.trigger(":addwatch"))})),$watchAdd.ariaClick((function(){return $watchInput.trigger(":addwatch")})),$watchAll.ariaClick(debugBarWatchAddAll),$watchNone.ariaClick(debugBarWatchClear),_$turnSelect.on("change",(function(){Engine.goTo(Number(this.value))})),$viewsToggle.ariaClick((function(){DebugView.toggle(),_updateSession()})),jQuery(document).on(":historyupdate.debug-bar",_updateTurnSelect).on(":passageend.debug-bar",(function(){_updateWatchBody(),_updateWatchList()})).on(":enginerestart.debug-bar",_clearSession),_hasSession()||DebugView.enable()}},isStowed:{value:function(){return _stowed}},start:{value:function(){(function(){if(!_hasSession())return!1;var debugState=session.get("debugState");_stowed=debugState.stowed,_watchList.push.apply(_watchList,_toConsumableArray(debugState.watchList)),debugState.watchEnabled?_debugBarWatchEnableNoUpdate():_debugBarWatchDisableNoUpdate();debugState.viewsEnabled?DebugView.enable():DebugView.disable()})(),_stowed?debugBarStow():debugBarUnstow(),_updateTurnSelect(),_updateWatchBody(),_updateWatchList()}},stow:{value:debugBarStow},toggle:{value:debugBarToggle},unstow:{value:debugBarUnstow},watch:{value:Object.freeze(Object.defineProperties({},{add:{value:debugBarWatchAdd},all:{value:debugBarWatchAddAll},clear:{value:debugBarWatchClear},delete:{value:debugBarWatchDelete},disable:{value:debugBarWatchDisable},enable:{value:debugBarWatchEnable},isEnabled:{value:debugBarWatchIsEnabled},toggle:{value:debugBarWatchToggle}}))}}))}(),LoadScreen=function(){var _locks=new Set,_autoId=0;function loadScreenHide(){jQuery(document.documentElement).removeAttr("data-init")}function loadScreenShow(){jQuery(document.documentElement).attr("data-init","loading")}return Object.freeze(Object.defineProperties({},{init:{value:function(){jQuery(document).on("readystatechange.SugarCube",(function(){_locks.size>0||("complete"===document.readyState?"loading"===jQuery(document.documentElement).attr("data-init")&&(Config.loadDelay>0?setTimeout((function(){0===_locks.size&&loadScreenHide()}),Math.max(Engine.minDomActionDelay,Config.loadDelay)):loadScreenHide()):loadScreenShow())}))}},clear:{value:function(){jQuery(document).off("readystatechange.SugarCube"),_locks.clear(),loadScreenHide()}},hide:{value:loadScreenHide},show:{value:loadScreenShow},lock:{value:function(){return++_autoId,_locks.add(_autoId),loadScreenShow(),_autoId}},unlock:{value:function(id){if(null==id)throw new Error("LoadScreen.unlock called with a null or undefined ID");_locks.has(id)&&_locks.delete(id),0===_locks.size&&jQuery(document).trigger("readystatechange")}}}))}(),version=Object.freeze({title:"SugarCube",major:2,minor:36,patch:1,prerelease:null,build:9717,date:new Date("2021-12-22T05:37:33.467Z"),extensions:{},toString:function(){var prerelease=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(prerelease,"+").concat(this.build)},short:function(){var prerelease=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.title," (v").concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(prerelease,")")},long:function(){return"".concat(this.title," v").concat(this.toString()," (").concat(this.date.toUTCString(),")")}}),TempState={},macros={},postdisplay={},postrender={},predisplay={},prehistory={},prerender={},session=null,settings={},setup={},storage=null,browser=Browser,config=Config,has=Has,History=State,state=State,tale=Story,TempVariables=State.temporary;window.SugarCube={},jQuery((function(){try{var lockId=LoadScreen.lock();LoadScreen.init(),document.normalize&&document.normalize(),Story.load(),storage=SimpleStore.create(Story.domId,!0),session=SimpleStore.create(Story.domId,!1),Dialog.init(),UIBar.init(),Engine.init(),Story.init(),L10n.init(),session.has("rcWarn")||"cookie"!==storage.name||(session.set("rcWarn",1),window.alert(L10n.get("warningNoWebStorage"))),Save.init(),Setting.init(),Macro.init(),Engine.start(),Config.debug&&DebugBar.init();var $window=$(window),vprCheckId=setInterval((function(){$window.width()&&(clearInterval(vprCheckId),UIBar.start(),Config.debug&&DebugBar.start(),jQuery.event.trigger({type:":storyready"}),setTimeout((function(){return LoadScreen.unlock(lockId)}),2*Engine.minDomActionDelay))}),Engine.minDomActionDelay);Object.defineProperty(window,"SugarCube",{value:Object.seal(Object.assign(Object.create(null),{Browser:Browser,Config:Config,Dialog:Dialog,Engine:Engine,Fullscreen:Fullscreen,Has:Has,L10n:L10n,Macro:Macro,Passage:Passage,Save:Save,Scripting:Scripting,Setting:Setting,SimpleAudio:SimpleAudio,State:State,Story:Story,UI:UI,UIBar:UIBar,DebugBar:DebugBar,Util:Util,Visibility:Visibility,Wikifier:Wikifier,session:session,settings:settings,setup:setup,storage:storage,version:version}))})}catch(ex){return console.error(ex),LoadScreen.clear(),Alert.fatal(null,ex.message,ex)}}))})(window,window.document,jQuery);}
	</script>
</body>
</html>
